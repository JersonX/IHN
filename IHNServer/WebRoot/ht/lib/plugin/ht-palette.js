!function(X,u,B){"use strict";var l="px",M="0",C="innerHTML",g="className",Q=ht.Default,m=ht.Color,Z=ht.Node,a="position",s="top",N="left",y=Q.animate,q=Q.getInternal(),w="width",M="0",T="none",G="max-height",f="font",W="background",D="border-box",S="user-select",z="box-sizing",U="overflow",V=Q.isTouchable,q=Q.getInternal(),A=m.titleIconBackground,c=Q.scrollBarInteractiveSize,d=/msie 9/.test(X.navigator?X.navigator.userAgent.toLowerCase():""),v=null,K=function(){return document},j=function(D){return K().createElement(D)},F=function(){return j("div")},_=function(){var $=F(),U=$.style;return U.msTouchAction=T,U.cursor="default",V&&U.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",v),U.position="absolute",U.left=M,U.top=M,$},o=function(){return j("canvas")},L=function(){return document.body},r=function(k,S,P){k.style.setProperty(S,P,v)},R=function(N,T){N.style.removeProperty(T)},k=function(g,I,M){Q.def(ht.widget[g],I,M)},E=function(G,B){G.appendChild(B)},J=function(U,x){U.removeChild(x)},O=function(Y,R,x,b){Y.addEventListener(R,x,!!b)};q.addMethod(Q,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:A,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:A}]},paletteTitleLabelColor:Q.labelSelectColor,paletteTitleLabelFont:Q.labelFont,paletteContentLabelFont:Q.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:Q.widgetTitleHeight,paletteTitleBackground:m.titleBackground,paletteTitleHoverBackground:m.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:B,paletteItemHoverBorderColor:m.highlight,paletteItemSelectBackground:m.highlight},!0);var P=".palette-item:hover{border: 1px solid "+Q.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+Q.paletteTitleHoverBackground+" !important}",p=document.createElement("style");V||(p.styleSheet?p.styleSheet.cssText=P:p.appendChild(K().createTextNode(P))),K().getElementsByTagName("head")[0].appendChild(p);var n=function(V){var k=this;k.$22h=V,k.addListeners()};Q.def(n,u,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var i=this;i.$36h&&L().removeChild(i.$36h),i.$23h=i.$24h=i.$25h=i.$35h=i.$36h=v},handle_touchstart:function(k){for(var v,j=this,$=j.$22h,S=k.target,z=$.sm(),D=$.dm(),l="palette-header",x="palette-item",Y=!1,r=!1;S&&(S[g]||"").indexOf(l)<0&&(S[g]||"").indexOf(x)<0;)S=S.parentNode;if(S&&S[g].indexOf(l)>=0?r=!0:S&&S[g].indexOf(x)>=0&&(Y=!0),Q.isLeftButton(k))if(j.$27h(k))j.$24h=Q.getClientPoint(k),j.$25h=$.ty();else if(r){Q.preventDefault(k),v=S.$11h;var f=D.getDataById(v);f.isExpanded()?f.setExpanded(!1):f.setExpanded(!0)}else if(Y){v=S.$11h;var _=D.getDataById(v);z.ss(_),$.handleDragAndDrop&&(Q.preventDefault(k),_.s("draggable")&&($.handleDragAndDrop(k,"prepare"),j.$35h=0))}else Q.preventDefault(k),j.$24h=Q.getClientPoint(k),j.$25h=$.ty();else j.$26h(k)},handle_mousedown:function(S){this.handle_touchstart(S)},handle_mousewheel:function(O){this.handleScroll(O,O.wheelDelta/40,O.wheelDelta!==O.wheelDeltaX)},handle_DOMMouseScroll:function(V){this.handleScroll(V,-V.detail,1)},handleScroll:function(V,d,R){var U=this.$22h;Q.preventDefault(V),R&&U._41o()&&U.ty(U.ty()+20*d)},handle_mouseup:function(j){this.handle_touchend(j)},handle_touchend:function(Q){var D=this;D.$37h(Q),D.$26h(Q)},handleWindowMouseUp:function(e){this.handleWindowTouchEnd(e)},handleWindowTouchEnd:function(Q){var e=this;e.$37h(Q),e.$26h(Q)},$37h:function(R){var C=this,j=C.$22h;2===C.$35h&&(C.$35h=3,j.handleDragAndDrop(R,"end"))},handleWindowMouseMove:function(h){this.handleWindowTouchMove(h)},handleWindowTouchMove:function(e){var x=this,i=x.$22h,R=x.$23h,t=x.$24h,m=x.$25h,o=Q.getClientPoint(e),I=i._29I,U=x.$36h;if(1===x.$35h||2===x.$35h){if(x.$35h=2,i.handleDragAndDrop(e,"between"),V){var $=e.touches[0];e=$?$:e.changedTouches[0]}U.style.left=e.pageX-parseInt(U.width)/2+l,U.style.top=e.pageY-parseInt(U.height)/2+l}else"p"===R?i.ty(m+o.y-t.y):"v"===R&&i.ty(m+(t.y-o.y)/I.height*i._59I)},handle_mousemove:function($){this.handle_touchmove($)},handle_touchmove:function(s){if(!Q.isDragging()&&Q.isLeftButton(s)){var S=this,P=S.$22h,q=S.$27h(s);if(S.$24h){if(!S.$23h){if(Q.getDistance(Q.getClientPoint(s),S.$24h)<2)return;S.$23h=q?"v":"p",Q.startDragging(S)}}else if(q)P._43o();else if(0===S.$35h){if(S.$35h=1,P.handleDragAndDrop(s,"begin"),V){var c=s.touches[0];s=c?c:s.changedTouches[0]}var D=S.$36h=new Image,j=P.$10h[P.sm().ld().getId()].querySelector(".image-box"),F=parseInt(j.style.width),A=parseInt(j.style.height);D.draggable=!1,D.src=j.toDataURL(),D.width=F,D.height=A,D.style.position="absolute",D.style.left=s.pageX-F/2+l,D.style.top=s.pageY-A/2+l,L().appendChild(D),Q.startDragging(S)}}},$27h:function(G){var O=this.$22h,X=O.getView(),H=X.getBoundingClientRect(),M=O._29I,Z=G.clientX-H.left+X.scrollLeft;return O._41o()&&M.x+M.width-Z<c}}),ht.widget.Palette=function(e){var p=this,R=p._view=F();p.$9h={},p.$10h={},p.$4h={},p._29I={x:0,y:0,width:0,height:0},p._59I=0,p.dm(e?e:new ht.DataModel),R[g]="ht-widget-palette",p.$29h=new n(p),r(R,W,Q.paletteContentBackground),r(R,U,"auto"),r(R,z,D),r(R,"-moz-"+z,D),r(R,"-webkit-"+S,T),r(R,"-moz-"+S,T),r(R,"-ms-"+S,T),r(R,S,T),r(R,"position","absolute"),r(R,"overflow","hidden"),E(R,p._79O=_()),O(R,"dragstart",function(m){m.dataTransfer.setData("Text","nodeid:"+m.target.$11h),m.dataTransfer.effectAllowed="all",p.$29h.$26h()})},k("Palette",u,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:Q.autoHideScrollBar,_scrollBarSize:Q.scrollBarSize,_scrollBarColor:Q.scrollBarColor,getViewRect:function(){return this._29I},ty:function(u){return u?(this.setTranslateY(u),void 0):this.getTranslateY()},setTranslateY:function(l){if(this.$32h==v){var f=this,c=f.$33h(l),n=f.$30h;f.$30h=c,f.fp("translateY",n,c)}},getTranslateY:function(){return this.$30h},setLayout:function(y){var v,D,M=this,q=M._layout;M._layout=y,"smallicons"===y?v=D=20:"iconsonly"===y?v=D=50:(v=70,D=50),M.setItemImageWidth(v),M.setItemImageHeight(D),M.setItemImagePadding(4),M.fp("layout",q,y)},$20h:function(){var b=16;return V&&(b*=1.2),b},$19h:function(){return Q.paletteTitleHeight},$18h:function(){var R=Q.paletteSeparatorWidth,M=Q.paletteTitleBackground,C=Q.paletteSeparatorColor||Q.brighter(M);return R+l+" solid "+C},$17h:function(u){r(u,"cursor","pointer"),r(u,"display","inline-block"),r(u,"margin-right",(V?8:4)+l),r(u,"vertical-align",s)},$1h:function(T){var S=this,J=F(),d=F(),L=j("span");J[g]="palette-header",r(J,a,"relative"),r(J,W,Q.paletteTitleBackground),r(J,"color",Q.paletteTitleLabelColor),r(J,s,M),r(J,z,D),r(J,"-moz-"+z,D),r(J,"padding","0 5px 0 0"),r(J,"border-top",S.$18h()),r(J,w,"100%"),r(J,"cursor","pointer"),r(J,"white-space","nowrap"),r(J,U,"hidden"),r(J,f,Q.paletteTitleLabelFont),r(J,"line-height",S.$19h()+l),J.$11h=T.getId();var P=o(),R=S.$19h(),N=S.$20h();return S.$17h(P),q.setCanvas(P,N,R),E(J,P),P[g]="palette-toggle-icon-"+T.getId(),d[g]="palette-content",r(d,"max-height",0+l),r(d,f,Q.paletteContentLabelFont),r(d,U,"hidden"),d.$11h=T.getId(),S.$9h[T.getId()]=d,L[C]=T.getName(),r(L,f,Q.paletteTitleLabelFont),E(J,P),E(J,L),[J,d]},$2h:function(S){var e=this,$=e._layout,i=d&&S.s("draggable")?j("a"):F(),K=o(),h=F(),t=S.getName()||"",H=S.s("title")||S.getToolTip()||t,V=e._itemMargin;K[g]="image-box";var v=e.getItemImageWidth(),m=e.getItemImageHeight();return q.setCanvas(K,v,m),E(i,K),h[C]=t,h[g]="label-box","iconsonly"!==$&&E(i,h),i[g]="palette-item",r(i,"vertical-align",s),r(i,"cursor","pointer"),r(i,"border-radius",5+l),r(i,"border","1px solid transparent"),r(i,"text-align","center"),r(i,"display","inline-block"),r(i,"margin-left",V+l),r(i,"margin-top",V+l),r(i,"color",Q.paletteContentLabelColor),"smallicons"===$?(r(K,"vertical-align","middle"),r(i,"margin-left",2+l),r(i,"margin-top",2+l),r(i,"padding",2+l),r(i,"text-align",N),r(h,"display","inline-block"),r(h,"min-width",e.$21h+e._itemMargin+l)):"largeicons"===$&&(r(h,"max-width",v+l),r(h,"overflow","hidden")),i.$11h=S.getId(),H&&(i.title=H),S.s("draggable")&&!e.handleDragAndDrop&&(d?(i.href="#",r(i,"text-decoration",T)):i.draggable="true"),i},$16h:function(k,v,W,r){var e=q.initContext(k);q.translateAndScale(e,0,0,1),e.clearRect(0,0,W,W);var z=(W-r)/2;Q.drawStretchImage(e,Q.getImage(v),"fill",0,z,r,r),e.restore()},$15h:function(z){var U=this,k=z.getId(),N=U._view.querySelector(".palette-toggle-icon-"+k),B=z.isExpanded()?Q.paletteCollapseIcon:Q.paletteExpandIcon;if(N&&B){var j=U.$19h(),E=U.$20h();U.$16h(N,B,j,E)}},$14h:function(B){var l=this,U=B.getId(),v=l.$10h[U].querySelector(".image-box"),o=B.getImage(),E=B.s("image.stretch");if(v&&o){var X=q.initContext(v),Z=l.getItemImagePadding();Z="smallicons"===l._layout?Z/2:Z;var P=l.getItemImageWidth()-2*Z,m=l.getItemImageHeight()-2*Z;q.translateAndScale(X,0,0,1),X.clearRect(0,0,P,m),Q.drawStretchImage(X,Q.getImage(o),E,Z,Z,P,m),X.restore()}},validateImpl:function(){var I,L,X,V=this,i=V.$9h,b=V._layout,m=V.$10h,K=V.$4h,w=V._view,S=V.dm();if(V.$13h&&(delete V.$13h,K={},S.each(function(k){K[k.getId()]=k})),"smallicons"===b)for(var U in K){var O=K[U];if(O instanceof Z){var h=O.getName()||"",T=Q.getTextSize(Q.paletteContentLabelFont,h).width;V.$21h!=v&&V.$21h>T||(V.$21h=T)}}for(var U in K){X=K[U];var P,H;if(S.contains(X)){if(X instanceof ht.Group){var N,o=V.$1h(X),d=m[X.getId()];d&&(N=d.nextSibling,J(w,N),J(w,d)),L=S.getSiblings(X).indexOf(X);var n=w.children[2*L]||V._79O;w.insertBefore(o[0],n),w.insertBefore(N||o[1],n),m[X.getId()]=o[0],I=i[X.getId()]=N||o[1],H=X.$12h;var c=X.s("promptText");H||(X.$12h=j("div"),X.$12h[C]=c||"",H=X.$12h),0===X.getChildren().size()?I.contains(H)||E(I,H):I.contains(H)&&J(I,H)}else if(P=X.getParent()){var k=V.$2h(X),_=m[X.getId()];I=i[P.getId()],_&&J(_.parentNode,_),L=S.getSiblings(X).indexOf(X);var A=I.children[L];A?I.insertBefore(k,A):E(I,k),m[X.getId()]=k,V.$14h(X)}}else{var r=m[X.getId()],e=r.parentNode;if(X instanceof ht.Group){var R=r.nextSibling;J(w,r),J(w,R),delete i[X.getId()]}else J(e,r),0===e.children.length&&(P=S.getDataById(e.$11h),H=P.$12h,H&&!e.contains(H)&&E(e,H));delete m[X.getId()]}}V.$4h={};var f=function(){var H=V._59I,Z=0;V.$32h!=v&&(clearInterval(V.$32h),Z=0,delete V.$32h),V.$32h=setInterval(function(){V.$31h(),H===V._59I?(Z++,Z>=2&&(clearInterval(V.$32h),delete V.$32h)):(Z=0,H=V._59I)},30)};for(var q in i)if(I=i[q],X=S.getDataById(i[q].$11h),V.$15h(X),X.isExpanded()){if(I.style.maxHeight===0+l){var t=I.scrollHeight+V._itemMargin+l;y(I).duration(200).set(G,t).set("padding-bottom",V._itemMargin+l).end(function(){return function(){f()}}(t))}else I.style.maxHeight=I.scrollHeight+l;I.style.paddingBottom=V._itemMargin+l}else I.style.maxHeight!==0+l&&y(I).duration(200).set(G,M).set("padding-bottom",M).end(function(){return function(){f()}}(I));V.$28h(),V.$31h()},$31h:function(){for(var N=this,d=N._view,k=0,x=d.children,G=0;G<x.length;G++){var i=x[G];i.className&&i.className.indexOf("palette-")>=0&&(k+=i.offsetHeight)}N._59I=k,N.$30h=N.$33h(N.ty());var q=N.ty();d.scrollTop=-q,N._29I={x:0,y:-q,width:d.clientWidth,height:d.clientHeight},r(N._79O,s,-q+l),N._93I()},$33h:function(P){var b=this,$=b._29I.height-b._59I;return $>P&&(P=$),P>0?0:Math.round(P)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(d){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(d.property)<0&&this.redraw(),"translateY"===d.property&&(this.iv(),this._43o())},findDataByName:function(P){for(var c=this.dm().getDatas(),B=0;B<c.size();B++){var q=c.get(B);if(q.getName()===P)return q}},setDataModel:function(C){var D=this,f=D._dataModel,J=D._3o;f!==C&&(f&&(f.umm(D.$6h,D),f.umd(D.$8h,D),f.umh(D.$7h,D),J||f.sm().ums(D.$28h,D)),D._dataModel=C,C.mm(D.$6h,D),C.md(D.$8h,D),C.mh(D.$7h,D),J?J._21I(C):C.sm().ms(D.$28h,D),D.sm().setSelectionMode("single"),D.fp("dataModel",f,C))},$6h:function(m){var D=this,A=D._view,F=m.data,u=D.$4h;"add"===m.kind?u[F.getId()]=F:"remove"===m.kind?u[F.getId()]=F:"clear"===m.kind&&(D.$10h={},D.$9h={},D.$4h={},A[C]=""),D.iv()},$7h:function(e){var P=this,E=e.data;P.$4h[E.getId()]=E,P.iv()},$8h:function(t){var w=this,c=t.data,u=t.property;"expanded"===u?w.iv():(w.$4h[c.getId()]=c,w.iv())},$28h:function(){var N,m=this,u=m.sm(),e="palette-item",n=u.ld();this.dm().each(function(M){N=m.$10h[M.getId()],N&&N[g].indexOf(e)>=0&&(M===n?r(N,W,Q.paletteItemSelectBackground):R(N,W))})}})}(this,Object);
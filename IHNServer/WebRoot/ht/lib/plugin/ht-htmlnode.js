!function(I){"use strict";var L="ht",o=I[L],C=function(){return document},x=function(){return C().body},k=function(Q,t,J){Q.style.setProperty(t,J,null)},P=function(x){return C().createElement(x)},c=function(){return P("div")},F=function(){var X=P("canvas");return X},p=function(Q,Z){k(Q,"-webkit-transform",Z),k(Q,"-ms-transform",Z),k(Q,"transform",Z)},Z=function(b,x){k(b,"-webkit-transform-origin",x),k(b,"-ms-transform-origin",x),k(b,"transform-origin",x)},s=function(E,P){E.appendChild(P)},y=function(g,O){g.removeChild(O)},j=I.parseInt,H=o.Default,v=H.getInternal(),U=Math.PI,A="white-space",K="visibility",E="left",N="top",d="width",q="height",R="position",O="display",h="z-index",V="px",M="0 0",G="absolute",Y="visible",m="hidden",w="none",r="block",g="nowrap",z="rgba(0, 0, 0, 0.005)";H.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var T=o.graph.GraphView.prototype,t=T._42;T.adjustHtmlNodeIndex=!0,T._42=function(X,V){if(t.call(this,X,V),this.adjustHtmlNodeIndex)for(var p=this.getDataModel()._datas._as,F=p.length,H=1,z=0;F>z;z++){var q=p[z];if(q instanceof B){var Y=this.getDataUI(q);k(Y.$2f,h,H+""),k(Y.$3f,h,H+1+""),H+=2}}};var e=o.HtmlNodeUI=function(L,b){var t=this;e.superClass.constructor.call(t,L,b);var i=t.$2f=c(),r=t.$3f=F();k(i,R,G),k(i,K,m),k(i,A,g),r.draggable=!1,k(r,R,G),k(r,O,w),Z(r,M),i.addEventListener("change",function(F){var q=F.target,i=q.bind||q.getAttribute("bind"),l=q.type&&"checkbox"===q.type?q.checked:q.value,I=b.getContext();i&&I&&(I[i]=l,t.$4f=JSON.stringify(I))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(J){i.addEventListener(J,this.$9f.bind(this))},t)};H.def(e,v.ui().NodeUI,{_visible:!0,$11f:function(){var D=this,y=D.$3f,G=D._data,J=G.getDraggerImageWidth(),l=G.getDraggerImageHeight(),F=G.getDraggerImage(),B=v.initContext(y);B.beginPath(),v.setCanvas(y,J,l),v.translateAndScale(B,0,0,1),B.clearRect(0,0,J,l),H.drawImage(B,H.getImage(F),0,0,J,l),B.restore()},_80o:function(o){e.superClass._80o.call(this,o);var v=this,l=v._data,T=l._padding,D=2*T,b=v.$2f,F=v.$3f,i=v.gv,A=i.getZoom(),Q=i.getTranslateX(),P=i.getTranslateY(),$=i.getView(),g=v._83o,M=l._width,L=l._height,u=g.position,C=g.rotation,y=(M-D)/l.$5f*A,n=(L-D)/l.$6f*A,a=v._html,Z=l._html,B=l.getHtmlType();if("html"===B){var f=l.getContext()||{},X=v.$4f,t=l.$10f,I=JSON.stringify(f);a&&X&&a===Z&&X===I||(v.$4f=I,v._html=Z,b.innerHTML=t?t(f):Z)}else if(null!=B){var H=l.getHtml();"ht"===B&&(H=H.getView()),a&&a===H||(v._html=H,b.innerHTML="",s(b,H))}if(!b.parentNode){var J=i.$1f;if(!J){var x=c();k(x,R,G),k(x,h,"0"),J=i.$1f=x;var _=i._canvas.nextSibling;_?$.insertBefore(x,_):s($,x)}s(J,b),s(J,F)}if(l._scalable){var S=l.$5f,W=l.$6f;p(b,"rotate("+180*(C/U)+"deg) scale("+y+","+n+")"),k(b,E,(u.x-S/A/2)*A+Q+V),k(b,N,(u.y-W/A/2)*A+P+V)}else{var Tr=j(b.style.width),Wc=j(b.style.height),Ff=j((M-D)*A),Eb=j((L-D)*A),Gc="100%",Ao=b.children[0];k(Ao,d,Gc),k(Ao,q,Gc),(Tr!==Ff||Wc!==Eb)&&(k(b,d,Ff+V),k(b,q,Eb+V),"ht"===B&&Z.invalidate()),p(b,"rotate("+180*(C/U)+"deg)"),k(b,E,(u.x-Ff/A/2)*A+Q+V),k(b,N,(u.y-Eb/A/2)*A+P+V)}var Rm=v.dragRect;i.isMovable(l)&&i.isSelected(l)&&Rm?(o.save(),o.fillStyle=z,o.fillRect(Rm.x,Rm.y,Rm.width,Rm.height),o.restore(),k(F,E,Rm.x*A+Q+V),k(F,N,Rm.y*A+P+V),p(F,"scale("+A+","+A+")"),k(F,O,r),v.$11f()):k(F,O,w),k(b,K,this._visible?Y:m)},dispose:function(){var V=this.gv.$1f;V.removeChild(this.$2f),V.removeChild(this.$3f)},_84o:function(B){this._visible=B,k(this.$2f,K,B?Y:m),k(this.$3f,O,B?r:w)},_3O:function(){var P=this,W=P._data;e.superClass._3O.call(P);var m=W.getRect();P.dragRect={x:m.x+m.width+W._padding,y:m.y+10,width:W.getDraggerImageWidth(),height:W.getDraggerImageHeight()},P._68o(P.dragRect)},rectIntersects:function(l){var p=this._79o();return o.Default.intersection(p,l)?!0:void 0},$9f:function(I){var M=this.gv,m=this._data;M.sm().contains(m)&&I.stopPropagation()}});var B=o.HtmlNode=function(){B.superClass.constructor.call(this)};o.Default.def(B,o.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:o.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(R){var V=this,i=V._html;V._html=R,"html"===V.getHtmlType()&&"Handlebars"in I&&(V.$10f=Handlebars.compile(R)),V.$13f(),V.fp("html",i,R)},setContext:function(B){var t=this,S=t._context;t._context=B,t.fp("context",S,B),t.$13f()},setScalable:function(N){var $=this,n=$._scalable;$._scalable=N,$.fp("scalable",n,N),$.$13f()},getHtmlType:function(){var o=this._html;return o?"string"==typeof o?"html":o.getView?"ht":"dom":null},$13f:function(){var E=this,Q=E._html,I=E.$10f;if(Q){var z=c(),P=!1,F=E.getHtmlType();if(k(z,R,G),k(z,A,g),k(z,K,m),"html"===F?(z.innerHTML=I?I(E.getContext()||{}):Q,P=!0):"ht"===F?(s(z,Q.getView()),P=!0):"dom"===F&&(s(z,Q),P=!0),P){var i=2*E._padding;s(x(),z),E.$5f=z.scrollWidth,E.$6f=z.scrollHeight,E._width=E.$5f+i,E._height=E.$6f+i,E._originWidth=E._width,E._originHeight=E._height,y(x(),z)}}},getUIClass:function(){return o.HtmlNodeUI}})}(this,Object);
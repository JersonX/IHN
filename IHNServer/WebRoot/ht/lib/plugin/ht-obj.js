!function(p,w,K){"use strict";var A="ht",T=p[A],j=null,h=Math,Y=h.abs,F=h.max,_=Number.MAX_VALUE,r=T.Default,g=r.getInternal(),u=r.clone,O=g.vec3TransformMat4,c=g.appendArray,f=function(){var D=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,I=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,R=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,Z=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,l=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,P=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,f=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,V=function(Y,l){return l=parseInt(l),l>=0?Y[l-1]:Y[l+Y.length]},v=function(g,h,$,y,B,t){if(g.vs){var r=V(h,y),q=V(h,B),I=V(h,t),m=$.matrix,J=g.vs;if($.flipFace){var f=q;q=I,I=f}m?(c(J,O(u(r),m)),c(J,O(u(q),m)),c(J,O(u(I),m))):(c(J,r),c(J,q),c(J,I))}},x=function(u,s,e,j,M,L){if(u.vs){var R=V(s,j),Y=V(s,M),S=V(s,L),h=e.flipY;if(e.flipFace){var l=Y;Y=S,S=l}u.uv.push(R[0],h?1-R[1]:R[1],Y[0],h?1-Y[1]:Y[1],S[0],h?1-S[1]:S[1])}},d=function(n,K,P,A,d,r){if(n.vs){var x=V(K,A),v=V(K,d),E=V(K,r),F=P.normalMatrix,S=n.ns;if(P.flipFace){var e=v;v=E,E=e}F?(c(S,O(u(x),F)),c(S,O(u(v),F)),c(S,O(u(E),F))):(c(S,x),c(S,v),c(S,E))}},H=function(T,R,E,k,P,t,I,S){var s=k&&k.length&&S;t[3]===K?(v(T,R,P,t[0],t[1],t[2]),I&&x(T,E,P,I[0],I[1],I[2]),s&&d(T,k,P,S[0],S[1],S[2])):(v(T,R,P,t[0],t[1],t[3]),v(T,R,P,t[1],t[2],t[3]),I&&(x(T,E,P,I[0],I[1],I[3]),x(T,E,P,I[1],I[2],I[3])),s&&(d(T,k,P,S[0],S[1],S[3]),d(T,k,P,S[1],S[2],S[3])))},i=function(j,S,W,p){var X,v,f,Z,g,C,n,z=_,U=_,h=_,D=-_,w=-_,r=-_;for(X in j)for(C=j[X].vs,n=C.length,v=0;n>v;v+=3)f=C[v+0],Z=C[v+1],g=C[v+2],z>f&&(z=f),U>Z&&(U=Z),h>g&&(h=g),f>D&&(D=f),Z>w&&(w=Z),g>r&&(r=g);if(W){var G=z+(D-z)/2,d=U+(w-U)/2,e=h+(r-h)/2;for(X in j)for(C=j[X].vs,n=C.length,v=0;n>v;v+=3)C[v+0]-=G,C[v+1]-=d,C[v+2]-=e}var o,u,L;W?(o=D-z,u=w-U,L=r-h):(o=2*F(Y(z),Y(D)),u=2*F(Y(U),Y(w)),L=2*F(Y(h),Y(r))),p.rawS3=[o,u,L];for(X in j){if(C=j[X].vs,S)for(n=C.length,v=0;n>v;v+=3)o&&(C[v+0]/=o),u&&(C[v+1]/=u),L&&(C[v+2]/=L);j[X].rawS3=p.rawS3}};return function(Q,c,U){if(!Q)return j;g.isString(c)&&(c=q(c)),U||(U={}),U.flipY==j&&(U.flipY=!0),(U.s3||U.r3||U.t3||U.mat)&&(U.matrix=g.createWorldMatrix(U.mat,U.s3,U.r3,U.rotationMode,U.t3));var d,b,x,k,B,e,w=[],V=[],t=U.ignoreNormal?j:[],o=U.reverseFlipMtls,v={vs:[],uv:[],ns:t?[]:j},O={htdefault:v},K=Q.split("\n"),p=0;for(t&&U.matrix&&(U.normalMatrix=g.createNormalMatrix(U.matrix));p<K.length;p++)if(b=K[p].trim(),0!==b.length&&"#"!==b.charAt(0))if(x=D.exec(b))w.push([parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])]);else if(x=I.exec(b))V.push([parseFloat(x[1]),parseFloat(x[2])]);else if(t&&(x=R.exec(b)))U.flipFace?t.push([parseFloat(-x[1]),parseFloat(-x[2]),parseFloat(-x[3])]):t.push([parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])]);else if(x=Z.exec(b))H(v,w,V,t,U,[x[1],x[2],x[3],x[4]]);else if(x=l.exec(b))H(v,w,V,t,U,[x[2],x[5],x[8],x[11]],[x[3],x[6],x[9],x[12]]);else if(x=P.exec(b))H(v,w,V,t,U,[x[2],x[6],x[10],x[14]],[x[3],x[7],x[11],x[15]],[x[4],x[8],x[12],x[16]]);else if(x=f.exec(b))H(v,w,V,t,U,[x[2],x[5],x[8],x[11]],j,[x[3],x[6],x[9],x[12]]);else if(/^usemtl /.test(b)&&(k=b.substring(7).trim(),!(v=O[k]))){if(v={name:k,vs:[],uv:[],ns:t?[]:j},U.ignoreMtls&&U.ignoreMtls.indexOf(k)>=0&&delete v.vs,(U.reverseFlip||"*"===o||o&&o.indexOf(k)>=0)&&(v.reverseFlip=!0),c&&(B=c[k],B&&(U.ignoreColor||(v.color=B.kd),!U.ignoreTransparent&&B.d>0&&B.d<1&&(v.transparent=!0,v.opacity=B.d),!U.ignoreImage&&(e=B.map_kd)))){for(e=e.split(" "),d=0;d<e.length;d++)"-o"===e[d]?(v.uvOffset=[parseFloat(e[d+1]),parseFloat(e[d+2])],d+=2):"-s"===e[d]&&(v.uvScale=[parseFloat(e[d+1]),parseFloat(e[d+2])],d+=2);v.image=(U.prefix||"")+e[e.length-1]}O[k]=v}var h=[];for(var y in O){var z=O[y].vs;z&&0!==z.length||h.push(y)}h.forEach(function(g){delete O[g]}),i(O,U.cube,U.center,U);var X=U.shape3d;if(X){var m=[];for(var k in O){var v=O[k];m.rawS3=v.rawS3,m.push(v)}r.setShape3dModel(X,m)}return O}}(),q=function(h){var I={};if(h)for(var V,j,u,c,F,N,L=h.split("\n"),X=/\s+/,f=0;f<L.length;f++)j=L[f].trim(),0!==j.length&&"#"!==j.charAt(0)&&(u=j.indexOf(" "),c=(u?j.substring(0,u):j).toLowerCase(),F=(u?j.substring(u+1):"").trim(),"newmtl"===c?I[F]=V={name:F}:V&&("ka"===c||"kd"===c||"ks"===c?(N=F.split(X,3),V[c]=[parseFloat(N[0]),parseFloat(N[1]),parseFloat(N[2]),1]):V[c]="ns"===c||"d"===c?parseFloat(F):F));return I},d=function(T,E,x){if(T){var G=new XMLHttpRequest;G.onload=function(w){x(w.target.responseText)},G.onerror=function(){x(null)},G.open("GET",T,E),G.send(null)}else x(null)};g.addMethod(r,{loadObj:function(m,$,w){w=w||{};var W=!w.sync;d($,W,function(_){d(m,W,function(o){var k,X=w.shape3d,F=f(o,_,w);if(F)if(X)k=r.getShape3dModel(X);else{k=[];for(var p in F){var S=F[p];k.rawS3=S.rawS3,k.push(S)}}w.finishFunc&&w.finishFunc(F,k,k.rawS3)})})},parseObj:function(Q,d,K){return f(Q,d,K)}})}(this,Object);
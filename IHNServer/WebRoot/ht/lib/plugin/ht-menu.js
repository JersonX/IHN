!function(S,g){"use strict";var B="ht",R=S[B],X="innerHTML",U="className",c=null,a="px",G=R.Default,t=G.getInternal(),h="0",m=function(){return document},D=function(c){return m().createElement(c)},Q=function(){return D("div")},v=function(){return D("canvas")},s=function(W,_,N){W.style.setProperty(_,N,c)},z=function(O,y,W){G.def(R.widget[O],y,W)},u=function(L,X){L.appendChild(X)},F=function(n,E){n.removeChild(E)},I=function(p,F,e,M){p.addEventListener(F,e,!!M)},C=function(s,U,K,e){s.removeEventListener(U,K,!!e)},_=G.isTouchable;t.addMethod(G,{menuLabelFont:(_?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),R.widget.Menu=function(H){var P=this,$=P._view=Q(),Y=P.$1g=new R.widget.ContextMenu,Z=D("ul");Y._r=!0,Y._view[U]+=" ht-widget-dropdownmenu",$[U]="ht-widget-menu",Z[U]="header",s($,"margin",h),s($,"padding",h),s($,"background",G.menuBackground),s($,"-webkit-user-select","none"),s($,"-moz-user-select","none"),s($,"user-select","none"),s($,"text-align","left"),s($,"border-bottom",G.menuSeparatorWidth+"px solid "+G.menuSeparatorColor),s($,"cursor","default"),s($,"overflow","auto"),s($,"white-space","nowrap"),s($,"font",G.menuLabelFont),s($,"color",G.menuLabelColor),s($,"box-sizing","border-box"),s($,"-moz-box-sizing","border-box"),s(Z,"list-style","none"),s(Z,"margin",h),s(Z,"padding",h),s(Z,"display","inline-block"),u($,Z),P.setItems(H),P.$2g=function(x){P.$3g(x)},P.$4g=function($){P.$5g($)},P.$6g=function(o){P.$7g(o)},P.$8g=function(M){P.$9g(M)},P.$9b=function(d){P.$10g(d)},P._autoShow=!0,P.setAutoShow(!1),Y.afterHide=function(){P.$11g()},Y.afterShow=function(){P.$12g()},C(m(),"keydown",Y.$3b),P.$3b=function(c){P.$13g(c)},P.invalidate()},z("Menu",g,{_items:c,$14g:G.menuHoverBackground,$15g:G.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(R){var u=this;if(u.$21g=R,u.setItems(u._items),"largeicons"===R){for(var n=u._view.querySelectorAll(".header-item"),D=0,W=0;W<n.length;W++){var x=n[W];D=Math.max(D,x.clientWidth)}for(var W=0;W<n.length;W++){var x=n[W];s(x,"min-width",D+a)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(K){this.$22g=K;for(var f=this._view.querySelectorAll(".header-item"),I=0;I<f.length;I++){var n=f[I];s(n,"margin-left",K+a),s(n,"margin-right",K+a)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(J){this.$23g=J;for(var W=this._view.querySelectorAll(".header-item"),N=0;N<W.length;N++){var w=W[N];s(w,"margin-top",J+a),s(w,"margin-bottom",J+a)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(H){this.$24g=H,s(this._view,"text-align",H)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var E=this,P=E._enableGlobalKey;P===!1&&(I(m(),"keydown",E.$3b),E._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,C(m(),"keydown",this.$3b)},setHoverBackground:function(Q){this.$14g=Q},setHoverColor:function(P){this.$15g=P},setItems:function(k){var O=this,T=O._view,F=O.$21g;if(O._items=k,T.children[0][X]="",O.$16g={},k&&k.length){for(var K=T.children[0],z=0,B=m().createDocumentFragment();z<k.length;z++){var w=k[z],$=D("li"),G=D("span");if(w.icon){var n=v();n[U]="menu-item-icon","smallicons"===F?(s(n,"height","1.2em"),s(n,"width","1.2em"),s(n,"vertical-align","middle")):(s(n,"height","32px"),s(n,"width","32px"),s(n,"display","block"),s(n,"margin","0 auto")),n.$20g=w.icon,u($,n)}$[U]="header-item",s($,"display","inline-block"),s($,"vertical-align","top"),s($,"padding","0 1.2em"),s($,"line-height","1.8em"),"largeicons"===F&&s($,"text-align","center"),s($,"background-color","rgba(0,0,0,0)"),$.setAttribute("data-index",z),O.$16g[z]=w.items,G[X]=w.label,"iconsonly"!==F&&u($,G),u(B,$)}u(K,B)}},showDropdownMenu:function(k){var H=this,B=H.$16g[k],r=H.$1g,u=H._view.children[0].children[k],f=H.$17g;if(u&&u!==f){f&&H.hideDropdownMenu();var J=u.getBoundingClientRect(),s=G.getWindowInfo();H.$17g=u,r.setItems(B),r.show(J.left+s.left,J.top+J.height+s.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(l,V){var Z=this,E=Z._items;return E&&0!==E.length?Z.$1g.getItemByProperty(l,V,E):c},$12g:function(){var Q=this,$=Q.$17g;$.style.background=Q.$14g,$.style.color=Q.$15g,Q._autoShow||I(m(),_?"touchstart":"mousedown",Q.$9b)},$11g:function(){var w=this,a=w.$17g;a&&(a.style.background="",a.style.color="",w.$17g=c),C(m(),_?"touchstart":"mousedown",w.$9b)},$10g:function(E){var Y=this,c=Y._view,$=Y.$1g,t=c.children[0];!m().body.contains(c)||t.contains(E.target)||$._view.contains(E.target)||Y.hideDropdownMenu()},$13g:function(Q){var K=this,w=K.$1g;m().body.contains(K._view)&&w.$13b.$4b.call(w.$13b,Q,K._items)},setAutoShow:function(q){var l=this,w=l.$1g,L=l._view;l._autoShow!==q&&(l._autoShow?(C(L,"mouseover",l.$2g),C(L,"mouseout",l.$4g),C(w._view,"mouseout",l.$4g),_||(I(L,"mouseover",l.$8g),I(L,"mouseout",l.$8g)),I(L,_?"touchstart":"mousedown",l.$6g)):(C(L,"mouseover",l.$8g),C(L,"mouseout",l.$8g),C(L,_?"touchstart":"mousedown",l.$6g),C(m(),_?"touchstart":"mousedown",l.$9b),_||(I(L,"mouseover",l.$2g),I(L,"mouseout",l.$4g),I(w._view,"mouseout",l.$4g))),l._autoShow=q)},$3g:function(C){var d=this,b=d._view.children[0],$=C.target;if(b!==$&&b.contains($)){for(;"header-item"!==$[U];)$=$.parentNode;d.showDropdownMenu($.getAttribute("data-index"))}},$5g:function(w){var S=this,M=S._view.children[0],j=S.$1g,o=w.target,c=w.relatedTarget;!M.contains(o)&&!j._view.contains(o)||M.contains(c)||j._view.contains(c)||S.hideDropdownMenu()},$7g:function(c){var M=this,Q=M._view.children[0],q=M.$1g,N=c.target;if(G.isLeftButton(c)&&Q!==N&&Q.contains(N))if(_){for(;"header-item"!==N[U];)N=N.parentNode;var K=N.getAttribute("data-index"),q=M.$1g,P=M._view.children[0].children[K],w=M.$17g;q.isShowing()&&M.hideDropdownMenu(),P!==w&&M.showDropdownMenu(K)}else if(q.isShowing())M.hideDropdownMenu();else{for(;"header-item"!==N[U];)N=N.parentNode;M.showDropdownMenu(N.getAttribute("data-index"))}},$9g:function(w){var i=this,D=i._view,p=i.$1g,b=w.target;if(D.contains(b)){for(var G=D.querySelectorAll(".header-item"),z=c,Z=0;Z<G.length;Z++){var P=G[Z];P.style.background="",P.style.color="","mouseover"===w.type?P.contains(b)&&(z=P):"mouseout"===w.type&&p.isShowing()&&i.$17g===P&&(z=P)}p.isShowing()&&(z||(z=i.$17g),i.showDropdownMenu(z.getAttribute("data-index"))),z&&(z.style.background=i.$14g,z.style.color=i.$15g)}},getShowingMenuIndex:function(){var x=this.$17g;return x?x.getAttribute("data-index"):-1},addTo:function(m){var c=this,X=c._view;u(m,X),c.invalidate()},dispose:function(){var W=this,M=W._view,U=W.$1g;M&&(W._autoShow?(C(M,"mouseover",W.$2g),C(M,"mouseout",W.$4g),C(U._view,"mouseout",W.$4g)):(C(M,"mouseover",W.$8g),C(M,"mouseout",W.$8g),C(M,_?"touchstart":"mousedown",W.$6g),C(m(),_?"touchstart":"mousedown",W.$9b)),C(m(),"keydown",W.$3b),U.dispose(),M.parentNode&&F(M.parentNode,M),W._view=W.$1g=W.$16g=W._items=W.$17g=W.$2g=W.$4g=W.$6g=W.$8g=W.$9b=W.$3b=c)},$19g:function(z,I,D,r){var J=t.initContext(z);t.translateAndScale(J,0,0,1),J.clearRect(0,0,D,r),G.drawStretchImage(J,G.getImage(I),"fill",0,0,D,r),J.restore()},validateImpl:function(){var O,r,X,y=this,v=y._view,d=v.querySelectorAll(".menu-item-icon");for(X=0;X<d.length;X++){var e=d[X];O=e.clientWidth,r=e.clientHeight,O&&r&&(t.setCanvas(e,O,r),y.$19g(e,G.getImage(e.$20g),O,r))}}})}(this,Object);
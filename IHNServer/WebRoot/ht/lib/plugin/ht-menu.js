!function(Z,m){"use strict";var p="ht",q=Z[p],W="innerHTML",$="className",D=null,R="px",f=q.Default,w=f.getInternal(),J="0",k=function(){return document},j=function(V){return k().createElement(V)},X=function(){return j("div")},h=function(){return j("canvas")},y=function(K,O,b){K.style.setProperty(O,b,D)},H=function(Q,T,E){f.def(q.widget[Q],T,E)},T=function(Z,j){Z.appendChild(j)},n=function(o,h){o.removeChild(h)},i=function(u,W,N,r){u.addEventListener(W,N,!!r)},M=function(v,P,w,L){v.removeEventListener(P,w,!!L)},g=f.isTouchable;w.addMethod(f,{menuLabelFont:(g?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),q.widget.Menu=function(i){var t=this,s=t._view=X(),d=t.$1g=new q.widget.ContextMenu,e=j("ul");d._r=!0,d._view[$]+=" ht-widget-dropdownmenu",s[$]="ht-widget-menu",e[$]="header",y(s,"margin",J),y(s,"padding",J),y(s,"background",f.menuBackground),y(s,"-webkit-user-select","none"),y(s,"-moz-user-select","none"),y(s,"user-select","none"),y(s,"text-align","left"),y(s,"border-bottom",f.menuSeparatorWidth+"px solid "+f.menuSeparatorColor),y(s,"cursor","default"),y(s,"overflow","auto"),y(s,"white-space","nowrap"),y(s,"font",f.menuLabelFont),y(s,"color",f.menuLabelColor),y(s,"box-sizing","border-box"),y(s,"-moz-box-sizing","border-box"),y(e,"list-style","none"),y(e,"margin",J),y(e,"padding",J),y(e,"display","inline-block"),T(s,e),t.setItems(i),t.$2g=function(k){t.$3g(k)},t.$4g=function(Z){t.$5g(Z)},t.$6g=function(f){t.$7g(f)},t.$8g=function(o){t.$9g(o)},t.$9b=function(L){t.$10g(L)},t._autoShow=!0,t.setAutoShow(!1),d.afterHide=function(){t.$11g()},d.afterShow=function(){t.$12g()},M(k(),"keydown",d.$3b),t.$3b=function(K){t.$13g(K)},t.invalidate()},H("Menu",m,{_items:D,$14g:f.menuHoverBackground,$15g:f.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(T){var Y=this;if(Y.$21g=T,Y.setItems(Y._items),"largeicons"===T){for(var J=Y._view.querySelectorAll(".header-item"),b=0,c=0;c<J.length;c++){var u=J[c];b=Math.max(b,u.clientWidth)}for(var c=0;c<J.length;c++){var u=J[c];y(u,"min-width",b+R)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(l){this.$22g=l;for(var t=this._view.querySelectorAll(".header-item"),Z=0;Z<t.length;Z++){var X=t[Z];y(X,"margin-left",l+R),y(X,"margin-right",l+R)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(V){this.$23g=V;for(var C=this._view.querySelectorAll(".header-item"),f=0;f<C.length;f++){var D=C[f];y(D,"margin-top",V+R),y(D,"margin-bottom",V+R)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(e){this.$24g=e,y(this._view,"text-align",e)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var x=this,n=x._enableGlobalKey;n===!1&&(i(k(),"keydown",x.$3b),x._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,M(k(),"keydown",this.$3b)},setHoverBackground:function(u){this.$14g=u},setHoverColor:function(c){this.$15g=c},setItems:function(F){var A=this,H=A._view,C=A.$21g;if(A._items=F,H.children[0][W]="",A.$16g={},F&&F.length){for(var L=H.children[0],Y=0,z=k().createDocumentFragment();Y<F.length;Y++){var U=F[Y],O=j("li"),Z=j("span");if(U.icon){var B=h();B[$]="menu-item-icon","smallicons"===C?(y(B,"height","1.2em"),y(B,"width","1.2em"),y(B,"vertical-align","middle")):(y(B,"height","32px"),y(B,"width","32px"),y(B,"display","block"),y(B,"margin","0 auto")),B.$20g=U.icon,T(O,B)}O[$]="header-item",y(O,"display","inline-block"),y(O,"vertical-align","top"),y(O,"padding","0 1.2em"),y(O,"line-height","1.8em"),"largeicons"===C&&y(O,"text-align","center"),y(O,"background-color","rgba(0,0,0,0)"),O.setAttribute("data-index",Y),A.$16g[Y]=U.items,Z[W]=U.label,"iconsonly"!==C&&T(O,Z),T(z,O)}T(L,z)}},showDropdownMenu:function(U){var x=this,t=x.$16g[U],h=x.$1g,D=x._view.children[0].children[U],E=x.$17g;if(D&&D!==E){E&&x.hideDropdownMenu();var O=D.getBoundingClientRect(),z=f.getWindowInfo();x.$17g=D,h.setItems(t),h.show(O.left+z.left,O.top+O.height+z.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(O,B){var U=this,f=U._items;return f&&0!==f.length?U.$1g.getItemByProperty(O,B,f):D},$12g:function(){var r=this,j=r.$17g;j.style.background=r.$14g,j.style.color=r.$15g,r._autoShow||i(k(),g?"touchstart":"mousedown",r.$9b)},$11g:function(){var Z=this,L=Z.$17g;L&&(L.style.background="",L.style.color="",Z.$17g=D),M(k(),g?"touchstart":"mousedown",Z.$9b)},$10g:function(o){var x=this,p=x._view,V=x.$1g,z=p.children[0];!k().body.contains(p)||z.contains(o.target)||V._view.contains(o.target)||x.hideDropdownMenu()},$13g:function(Q){var _=this,u=_.$1g;k().body.contains(_._view)&&u.$13b.$4b.call(u.$13b,Q,_._items)},setAutoShow:function(w){var o=this,p=o.$1g,_=o._view;o._autoShow!==w&&(o._autoShow?(M(_,"mouseover",o.$2g),M(_,"mouseout",o.$4g),M(p._view,"mouseout",o.$4g),g||(i(_,"mouseover",o.$8g),i(_,"mouseout",o.$8g)),i(_,g?"touchstart":"mousedown",o.$6g)):(M(_,"mouseover",o.$8g),M(_,"mouseout",o.$8g),M(_,g?"touchstart":"mousedown",o.$6g),M(k(),g?"touchstart":"mousedown",o.$9b),g||(i(_,"mouseover",o.$2g),i(_,"mouseout",o.$4g),i(p._view,"mouseout",o.$4g))),o._autoShow=w)},$3g:function(L){var W=this,N=W._view.children[0],o=L.target;if(N!==o&&N.contains(o)){for(;"header-item"!==o[$];)o=o.parentNode;W.showDropdownMenu(o.getAttribute("data-index"))}},$5g:function(f){var P=this,r=P._view.children[0],x=P.$1g,V=f.target,u=f.relatedTarget;!r.contains(V)&&!x._view.contains(V)||r.contains(u)||x._view.contains(u)||P.hideDropdownMenu()},$7g:function(X){var m=this,O=m._view.children[0],H=m.$1g,n=X.target;if(f.isLeftButton(X)&&O!==n&&O.contains(n))if(g){for(;"header-item"!==n[$];)n=n.parentNode;var q=n.getAttribute("data-index"),H=m.$1g,r=m._view.children[0].children[q],Z=m.$17g;H.isShowing()&&m.hideDropdownMenu(),r!==Z&&m.showDropdownMenu(q)}else if(H.isShowing())m.hideDropdownMenu();else{for(;"header-item"!==n[$];)n=n.parentNode;m.showDropdownMenu(n.getAttribute("data-index"))}},$9g:function(o){var g=this,T=g._view,C=g.$1g,h=o.target;if(T.contains(h)){for(var E=T.querySelectorAll(".header-item"),l=D,N=0;N<E.length;N++){var S=E[N];S.style.background="",S.style.color="","mouseover"===o.type?S.contains(h)&&(l=S):"mouseout"===o.type&&C.isShowing()&&g.$17g===S&&(l=S)}C.isShowing()&&(l||(l=g.$17g),g.showDropdownMenu(l.getAttribute("data-index"))),l&&(l.style.background=g.$14g,l.style.color=g.$15g)}},getShowingMenuIndex:function(){var s=this.$17g;return s?s.getAttribute("data-index"):-1},addTo:function(k){var L=this,B=L._view;T(k,B),L.invalidate()},dispose:function(){var v=this,r=v._view,b=v.$1g;r&&(v._autoShow?(M(r,"mouseover",v.$2g),M(r,"mouseout",v.$4g),M(b._view,"mouseout",v.$4g)):(M(r,"mouseover",v.$8g),M(r,"mouseout",v.$8g),M(r,g?"touchstart":"mousedown",v.$6g),M(k(),g?"touchstart":"mousedown",v.$9b)),M(k(),"keydown",v.$3b),b.dispose(),r.parentNode&&n(r.parentNode,r),v._view=v.$1g=v.$16g=v._items=v.$17g=v.$2g=v.$4g=v.$6g=v.$8g=v.$9b=v.$3b=D)},$19g:function(D,r,R,x){var g=w.initContext(D);w.translateAndScale(g,0,0,1),g.clearRect(0,0,R,x),f.drawStretchImage(g,f.getImage(r),"fill",0,0,R,x),g.restore()},validateImpl:function(){var p,$,R,h=this,P=h._view,y=P.querySelectorAll(".menu-item-icon");for(R=0;R<y.length;R++){var Y=y[R];p=Y.clientWidth,$=Y.clientHeight,p&&$&&(w.setCanvas(Y,p,$),h.$19g(Y,f.getImage(Y.$20g),p,$))}}})}(this,Object);
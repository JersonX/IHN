!function(L){"use strict";var Y="ht",G=L[Y],g=Math,$=g.max,e=g.min,A=g.abs,Z=g.atan2,u=g.cos,U=g.sin,r=g.ceil,x=G.Default,W=x.getInternal(),R=G.List,b=W.Mat,t=W.getNodeRect,Q=W.intersectionLineRect,E=x.getDistance,k=x.setEdgeType,d="left",O="right",P="top",C="bottom",p="edge.type",q="edge.gap",S="edge.center",z="edge.extend",a=function(Q,u){return t(Q,u).width},f=function(O,q){return t(O,q).height},M=function(E,m){var H=W.getPosition(m.s("edge.source.position"),t(E,m._40I));return H.x+=m.s("edge.source.offset.x"),H.y+=m.s("edge.source.offset.y"),H},w=function(g,J){var r=W.getPosition(J.s("edge.target.position"),t(g,J._41I));return r.x+=J.s("edge.target.offset.x"),r.y+=J.s("edge.target.offset.y"),r},J=function(R,n){var K=R.s(p),T=R.getEdgeGroup();if(T){var G=0;if(T.eachSiblingEdge(function(I){n.isVisible(I)&&I.s(p)==K&&G++}),G>1)return R.s(q)*(G-1)/2}return 0},I=function(Y,U){var w=Y.s(p),a=Y.isLooped();if(!Y.getEdgeGroup())return a?Y.s(q):0;var J,C=0,g=0,n=0;return Y.getEdgeGroup().getSiblings().each(function(B){B.each(function(I){if(I._40I===Y._40I&&I.s(p)==w&&U.isVisible(I)){var W=I.s(q);J?(g+=n/2+W/2,n=W):(J=I,n=W),I===Y&&(C=g)}})}),a?g-C+n:C-g/2},T=function(F,H){var l=F.size(),f=H.s("edge.corner.radius");if(0===f)return{points:F,segments:new R([1,l])};if(0>f)return{points:F};var K,n=new R,P=new R,r=F.get(0);n.add(r),P.add(1);for(var O=1;l>O;O++)if(l>O+1){var I=F.get(O),Y=F.get(O+1),V=r.x,C=r.y,X=I.x,$=I.y,L=$-C,j=X-V,d=Z(L,j);K=e(.99*E(r,I),f),n.add({x:X-K*u(d),y:$-K*U(d)}),n.add(I),V=I.x,C=I.y,X=Y.x,$=Y.y,L=$-C,j=X-V,d=Z(L,j),K=e(.99*E(I,Y),f),r={x:V+K*u(d),y:C+K*U(d)},n.add(r),P.addAll([2,3])}else n.add(F.get(O)),P.add(2);return{points:n,segments:P}};W.addMethod(G.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),k("boundary",function(H,Y,h,L){L||(Y=-Y);var u,l=M(h,H),z=w(h,H),D=t(h,H._40I),p=t(h,H._41I),C=new b(Z(z.y-l.y,z.x-l.x)),q=E(l,z),W=l.x,F=l.y;return u=C.tf(0,Y),l={x:u.x+W,y:u.y+F},u=C.tf(q,Y),z={x:u.x+W,y:u.y+F},u=Q(l,z,D),u&&(l={x:u[0],y:u[1]}),u=Q(l,z,p),u&&(z={x:u[0],y:u[1]}),{points:new R([l,z])}}),k("ripple",function(f,V,c,W){W||(V=-V);var H=M(c,f),F=w(c,f),D=E(H,F),y=e(f.s("edge.offset"),D/2),m=f.s("edge.ripple.size"),_=f.s("edge.ripple.length"),q=f.s("edge.ripple.both"),P=f.s(S),k=f.s("edge.ripple.elevation"),I=new R,U=f.s("edge.ripple.straight")?null:new R,K=new b(Z(F.y-H.y,F.x-H.x));W||(k=-k),D-=2*y,_>0&&(m=r(D/_));var s=D/m;U&&U.add(1);for(var J=0;m>J;J++)U&&U.add(3),0===J?I.add({x:y+s*J,y:P?0:V}):I.add({x:y+s*J,y:V}),I.add({x:y+s*J+s/2,y:k+V}),q&&(k=-k);for(I.add({x:y+D,y:P?0:V}),J=0;J<I.size();J++){var i=K.tf(I.get(J));i.x+=H.x,i.y+=H.y,I.set(J,i)}return{points:I,segments:U}}),k("h.v",function(F,O,A){O=I(F,A);var p=new R,H=F.s(S),Q=M(A,F),G=Q.x,c=Q.y,e=w(A,F),u=e.x,k=e.y,P=0,b=0,d=u-G,X=k-c;return H||(P=a(A,F._40I)/2,b=f(A,F._41I)/2),d>=0&&0>=X?(p.add({x:G+P,y:c+O}),p.add({x:u+O,y:c+O}),p.add({x:u+O,y:k+b})):0>=d&&X>=0?(p.add({x:G-P,y:c+O}),p.add({x:u+O,y:c+O}),p.add({x:u+O,y:k-b})):d>=0&&X>=0?(p.add({x:G+P,y:c+O}),p.add({x:u-O,y:c+O}),p.add({x:u-O,y:k-b})):(p.add({x:G-P,y:c+O}),p.add({x:u-O,y:c+O}),p.add({x:u-O,y:k+b})),T(p,F)}),k("v.h",function(q,O,Z){O=I(q,Z);var V=new R,i=q.s(S),Q=M(Z,q),$=Q.x,N=Q.y,r=w(Z,q),W=r.x,J=r.y,t=0,Y=0,j=W-$,A=J-N;return i||(t=a(Z,q._41I)/2,Y=f(Z,q._40I)/2),j>=0&&0>=A?(V.add({x:$+O,y:N-Y}),V.add({x:$+O,y:J+O}),V.add({x:W-t,y:J+O})):0>=j&&A>=0?(V.add({x:$+O,y:N+Y}),V.add({x:$+O,y:J+O}),V.add({x:W+t,y:J+O})):j>=0&&A>=0?(V.add({x:$-O,y:N+Y}),V.add({x:$-O,y:J+O}),V.add({x:W-t,y:J+O})):(V.add({x:$-O,y:N-Y}),V.add({x:$-O,y:J+O}),V.add({x:W+t,y:J+O})),T(V,q)}),k("ortho",function(L,m,K){var X=new R,u=L.s(S),B=L.s("edge.ortho"),h=L._40I,Q=L._41I,v=M(K,L),t=v.x,C=v.y,g=w(K,L),s=g.x,l=g.y,x=s-t,q=l-C,Z=u?0:a(K,h)/2,N=u?0:f(K,h)/2,E=u?0:a(K,Q)/2,W=u?0:f(K,Q)/2,H=(x-(Z+E)*(x>0?1:-1))*B,P=(q-(N+W)*(q>0?1:-1))*B;return A(x)<A(q)?x>=0&&0>=q?(X.add({x:t+m,y:C-N}),X.add({x:t+m,y:C+P+m-N}),X.add({x:s+m,y:C+P+m-N}),X.add({x:s+m,y:l+W})):0>=x&&q>=0?(X.add({x:t+m,y:C+N}),X.add({x:t+m,y:C+P+m+N}),X.add({x:s+m,y:C+P+m+N}),X.add({x:s+m,y:l-W})):x>=0&&q>=0?(X.add({x:t+m,y:C+N}),X.add({x:t+m,y:C+P-m+N}),X.add({x:s+m,y:C+P-m+N}),X.add({x:s+m,y:l-W})):(X.add({x:t+m,y:C-N}),X.add({x:t+m,y:C+P-m-N}),X.add({x:s+m,y:C+P-m-N}),X.add({x:s+m,y:l+W})):x>=0&&0>=q?(X.add({x:t+Z,y:C+m}),X.add({x:t+H+m+Z,y:C+m}),X.add({x:t+H+m+Z,y:l+m}),X.add({x:s-E,y:l+m})):0>=x&&q>=0?(X.add({x:t-Z,y:C+m}),X.add({x:t+H+m-Z,y:C+m}),X.add({x:t+H+m-Z,y:l+m}),X.add({x:s+E,y:l+m})):x>=0&&q>=0?(X.add({x:t+Z,y:C+m}),X.add({x:t+H-m+Z,y:C+m}),X.add({x:t+H-m+Z,y:l+m}),X.add({x:s-E,y:l+m})):(X.add({x:t-Z,y:C+m}),X.add({x:t+H-m-Z,y:C+m}),X.add({x:t+H-m-Z,y:l+m}),X.add({x:s+E,y:l+m})),T(X,L)}),k("flex",function(I,E,W){var h=new R,r=I.s("edge.flex")+J(I,W),$=I.s(S),X=I._40I,o=I._41I,u=M(W,I),N=u.x,K=u.y,_=w(W,I),p=_.x,c=_.y,Y=p-N,O=c-K,y=$?0:a(W,X)/2,H=$?0:f(W,X)/2,e=$?0:a(W,o)/2,x=$?0:f(W,o)/2,U=Y>0?r:-r,D=O>0?r:-r;return A(Y)<A(O)?Y>=0&&0>=O?(h.add({x:N+E,y:K-H}),h.add({x:N+E,y:K+D+E-H}),h.add({x:p+E,y:c-D+E+x}),h.add({x:p+E,y:c+x})):0>=Y&&O>=0?(h.add({x:N+E,y:K+H}),h.add({x:N+E,y:K+D+E+H}),h.add({x:p+E,y:c-D+E-x}),h.add({x:p+E,y:c-x})):Y>=0&&O>=0?(h.add({x:N+E,y:K+H}),h.add({x:N+E,y:K+D-E+H}),h.add({x:p+E,y:c-D-E-x}),h.add({x:p+E,y:c-x})):(h.add({x:N+E,y:K-H}),h.add({x:N+E,y:K+D-E-H}),h.add({x:p+E,y:c-D-E+x}),h.add({x:p+E,y:c+x})):Y>=0&&0>=O?(h.add({x:N+y,y:K+E}),h.add({x:N+U+E+y,y:K+E}),h.add({x:p-U+E-e,y:c+E}),h.add({x:p-e,y:c+E})):0>=Y&&O>=0?(h.add({x:N-y,y:K+E}),h.add({x:N+U+E-y,y:K+E}),h.add({x:p-U+E+e,y:c+E}),h.add({x:p+e,y:c+E})):Y>=0&&O>=0?(h.add({x:N+y,y:K+E}),h.add({x:N+U-E+y,y:K+E}),h.add({x:p-U-E-e,y:c+E}),h.add({x:p-e,y:c+E})):(h.add({x:N-y,y:K+E}),h.add({x:N+U-E-y,y:K+E}),h.add({x:p-U-E+e,y:c+E}),h.add({x:p+e,y:c+E})),T(h,I)}),k("extend.east",function(U,e,y){var o=new R,d=U.s(z)+J(U,y),u=U.s(S),A=M(y,U),N=A.x+(u?0:a(y,U._40I)/2),n=A.y,Z=w(y,U),j=Z.x+(u?0:a(y,U._41I)/2),t=Z.y,h=$(N,j)+d;return n>t?(o.add({x:N,y:n+e}),o.add({x:h+e,y:n+e}),o.add({x:h+e,y:t-e}),o.add({x:j,y:t-e})):(o.add({x:N,y:n-e}),o.add({x:h+e,y:n-e}),o.add({x:h+e,y:t+e}),o.add({x:j,y:t+e})),T(o,U)}),k("extend.west",function(i,X,$){var D=new R,G=i.s(z)+J(i,$),o=i.s(S),I=M($,i),r=I.x-(o?0:a($,i._40I)/2),A=I.y,F=w($,i),x=F.x-(o?0:a($,i._41I)/2),t=F.y,V=e(r,x)-G;return A>t?(D.add({x:r,y:A+X}),D.add({x:V-X,y:A+X}),D.add({x:V-X,y:t-X}),D.add({x:x,y:t-X})):(D.add({x:r,y:A-X}),D.add({x:V-X,y:A-X}),D.add({x:V-X,y:t+X}),D.add({x:x,y:t+X})),T(D,i)}),k("extend.north",function(i,q,s){var j=new R,d=i.s(z)+J(i,s),N=i.s(S),B=M(s,i),t=B.x,g=B.y-(N?0:f(s,i._40I)/2),y=w(s,i),G=y.x,X=y.y-(N?0:f(s,i._41I)/2),k=e(g,X)-d;return t>G?(j.add({y:g,x:t+q}),j.add({y:k-q,x:t+q}),j.add({y:k-q,x:G-q}),j.add({y:X,x:G-q})):(j.add({y:g,x:t-q}),j.add({y:k-q,x:t-q}),j.add({y:k-q,x:G+q}),j.add({y:X,x:G+q})),T(j,i)}),k("extend.south",function(k,F,V){var c=new R,L=k.s(z)+J(k,V),g=k.s(S),o=M(V,k),l=o.x,x=o.y+(g?0:f(V,k._40I)/2),X=w(V,k),H=X.x,s=X.y+(g?0:f(V,k._41I)/2),n=$(x,s)+L;return l>H?(c.add({y:x,x:l+F}),c.add({y:n+F,x:l+F}),c.add({y:n+F,x:H-F}),c.add({y:s,x:H-F})):(c.add({y:x,x:l-F}),c.add({y:n+F,x:l-F}),c.add({y:n+F,x:H+F}),c.add({y:s,x:H+F})),T(c,k)});var D=function(t,U,c,H,r){if(H.sort(function(s,u){var p=s.getSourceAgent()===U?s.getTargetAgent():s.getSourceAgent(),$=u.getSourceAgent()===U?u.getTargetAgent():u.getSourceAgent(),B=p.p(),e=$.p();if(c===d||c===O){if(B.y>e.y)return 1;if(B.y<e.y)return-1}else{if(B.x>e.x)return 1;if(B.x<e.x)return-1}return x.sortFunc(s.getId(),u.getId())}),r){for(var E,J,B,N=t.getSourceAgent(),z=t.getTargetAgent(),v=0;v<H.size();v++){var j=H.get(v);j.getSourceAgent()===N&&j.getTargetAgent()===z||j.getTargetAgent()===N&&j.getSourceAgent()===z?(J||(J=new R),J.add(j,0)):J?(B||(B=new R),B.add(j)):(E||(E=new R),E.add(j))}H.clear(),E&&H.addAll(E),J&&H.addAll(J),B&&H.addAll(B)}var F=H.indexOf(t),p=H.size(),o=t.s(q);return{side:c,index:F,size:p,offset:-o*(p-1)/2+o*F}},H=function(s,r,g,c,f){var N=r.s(p);return D(r,g,c,g.getAgentEdges().toList(function(R){return s.isVisible(R)&&R.s(p)===N}),f)},l=function(M,D){var L=M.getSourceAgent()===D?M.getTargetAgent():M.getSourceAgent(),z=D.p(),y=L.p(),q=y.x-z.x,l=y.y-z.y;return q>0&&A(l)<=q?O:0>q&&A(l)<=-q?d:l>0&&A(q)<=l?C:P},n=function(b,E,A){var N=E.s(p),T=l(E,A);return D(E,A,T,A.getAgentEdges().toList(function(C){return b.isVisible(C)&&C.s(p)===N&&l(C,A)===T}))},s=function(K,B){var h=K.getSourceAgent()===B,y=h?K.getTargetAgent():K.getSourceAgent(),W=B.p(),T=y.p();return h?W.y>T.y?P:C:W.x<T.x?O:d},X=function(t,w,B){var y=w.s(p),Z=s(w,B);return D(w,B,Z,B.getAgentEdges().toList(function(b){return t.isVisible(b)&&b.s(p)===y&&s(b,B)===Z}),Z===O||Z===C)},B=function(F,h){var Q=F.getSourceAgent()===h,k=Q?F.getTargetAgent():F.getSourceAgent(),Z=h.p(),r=k.p();return Q?Z.x<r.x?O:d:Z.y>r.y?P:C},K=function(U,e,f){var j=e.s(p),g=B(e,f);return D(e,f,g,f.getAgentEdges().toList(function(M){return U.isVisible(M)&&M.s(p)===j&&B(M,f)===g}),g===O||g===C)},y=function(o,y,U){var I=o.getSourceAgent(),b=o.getTargetAgent(),p=I.getId()>b.getId(),F=p?b:I,L=p?I:b,i=F.p(),K=L.p(),m=U(y,o,F),J=U(y,o,L),t=o.s(S),l=t?0:a(y,F)/2,A=t?0:a(y,L)/2,Y=t?0:f(y,F)/2,$=t?0:f(y,L)/2,n=m.offset,c=J.offset,B=m.side,q=J.side,X=new R;return B===P?(X.add({x:i.x+n,y:i.y-Y}),X.add({x:i.x+n,y:K.y+c}),q===d?X.add({x:K.x-A,y:K.y+c}):X.add({x:K.x+A,y:K.y+c})):B===C?(X.add({x:i.x+n,y:i.y+Y}),X.add({x:i.x+n,y:K.y+c}),q===d?X.add({x:K.x-A,y:K.y+c}):X.add({x:K.x+A,y:K.y+c})):B===d?(X.add({x:i.x-l,y:i.y+n}),X.add({x:K.x+c,y:i.y+n}),q===C?X.add({x:K.x+c,y:K.y+$}):X.add({x:K.x+c,y:K.y-$})):B===O&&(X.add({x:i.x+l,y:i.y+n}),X.add({x:K.x+c,y:i.y+n}),q===C?X.add({x:K.x+c,y:K.y+$}):X.add({x:K.x+c,y:K.y-$})),p&&X.reverse(),T(X,o)};k("ortho2",function(j,r,y){var V,B,F=j.s(S),E=j.s("edge.ortho"),A=j.getSourceAgent(),X=j.getTargetAgent(),K=A.getId()>X.getId(),g=K?X:A,c=K?A:X,p=g.p(),k=c.p(),M=n(y,j,g),e=n(y,j,c),_=F?0:a(y,g)/2,N=F?0:f(y,g)/2,i=F?0:a(y,c)/2,U=F?0:f(y,c)/2,l=new R,z=M.offset,J=e.offset,w=M.side;return w===O?(V=k.y>p.y?-z:z,B=p.x+_+(k.x-i-p.x-_)*E,l.add({x:p.x+_,y:p.y+z}),l.add({x:B+V,y:p.y+z}),l.add({x:B+V,y:k.y+J}),l.add({x:k.x-i,y:k.y+J})):w===d?(V=k.y>p.y?-z:z,B=p.x-_-(p.x-_-k.x-i)*E,l.add({x:p.x-_,y:p.y+z}),l.add({x:B-V,y:p.y+z}),l.add({x:B-V,y:k.y+J}),l.add({x:k.x+i,y:k.y+J})):w===C?(V=k.x>p.x?-z:z,B=p.y+N+(k.y-U-p.y-N)*E,l.add({x:p.x+z,y:p.y+N}),l.add({x:p.x+z,y:B+V}),l.add({x:k.x+J,y:B+V}),l.add({x:k.x+J,y:k.y-U})):w===P&&(V=k.x>p.x?-z:z,B=p.y-N-(p.y-N-k.y-U)*E,l.add({x:p.x+z,y:p.y-N}),l.add({x:p.x+z,y:B-V}),l.add({x:k.x+J,y:B-V}),l.add({x:k.x+J,y:k.y+U})),K&&l.reverse(),T(l,j)},!0),k("flex2",function(J,W,g){var y,M=J.getSourceAgent(),e=J.getTargetAgent(),B=M.getId()>e.getId(),U=B?e:M,Y=B?M:e,k=U.p(),b=Y.p(),V=n(g,J,U),u=n(g,J,Y),t=J.s(S),Q=J.s("edge.flex")+(V.size-1)/2*J.s(q),v=t?0:a(g,U)/2,D=t?0:f(g,U)/2,A=t?0:a(g,Y)/2,w=t?0:f(g,Y)/2,Z=new R,H=V.offset,r=u.offset,i=V.side;return i===O?(y=b.y>k.y?-H:H,Z.add({x:k.x+v,y:k.y+H}),Z.add({x:k.x+v+Q+y,y:k.y+H}),Z.add({x:b.x-A-Q+y,y:b.y+r}),Z.add({x:b.x-A,y:b.y+r})):i===d?(y=b.y>k.y?-H:H,Z.add({x:k.x-v,y:k.y+H}),Z.add({x:k.x-v-Q-y,y:k.y+H}),Z.add({x:b.x+A+Q-y,y:b.y+r}),Z.add({x:b.x+A,y:b.y+r})):i===C?(y=b.x>k.x?-H:H,Z.add({x:k.x+H,y:k.y+D}),Z.add({x:k.x+H,y:k.y+D+Q+y}),Z.add({x:b.x+r,y:b.y-w-Q+y}),Z.add({x:b.x+r,y:b.y-w})):i===P&&(y=b.x>k.x?-H:H,Z.add({x:k.x+H,y:k.y-D}),Z.add({x:k.x+H,y:k.y-D-Q-y}),Z.add({x:b.x+r,y:b.y+w+Q-y}),Z.add({x:b.x+r,y:b.y+w})),B&&Z.reverse(),T(Z,J)},!0),k("extend.north2",function(D,v,A){var K=D.getSourceAgent(),n=D.getTargetAgent(),m=K.getId()>n.getId(),W=m?n:K,b=m?K:n,C=W.p(),h=b.p(),g=H(A,D,W,P),c=H(A,D,b,P,!0),U=D.s(S),i=U?0:f(A,W)/2,y=U?0:f(A,b)/2,L=g.offset,j=c.offset,p=D.s(z)+(g.size-1)/2*D.s(q),o=e(C.y-i,h.y-y)-p+(C.x<h.x?L:-L),t=new R;return t.add({x:C.x+L,y:C.y-i}),t.add({x:C.x+L,y:o}),t.add({x:h.x+j,y:o}),t.add({x:h.x+j,y:h.y-y}),m&&t.reverse(),T(t,D)},!0),k("extend.south2",function(Z,E,F){var i=Z.getSourceAgent(),Q=Z.getTargetAgent(),I=i.getId()>Q.getId(),u=I?Q:i,P=I?i:Q,h=u.p(),p=P.p(),e=H(F,Z,u,C),m=H(F,Z,P,C,!0),v=Z.s(S),X=v?0:f(F,u)/2,b=v?0:f(F,P)/2,Y=e.offset,B=m.offset,d=Z.s(z)+(e.size-1)/2*Z.s(q),j=$(h.y+X,p.y+b)+d+(h.x>p.x?Y:-Y),_=new R;return _.add({x:h.x+Y,y:h.y+X}),_.add({x:h.x+Y,y:j}),_.add({x:p.x+B,y:j}),_.add({x:p.x+B,y:p.y+b}),I&&_.reverse(),T(_,Z)},!0),k("extend.west2",function(K,E,V){var j=K.getSourceAgent(),D=K.getTargetAgent(),x=j.getId()>D.getId(),o=x?D:j,w=x?j:D,y=o.p(),d=w.p(),k=H(V,K,o,P),N=H(V,K,w,P,!0),Q=K.s(S),Y=Q?0:a(V,o)/2,B=Q?0:a(V,w)/2,r=k.offset,s=N.offset,g=K.s(z)+(k.size-1)/2*K.s(q),f=e(y.x-Y,d.x-B)-g+(y.y<d.y?r:-r),M=new R;return M.add({x:y.x-Y,y:y.y+r}),M.add({x:f,y:y.y+r}),M.add({x:f,y:d.y+s}),M.add({x:d.x-B,y:d.y+s}),x&&M.reverse(),T(M,K)},!0),k("extend.east2",function(e,L,N){var W=e.getSourceAgent(),O=e.getTargetAgent(),K=W.getId()>O.getId(),k=K?O:W,m=K?W:O,Z=k.p(),o=m.p(),i=H(N,e,k,P),u=H(N,e,m,P,!0),A=e.s(S),r=A?0:a(N,k)/2,f=A?0:a(N,m)/2,X=i.offset,B=u.offset,U=e.s(z)+(i.size-1)/2*e.s(q),n=$(Z.x+r,o.x+f)+U+(Z.y>o.y?X:-X),j=new R;return j.add({x:Z.x+r,y:Z.y+X}),j.add({x:n,y:Z.y+X}),j.add({x:n,y:o.y+B}),j.add({x:o.x+f,y:o.y+B}),K&&j.reverse(),T(j,e)},!0),k("v.h2",function(C,H,U){return y(C,U,X)},!0),k("h.v2",function(p,A,X){return y(p,X,K)},!0)}(this,Object);
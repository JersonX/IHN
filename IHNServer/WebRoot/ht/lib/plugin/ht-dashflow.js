!function(t){"use strict";var I="ht",M=t[I],K=M.Default,j=Math,o=(j.PI,j.sin,j.cos,j.atan2,j.sqrt,j.max),z=j.floor,E=(j.round,j.ceil),$=M.Shape,L=(M.Edge,M.List),m=M.Style,C=M.graph,n=K.getInternal(),V=n.ui(),f=null,A="prototype",s=t.clearInterval,R=t.setInterval,y=function(s){var D=s.data,U=this.dm();if(D&&"add"===s.kind){var q=U.$1c,i=D instanceof $?"shape.":"edge.";q&&D.s(i+"dash.flow")&&q.indexOf(D)<0&&q.push(D)}"clear"===s.kind&&(U.$1c=[])},B=function(D){var a=D.property,u=D.data,Y=D.newValue,w=this.dm().$1c,q=u instanceof $?"s:shape.dash.flow":"s:edge.dash.flow";if(w&&a===q)if(Y)w.indexOf(u)<0&&w.push(u);else for(var o=w.length,v=0;o>v;v++)if(w[v]===u){w.splice(v,1);break}},O=C.GraphView[A],g=V.EdgeUI[A],_=V.ShapeUI[A],W=_._80o,J=g._80o,x=M.DataModel[A],D=x.prepareRemove,h=O.setDataModel;m["edge.dash.flow.step"]==f&&(m["edge.dash.flow.step"]=3),m["shape.dash.flow.step"]==f&&(m["shape.dash.flow.step"]=3),x.prepareRemove=function(o){D.call(this,o);var T=o._dataModel,h=T.$1c;if(h)for(var v=h.length,L=0;v>L;L++)if(h[L]===o){h.splice(L,1);break}},O.setDataModel=function(K){var J=this,R=J._dataModel;if(R!==K){R&&(R.umm(y,J),R.umd(B,J),R.$1c=[]),K.mm(y,J),K.md(B,J);var n=K.$1c=[];K.each(function(z){var p=z instanceof $?"shape.":"edge.";z.s(p+"dash.flow")&&n.indexOf(z)<0&&n.push(z)}),h.call(J,K)}},O.setDashFlowInterval=function(v){var X=this,F=X.$2c;X.$2c=v,X.fp("dashFlowInterval",F,v),X.$3c!=f&&(s(X.$3c),delete X.$3c,X.enableDashFlow(v))},O.getDashFlowInterval=function(){return this.$2c},O.$4c=function(){var N,M,T,e=this,x=e.tx(),U=e.ty(),r=e._zoom,j=e.getWidth(),$=e.getHeight(),c={x:-x/r,y:-U/r,width:j/r,height:$/r},W=e.dm().$1c,I=e._56I,p=new L;if(W.forEach(function(D){I[D.getId()]&&(N=e.getDataUI(D),N&&(T=N._79o(),T&&p.add(T)))}),0!==p.size()&&(p.each(function(w){K.intersectsRect(c,w)&&(M=K.unionRect(M,w))}),M&&(M&&(K.grow(M,o(1,1/r)),M.x=z(M.x*r)/r,M.y=z(M.y*r)/r,M.width=E(M.width*r)/r,M.height=E(M.height*r)/r,M=K.intersection(c,M)),M))){var u=e._canvas.getContext("2d");u.save(),u.lineCap=K.lineCap,u.lineJoin=K.lineJoin,n.translateAndScale(u,x,U,r),u.beginPath(),u.rect(M.x,M.y,M.width,M.height),u.clip(),u.clearRect(M.x,M.y,M.width,M.height),e.$5c(u,M),u.restore()}},O.$5c=function(u,f){var n,W,b=this;b._93db(u),b.each(function(a){b._56I[a._id]&&(n=b.getDataUI(a),n&&(W=n._79o(),(!f||K.intersectsRect(f,W))&&(n.$7c=!0,n._42(u),delete n.$7c)))}),b._92db(u)},O.enableDashFlow=function(v){var m=this;m.$3c==f&&(m.$3c=R(function(){m.$4c()},v||m.$2c||50))},O.disableDashFlow=function(){var v=this;s(v.$3c),delete v.$3c};var H=function(){var F=this,c=F._data,q=c instanceof $?"shape.":"edge.",B=c.s(q+"dash.pattern"),p=c.s(q+"dash.flow.reverse");if(B&&c.s(q+"dash")&&c.s(q+"dash.flow")&&F.$7c){var f=F.s(q+"dash.offset")||0,h=c.s(q+"dash.flow.step"),M=c.getStyleMap(),d=0;B.forEach(function(p){d+=p}),p&&(h=-h),f-=h,f%=d,M||(c._styleMap=M={}),M[q+"dash.offset"]=f}};g._80o=function(d){J.call(this,d),H.call(this)},_._80o=function(f){W.call(this,f),H.call(this)}}(this,Object);
!function(p){"use strict";var e="ht",f=p[e],L=f.Default,I=Math,Y=(I.PI,I.sin,I.cos,I.atan2,I.sqrt,I.max),r=I.floor,A=(I.round,I.ceil),h=f.Shape,S=(f.Edge,f.List),q=f.Style,T=f.graph,$=L.getInternal(),x=$.ui(),H=null,Z="prototype",d=p.clearInterval,J=p.setInterval,u=function(w){var v=w.data,F=this.dm();if(v&&"add"===w.kind){var g=F.$1c,Y=v instanceof h?"shape.":"edge.";g&&v.s(Y+"dash.flow")&&g.indexOf(v)<0&&g.push(v)}"clear"===w.kind&&(F.$1c=[])},O=function(G){var M=G.property,x=G.data,_=G.newValue,C=this.dm().$1c,r=x instanceof h?"s:shape.dash.flow":"s:edge.dash.flow";if(C&&M===r)if(_)C.indexOf(x)<0&&C.push(x);else for(var Q=C.length,k=0;Q>k;k++)if(C[k]===x){C.splice(k,1);break}},g=T.GraphView[Z],l=x.EdgeUI[Z],U=x.ShapeUI[Z],o=U._80o,i=l._80o,c=f.DataModel[Z],j=c.prepareRemove,C=g.setDataModel;q["edge.dash.flow.step"]==H&&(q["edge.dash.flow.step"]=3),q["shape.dash.flow.step"]==H&&(q["shape.dash.flow.step"]=3),c.prepareRemove=function(u){j.call(this,u);var i=u._dataModel,B=i.$1c;if(B)for(var V=B.length,_=0;V>_;_++)if(B[_]===u){B.splice(_,1);break}},g.setDataModel=function(q){var F=this,H=F._dataModel;if(H!==q){H&&(H.umm(u,F),H.umd(O,F),H.$1c=[]),q.mm(u,F),q.md(O,F);var B=q.$1c=[];q.each(function(V){var G=V instanceof h?"shape.":"edge.";V.s(G+"dash.flow")&&B.indexOf(V)<0&&B.push(V)}),C.call(F,q)}},g.setDashFlowInterval=function(W){var s=this,c=s.$2c;s.$2c=W,s.fp("dashFlowInterval",c,W),s.$3c!=H&&(d(s.$3c),delete s.$3c,s.enableDashFlow(W))},g.getDashFlowInterval=function(){return this.$2c},g.$4c=function(){var b,R,k,x=this,J=x.tx(),z=x.ty(),B=x._zoom,U=x.getWidth(),Q=x.getHeight(),a={x:-J/B,y:-z/B,width:U/B,height:Q/B},Z=x.dm().$1c,h=x._56I,j=new S;if(Z.forEach(function(S){h[S.getId()]&&(b=x.getDataUI(S),b&&(k=b._79o(),k&&j.add(k)))}),0!==j.size()&&(j.each(function(z){L.intersectsRect(a,z)&&(R=L.unionRect(R,z))}),R&&(R&&(L.grow(R,Y(1,1/B)),R.x=r(R.x*B)/B,R.y=r(R.y*B)/B,R.width=A(R.width*B)/B,R.height=A(R.height*B)/B,R=L.intersection(a,R)),R))){var u=x._canvas.getContext("2d");u.save(),u.lineCap=L.lineCap,u.lineJoin=L.lineJoin,$.translateAndScale(u,J,z,B),u.beginPath(),u.rect(R.x,R.y,R.width,R.height),u.clip(),u.clearRect(R.x,R.y,R.width,R.height),x.$5c(u,R),u.restore()}},g.$5c=function(c,p){var T,P,h=this;h._93db(c),h.each(function(l){h._56I[l._id]&&(T=h.getDataUI(l),T&&(P=T._79o(),(!p||L.intersectsRect(p,P))&&(T.$7c=!0,T._42(c),delete T.$7c)))}),h._92db(c)},g.enableDashFlow=function(n){var p=this;p.$3c==H&&(p.$3c=J(function(){p.$4c()},n||p.$2c||50))},g.disableDashFlow=function(){var F=this;d(F.$3c),delete F.$3c};var t=function(){var q=this,u=q._data,C=u instanceof h?"shape.":"edge.",K=u.s(C+"dash.pattern"),L=u.s(C+"dash.flow.reverse");if(K&&u.s(C+"dash")&&u.s(C+"dash.flow")&&q.$7c){var t=q.s(C+"dash.offset")||0,c=u.s(C+"dash.flow.step"),e=u.getStyleMap(),z=0;K.forEach(function(K){z+=K}),L&&(c=-c),t-=c,t%=z,e||(u._styleMap=e={}),e[C+"dash.offset"]=t}};l._80o=function(F){i.call(this,F),t.call(this)},U._80o=function(l){o.call(this,l),t.call(this)}}(this,Object);
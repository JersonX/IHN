!function(N,d,z){"use strict";var s="ht",q=N[s],E=null,V=Math,U=V.PI,D=V.cos,B=V.sin,b=V.abs,G=V.max,F=V.sqrt,A=1e-5,W=q.Default,Y=W.def,a=W.startAnim,_=W.createMatrix,K=W.transformVec,f=W.getInternal(),X=f.addMethod,r=f.superCall,T=f.toPointsArray,l=f.createNormals,M=f.toFloatArray,u=f.glMV,Q=f.batchShape,y=f.createNodeMatrix,H=f.getFaceInfo,L=f.transformAppend,o=f.drawFaceInfo,S=f.createAnim,P=f.cube(),Z=P.is,$=P.vs,C=P.uv,k=f.ui(),w=q.Node,I=q.Shape,J="h",p="v",i="front",e="back",n="left",x="right",g="top",h="bottom",m="dw.expanded",j=".expanded",v="dw.angle",t=".angle",R=function(X,c,t){Y(s+"."+X,c,t)},O=function(F,S,y){y?F.push(S.x,S.y):F.push(S.x,S.y,S.z)},c=[1,0,0],rd=function(f,u,F,B){var C,d,Z,m,M=0,Q=[];if(B)for(C=B.length;C>M;M+=3)d=B[M],Z=B[M+1],m=B[M+2],Q.push(new Hb([new Uj([u[3*d],u[3*d+1],u[3*d+2]],c,F?[F[2*d],F[2*d+1],0]:E),new Uj([u[3*Z],u[3*Z+1],u[3*Z+2]],c,F?[F[2*Z],F[2*Z+1],0]:E),new Uj([u[3*m],u[3*m+1],u[3*m+2]],c,F?[F[2*m],F[2*m+1],0]:E)],f));else for(C=u.length;C>M;M+=3)d=M,Z=M+1,m=M+2,Q.push(new Hb([new Uj([u[3*d],u[3*d+1],u[3*d+2]],c,F?[F[2*d],F[2*d+1],0]:E),new Uj([u[3*Z],u[3*Z+1],u[3*Z+2]],c,F?[F[2*Z],F[2*Z+1],0]:E),new Uj([u[3*m],u[3*m+1],u[3*m+2]],c,F?[F[2*m],F[2*m+1],0]:E)],f));return Q},xe=[n,i,x,e,g,h],rb=xe.concat("csg"),co=[0,6,12,18,24,30],Yb=function(N,r,t){for(var x=y(N),W=[],o=0;6>o;o++)for(var p=xe[o],P=co[o],l=t?r.getFaceUv(N,p):E,T=t?r.getFaceUvScale(N,p):E,u=t?r.getFaceUvOffset(N,p):E,O=0;2>O;O++){var F,L,B,J=Z[P+3*O],I=Z[P+3*O+1],i=Z[P+3*O+2];if(t){if(l){var D=8*o;F=[l[2*J-D],l[2*J+1-D],0],L=[l[2*I-D],l[2*I+1-D],0],B=[l[2*i-D],l[2*i+1-D],0]}else F=[C[2*J],C[2*J+1],0],L=[C[2*I],C[2*I+1],0],B=[C[2*i],C[2*i+1],0];T&&(F[0]*=T[0],F[1]*=T[1],L[0]*=T[0],L[1]*=T[1],B[0]*=T[0],B[1]*=T[1]),u&&(F[0]+=u[0],F[1]+=u[1],L[0]+=u[0],L[1]+=u[1],B[0]+=u[0],B[1]+=u[1])}W.push(new Hb([new Uj(K([$[3*J],$[3*J+1],$[3*J+2]],x),c,F),new Uj(K([$[3*I],$[3*I+1],$[3*I+2]],x),c,L),new Uj(K([$[3*i],$[3*i+1],$[3*i+2]],x),c,B)],N))}return tq.$15n(W)},Kk=function(d,F){var U,N=d.data.getAttaches();if(N&&N.each(function(h){h instanceof jn&&h.s("attach.operation")&&(U||(U=[]),U.push(h))}),U){var t;xe.forEach(function(P){var l=rd(P,d[P].vs,d[P].tuv);t=t?t.concat(l):l}),t=tq.$15n(t),U.forEach(function(q){var p=q.s("attach.operation");t[p]&&(t=t[p](Yb(q,d.gv,d.csg.tuv)))}),xe.forEach(function(W){W=d[W],W.vs=[],W.tuv&&(W.tuv=[])}),t.$19n().forEach(function(C){var h=C.$10n;if(h instanceof jn){if(h.s("attach.cull"))return;h="csg"}for(var i=d[h],N=i.vs,X=i.tuv,y=C.$9n,V=2;V<y.length;V++)O(N,y[0].$24n),O(N,y[V-1].$24n),O(N,y[V].$24n),X&&(O(X,y[0].uv,!0),O(X,y[V-1].uv,!0),O(X,y[V].uv,!0))})}rb.forEach(function(r){var p=d[r];p.visible&&p.vs.length?(p.ns=l(p.vs),M(p,"vs"),M(p,"tuv")):delete d[r]}),F&&(Q(d,E,F),d.clear())};X(W,{createFrameModel:function(r,C,_,U){r=r==E?.07:r,C=C==E?r:C,_=_==E?r:_,U=U?U:{};var h=U.top,n=U.bottom,l=U.left,v=U.right,N=U.front,z=U.back,T=[],c=[];return N===!0?(T.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),c.push(0,0,0,1,1,1,1,1,1,0,0,0)):N===!1||(T.push(-.5,.5,.5,-.5,-.5,.5,-.5+r,-.5,.5,-.5+r,-.5,.5,-.5+r,.5,.5,-.5,.5,.5,.5-r,.5,.5,.5-r,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-r,.5,.5,-.5+r,.5,.5,-.5+r,.5-C,.5,.5-r,.5-C,.5,.5-r,.5-C,.5,.5-r,.5,.5,-.5+r,.5,.5,-.5+r,-.5+C,.5,-.5+r,-.5,.5,.5-r,-.5,.5,.5-r,-.5,.5,.5-r,-.5+C,.5,-.5+r,-.5+C,.5),c.push(0,0,0,1,r,1,r,1,r,0,0,0,1-r,0,1-r,1,1,1,1,1,1,0,1-r,0,r,0,r,C,1-r,C,1-r,C,1-r,0,r,0,r,1-C,r,1,1-r,1,1-r,1,1-r,1-C,r,1-C)),z===!0?(T.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),c.push(1,0,0,1,1,1,0,1,1,0,0,0)):z===!1||(T.push(-.5,.5,-.5,-.5+r,-.5,-.5,-.5,-.5,-.5,-.5+r,-.5,-.5,-.5,.5,-.5,-.5+r,.5,-.5,.5-r,.5,-.5,.5,-.5,-.5,.5-r,-.5,-.5,.5,-.5,-.5,.5-r,.5,-.5,.5,.5,-.5,-.5+r,.5,-.5,.5-r,.5-C,-.5,-.5+r,.5-C,-.5,.5-r,.5-C,-.5,-.5+r,.5,-.5,.5-r,.5,-.5,-.5+r,-.5+C,-.5,.5-r,-.5,-.5,-.5+r,-.5,-.5,.5-r,-.5,-.5,-.5+r,-.5+C,-.5,.5-r,-.5+C,-.5),c.push(1,0,1-r,1,1,1,1-r,1,1,0,1-r,0,r,0,0,1,r,1,0,1,r,0,0,0,1-r,0,r,C,1-r,C,r,C,1-r,0,r,0,1-r,1-C,r,1,1-r,1,r,1,1-r,1-C,r,1-C)),l===!0?(T.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),c.push(0,0,0,1,1,1,1,1,1,0,0,0)):l===!1||(T.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+_,-.5,-.5,-.5+_,-.5,.5,-.5+_,-.5,.5,-.5,-.5,.5,.5-_,-.5,-.5,.5-_,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-_,-.5,.5,-.5+_,-.5,.5-C,-.5+_,-.5,.5-C,.5-_,-.5,.5-C,.5-_,-.5,.5,.5-_,-.5,.5,-.5+_,-.5,-.5+C,-.5+_,-.5,-.5,-.5+_,-.5,-.5,.5-_,-.5,-.5,.5-_,-.5,-.5+C,.5-_,-.5,-.5+C,-.5+_),c.push(0,0,0,1,_,1,_,1,_,0,0,0,1-_,0,1-_,1,1,1,1,1,1,0,1-_,0,_,0,_,C,1-_,C,1-_,C,1-_,0,_,0,_,1-C,_,1,1-_,1,1-_,1,1-_,1-C,_,1-C)),v===!0?(T.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),c.push(1,0,0,1,1,1,0,1,1,0,0,0)):v===!1||(T.push(.5,.5,-.5,.5,-.5,-.5+_,.5,-.5,-.5,.5,-.5,-.5+_,.5,.5,-.5,.5,.5,-.5+_,.5,.5,.5-_,.5,-.5,.5,.5,-.5,.5-_,.5,-.5,.5,.5,.5,.5-_,.5,.5,.5,.5,.5,-.5+_,.5,.5-C,.5-_,.5,.5-C,-.5+_,.5,.5-C,.5-_,.5,.5,-.5+_,.5,.5,.5-_,.5,-.5+C,-.5+_,.5,-.5,.5-_,.5,-.5,-.5+_,.5,-.5,.5-_,.5,-.5+C,-.5+_,.5,-.5+C,.5-_),c.push(1,0,1-_,1,1,1,1-_,1,1,0,1-_,0,_,0,0,1,_,1,0,1,_,0,0,0,1-_,0,_,C,1-_,C,_,C,1-_,0,_,0,1-_,1-C,_,1,1-_,1,_,1,1-_,1-C,_,1-C)),h===!0?(T.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),c.push(1,1,1,0,0,0,0,0,0,1,1,1)):h===!1||(T.push(.5,.5,.5,.5,.5,-.5,.5-r,.5,-.5,.5-r,.5,-.5,.5-r,.5,.5,.5,.5,.5,-.5+r,.5,.5,-.5+r,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+r,.5,.5,.5-r,.5,.5,.5-r,.5,.5-_,-.5+r,.5,.5-_,-.5+r,.5,.5-_,-.5+r,.5,.5,.5-r,.5,.5,.5-r,.5,-.5+_,.5-r,.5,-.5,-.5+r,.5,-.5,-.5+r,.5,-.5,-.5+r,.5,-.5+_,.5-r,.5,-.5+_),c.push(1,1,1,0,1-r,0,1-r,0,1-r,1,1,1,r,1,r,0,0,0,0,0,0,1,r,1,1-r,1,1-r,1-_,r,1-_,r,1-_,r,1,1-r,1,1-r,_,1-r,0,r,0,r,0,r,_,1-r,_)),n===!0?(T.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),c.push(1,0,0,1,1,1,0,1,1,0,0,0)):n===!1||(T.push(.5,-.5,.5,.5-r,-.5,-.5,.5,-.5,-.5,.5-r,-.5,-.5,.5,-.5,.5,.5-r,-.5,.5,-.5+r,-.5,.5,-.5,-.5,-.5,-.5+r,-.5,-.5,-.5,-.5,-.5,-.5+r,-.5,.5,-.5,-.5,.5,.5-r,-.5,.5,-.5+r,-.5,.5-_,.5-r,-.5,.5-_,-.5+r,-.5,.5-_,.5-r,-.5,.5,-.5+r,-.5,.5,.5-r,-.5,-.5+_,-.5+r,-.5,-.5,.5-r,-.5,-.5,-.5+r,-.5,-.5,.5-r,-.5,-.5+_,-.5+r,-.5,-.5+_),c.push(1,0,1-r,1,1,1,1-r,1,1,0,1-r,0,r,0,0,1,r,1,0,1,r,0,0,0,1-r,0,r,_,1-r,_,r,_,1-r,0,r,0,1-r,1-_,r,1,1-r,1,r,1,1-r,1-_,r,1-_)),{vs:T,uv:c}}}),X(q.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":z,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":U/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),xe.forEach(function(S){var k={};k[S+j]=!1,k[S+".toggleable"]=!1,k[S+".axis"]=n,k[S+".start"]=0,k[S+".end"]=U/2,k[S+t]=0,X(q.Style,k,!0)});var tq=function(){this.$4n=[]};tq.$15n=function(t){var l=new tq;return l.$4n=t,l},tq.prototype={clone:function(){var x=new tq;return x.$4n=this.$4n.map(function(h){return h.clone()}),x},$19n:function(){return this.$4n},union:function(l){var s=new yc(this.clone().$4n),E=new yc(l.clone().$4n);return s.$3n(E),E.$3n(s),E.$6n(),E.$3n(s),E.$6n(),s.$7n(E.$2n()),tq.$15n(s.$2n())},subtract:function(R){var u=new yc(this.clone().$4n),i=new yc(R.clone().$4n);return u.$6n(),u.$3n(i),i.$3n(u),i.$6n(),i.$3n(u),i.$6n(),u.$7n(i.$2n()),u.$6n(),tq.$15n(u.$2n())},intersect:function(a){var b=new yc(this.clone().$4n),n=new yc(a.clone().$4n);return b.$6n(),n.$3n(b),n.$6n(),b.$3n(n),n.$3n(b),b.$7n(n.$2n()),b.$6n(),tq.$15n(b.$2n())},inverse:function(){var x=this.clone();return x.$4n.map(function(v){v.flip()}),x}},tq.cube=function(H){H=H||{};var n=new Ok(H.center||[0,0,0]),v=H.radius?H.radius.length?H.radius:[H.radius,H.radius,H.radius]:[1,1,1];return tq.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(q){return new Hb(q[0].map(function(l){var s=new Ok(n.x+v[0]*(2*!!(1&l)-1),n.y+v[1]*(2*!!(2&l)-1),n.z+v[2]*(2*!!(4&l)-1));return new Uj(s,new Ok(q[1]))}))}))},tq.sphere=function(r){function P(q,j){q*=2*U,j*=U;var c=new Ok(D(q)*B(j),D(j),B(q)*B(j));M.push(new Uj(E.$20n(c.$21n(o)),c))}r=r||{};for(var M,E=new Ok(r.center||[0,0,0]),o=r.radius||1,L=r.slices||16,C=r.stacks||8,k=[],Q=0;L>Q;Q++)for(var u=0;C>u;u++)M=[],P(Q/L,u/C),u>0&&P((Q+1)/L,u/C),C-1>u&&P((Q+1)/L,(u+1)/C),P(Q/L,(u+1)/C),k.push(new Hb(M));return tq.$15n(k)},tq.cylinder=function(j){function s(w,g,k){var m=2*g*U,X=G.$21n(D(m)).$20n(O.$21n(B(m))),F=A.$20n(n.$21n(w)).$20n(X.$21n(Z)),M=X.$21n(1-b(k)).$20n(l.$21n(k));return new Uj(F,M)}j=j||{};for(var A=new Ok(j.start||[0,-1,0]),J=new Ok(j.end||[0,1,0]),n=J.$13n(A),Z=j.radius||1,F=j.slices||16,l=n.$14n(),d=b(l.y)>.5,G=new Ok(d,!d,0).$12n(l).$14n(),O=G.$12n(l).$14n(),E=new Uj(A,l.$11n()),m=new Uj(J,l.$14n()),p=[],h=0;F>h;h++){var z=h/F,M=(h+1)/F;p.push(new Hb([E,s(0,z,-1),s(0,M,-1)])),p.push(new Hb([s(0,M,0),s(0,z,0),s(1,z,0),s(1,M,0)])),p.push(new Hb([m,s(1,M,1),s(1,z,1)]))}return tq.$15n(p)};var Ok=function(T,g,t){var W=this;3==arguments.length?(W.x=T,W.y=g,W.z=t):"x"in T?(W.x=T.x,W.y=T.y,W.z=T.z):(W.x=T[0],W.y=T[1],W.z=T[2])};Ok.prototype={clone:function(){return new Ok(this.x,this.y,this.z)},$11n:function(){return new Ok(-this.x,-this.y,-this.z)},$20n:function(Y){return new Ok(this.x+Y.x,this.y+Y.y,this.z+Y.z)},$13n:function(W){return new Ok(this.x-W.x,this.y-W.y,this.z-W.z)},$21n:function(Y){return new Ok(this.x*Y,this.y*Y,this.z*Y)},$16n:function(b){return new Ok(this.x/b,this.y/b,this.z/b)},$23n:function(k){return this.x*k.x+this.y*k.y+this.z*k.z},lerp:function(v,r){return this.$20n(v.$13n(this).$21n(r))},length:function(){return F(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(D){var t=this;return new Ok(t.y*D.z-t.z*D.y,t.z*D.x-t.x*D.z,t.x*D.y-t.y*D.x)}};var Uj=function(Q,x,p){var M=this;M.$24n=new Ok(Q),M.$22n=new Ok(x),M.uv=p?new Ok(p):null};Uj.prototype={clone:function(){var g=this;return new Uj(g.$24n.clone(),g.$22n.clone(),g.uv?g.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(Y,z){var d=this;return new Uj(d.$24n.lerp(Y.$24n,z),d.$22n.lerp(Y.$22n,z),d.uv?d.uv.lerp(Y.uv,z):null)}};var Ul=function(V,q){this.$22n=V,this.w=q};Ul.$17n=function(P,Q,f){var g=Q.$13n(P).$12n(f.$13n(P)).$14n();return new Ul(g,g.$23n(P))},Ul.prototype={clone:function(){return new Ul(this.$22n.clone(),this.w)},flip:function(){var j=this;j.$22n=j.$22n.$11n(),j.w=-j.w},$5n:function(d,w,h,W,N){for(var p=this,g=0,e=1,k=2,O=3,M=0,P=[],q=0;q<d.$9n.length;q++){var b=p.$22n.$23n(d.$9n[q].$24n)-p.w,Q=-A>b?k:b>A?e:g;M|=Q,P.push(Q)}switch(M){case g:(p.$22n.$23n(d.$8n.$22n)>0?w:h).push(d);break;case e:W.push(d);break;case k:N.push(d);break;case O:for(var _=[],J=[],q=0;q<d.$9n.length;q++){var x=(q+1)%d.$9n.length,X=P[q],o=P[x],f=d.$9n[q],R=d.$9n[x];if(X!=k&&_.push(f),X!=e&&J.push(X!=k?f.clone():f),(X|o)==O){var b=(p.w-this.$22n.$23n(f.$24n))/p.$22n.$23n(R.$24n.$13n(f.$24n)),j=f.$18n(R,b);_.push(j),J.push(j.clone())}}_.length>=3&&W.push(new Hb(_,d.$10n)),J.length>=3&&N.push(new Hb(J,d.$10n))}}};var Hb=function(n,C){var b=this;b.$9n=n,b.$10n=C,b.$8n=Ul.$17n(n[0].$24n,n[1].$24n,n[2].$24n)};Hb.prototype={clone:function(){var k=this.$9n.map(function(N){return N.clone()});return new Hb(k,this.$10n)},flip:function(){this.$9n.reverse().map(function(A){A.flip()}),this.$8n.flip()}};var yc=function(b){var p=this;p.$8n=null,p.front=null,p.back=null,p.$4n=[],b&&p.$7n(b)};yc.prototype={clone:function(){var a=this,c=new yc;return c.$8n=a.$8n&&a.$8n.clone(),c.front=a.front&&a.front.clone(),c.back=a.back&&a.back.clone(),c.$4n=a.$4n.map(function(w){return w.clone()}),c},$6n:function(){for(var v=this,s=0;s<v.$4n.length;s++)v.$4n[s].flip();v.$8n.flip(),v.front&&v.front.$6n(),v.back&&v.back.$6n();var F=v.front;v.front=v.back,v.back=F},$1n:function(N){var p=this;if(!p.$8n)return N.slice();for(var U=[],v=[],x=0;x<N.length;x++)p.$8n.$5n(N[x],U,v,U,v);return p.front&&(U=p.front.$1n(U)),v=p.back?p.back.$1n(v):[],U.concat(v)},$3n:function(N){var S=this;S.$4n=N.$1n(S.$4n),S.front&&S.front.$3n(N),S.back&&S.back.$3n(N)},$2n:function(){var r=this,k=r.$4n.slice();return r.front&&(k=k.concat(r.front.$2n())),r.back&&(k=k.concat(r.back.$2n())),k},$7n:function(M){var P=this;if(M.length){P.$8n||(P.$8n=M[0].$8n.clone());for(var V=[],S=[],s=0;s<M.length;s++)this.$8n.$5n(M[s],P.$4n,P.$4n,V,S);V.length&&(P.front||(P.front=new yc),this.front.$7n(V)),S.length&&(P.back||(P.back=new yc),P.back.$7n(S))}}};var Hd="symbol",Ep=q.Symbol=function(x,a,d){var i=this;r(Ep,i),i.s3(20,20,20),i.s({"all.visible":!1,shape:"rect"}),i.setIcon(x,a,d)};R("Symbol",w,{setIcon:function(N,U,n){var A,J=this;return Ep.superClass.setIcon.call(J,N),N?(A={for3d:!0,face:"center",position:44,names:[N]},n&&(A.transaprent=!0),U&&(A.autorotate=U),J.addStyleIcon(Hd,A)):J.removeStyleIcon(Hd),J.setWidth(f.getImageWidth(W.getImage(N),J)||20),A}});var jn=q.CSGNode=function(){r(jn,this),this.s({shape:"rect","attach.thickness":1.001})},Hr={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};R("CSGNode",w,{_22Q:function(){return Zr},onPropertyChanged:function(e){var B=this,C=B.getHost();jn.superClass.onPropertyChanged.call(B,e),Hr[e.property]&&(C instanceof Nk||C instanceof jn)&&C.fp("csgNodeChange",!0,!1)}});var Zr=function(T,A){r(Zr,this,[T,A])};Y(Zr,k.Node3dUI,{_80o:function(y,B,l){var r=this;r._shape3d?Zr.superClass._80o.call(r,y,B,l):(u(r.gv),rb.forEach(function(m){o(r,y,B,r[m],l)}))},validate:function(m,z){var k=this,i=k.gv,s=k.data;if(s.s("shape3d"))return Zr.superClass.validate.call(k,m,z),k._shape3d=!0,void 0;k._shape3d=!1;var U=y(s,i.getMat(s)),D=m&&m.uv;k.vf2("csg",D);for(var j=0;6>j;j++)for(var I=xe[j],w=co[j],r=k.vf2(I,D,z),F=r.mat||U,Q=r.vs,a=r.uv,W=r.tuv,l=0;2>l;l++){var g=Z[w+3*l],e=Z[w+3*l+1],f=Z[w+3*l+2];if(L(Q,F,[$[3*g],$[3*g+1],$[3*g+2]]),L(Q,F,[$[3*e],$[3*e+1],$[3*e+2]]),L(Q,F,[$[3*f],$[3*f+1],$[3*f+2]]),W)if(a){var R=8*j;W.push(a[2*g-R],a[2*g+1-R],a[2*e-R],a[2*e+1-R],a[2*f-R],a[2*f+1-R])}else W.push(C[2*g],C[2*g+1],C[2*e],C[2*e+1],C[2*f],C[2*f+1])}Kk(k,m,z)},vf2:function(X,U,h){var $,R=this,M=R.gv.getFaceVisible(R.data,X);return $=H(R,X,h),$.vs=[],$.tuv=M&&($.texture||U)?[]:E,$.visible=M,$}});var Nk=q.CSGShape=function(){var v=this;r(Nk,v),v.s({"shape.background":E,"shape.border.width":8}),v.setTall(240),v.setElevation(120),v.setThickness(14)};R("CSGShape",I,{IRotatable:!1,_22Q:function(){return xk},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var xk=function(R,x){r(xk,this,[R,x])};Y(xk,k.Shape3dUI,{_80o:function(P,h,J){var f=this;f.undrawable||(u(f.gv),rb.forEach(function(e){o(f,P,h,f[e],J)}))},validate:function(R,j){var U=this,v=U.data,q=v.getPoints();if(U.undrawable=q.size()<2)return U.clear(),void 0;var X=v.isClosePath(),$=G(v._thickness/2,A),P=T(q,E,E,X);rb.forEach(function(H){U.vf(H,R&&R.uv,!0,j)}),X&&(U.left.visible=!1,U.right.visible=!1),U._12O(P,$),U._20Q(P),Kk(U,R,j)}});var cm=q.DoorWindow=function(){var X=this;r(cm,X),X.setElevation(100),X.s3(100,200,14)};R("DoorWindow",jn,{IDoorWindow:!0,toggle:function(B){this.setExpanded(!this.s(m),B)},isExpanded:function(){return this.s(m)},setExpanded:function(E,U){var y,i=this,T=i.$25n,s=i.getDataModel(),t=i.s(m);if(s&&(y=s.getHistoryManager()),T&&(T.stop(!0),delete i.$25n),t!==E){y&&y.beginInteraction();var o=E?i.s("dw.end"):i.s("dw.start");i.s(m,E),U=S(U),U?(t=i.s(v),U.action=function(z){i.s(v,t+(o-t)*z)},U.finishFunc=function(){y&&y.endInteraction()},i.$25n=a(U)):(i.s(v,o),y&&y.endInteraction())}},getMat:function(){var A=this,d=A.s("dw.s3"),I=A.s("dw.t3"),m=A.s("dw.flip"),y=A.s(v);if(d||y||I||m){var s=[];if(m&&s.push({r3:[0,U,0]}),d&&s.push({s3:d}),y){d=A.s3();var i=A.s("dw.axis"),L=d[0]/2,c=d[1]/2;d[2]/2,i===n?s.push({t3:[L,0,0]},{r3:[0,-y,0]},{t3:[-L,0,0]}):i===x?s.push({t3:[-L,0,0]},{r3:[0,y,0]},{t3:[L,0,0]}):i===g?s.push({t3:[0,-c,0]},{r3:[-y,0,0]},{t3:[0,c,0]}):i===h?s.push({t3:[0,c,0]},{r3:[y,0,0]},{t3:[0,-c,0]}):i===p?s.push({r3:[0,y,0]}):i===J&&s.push({r3:[y,0,0]})}return I&&s.push({t3:I}),_(s)}return E}});var wc=q.CSGBox=function(){var x=this;r(wc,x),x.setElevation(100),x.s3(100,200,100)};R("CSGBox",jn,{ICSGBox:!0,toggleFace:function(O,V){this.setFaceExpanded(O,!this.s(O+j),V)},isFaceExpanded:function(s){return this.s(s+j)},setFaceExpanded:function(k,o,Y){var F=this,z=F.$25n,I=F.s(k+j);if(z&&(z.stop(!0),delete F.$25n),I!==o){var x=o?F.s(k+".end"):F.s(k+".start");F.s(k+j,o),Y=S(Y),Y?(I=F.s(k+t),Y.action=function(i){F.s(k+t,I+(x-I)*i)},F.$25n=a(Y)):F.s(k+t,x)}},getFaceMat:function(Q){var Z=this,c=Z.s(Q+t);if(!c)return E;var d=Z.s(Q+".axis"),r=Z.s3(),O=r[0]/2,F=r[1]/2,T=r[2]/2,a=[];return Q===i&&(d===n?a.push({t3:[O,0,-T]},{r3:[0,-c,0]},{t3:[-O,0,T]}):d===x?a.push({t3:[-O,0,-T]},{r3:[0,c,0]},{t3:[O,0,T]}):d===g?a.push({t3:[0,-F,-T]},{r3:[-c,0,0]},{t3:[0,F,T]}):d===h?a.push({t3:[0,F,-T]},{r3:[c,0,0]},{t3:[0,-F,T]}):d===p?a.push({t3:[0,0,-T]},{r3:[0,c,0]},{t3:[0,0,T]}):d===J&&a.push({t3:[0,0,-T]},{r3:[c,0,0]},{t3:[0,0,T]})),Q===e&&(d===n?a.push({t3:[-O,0,T]},{r3:[0,-c,0]},{t3:[O,0,-T]}):d===x?a.push({t3:[O,0,T]},{r3:[0,c,0]},{t3:[-O,0,-T]}):d===g?a.push({t3:[0,-F,T]},{r3:[c,0,0]},{t3:[0,F,-T]}):d===h?a.push({t3:[0,F,T]},{r3:[-c,0,0]},{t3:[0,-F,-T]}):d===p?a.push({t3:[0,0,T]},{r3:[0,c,0]},{t3:[0,0,-T]}):d===J&&a.push({t3:[0,0,T]},{r3:[c,0,0]},{t3:[0,0,-T]})),Q===n&&(d===n?a.push({t3:[O,0,T]},{r3:[0,-c,0]},{t3:[-O,0,-T]}):d===x?a.push({t3:[O,0,-T]},{r3:[0,c,0]},{t3:[-O,0,T]}):d===g?a.push({t3:[O,-F,0]},{r3:[0,0,-c]},{t3:[-O,F,0]}):d===h?a.push({t3:[O,F,0]},{r3:[0,0,c]},{t3:[-O,-F,0]}):d===p?a.push({t3:[O,0,0]},{r3:[0,c,0]},{t3:[-O,0,0]}):d===J&&a.push({t3:[O,0,0]},{r3:[0,0,c]},{t3:[-O,0,0]})),Q===x&&(d===n?a.push({t3:[-O,0,-T]},{r3:[0,-c,0]},{t3:[O,0,T]}):d===x?a.push({t3:[-O,0,T]},{r3:[0,c,0]},{t3:[O,0,-T]}):d===g?a.push({t3:[-O,-F,0]},{r3:[0,0,c]},{t3:[O,F,0]}):d===h?a.push({t3:[-O,F,0]},{r3:[0,0,-c]},{t3:[O,-F,0]}):d===p?a.push({t3:[-O,0,0]},{r3:[0,c,0]},{t3:[O,0,0]}):d===J&&a.push({t3:[-O,0,0]},{r3:[0,0,c]},{t3:[O,0,0]})),Q===g&&(d===n?a.push({t3:[O,-F,0]},{r3:[0,0,c]},{t3:[-O,F,0]}):d===x?a.push({t3:[-O,-F,0]},{r3:[0,0,-c]},{t3:[O,F,0]}):d===g?a.push({t3:[0,-F,T]},{r3:[-c,0,0]},{t3:[0,F,-T]}):d===h?a.push({t3:[0,-F,-T]},{r3:[c,0,0]},{t3:[0,F,T]}):d===p?a.push({t3:[0,-F,0]},{r3:[0,0,c]},{t3:[0,F,0]}):d===J&&a.push({t3:[0,-F,0]},{r3:[c,0,0]},{t3:[0,F,0]})),Q===h&&(d===n?a.push({t3:[O,F,0]},{r3:[0,0,-c]},{t3:[-O,-F,0]}):d===x?a.push({t3:[-O,F,0]},{r3:[0,0,c]},{t3:[O,-F,0]}):d===g?a.push({t3:[0,F,-T]},{r3:[-c,0,0]},{t3:[0,-F,T]}):d===h?a.push({t3:[0,F,T]},{r3:[c,0,0]},{t3:[0,-F,-T]}):d===p?a.push({t3:[0,F,0]},{r3:[0,0,c]},{t3:[0,-F,0]}):d===J&&a.push({t3:[0,F,0]},{r3:[c,0,0]},{t3:[0,-F,0]})),_(a)}})}(this,Object);
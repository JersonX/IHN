!function(e,Q,o){"use strict";var Z="ht";if(!e[Z]){!function(){for(var x=0,B=["ms","moz","webkit","o"],c=0;c<B.length&&!e.requestAnimationFrame;++c)e.requestAnimationFrame=e[B[c]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[B[c]+"CancelAnimationFrame"]||e[B[c]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(c){var D=(new Date).getTime(),i=Math.max(0,16-(D-x)),Z=e.setTimeout(function(){c(D+i)},i);return x=D+i,Z}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(c){R(c)})}();var l,k,u,U,f=e.document,E=null,O=e[Z]={},h=e[Z+"config"],m=O.Default=h&&h.Default||{},s=O.Style=h&&h.Style||{},P=O.Color=h&&h.Color||{},D=O.IsGetter=h&&h.IsGetter||{},M=Math,g=M.round,q=M.floor,N=M.ceil,d=M.sqrt,t=M.max,S=M.min,n=M.abs,z=M.cos,H=M.acos,C=M.sin,L=M.pow,j=M.asin,r=M.PI,G=2*r,F=r/2,X=M.tan,p=M.atan2,c=M.random,K=!1,y=!1,v=e.parseInt||global.parseInt,I="2016-04-15",W=function(d){return d*d},B=e.setTimeout,R=e.clearTimeout,x=e.location,J=e.navigator?e.navigator.userAgent.toLowerCase():"",b=function(v){return v.test(J)},_=b(/msie/)||b(/trident/),i=b(/msie 10/),V=b(/firefox/),T=b(/mac/),Y=m.isTouchable===o?f?"ontouchend"in f:!1:m.isTouchable,w="default",A="single",a="multiple",$="front",rj="back",Bg="left",Bk="right",wi="top",_g="bottom",ss="center",mi="eye",Qk="middle",ao="east",mp="west",bg="north",Lg="none",Rk="px",nc="absolute",Lj="border",Xj="triangle",_j="rect",jj="circle",Ul="cylinder",Pf="shape",ni="items",Ap="normal",Hg="remove",Ql="clear",jm="width",Kn="height",ve="ingroup",Fl="check",Wd="uncheck",Vi="radio",jf="radioOn",qb="radioOff",Jl="points",dk="values",Qb="series",Gq="body",uq="label",Xo="label2",Nc="note",Vm="note2",Cf="icons",Zd="labelFont",wh="labelColor",uc="labelSelectColor",Xi="note.expanded",Ad="note2.expanded",hc="edge.expanded",Hj="edge.points",_m="edge.type",xb="rotation",Em="getRotation",Cn="setRotation",zj="hidden",ip="visible",$e="tuv",aq="no",Fp="select",Gb="currentSubGraph",_n="selectBackground",Gp="autoMakeVisible",kp="autoHideScrollBar",js="scrollBarColor",Ak="scrollBarSize",Kk="indent",Ig="rowHeight",Sr="columnLineColor",sj="rowLineColor",xk="columnLineVisible",Uo="rowLineVisible",Oj="visibleFunc",gf="expandIcon",ih="collapseIcon",wq="checkMode",ug="sortFunc",Wk="editable",Ok="batchEditable",nl="tristate",yb="asc",wn="desc",pj="position",Um="elevation",ki="children",gn="translateX",lk="translateY",ro="dataModel",Jg="shape3d",Qe="shape3d.resolution",fb="shape3d.visible",Dq="shape3d.from.visible",uh="shape3d.to.visible",hn="shape3d.top.visible",yj="shape3d.bottom.visible",lj="repeat.uv.length",tg="serializeValue",Fo="deserializeValue",ae="centerUniform",Xp="rgba(255,255,255,0)",ph="style",jc="attr",ai="field",Li="string",Tk="boolean",fm="color",qd="int",fk="number",en="ew-resize",Hf="ns-resize",cg="pointer",ic="auto",Nd="mousedown",hd="mousemove",Wo="mouseup",Kc="mouseout",Pm="touchstart",qj="touchmove",Rq="touchend",Yo="keydown",li="keyup",xj=V?"DOMMouseScroll":"mousewheel",go=Y?[Pm,qj,Rq]:[Yo,li,Nd,hd,Wo,Kc,xj,"contextmenu"],bh=E,Qn=E,_d=E,bi=Wo.length,pd=function(){_d&&(R(_d.timeout),_d=E)},Zr=function(){_d&&sg(_d.e,_d.info)};e.addEventListener&&(Y||(e.addEventListener(Kc,function(){pd()},!1),e.addEventListener(xj,function(){Bb()},!1)),e.addEventListener(li,function(z){91===z.keyCode?Fc={}:delete Fc[z.keyCode]},!0),e.addEventListener(Yo,function(H){Fc[H.keyCode]=!0},!0));var Dg,hk,am,te=!1,Jr=E,em=E,yn={},Bf={},wj={},qf={},Il={},Fc={},je={},ue={},lm={},df=[],qi={},cj=E,ir=E,ch=function(){},Cb=function(){throw"Oops!"},No=[0,0,0],tc=[0,0,0,0],Uk={x:0,y:0,width:0,height:0},gr=E,_h=E,Ir=E,to=function(t){_h&&!t._72O&&(Ir||(Ir={}),Ir[t._72O=Br()]=t),Dg!=E?ap()<.05&&U&&!hk&&(Xh=pd):Xh=_o},Pq=function(A,P,W,F){_h||(_h={});var w=_h[A];if(w){if(w.url===P)return;w.image.onload=ch,w.image.onerror=ch}var c=new Image;_h[A]={image:c,url:P},c.onload=function(){W&&(c.width=W),F&&(c.height=F),m.handleImageLoaded(A,c),Qg(A,c)},c.onerror=function(){Qg(A,m.handleUnfoundImage(A,P)||E)},c.src=P},Qg=function($,b){if(Bf[$]=b,delete _h[$],Wb(_h)&&(_h=E,Ir)){for(var H in Ir){var s=Ir[H];s.invalidateAll&&s.invalidateAll(),s.redraw&&s.redraw(),s.iv(),delete s._72O}Ir=E}if(b&&Ir)for(var H in Ir){var s=Ir[H];s.invalidateAll&&s.invalidateAll(),s.redraw&&s.redraw(),s.iv()}},Vk=function(){return e.performance&&e.performance.now?e.performance.now():Date.now()},We=function(F,V){V?R(F):e.cancelAnimationFrame(F)},tp=function(u,c,E){return{width:u,height:c,comps:Pn(E)?E:[E]}},pl=function(m,$){return{type:jj,rect:[m,$,1.6,1.6],borderWidth:1,borderColor:rg,gradient:cf,gradientColor:xd,background:rg}},xs=function(C,k){return tp(16,16,{type:Xj,rect:[4,4,10,8],background:C,rotation:k?1.57:3.14})},Hn=function(E,o){return tp(16,16,{type:Xj,rect:[4,4,8,7],background:E,rotation:o?3.14:0})},ri=function(m){var M=m._orientation;return"horizontal"===M||"h"===M},Uc=function(V){O.z=k=V},Pr=function(X){var G=2,L=0;for(var A in X)A.length===G&&v(A,32)===pi&&(cj=ir=X[A]),L++;return L},Kp=function(v,$,U){return U?{x:v-U,y:$-U,width:2*U+1,height:2*U+1}:Y?{x:v-5,y:$-5,width:11,height:11}:{x:v-1,y:$-1,width:3,height:3}},qm=function(E){return(/ble$/.test(E)||/ed$/.test(E)||D[E]?"is":"get")+E.charAt(0).toUpperCase()+E.slice(1)},ti=function(g){return"set"+g.charAt(0).toUpperCase()+g.slice(1)},lh=function(O){return typeof O===Li||O instanceof String},fr=function(r){return typeof r===fk},_o=function(g){return typeof g===Tk},ui=function(R){return R&&"object"==typeof R},nh=function(D){return"function"==typeof D},Pn=function(S){return S instanceof Array},ke=function(j){return j instanceof dj},Xb=function(j){return Pn(j)?new dj(j):j},as=function(q){return q instanceof um},Ar=function(b){return b instanceof Zl},Fm=function(J){return J instanceof cq},zq=function(H){return H&&"IFRAME"===H.tagName},cd=function(X){return X==E?X:parseFloat(X.toFixed(2))},_e=function(s,d,W){var F,j=d.length;if(W)for(var D=0;W>D;D++)if(3===j)s.push(d[0]),s.push(d[1]),s.push(d[2]);else for(F=0;j>F;F++)s.push(d[F]);else if(3===j)s.push(d[0]),s.push(d[1]),s.push(d[2]);else for(F=0;j>F;F++)s.push(d[F])},Xc=function(p){return p?ui(p)?p:{}:!1},Jh=function(w,Q,s){var j,b=ui(w)?w:w.prototype;for(j in Q)s&&b[j]!==o||(b[j]=Q[j]);return w},Hd=function(X){return String.fromCharCode(X)},Cm=function(J){for(var z,x=0,M="";x<J.length;x++)z=J[J.length-1-x],"%"===z?z="'":"a"===z?z='"':"]"===z&&(z="\\"),M+=Hd(z.charCodeAt(0)-1);return M},zo=function(b,B,D){b.superClass.constructor.apply(B,D)},Wb=function(c){for(var Z in c)return!1;return!0},ye=function(P){return P?0===P.length:!0},cm=function(g,M){return g.x===M.x&&g.y===M.y&&g.width===M.width&&g.height===M.height},vg=function(m,B,V){return B>m?B:m>V?V:m},ap=function(){var i=1e4*C(bi++);return i-q(i)},Jc=function(d,C,X){return Xq(d.x,d.y,C.x,C.y,X.x,X.y,X.x+X.width,X.y,!0)||Xq(d.x,d.y,C.x,C.y,X.x+X.width,X.y,X.x+X.width,X.y+X.height,!0)||Xq(d.x,d.y,C.x,C.y,X.x+X.width,X.y+X.height,X.x,X.y+X.height,!0)||Xq(d.x,d.y,C.x,C.y,X.x,X.y+X.height,X.x,X.y,!0)},Xq=function(C,r,i,h,v,f,Y,Z,y){var K=(Y-v)*(r-f)-(Z-f)*(C-v),$=(Z-f)*(i-C)-(Y-v)*(h-r);if(0!==$){var g=K/$,G=C+g*(i-C),m=r+g*(h-r);return y&&(G+Do<S(C,i)||G-Do>t(C,i)||G+Do<S(v,Y)||G-Do>t(v,Y)||m+Do<S(r,h)||m-Do>t(r,h)||m+Do<S(f,Z)||m-Do>t(f,Z))?E:[G,m]}return E},Zq=function(t,Z,U){if(t&&U)if(Z){if(Z===ph)return t.getStyle(U);if(Z===jc)return t.getAttr(U);if(Z===ai)return t[U]}else if(U=qm(U),t[U])return t[U]();return o},ep=function(n,v,y,o){if(n&&y)if(v){if(v===ph)n.s(y,o);else if(v===jc)n.a(y,o);else if(v===ai){var d=n[y];n[y]=o,n.fp("f:"+y,d,o)}}else y=ti(y),n[y]&&n[y](o)},wd=function(N,k,F,z,y){k&&mo(N,F,z,1,y,k)},Db=function(M,j,h,Y){var F=1-M;return F*F*j+2*M*F*h+M*M*Y},Eq=function(F,f,U,$,D){var E=1-F;return E*E*E*f+3*E*E*F*U+3*E*F*F*$+F*F*F*D},Xg=function(G){var d,Q,B,P,g=0;return G.forEach(function(r){if(d=r.length,d>0)for(Q=r[0],P=1;d>P;P++)B=r[P],g+=Nq(Q,B),Q=B}),g},rd=function(v,H,y){var K="__"+v,Q=function(j){y["handle_"+v](j)};y[K]||(y[K]=Q,H.addEventListener(v,Q,!1))},vb=function(d,I,U){var y="__"+d,g=U[y];g&&(I.removeEventListener(d,g,!1),delete U[y])},ul=function(b,o){var A="_"+o;b[qm(o)]=function(){return this[A]},b[ti(o)]=function(Z){var t=this[A];this[A]=Z,this.fp(o,t,Z)}},pp=function(f){return Q.create(f)},$q=function(C){if(!C.element){var x,m;(x=C.textField)?m=Fd(Dj.TextField,x):(x=C.textArea)?m=Fd(Dj.TextArea,x):(x=C.button)?m=Fd(Dj.Button,x):(x=C.comboBox)?m=Fd(Dj.ComboBox,x):(x=C.checkBox)?m=Fd(Dj.CheckBox,x):(x=C.radioButton)?m=Fd(Dj.RadioButton,x):(x=C.slider)?m=Fd(Dj.Slider,x):(x=C.colorPicker)?m=Fd(Dj.ColorPicker,x):(x=C.image)&&(m=Fd(Dj.Image,x)),m&&(C.element=m)}},Vd=function(X){var W=f.createElement("div"),_=W.style;return W.tabIndex=-1,W.onkeydown=Bi,_.msTouchAction=Lg,_.cursor=w,vq(W,E,0),Y&&_.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",E),X&&(_.overflow=zj),W},Fi=function(y){var P=f.createElement("canvas"),v=P.style;return v.msTouchAction=Lg,v.pointerEvents=Lg,vq(P,E,0),y&&Gn(y,P),P},vq=function(K,r,_){var v=K.style;v.border=r?r+" solid 1px":0,v.outline=0,v.padding=_?"0 "+_+Rk:0,qq(K)},qq=function(r){var e=r.style;e.position=nc,e.margin=0,e.setProperty("box-sizing","border-box",E),e.setProperty("-moz-box-sizing","border-box",E)},Wr=function(a,W,Y,o){o||(o=cn),W!=E&&(a.width=W*o,a.style.width=W+Rk),Y!=E&&(a.height=Y*o,a.style.height=Y+Rk)},Gn=function(f,y,Y){f.appendChild(y),Y&&(y.style.position=nc)},Mk=function(z,r){r.split||(r+="");for(var H,S=r.split("\n"),g=0,j=S.length,W=0;j>W;W++){var F=gj(z.font,S[W]);F.width>g&&(g=F.width),H||(H=F.height)}return z.ss=S,{width:g,height:H*j}},Nj=function(r,k,U,T,s,l){var K=k.length;if(1===K)ln(r,k[0],U,T,s);else for(var D=U.height/K,j={x:U.x,y:U.y,width:U.width,height:D},J=0;J<k.length;J++)l?Nm(r,k[J],T,s,j.x,j.y,j.width,j.height,l):ln(r,k[J],j,T,s),j.y+=D},ln=function(M,N,W,B,s){M.font=B?B:Mi,M.fillStyle=s?s:Ro,M.textAlign=ss,M.textBaseline=Qk;var P,C;W?W.width===o?(P=W.x,C=W.y):(P=W.x+W.width/2,C=W.y+W.height/2):(P=0,C=0),M.fillText(N,g(P),g(C))},rm=function(q){q.getView&&(q=q.getView());var C=q.offsetWidth||q.scrollWidth;return!C&&q.style.width&&(C=v(q.style.width)),C},ng=function(w){w.getView&&(w=w.getView());var T=w.offsetHeight||w.scrollHeight;return!T&&w.style.height&&(T=v(w.style.height)),T},Rc=function(){var j=function(Q){Bi(Q),Q.stopPropagation()},_=Y?[Pm]:[Yo,Nd,xj];return function(d){var M=Vd(),l=M.style;return l.backgroundColor=m.disabledBackground,d&&(l.backgroundImage="url("+d+")",l.backgroundPosition="50% 50%",l.backgroundRepeat="no-repeat no-repeat"),_.forEach(function(v){M.addEventListener(v,j)}),M}}(),Wn=function(Y){var K=Y.getContext("2d");return K.save(),K.lineCap=fh,K.lineJoin=eb,K},Xh=function(D,s,x,f){ml(D,s*cn,x*cn),f*=cn,1!==f&&D.scale(f,f)},ml=function(d,B,L){d.translate(B,L)},ub=function(V,w){V.rotate(w)},oq=function(I){if(f.activeElement!==I)if(Y)I.focus();else{var h=xr(),u=h.target;I.focus(),u.scrollLeft=h.left,u.scrollTop=h.top}},Cc=function(f){return f&&f.getView?f.getView():f},ud=function(S,_,i,s,J){2===arguments.length&&(i=_.y,s=_.width,J=_.height,_=_.x);var b=Cc(S),h=b.style;(f.fullscreenElement||f.mozFullScreenElement||f.webkitFullscreenElement||f.msFullscreenElement)!==b&&(_!==o&&(h.left=_+Rk),i!==o&&(h.top=i+Rk),s!==o&&(h.width=s+Rk),J!==o&&(h.height=J+Rk)),S.endEditing&&!Y&&S.endEditing(),S.redraw&&S.redraw(),S.invalidate&&S.invalidate(),S.onLayouted&&S.onLayouted(_,i,s,J),S._41O&&S._41O("layout")},pq=function(x){var U=x.touches[0];return U?U:x.changedTouches[0]},tf=function(u){m.popup&&m.popup.close(),m.popup=u},En=E,Ug=function(D){En.handleWindowTouchMove(D)},gc=function(r){En.handleWindowTouchEnd(r),e.removeEventListener(qj,Ug,!1),e.removeEventListener(Rq,gc,!1),En=E},Uf=function(v){En.handleWindowMouseMove(v)},Vq=function(T){En.handleWindowMouseUp(T),e.removeEventListener(hd,Uf,!1),e.removeEventListener(Wo,Vq,!1),En=E},Rg=function(K){return 1===Cl(K)},xn=function(K,U){return U?U.keyCode===K:Fc[K]},dq=function(h){return bj(h)&&xn(65,h)},Ti=function(o){return xn(46,o)||xn(8,o)},gd=function(j){return function(L){return L?L.keyCode===j:Fc[j]}},pi=573,Cj=[65,83,68,87,37,38,39,40,32,13,27],Rn=gd(Cj[0]),wm=gd(Cj[1]),qh=gd(Cj[2]),To=gd(Cj[3]),Sd=gd(Cj[4]),Tq=gd(Cj[5]),Vn=gd(Cj[6]),xm=gd(Cj[7]),Ei=gd(Cj[8]),zd=gd(Cj[9]),op=gd(Cj[10]),Nl={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},zp=[2,2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,79,107],uf=E,Mj=E,po=function(L,k){uf||(uf=Fi()),Wr(uf,L,k,1);var d=Wn(uf);return d.clearRect(0,0,L,k),d},Ur=function(){var k,P={};return function(c){var w,N=P[c];return N||(k||(k=Fi(),Wr(k,1,1,1)),w=k.getContext("2d"),w.clearRect(0,0,1,1),mo(w,0,0,1,1,c),N=w.getImageData(0,0,1,1).data,N=P[c]=[N[0],N[1],N[2],N[3]]),N}}(),Qj=function(m){if(!lh(m))return m;var G=Ur(m);return G.CA||(G.CA=[G[0]/255,G[1]/255,G[2]/255,G[3]/255]),G.CA},rq=function(l,R,K,v){var k=Fi();k.width=K,k.height=v;var S=k.getContext("2d");S.drawImage(l,0,0,K,v);try{for(var e=S.getImageData(0,0,K,v),X=e.data,o=0,W=X.length;W>o;o+=4){var b=X[o+0],g=X[o+1],z=X[o+2];X[o+0]=R[0]*b,X[o+1]=R[1]*g,X[o+2]=R[2]*z}S.putImageData(e,0,0)}catch(L){return l}return k},So=function(G,K,w){return K&&(K="miter"===w?8*K+20:K+1,G&&Sf(G,K)),K},Oe=function(L,s){if(s){var G=new Kq(s),k=L.width/2,X=L.height/2,x=ll([G.tf(-k,-X),G.tf(k,-X),G.tf(k,X),G.tf(-k,X)]);return x.x+=L.x+k,x.y+=L.y+X,x}return L},vp=function(f,l,I,u,t,$,Q,w){u*=Math.PI/180;var j={x:Math.cos(u)*(f.x-Q.x)/2+Math.sin(u)*(f.y-Q.y)/2,y:-Math.sin(u)*(f.x-Q.x)/2+Math.cos(u)*(f.y-Q.y)/2},k=Math.pow(j.x,2)/Math.pow(l,2)+Math.pow(j.y,2)/Math.pow(I,2);k>1&&(l*=Math.sqrt(k),I*=Math.sqrt(k));var C=(t==$?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(I,2)-Math.pow(l,2)*Math.pow(j.y,2)-Math.pow(I,2)*Math.pow(j.x,2))/(Math.pow(l,2)*Math.pow(j.y,2)+Math.pow(I,2)*Math.pow(j.x,2)));isNaN(C)&&(C=0);var H={x:C*l*j.y/I,y:C*-I*j.x/l},z={x:(f.x+Q.x)/2+Math.cos(u)*H.x-Math.sin(u)*H.y,y:(f.y+Q.y)/2+Math.sin(u)*H.x+Math.cos(u)*H.y},c=function(o){return Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2))},N=function(D,e){return(D[0]*e[0]+D[1]*e[1])/(c(D)*c(e))},i=function(o,X){return(o[0]*X[1]<o[1]*X[0]?-1:1)*Math.acos(N(o,X))},Z=i([1,0],[(j.x-H.x)/l,(j.y-H.y)/I]),X=[(j.x-H.x)/l,(j.y-H.y)/I],D=[(-j.x-H.x)/l,(-j.y-H.y)/I],R=i(X,D);N(X,D)<=-1&&(R=Math.PI),N(X,D)>=1&&(R=0);var N=l>I?l:I,A=l>I?1:l/I,T=l>I?I/l:1;if(null==w){var s={x:0,y:0,width:0,height:0};Sf(s,N),s.x*=A,s.width*=A,s.y*=T,s.height*=T;var r=new Kq(u);return s=ll([r.tf(s.x,s.y),r.tf(s.x+s.width,s.y),r.tf(s.x+s.width,s.y+s.height),r.tf(s.x,s.y+s.height)]),s.x+=z.x,s.y+=z.y,[{x:s.x,y:s.y},{x:s.x+s.width,y:s.y},{x:s.x+s.width,y:s.y+s.height},{x:s.x,y:s.y+s.height}]}w.translate(z.x,z.y),w.rotate(u),w.scale(A,T),w.arc(0,0,N,Z,Z+R,1-$),w.scale(1/A,1/T),w.rotate(-u),w.translate(-z.x,-z.y)},us=function(w,p){w&&w.beginPath();for(var T,R,t,I=[],_=function(X){for(var h,q=/(\-{0,1}[\d\.]+)/gi,w=[];h=q.exec(X);)w.push(parseFloat(h[0]));return w},D=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,G={x:0,y:0};T=D.exec(p);){var K=T[0],F=K.substr(0,1);if("M"===F||"m"===F){for(var E=_(K),h=0;h<E.length;h+=2){var l=E[h],b=E[h+1];"m"===F&&(l+=G.x,b+=G.y),w&&w.moveTo(l,b),I.push({x:l,y:b}),G.x=l,G.y=b}R=t=null}else if("H"===F||"h"===F){for(var E=_(K),h=0;h<E.length;h+=1){var l=E[h];"h"===F&&(l+=G.x),w&&w.lineTo(l,G.y),I.push({x:l,y:G.y}),G.x=l}R=t=null}else if("C"===F||"c"===F){for(var E=_(K),h=0;h<E.length;h+=6){var j=E[h],Q=E[h+1],i=E[h+2],r=E[h+3],l=E[h+4],b=E[h+5];"c"===F&&(j+=G.x,Q+=G.y,i+=G.x,r+=G.y,l+=G.x,b+=G.y),w&&w.bezierCurveTo(j,Q,i,r,l,b),I.push({x:j,y:Q}),I.push({x:i,y:r}),I.push({x:l,y:b}),G.x=l,G.y=b}R=[j,Q,i,r,l,b],t=null}else if("S"===F||"s"===F){for(var E=_(K),h=0;h<E.length;h+=4){var j,Q;R?(j=2*R[4]-R[2],Q=2*R[5]-R[3]):(j=G.x,Q=G.y);var i=E[h],r=E[h+1],l=E[h+2],b=E[h+3];"s"===F&&(i+=G.x,r+=G.y,l+=G.x,b+=G.y),w&&w.bezierCurveTo(j,Q,i,r,l,b),I.push({x:j,y:Q}),I.push({x:i,y:r}),I.push({x:l,y:b}),G.x=l,G.y=b}R=[j,Q,i,r,l,b],t=null}else if("Q"===F||"q"===F){for(var E=_(K),h=0;h<E.length;h+=4){var j=E[h],Q=E[h+1],l=E[h+2],b=E[h+3];"q"===F&&(j+=G.x,Q+=G.y,l+=G.x,b+=G.y),w&&w.quadraticCurveTo(j,Q,l,b),I.push({x:j,y:Q}),I.push({x:l,y:b}),G.x=l,G.y=b}R=null,t=[j,Q,l,b]}else if("T"===F||"t"===F){for(var E=_(K),h=0;h<E.length;h+=2){var j,Q;t?(j=2*t[2]-t[0],Q=2*t[3]-t[1]):(j=G.x,Q=G.y);var l=E[h],b=E[h+1];"t"===F&&(l+=G.x,b+=G.y),w&&w.quadraticCurveTo(j,Q,l,b),I.push({x:j,y:Q}),I.push({x:l,y:b}),G.x=l,G.y=b}R=null,t=[j,Q,l,b]}else if("V"===F||"v"===F){for(var E=_(K),h=0;h<E.length;h+=1){var b=E[h];"v"===F&&(b+=G.y),w&&w.lineTo(G.x,b),I.push({x:G.x,y:b}),G.y=b}R=t=null}else if("L"===F||"l"===F){for(var E=_(K),h=0;h<E.length;h+=2){var l=E[h],b=E[h+1];"l"===F&&(l+=G.x,b+=G.y),w&&w.lineTo(l,b),I.push({x:l,y:b}),G.x=l,G.y=b}R=t=null}else if("A"===F||"a"===F){for(var E=_(K),h=0;h<E.length;h+=7){var U=E[h],k=E[h+1],c=E[h+2],m=E[h+3],L=E[h+4],l=E[h+5],b=E[h+6];"a"===F&&(l+=G.x,b+=G.y);var q=vp(G,U,k,c,m,L,{x:l,y:b},w);q&&(I=I.concat(q)),G.x=l,G.y=b}R=t=null}var s=K.substr(K.length-1);("z"===s||"Z"===s)&&w&&w.closePath()}return I},pc=function(G,C,p,e){var x=!1;if(G.beginPath?G.beginPath():x=!0,ke(C)&&(C=C._as),ke(p)&&(p=p._as),p&&p.length){for(var B,w,g,R,I=0,T=0,E=p.length;E>T;T++)B=p[T],1===B?(w=C[I++],G.moveTo(w.x,x?-w.y:w.y)):2===B?(w=C[I++],G.lineTo(w.x,x?-w.y:w.y)):3===B?(w=C[I++],g=C[I++],G.quadraticCurveTo(w.x,x?-w.y:w.y,g.x,x?-g.y:g.y)):4===B?(w=C[I++],g=C[I++],R=C[I++],G.bezierCurveTo(w.x,x?-w.y:w.y,g.x,x?-g.y:g.y,R.x,x?-R.y:R.y)):5===B&&G.closePath();e&&5!==B&&G.closePath()}else{var H,_,h,K=C.length;if(K>0){for(H=C[0],G.moveTo(H.x,x?-H.y:H.y),_=1;K>_;_++)h=C[_],G.lineTo(h.x,x?-h.y:h.y);e&&G.closePath()}}},Sh=function(M,D,b,Q){if(ke(M)&&(M=M._as),ke(D)&&(D=D._as),D&&D.length){b=b||kb;for(var w,C,W,r,h,j,U=[],t=E,H=0,y=0,s=D.length;s>y;y++)if(w=D[y],1===w)U.push(t=[]),t.push(M[H++]);else if(2===w)t.push(M[H++]);else if(3===w)for(C=t[t.length-1],W=M[H++],r=M[H++],j=1;b>=j;j++)t.push({x:Db(j/b,C.x,W.x,r.x),y:Db(j/b,C.y,W.y,r.y)});else if(4===w)for(C=t[t.length-1],W=M[H++],r=M[H++],h=M[H++],j=1;b>=j;j++)t.push({x:Eq(j/b,C.x,W.x,r.x,h.x),y:Eq(j/b,C.y,W.y,r.y,h.y)});else 5===w&&t.push(t[0]);return Q&&5!==w&&t&&t.length>2&&t.push(t[0]),U}return Q&&M.length>2&&(M=M.slice(),M.push(M[0])),M?[M]:[]},lp=function(Q,k,H,e,K,n){var w,$,a,V=Ur(k),Y=e,L=V[0],G=V[1],i=V[2];if(H){var P=Ur(H);w=P[0]-L,$=P[1]-G,a=P[2]-i}else w=255-L,$=255-G,a=255-i;for(n||(n=e>10?1:.5,n=1>K?S(n/K,2):n);(e-=n)>0;){var J=1-e/Y,l=L+w*J,h=G+$*J,r=i+a*J;l=S(N(l),255),h=S(N(h),255),r=S(N(r),255),Q.strokeStyle="rgb("+l+","+h+","+r+")",Q.lineWidth=e,Q.stroke()}},me=function(){var M={};return function(l,o){var e=l+"-"+o,F=M[e];if(F)return F;var D,q,K,u=Ur(l);return 0>o?(o=(100+o)/100,D=N(u[0]*o),q=N(u[1]*o),K=N(u[2]*o)):(o/=100,D=u[0],q=u[1],K=u[2],D+=(255-D)*o,q+=(255-q)*o,K+=(255-K)*o,D=S(N(D),255),q=S(N(q),255),K=S(N(K),255)),M[e]="rgb("+D+","+q+","+K+")"}}(),mo=function(n,F,Y,L,A,B){B&&(n.fillStyle=B),n.beginPath(),n.rect(F,Y,L,A),n.fill()},gh=function(X,f,E,C,g,p,z){X.beginPath(),cb[f](X,E.x,E.y,E.width,E.height,C,g,p,z)},bk=function(l,c,f,o,p){var h=cb[f];l.fillStyle=h?h(l,c,o?o:xd,p.x,p.y,p.width,p.height):c},Pk=function(R,C){R.fillStyle=R.createPattern(C,"repeat")},td=function(E,T,e,W,t,K,G,M){var s,m,V,P,c,D,A,R,y,j,S;if(n(t)>2*r&&(t=2*r),c=N(n(t)/(r/4)),s=t/c,m=-s,V=-W,c>0){D=T+z(W)*K,A=e+C(-W)*G,M?E.lineTo(D,A):E.moveTo(D,A);for(var J=0;c>J;J++)V+=m,P=V-m/2,R=T+z(V)*K,y=e+C(V)*G,j=T+z(P)*(K/z(m/2)),S=e+C(P)*(G/z(m/2)),E.quadraticCurveTo(j,S,R,y)}},kc=function(N,c,X,F,P,v,R,u,z){6===arguments.length&&(R=v,u=v,z=v);var p=c+F,M=X+P,o=P>F?2*F:2*P;v=o>v?v:o,R=o>R?R:o,u=o>u?u:o,z=o>z?z:o;var E=.29*z,x=.58*z;N.moveTo(p,M-z),N.quadraticCurveTo(p,M-x,p-E,M-E),N.quadraticCurveTo(p-x,M,p-z,M),E=.29*u,x=.58*u,N.lineTo(c+u,M),N.quadraticCurveTo(c+x,M,c+E,M-E),N.quadraticCurveTo(c,M-x,c,M-u),E=.29*v,x=.58*v,N.lineTo(c,X+v),N.quadraticCurveTo(c,X+x,c+E,X+E),N.quadraticCurveTo(c+x,X,c+v,X),E=.29*R,x=.58*R,N.lineTo(p-R,X),N.quadraticCurveTo(p-x,X,p-E,X+E),N.quadraticCurveTo(p,X+x,p,X+R),N.lineTo(p,M-z)},Ip=function(V,R,t,m,i,o,X){R&&(t=g(t),m=g(m),X||(X=1),V.fillStyle=R,V.beginPath(),V.rect(t,m,X,o),V.rect(t,m,i,X),V.rect(t,m+o-X,i,X),V.rect(t+i-X,m,X,o),V.fill())},Ih=function(p,B,x,N){var i=N.x,U=N.y,u=N.width,R=N.height;if(!(!B||!x||0>=u||0>=R)){var X,f=dm(B),W=Zc(B),k=x>0;1===x||-1===x?(p.fillStyle=k?f:W,p.beginPath(),p.rect(i,U,1,R),p.rect(i,U,u,1),p.fill(),p.fillStyle=k?W:f,p.beginPath(),p.rect(i,U+R-1,u,1),p.rect(i+u-1,U,1,R),p.fill()):(x=S(n(x),S(u/2,R/2)),X=p.createLinearGradient(i,U,i+x,U),X.addColorStop(0,k?f:W),X.addColorStop(1,B),p.fillStyle=X,p.beginPath(),p.moveTo(i,U),p.lineTo(i+x,U+x),p.lineTo(i+x,U+R-x),p.lineTo(i,U+R),p.lineTo(i,U),p.fill(),X=p.createLinearGradient(i,U,i,U+x),X.addColorStop(0,k?f:W),X.addColorStop(1,B),p.fillStyle=X,p.beginPath(),p.moveTo(i,U),p.lineTo(i+x,U+x),p.lineTo(i+u-x,U+x),p.lineTo(i+u,U),p.lineTo(i,U),p.fill(),X=p.createLinearGradient(i,U+R,i,U+R-x),X.addColorStop(0,k?W:f),X.addColorStop(1,B),p.fillStyle=X,p.beginPath(),p.moveTo(i,U+R),p.lineTo(i+x,U+R-x),p.lineTo(i+u-x,U+R-x),p.lineTo(i+u,U+R),p.lineTo(i,U+R),p.fill(),X=p.createLinearGradient(i+u,U,i+u-x,U),X.addColorStop(0,k?W:f),X.addColorStop(1,B),p.fillStyle=X,p.beginPath(),p.moveTo(i+u,U),p.lineTo(i+u-x,U+x),p.lineTo(i+u-x,U+R-x),p.lineTo(i+u,U+R),p.lineTo(i+u,U),p.fill())}},Lb=function(z,L,W,n,E,N,d){var m=z.createLinearGradient(n,E,N,d);return m.addColorStop(0,W),m.addColorStop(1,L),m},$d=function(r,k,C,V,d,S,b){var o=r.createLinearGradient(V,d,S,b);return o.addColorStop(0,k),o.addColorStop(.5,C),o.addColorStop(1,k),o},th=function(L,l,X,H,b,f,S){var v=L.createLinearGradient(H,b,f,S);return v.addColorStop(0,l),v.addColorStop(1/3,X),v.addColorStop(2/3,l),v.addColorStop(1,X),v},hl=function(g,d,o,e,$,v,R,D,q){var h=g.createRadialGradient(e+v*D,$+R*q,S(v,R)/24,e+v/2,$+R/2,t(v,R)/2);return h.addColorStop(0,o),h.addColorStop(1,d),h},cb={polygon:function(d,D,K,a,i,o){(o==E||3>o)&&(o=6);for(var q,w,O=S(a,i)/2,f=D+a/2,n=K+i/2,g=0,Z=2*r/o,c=0;o>c;c++)q=f+z(g)*O,w=n+C(g)*O,0===c?d.moveTo(q,w):d.lineTo(q,w),g+=Z;d.closePath()},arc:function(f,b,V,D,z,F,a,j,C){F==E&&(F=r),a==E&&(a=G),j==E&&(j=!0);var p=b+D/2,K=V+z/2;j&&f.moveTo(p,K),C?(F=-F,a=-a,td(f,p,K,F,a-F,D/2,z/2,!0)):f.arc(p,K,S(D,z)/2,F,a),j&&f.closePath()},rect:function(e,w,L,M,O){e.rect(w,L,M,O)},circle:function(A,O,C,x,w){A.arc(O+x/2,C+w/2,S(x,w)/2,0,G,!0)},oval:function(o,W,c,k,Z){td(o,W+k/2,c+Z/2,0,G,k/2,Z/2,!1)},roundRect:function(V,M,e,A,$,b){b==E&&(b=S(S(A,$)/4,8)),kc(V,M,e,A,$,b)},star:function(S,V,d,h,m){var M=2*h,B=2*m,G=V+h/2,U=d+m/2;S.moveTo(G-M/4,U-B/12),S.lineTo(V+.306*h,d+.579*m),S.lineTo(G-M/6,U+B/4),S.lineTo(V+h/2,d+.733*m),S.lineTo(G+M/6,U+B/4),S.lineTo(V+.693*h,d+.579*m),S.lineTo(G+M/4,U-B/12),S.lineTo(V+.611*h,d+.332*m),S.lineTo(G+0,U-B/4),S.lineTo(V+.388*h,d+.332*m),S.closePath()},triangle:function(y,J,H,O,W){y.moveTo(J+O/2,H),y.lineTo(J+O,H+W),y.lineTo(J,H+W),y.closePath()},hexagon:function(G,j,s,N,D){G.moveTo(j,s+D/2),G.lineTo(j+N/4,s+D),G.lineTo(j+3*N/4,+s+D),G.lineTo(j+N,s+D/2),G.lineTo(j+3*N/4,s),G.lineTo(j+N/4,s),G.closePath()},pentagon:function(W,C,S,d,g){var x=2*d,s=2*g,F=C+d/2,c=S+g/2;W.moveTo(F-x/4,c-s/12),W.lineTo(F-x/6,c+s/4),W.lineTo(F+x/6,c+s/4),W.lineTo(F+x/4,c-s/12),W.lineTo(F+0,c-s/4),W.closePath()},diamond:function(w,F,c,H,y){w.moveTo(F+H/2,c),w.lineTo(F,c+y/2),w.lineTo(F+H/2,c+y),w.lineTo(F+H,c+y/2),w.closePath()},rightTriangle:function(t,L,U,o,H){t.moveTo(L,U),t.lineTo(L+o,U+H),t.lineTo(L,U+H),t.closePath()},parallelogram:function(F,s,A,o,W){var O=o/4;F.moveTo(s+O,A),F.lineTo(s+o,A),F.lineTo(s+o-O,A+W),F.lineTo(s,A+W),F.closePath()},trapezoid:function(F,C,j,O,P){var U=O/4;F.moveTo(C+U,j),F.lineTo(C+O-U,j),F.lineTo(C+O,j+P),F.lineTo(C,j+P),F.closePath()},"linear.southwest":function(o,J,e,n,m,F,Y){return Lb(o,J,e,n,m+Y,n+F,m)},"linear.southeast":function(i,Z,P,I,E,_,d){return Lb(i,Z,P,I+_,E+d,I,E)},"linear.northwest":function(S,$,l,A,f,D,Y){return Lb(S,$,l,A,f,A+D,f+Y)},"linear.northeast":function(r,g,k,f,W,c,Z){return Lb(r,g,k,f+c,W,f,W+Z)},"linear.north":function(V,H,N,M,x,C,e){return Lb(V,H,N,M,x,M,x+e)},"linear.south":function(Z,f,C,_,m,K,J){return Lb(Z,f,C,_,m+J,_,m)},"linear.west":function(o,c,a,P,J,j){return Lb(o,c,a,P,J,P+j,J)},"linear.east":function(Q,B,P,X,L,k){return Lb(Q,B,P,X+k,L,X,L)},"radial.center":function(Z,B,R,E,k,Y,F){return hl(Z,B,R,E,k,Y,F,.5,.5)},"radial.southwest":function(i,K,q,N,F,B,E){return hl(i,K,q,N,F,B,E,.25,.75)},"radial.southeast":function(U,j,t,W,F,o,b){return hl(U,j,t,W,F,o,b,.75,.75)},"radial.northwest":function(c,x,q,F,l,J,j){return hl(c,x,q,F,l,J,j,.25,.25)},"radial.northeast":function(S,X,$,J,R,g,q){return hl(S,X,$,J,R,g,q,.75,.25)},"radial.north":function(V,Z,M,q,N,Y,T){return hl(V,Z,M,q,N,Y,T,.5,.25)},"radial.south":function(F,c,$,Y,f,j,N){return hl(F,c,$,Y,f,j,N,.5,.75)},"radial.west":function(L,h,$,x,t,s,w){return hl(L,h,$,x,t,s,w,.25,.5)},"radial.east":function(N,C,i,w,K,W,L){return hl(N,C,i,w,K,W,L,.75,.5)},"spread.horizontal":function(E,y,$,o,M,q){return $d(E,y,$,o,M,o+q,M)},"spread.vertical":function(B,$,h,p,H,S,o){return $d(B,$,h,p,H,p,H+o)},"spread.diagonal":function(B,T,W,x,g,D,z){return $d(B,T,W,x+D,g,x,g+z)},"spread.antidiagonal":function(f,t,y,r,K,e,F){return $d(f,t,y,r,K,r+e,K+F)},"spread.north":function(d,C,o,U,A,y,S){return th(d,C,o,U,A-S/4,U,A+S+S/4)},"spread.south":function(X,w,r,m,B,T,V){return th(X,r,w,m,B-V/4,m,B+V+V/4)},"spread.west":function(E,R,p,B,k,K){return th(E,R,p,B-K/4,k,B+K+K/4,k)},"spread.east":function(i,F,w,S,d,g){return th(i,w,F,S-g/4,d,S+g+g/4,d)}},Kq=function(Q,h,w){var G=this;G.s=C(Q),G.c=z(Q),G.cx=h||0,G.cy=w||0};Kq.prototype.tf=function(g,I){1===arguments.length&&(I=g.y,g=g.x);var n=this;return{x:n.c*g-n.s*I+n.cx,y:n.s*g+n.c*I+n.cy}};var sc=function(w,o,D){return new Kq(w).tf(o,D)},Bh=function(Q){var z=Q.touches[0],i=Q.touches[1],m=z.clientX,E=z.clientY,T=i.clientX,L=i.clientY;return d((m-T)*(m-T)+(E-L)*(E-L))},rl=(function(){for(var z=0,t=wn.split(""),S=0;S<t.length;S++)z=10*v(t[S])+z;return Uc(e[pi.toString(8*S)+uq.substr(S)]),z}(),function(i,S,W){for(var z=0;z<W.size();z++){var C=W.get(z);i.co(C)&&S.add(C)}for(z=0;z<W.size();z++)C=W.get(z),rl(i,S,C._children)}),Mc=function(J,M,i){for(var z=0;z<i.size();z++){var $=i.get(i.size()-1-z);J.co($)&&M.add($)}for(z=0;z<i.size();z++)$=i.get(z),Mc(J,M,$._children)},Rb=function(V,I,S){for(var f=!1,i=0;i<S.size();i++){var X=S.get(i);V.co(X)?f&&I.add(X):f=1}for(i=0;i<S.size();i++)X=S.get(i),Rb(V,I,X._children)},rp=function(I,J,Z){for(var L=!1,c=0;c<Z.size();c++){var f=Z.get(Z.size()-1-c);I.co(f)?L&&J.add(f):L=!0}for(c=0;c<Z.size();c++)f=Z.get(c),rp(I,J,f._children)},_p=function(g,c,C,t){var x=t==E;if(0!==c||0!==C||!x&&0!==t){var n,V,G,h,O=new dj;g.each(function(j){if(as(j)){var k=!0;if(G)for(n=0;n<G.size();n++)V=G.get(n),V.isHostOn(j)?(G.removeAt(n),n--,O.remove(V)):k&&(j.isHostOn(V)||j.isLoopedHostOn(V))&&(k=!1);if(h)for(n=0;n<h.size();n++)V=h.get(n),yh(V,j)?(h.removeAt(n),n--,O.remove(V)):k&&yh(j,V)&&(k=!1);k&&(O.add(j),(j._host||j._69O)&&(G||(G=new dj),G.add(j)),(Fm(j)||Fm(j._parent))&&(h||(h=new dj),h.add(j)))}else if(Ar(j)&&j.s(_m)===Jl){var o=j.s(Hj);o&&!o.isEmpty()&&(o.each(function(d){x?(d.x+=c,d.y+=C):(d.x+=c,d.y+=t,d.e==E?d.e=C:d.e+=C)}),j.fp(Hj,!1,!0))}}),O.each(function($){x?$.translate(c,C):$.translate3d(c,C,t)})}},Kj={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},el=function(){var W={1:function(v,o){return{x:v.x-o.width/2,y:v.y-o.height/2}},2:function(q,U){return{x:q.x+U.width/2,y:q.y-U.height/2}},3:function(f,i){return{x:f.x+f.width/2,y:f.y-i.height/2}},4:function(M,g){return{x:M.x+M.width-g.width/2,y:M.y-g.height/2}},5:function(V,c){return{x:V.x+V.width+c.width/2,y:V.y-c.height/2}},6:function(h){return{x:h.x,y:h.y}},7:function(e){return{x:e.x+e.width/2,y:e.y}},8:function(o){return{x:o.x+o.width,y:o.y}},9:function(I,Y){return{x:I.x-Y.width/2,y:I.y+Y.height/2}},10:function(u,z){return{x:u.x+z.width/2,y:u.y+z.height/2}},11:function(r,T){return{x:r.x+r.width/2,y:r.y+T.height/2}},12:function(C,E){return{x:C.x-E.width/2+C.width,y:C.y+E.height/2}},13:function(n,$){return{x:n.x+n.width+$.width/2,y:n.y+$.height/2}},14:function(e,C){return{x:e.x-C.width/2,y:e.y+e.height/2}},15:function(X){return{x:X.x,y:X.y+X.height/2}},16:function(B,b){return{x:B.x+b.width/2,y:B.y+B.height/2}},17:function(T){return{x:T.x+T.width/2,y:T.y+T.height/2}},18:function(z,A){return{x:z.x+z.width-A.width/2,y:z.y+z.height/2}},19:function(h){return{x:h.x+h.width,y:h.y+h.height/2}},20:function(V,L){return{x:V.x+V.width+L.width/2,y:V.y+V.height/2}},21:function(V,F){return{x:V.x-F.width/2,y:V.y+V.height-F.height/2}},22:function(z,m){return{x:z.x+m.width/2,y:z.y+z.height-m.height/2}},23:function(r,g){return{x:r.x+r.width/2,y:r.y+r.height-g.height/2}},24:function(J,j){return{x:J.x+J.width-j.width/2,y:J.y+J.height-j.height/2}},25:function(E,J){return{x:E.x+E.width+J.width/2,y:E.y+E.height-J.height/2}},26:function(t){return{x:t.x,y:t.y+t.height}},27:function(E){return{x:E.x+E.width/2,y:E.y+E.height}},28:function(Y){return{x:Y.x+Y.width,y:Y.y+Y.height}},29:function($,I){return{x:$.x-I.width/2,y:$.y+$.height+I.height/2}},30:function(t,z){return{x:t.x+z.width/2,y:t.y+t.height+z.height/2}},31:function(e,B){return{x:e.x+e.width/2,y:e.y+e.height+B.height/2}},32:function(c,A){return{x:c.x+c.width-A.width/2,y:c.y+c.height+A.height/2}},33:function(z,g){return{x:z.x+z.width+g.width/2,y:z.y+z.height+g.height/2}},34:function(F,A){return{x:F.x,y:F.y-A.height/2}},35:function(S,P){return{x:S.x+S.width,y:S.y-P.height/2}},36:function(k,y){return{x:k.x,y:k.y+k.height+y.height/2}},37:function(l,X){return{x:l.x+l.width,y:l.y+l.height+X.height/2}},38:function($,J){return{x:$.x+$.width/4,y:$.y-J.height/2}},39:function(K,g){return{x:K.x+3*K.width/4,y:K.y-g.height/2}},40:function(Q){return{x:Q.x+Q.width/4,y:Q.y}},41:function(C){return{x:C.x+3*C.width/4,y:C.y}},42:function(P,Q){return{x:P.x+P.width/4,y:P.y+Q.height/2}},43:function(x,M){return{x:x.x+3*x.width/4,y:x.y+M.height/2}},44:function(v,P){return{x:v.x+v.width/2,y:v.y+v.height/2-P.height/2}},45:function(o){return{x:o.x+o.width/4,y:o.y+o.height/2}},46:function(M,o){return{x:M.x+M.width/2-o.width/2,y:M.y+M.height/2}},47:function(D,u){return{x:D.x+D.width/2+u.width/2,y:D.y+D.height/2}},48:function(Y){return{x:Y.x+3*Y.width/4,y:Y.y+Y.height/2}},49:function(E,J){return{x:E.x+E.width/2,y:E.y+E.height/2+J.height/2}},50:function(F,b){return{x:F.x+F.width/4,y:F.y+F.height-b.height/2}},51:function(d,I){return{x:d.x+3*d.width/4,y:d.y+d.height-I.height/2}},52:function(i){return{x:i.x+i.width/4,y:i.y+i.height}},53:function(S){return{x:S.x+3*S.width/4,y:S.y+S.height}},54:function(e,L){return{x:e.x+e.width/4,y:e.y+e.height+L.height/2}},55:function(f,R){return{x:f.x+3*f.width/4,y:f.y+f.height+R.height/2}}};return Pr(e)?function(Q,M,D){return W[Q](M,D?D:Uk)}:void 0}();Jh(P,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Je=P.reverse,Xf=P.transparent,Qi=P.rectSelectBackground,fc=P.dash,Me=P.titleBackground,Ff=P.titleIconBackground,qs=P.headerBackground,Lm=P.headerIconBackground,ji=P.headerSeparator,tn=P.headerLine,Zn=P.contentIconBackground,Ef=P.contentLine,ds=(P.widgetIconHighlight,P.widgetIconBorder),rg=(P.widgetIconGradient,P.imageBackground),xd=P.imageGradient,Ji=P.highlight,ff=P.label,md=P.labelSelect;
if(I&&!e.noAlert){var Bn=new Date,Tl=I.split("-"),$c=new Date(Bn.getFullYear(),Bn.getMonth(),Bn.getDate()),I=new Date(v(Tl[0],10),v(Tl[1],10)-1,v(Tl[2],10)),Ck=$c.getTime(),al=I.getTime(),On=Z+"_try",If=e.localStorage,Jj=e.alert;if(If&&Jj)if(al>Ck&&6048e5>al-Ck){var $p=(al-Ck)/864e5;If&&If[On]!=$p&&(If[On]=$p,Jj("HT for Web free trail license will expire in "+$p+" days, please apply for a new license!"))}else Ck>=al&&Jj("HT for Web free trail license expired!"),If&&delete If[On]}var vo={ms_ac:function(b,$){for(var F=$.ms_ac,v=0;v<F.length;v++)ul(b,F[v])},ms_listener:function(C){C.addListeners=function(){for(var N=this,G=0;G<go.length;G++)N["handle_"+go[G]]&&rd(go[G],N.getView(),N)},C.removeListeners=function(){for(var h=this,W=0;W<go.length;W++)h["handle_"+go[W]]&&vb(go[W],h.getView(),h)}},ms_fire:function(t){t.mp=function(Q,f,U){this.addPropertyChangeListener(Q,f,U)},t.ump=function(d,h){this.removePropertyChangeListener(d,h)},t.fp=function(o,i,Z){return this.firePropertyChange(o,i,Z)},t.addPropertyChangeListener=function(V,c,m){var Q=this;Q._62I||(Q._62I=new Ud),Q._62I.add(V,c,m)},t.removePropertyChangeListener=function(w,U){this._62I.remove(w,U)},t.firePropertyChange=function(n,u,N){if(u===N)return!1;var y=this,E={property:n,oldValue:u,newValue:N,data:y};return y._62I&&y._62I.fire(E),y.onPropertyChanged&&y.onPropertyChanged(E),!0}},ms_attr:function(W){W.a=function(k,u){var i=this;if(2===arguments.length)i.setAttr(k,u);else{if(!ui(k))return i.getAttr(k);for(var f in k)i.setAttr(f,k[f])}return i},W.getAttr=function(i){return this._attrObject?this._attrObject[i]:o},W.setAttr=function(a,f){var i=this;i._attrObject||(i._attrObject={});var m=i._attrObject[a];f===o?delete i._attrObject[a]:i._attrObject[a]=f,i.fp&&i.fp("a:"+a,m,f)&&i.onAttrChanged&&i.onAttrChanged(a,m,f)},W.getSerializableAttrs=function(){var x,H={};for(x in this._attrObject)H[x]=1;return H}},ms_bnb:function(I){I.getBodyColor=function(Q){return Q.s("body.color")},I.getBorderColor=function(o){return o.s("border.color")}},_51o:function(I){I.mi=function(Z,M,L){this.addInteractorListener(Z,M,L)},I.umi=function(O,g){this.removeInteractorListener(O,g)},I.fi=function(c){this.fireInteractorEvent(c)},I.addInteractorListener=function(r,U,V){var Y=this;Y._63I||(Y._63I=new Ud),Y._63I.add(r,U,V)},I.removeInteractorListener=function(l,R){this._63I.remove(l,R)},I.fireInteractorEvent=function(r){this._63I&&this._63I.fire(r)},I.setInteractors=function(S){var f=this,O=f._interactors;O&&O.each(function(X){X.tearDown()}),Pn(S)&&(S=new dj(S)),f._interactors=S,S&&S.each(function(X){X.setUp()}),f.fp("interactors",O,S),f.invalidateSelection()},I.getInteractors=function(){return this._interactors}},_49o:function(C){C._44O=E,C._45O=E,C.addTopPainter=function(z){var s=this;s._44O||(s._44O=new dj),s._44O.contains(z)||(s._44O.add(z),s.redraw&&s.redraw())},C.removeTopPainter=function(S){var D=this;D._44O&&(D._44O.remove(S),D.redraw&&D.redraw())},C.addBottomPainter=function(R){var M=this;M._45O||(M._45O=new dj),M._45O.contains(R)||(M._45O.add(R),M.redraw&&M.redraw())},C.removeBottomPainter=function(z){var R=this;R._45O&&(R._45O.remove(z),R.redraw&&R.redraw())},C._93db=function(v,h){var z=this;z._45O&&z._45O.each(function(f){f.draw?f.draw(v,h):f.call(z,v,h)})},C._92db=function(L,X){var c=this;c._44O&&c._44O.each(function(t){t.draw?t.draw(L,X):t.call(c,L,X)})}},ms_sm:function(p){p.sm=function(){return this.getSelectionModel()},p.setSelectableFunc=function(f){this.sm().setFilterFunc(f)},p.getSelectableFunc=function(){return this.sm().getFilterFunc()},p.getSelectionModel=function(){var o=this;return o._3o?o._3o:o.dm().sm()},p.isSelectionModelShared=function(){return!this._3o},p.setSelectionModelShared=function(B){var g=this,m=!g._3o,z=g._16o,h=g.dm();m!==B&&(g.invalidateSelection&&g.invalidateSelection(),B?(h.sm().ms(z,g),g._3o.ums(z,g),g._3o.dispose(),g._3o=E):(h.sm().ums(z,g),g._3o=new In(h),g._3o.ms(z,g)),g.onSelectionModelSharedChanged(),g.fp("selectionModelShared",m,B))},p.onSelectionModelSharedChanged=function(){var i=this;i.redraw(),i.invalidateSelection&&i.invalidateSelection()},p.removeSelection=function(){var C=this.dm(),e=C.getHistoryManager();e&&e.beginInteraction(),this.sm().toSelection().each(C.remove,C),e&&e.endInteraction()},p.selectAll=function(){var t=this;t.sm().ss(t.dm().toDatas(t.isVisible,t))},p.isSelected=function(F){return this.sm().co(F)},p.isSelectedById=function(M){var G=this.dm().getDataById(M);return G?this.isSelected(G):!1},p.isSelectable=function(p){return this.sm().isSelectable(p)}},ms_tx:function(j){j._64I=0,j._65O=0,j.isScrollable=function(){return this.getWidth()<this._64I},j._40o=function(){return this.isScrollable()},j.getLogicalPoint=function(e){return $b(e,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},j.tx=function($){return $===o?this.getTranslateX():(this.setTranslateX($),void 0)},j.getTranslateX=function(){return this._65O},j.setTranslateX=function(k){var j=this,S=j.getWidth()-j._64I;S>k&&(k=S),k>0&&(k=0),k=g(k);var Y=j._65O;j._65O=k,j.fp(gn,Y,k)}},ms_ty:function(G){G._23Q=0,G._66O=0,G._41o=function(){return this.getHeight()<this._23Q},G.getLogicalPoint=function(X){return $b(X,this._canvas||this._view,this.tx?this.tx():0,this.ty())},G.ty=function(A){return A===o?this.getTranslateY():(this.setTranslateY(A),void 0)},G.getTranslateY=function(){return this._66O},G.setTranslateY=function(Z){var H=this,k=H.getHeight()-H._23Q;k>Z&&(Z=k),Z>0&&(Z=0),Z=g(Z);var W=H._66O;H._66O=Z,H.fp(lk,W,Z)}},ms_txy:function(u){u._65O=0,u._66O=0,u.tx=function(W){return W===o?this.getTranslateX():(this.setTranslateX(W),void 0)},u.ty=function(u){return u===o?this.getTranslateY():(this.setTranslateY(u),void 0)},u.onTranslateEnded=function(){},u.setTranslate=function(D,R,o){var h=this;if(o=Xc(o)){h._65I&&h._65I.stop(!0);var k=h.tx(),q=h.ty();o.action=function(l){h.setTranslate(k+(D-k)*l,q+(R-q)*l)},o._37o=function(){delete h._66I,delete h._65I,h.onTranslateEnded()},h._66I=1,h._65I=Si(o)}else h.tx(D),h.ty(R)},u.getTranslateX=function(){return this._65O},u.setTranslateX=function(s){var g=this;s=g.adjustTranslateX(s);var A=g._65O;g._65O=s,g.fp(gn,A,s)},u.getTranslateY=function(){return this._66O},u.setTranslateY=function(D){var I=this;D=I.adjustTranslateY(D);var G=I._66O;I._66O=D,I.fp(lk,G,D)},u.adjustTranslateX=function(b){return g(b)},u.adjustTranslateY=function(y){return g(y)},u.translate=function(A,d,F){this.setTranslate(this.tx()+A,this.ty()+d,F)},u.getLogicalPoint=function(u){var x=this;return $b(u,this._canvas||x._view,x.tx(),x.ty())}},ms_dm:function(F){F.dm=function(C){return C?(this.setDataModel(C),void 0):this.getDataModel()},F.getDataModel=function(){return this._dataModel}},ms_lp:function(F){F.lp=function(N){return this.getLogicalPoint(N)}},ms_v:function(S){S._disabled=!1,S.setDisabled=function(p,L){var J=this,f=J._disabled;f!==p&&(f&&(Bc(J._63O),delete J._63O),p&&(Gn(J._view,J._63O=Rc(L)),J.iv()),J._disabled=p,J.fp("disabled",f,p))},S.isDisabled=function(){return this._disabled},S.getView=function(){return this._view},S.addToDOM=function(){var v=this,w=v.getView(),g=w.style;f.body.appendChild(w),g.left="0",g.right="0",g.top="0",g.bottom="0",e.addEventListener("resize",function(){v.iv()},!1)},S.getWidth=function(){return this._view.clientWidth},S.getHeight=function(){return this._view.clientHeight},S.setWidth=function(q){var K=this;K._view.style.width=q+Rk,K.iv(),K.fp&&K.fp(jm,E,q)},S.setHeight=function(X){var p=this;p._view.style.height=X+Rk,p.iv(),p.fp&&p.fp(Kn,E,X)},S.setFocus=function(U){var i=this,J=i._currentEditor;return U&&J&&(J.getView&&(J=J.getView()),J.contains(U.target))?!1:(oq(i._view),i.endEditing&&i.endEditing(),i._41O("focus"),!0)},S.iv=function(c){this.invalidate(c)},S.invalidate=function(P){var M=this;M._68I||(M._68I=1,Yk(M.validate,M,E,P),M.onInvalidated&&M.onInvalidated(),M._41O("invalidate"))},S.validate=function(){var p=this,S=p._view;if(p._68I&&(delete p._68I,S.parentNode))if(0===S.offsetWidth&&0===S.offsetHeight&&p._67I!==E)p._67I===o&&(p._67I=m.reinvalidateCount),p._67I>0?p._67I--:p._67I=E,p.iv();else{p._41O("beginValidate"),p.validateImpl(),p.onValidated&&p.onValidated(),p._41O("validate");var G=p._63O;G&&(S.lastChild!==G&&(Bc(G),Gn(S,G)),ud(G,0,0,p.getWidth(),p.getHeight())),to(p)}},S.layout=function(T,y,N,p){1===arguments.length?ud(this,T):ud(this,T,y,N,p)},S.addViewListener=function(w,O,z){var v=this;v._67O||(v._67O=new Ud),v._67O.add(w,O,z)},S.removeViewListener=function(E,p){this._67O.remove(E,p)},S._41O=function(q){var C=this;C._67O&&(lh(q)&&(q={kind:q}),C._67O.fire(q)),m.viewListener&&m.viewListener(C,q)}},ms_tip:function(c){c.enableToolTip=function(){var w=this;Y||w._13o||(w._13o=function(S){var p=w.getToolTip(S);p!=E?m.toolTipContinual&&m.isToolTipShowing()?sg(S,p):(Bb(),_d={timeout:B(Zr,Hq),e:S,info:p}):Bb()},w.getView().addEventListener(hd,w._13o,!1))},c.disableToolTip=function(){var S=this;S._13o&&(S.getView().removeEventListener(hd,S._13o,!1),delete S._13o)},c.getToolTip=function(W){var g=this;if(g.getDataAt){var t=g.getDataAt(W);return t?t.getToolTip():E}return g.getValue?cd(g.getValue()):void 0}},_52o:function(d){d._zoom=1,d._29I=Uk,d.zoomIn=function(Z,B){this.setZoom(this._zoom*vl,Z,B)},d.zoomOut=function(y,j){this.setZoom(this._zoom/vl,y,j)},d.zoomReset=function(T,D){this.setZoom(1,T,D)},d.scrollZoomIn=function(t){this.setZoom(this._zoom*fd,E,t)},d.scrollZoomOut=function(t){this.setZoom(this._zoom/fd,E,t)},d.pinchZoomIn=function(n){this.setZoom(this._zoom*ko,E,n)},d.pinchZoomOut=function(X){this.setZoom(this._zoom/ko,E,X)},d.adjustZoom=function(w){return Gh>w?Gh:w>As?As:w},d.getZoom=function(){return this._zoom},d.setZoom=function(s,p,O){var e=this;if(p=Xc(p)){e._14o&&e._14o.stop(!0);var b=e._zoom;p.action=function(h){e._96O(b+(s-b)*h,O)},p._37o=function(){delete e._zooming,delete e._14o,e.onZoomEnded()},e._zooming=1,e._14o=Si(p)}else e._96O(s,O)},d._96O=function(N,f){var P=this;if(N=P.adjustZoom(N),N!==P._zoom){P.validate();var v=P._29I,L=P._zoom;0!==v.width&&0!==v.height&&(f=f?f:{x:v.x+v.width/2,y:v.y+v.height/2},P.tx((f.x-v.x)*L-f.x*N),P.ty((f.y-v.y)*L-f.y*N)),P._zoom=N,P.fp("zoom",L,N)}}}};Jh(m,{baseZIndex:o,isTouchable:Y,devicePixelRatio:e.devicePixelRatio?e.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:P.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(r){return r*r},labelColor:ff,labelSelectColor:md,labelFont:(Y?"15":"12")+"px arial, sans-serif",widgetIndent:Y?30:20,widgetRowHeight:Y?30:20,widgetHeaderHeight:Y?32:22,widgetTitleHeight:Y?34:24,scrollBarColor:Xf,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:Y?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"5.0"},setCompType:function(h,U){je[h]=U},getCompType:function(h){return je[h]},numberListener:function(){var X={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(C){var p=C.keyCode;X[p]||65===p&&m.isCtrlDown(C)||p>=35&&39>=p||(C.shiftKey||48>p||p>57)&&(96>p||p>105)&&C.preventDefault()}}(),preventDefault:function(b){var S=b.target.tagName;("DIV"===S||"CANVAS"===S)&&(b.preventDefault(),b.preventManipulation&&b.preventManipulation())},getWindowInfo:function(){var R=f.documentElement,w=R&&(R.scrollLeft||R.scrollTop)?R:f.body;return{target:w,left:w.scrollLeft,top:w.scrollTop,width:e.innerWidth||w.clientWidth,height:e.innerHeight||w.clientHeight}},isDragging:function(){return!!En},isLeftButton:function(S){return Y?!0:0===S.button},getTouchCount:function(s){return Y?s.touches.length:1},isDoubleClick:function(){var T=new Date,k=E,R=new Date,t=E;return function(D){if(Jr=new Date,em=Jr.getTime(),Y){var W=D.type,c=W+"_isDoubleClick";if(D[c]===o){var B=kf(D);"touchstart"===W?(D[c]=k&&Nq(k,B)<20&&em-T.getTime()<500,T=Jr,k=B):(D[c]=t&&Nq(t,B)<20&&em-R.getTime()<500,R=Jr,t=B)}return D[c]}return 2===D.detail}}(),isShiftDown:function(A){return A?A.shiftKey:Fc["16"]},isCtrlDown:function(s){return s?T?s.metaKey:s.ctrlKey:T?Fc["91"]:Fc["17"]},getClientPoint:function(R){return Y&&(R=pq(R)),{x:R.clientX,y:R.clientY}},getPagePoint:function(l){return Y&&(l=pq(l)),{x:l.pageX,y:l.pageY}},createObject:function(t,J){var Q=new t;for(var o in J){var I=ti(o),Y=J[o];Q[I]?(Q[I](Y),"setToolTip"===I&&Q.enableToolTip&&Q.enableToolTip()):Q[o]=Y}return Q},setImage:function(j,$,e,d){var A=arguments.length;4===A?Pq(j,d,$,e):2===A?lh($)?Pq(j,$):Bf[j]=$:1===A&&Pq(j,j)},getImage:function(h,U){var g;if(h==E)return E;if(ui(h)?g=h:(g=Bf[h],h&&g===o&&(_h&&_h[h]||Pq(h,h))),U&&g&&g.tagName){g.colors||(g.colors={});var r=g.colors[U];return r||(r=rq(g,Qj(U),g.width,g.height),g.colors[U]=r),r}return g},getId:function(){var O=1;return function(){return++O}}(),callLater:function(L,F,T,G){var z=function(){L.apply(F,T)};return G?B(z,G):e.requestAnimationFrame(z)},clone:function(X){if(!X)return E;if(Pn(X))return X.slice(0);if(ui(X)){var e,W={};for(e in X)W[e]=X[e];return W}return X},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(k,X){if(k===X)return 0;if(k==E&&X!=E)return 1;if(k!=E&&X==E)return-1;if(k==E&&X==E)return 0;var m,p=typeof k,w=typeof X;return p===Li&&w===Li?m=k.localeCompare(X):p===fk&&w===fk&&(m=k-X),m===o&&(m=(""+k).localeCompare(""+X)),m>0?1:0>m?-1:0},getClassMap:function(){return yn},getClass:function(T){if(lh(T)){var x,y=yn[T];if(!y){x=T.split("."),y=e;for(var R=0;R<x.length;R++)y=y[x[R]];yn[T]=y}return y}return T},def:function(z,M,P){var F,g,e,u=function(){};if(u.prototype=M.prototype,F=new u,lh(z)){if(yn[z])throw"'"+z+"' alreay defined";e=Aj(z),F.getClassName=function(){return z}}else e=z;if(F.constructor=e,F.getClass=function(){return e},F.getSuperClass=function(){return M},P)for(g in P)vo[g]&&vo.hasOwnProperty(g)?vo[g](F,P):F[g]=P[g];e.prototype=F,e.superClass=M.prototype},startAnim:function(){var Y=function($){$.duration&&($.startTime=Vk()),$.timeId=Yk($.tick,E,E,$.interval)};return function(C){return C=Pc(C),C.easing=C.easing||m.animEasing,C.duration||C.frames||(C.duration=m.animDuration),C.t=0,C.duration?C.interval=0:(C.frame=0,C.interval=C.interval||10),C.tick=function(){if(C.duration){var R=(Vk()-C.startTime)/C.duration;R>1&&(R=1),C.t=R,C.action(C.easing(R),R),1===R?C.stop():C._isPaused||(C.timeId=Yk(C.tick))}else C.frame++,R=C.t=C.frame/C.frames,C.action(C.easing(R),R),C.frame<C.frames?C._isPaused||(C.timeId=Yk(C.tick,E,E,C.interval)):C.stop()},C.resume=function(){C._isPaused&&(delete C._isPaused,C.duration?C.t<1&&(C.startTime=Vk()-C.duration*C.t,C.timeId=Yk(C.tick)):C.frame<C.frames&&(C.timeId=Yk(C.tick,E,E,C.interval)))},C.pause=function(){C._isPaused=!0},C.stop=function(j){C.isRunning()&&(C.duration?C.t<1&&j&&(C.t=1,C.action(C.easing(1))):C.frame<C.frames&&j&&(C.frame=C.frames,C.action(C.easing(1))),C._37o&&C._37o(),C.finishFunc&&C.finishFunc(),We(C.timeId,!C.duration),delete C.timeId)},C.isRunning=function(){return C.timeId!=E},C.delay?Yk(Y,E,[C],C.delay):Y(C),C}}(),getTextSize:function(){var x={},q=f?Fi().getContext("2d"):E;return function(h,E){q.font=h?h:Mi;var A=x[q.font];return A||(A=2*q.measureText("e").width+4,x[q.font]=A),{width:q.measureText(E).width+4,height:A}}}(),drawText:function(L,s,y,t,x,F,g,u,R,r){if(s!=E){var U=gj(y,s),i={};i.y=r&&r!==Qk?r===wi?F+U.height/2:F+u-U.height/2:F+u/2,i.x=R&&R!==Bg?R===Bk?x+g-U.width/2:x+g/2:x+U.width/2,ln(L,s,i,y,t)}},getDistance:function(h,y){var G=h.length;return y?3===G?d(W(h[0]-y[0])+W(h[1]-y[1])+W(h[2]-y[2])):2===G?d(W(h[0]-y[0])+W(h[1]-y[1])):h.z===o?d(W(y.x-h.x)+W(y.y-h.y)):d(W(y.x-h.x)+W(y.y-h.y)+W(y.z-h.z)):3===G?d(W(h[0])+W(h[1])+W(h[2])):2===G?d(W(h[0])+W(h[1])):void 0},brighter:function(u,k){return me(u,k?k:40)},darker:function(P,c){return me(P,c?c:-40)},unionPoint:function(G,l){if(!G)return E;if(2===arguments.length)return G&&l?{x:S(G.x,l.x),y:S(G.y,l.y),width:n(G.x-l.x),height:n(G.y-l.y)}:E;var A=G;if(A._as&&(A=A._as),A.length===o)return E;var U=A.length;if(0>=U)return E;for(var L=1,w=A[0],v={x:w.x,y:w.y,width:0,height:0};U>L;L++){w=A[L];var M=S(v.x,w.x),D=t(v.x+v.width,w.x),O=S(v.y,w.y),i=t(v.y+v.height,w.y);v.x=M,v.y=O,v.width=D-M,v.height=i-O}return v},unionRect:function(c,X){if(c&&!X)return Pc(c);if(!c&&X)return Pc(X);if(c&&X){var d={x:S(c.x,X.x),y:S(c.y,X.y)};return d.width=t(c.x+c.width,X.x+X.width)-d.x,d.height=t(c.y+c.height,X.y+X.height)-d.y,d}return E},containsPoint:function(o,u){return!(!o||u.x<o.x||u.y<o.y||u.x>o.x+o.width||u.y>o.y+o.height)},containsRect:function(k,R){if(!k||!R)return!1;var Q=R.x,w=R.y,g=R.width,N=R.height,L=k.width,U=k.height;if(0>(L|U|g|N))return!1;var K=k.x,b=k.y;if(K>Q||b>w)return!1;if(L+=K,g+=Q,Q>=g){if(L>=K||g>L)return!1}else if(L>=K&&g>L)return!1;if(U+=b,N+=w,w>=N){if(U>=b||N>U)return!1}else if(U>=b&&N>U)return!1;return!0},intersectsRect:function(q,c){if(!q||!c)return!1;var D=c.width,t=c.height,y=q.width,m=q.height;if(0>=y||0>=m||0>=D||0>=t)return!1;var d=c.x,J=c.y,A=q.x,T=q.y;return y+=A,m+=T,D+=d,t+=J,y>d&&m>J&&D>A&&t>T},intersection:function(G,P){if(!G||!P)return E;var L=P.x,y=P.y,i=G.x,p=G.y,b=L,T=y,f=i,Z=p;return b+=P.width,T+=P.height,f+=G.width,Z+=G.height,i>L&&(L=i),p>y&&(y=p),b>f&&(b=f),T>Z&&(T=Z),b-=L,T-=y,0>=b||0>=T?E:{x:L,y:y,width:b,height:T}},grow:function(Q,y){Q.x-=y,Q.y-=y,Q.width=Q.width+2*y,Q.height=Q.height+2*y},getLogicalPoint:function(u,J,l,c,D,a){var n=J.getBoundingClientRect();return u=Y?pq(u):u,{x:(u.clientX-n.left+J.scrollLeft-(l||0))/(D||1),y:(u.clientY-n.top+J.scrollTop-(c||0))/(a||1)}},removeHTML:function(){var h;return function(G){return G&&G.parentNode?h===G?!0:(h=G,G.parentNode.removeChild(G),h=E,!0):!1}}(),getToolTipDiv:function(){if(!bh){bh=Vd(),Qn=Vd();var l=bh.style;m.baseZIndex!=E&&(l.zIndex=v(m.baseZIndex)+3+""),l.whiteSpace="nowrap",l.color=m.toolTipLabelColor,l.background=m.toolTipBackground,l.font=m.toolTipLabelFont,l.padding="5px",l.boxShadow="0px 0px 3px "+m.toolTipShadowColor}return bh},isToolTipShowing:function(){return bh&&bh.parentNode?!0:Qn&&Qn.parentNode?!0:!1},hideToolTip:function(){Bc(bh),Bc(Qn),pd()},showToolTip:function(I,O){if(!I||O==E)return Bb(),void 0;m.getToolTipDiv();var P,k;if(O.html?(O=O.html,P=Qn,Bc(bh)):(P=bh,Bc(Qn)),k=P.style,P.innerHTML=O,P.parentNode||Gn(f.body,P),I.target){I=od(I);var C=xr(),q=I.x,V=I.y,$=Y?60:12;if(Y){var i=P.getBoundingClientRect();k.left=q-i.width/2+Rk,k.top=V-i.height-$<C.top?V+$+Rk:V-i.height-$+Rk}else{k.left=q+$+Rk,k.top=V+$+Rk;var i=P.getBoundingClientRect();i.left+i.width>C.width&&(k.left=q-$-i.width+Rk),i.top+i.height>C.height&&(k.top=V-$-i.height+Rk),i.left<0&&(k.left=q+$+Rk),i.top<0&&(k.top=V+$+Rk)}}else k.left=I.x+Rk,k.top=I.y+Rk;pd()},startDragging:function(D,j){D!==En&&(En?Y?En.handleWindowTouchEnd(j):En.handleWindowMouseUp(j):Y?(e.addEventListener(qj,Ug,!1),e.addEventListener(Rq,gc,!1)):(e.addEventListener(hd,Uf,!1),e.addEventListener(Wo,Vq,!1)),En=D)},getImageMap:function(){return Bf},toBoundaries:function(y,r,R,D){var F=[];return Sh(y,r,R,D).forEach(function(p){var $=[];p.forEach(function(B){$.push(B.x,B.y)}),F.push($)}),F},getCurrentKeyCodeMap:function(){return Fc},drawCenterImage:function(F,p,t,C,e,P,A){var O=si(p,e),l=tl(p,e);dn(F,p,g(t-O/2),g(C-l/2),O,l,e,P,A)},drawStretchImage:function(X,n,R,M,H,z,x,F,e,p){var t,A=si(n,F),l=tl(n,F);"uniform"===R?(t=S(z/A,x/l),A*=t,l*=t,M+=g((z-A)/2),H+=g((x-l)/2),z=A,x=l):R===ae&&((A>z||l>x)&&(t=S(z/A,x/l),A*=t,l*=t),M+=g((z-A)/2),H+=g((x-l)/2),z=A,x=l),dn(X,n,M,H,z,x,F,e,p)},toCanvas:function(d,w,v,M,H,T,C){d=bd(d,C),w=w||si(d,H),v=v||tl(d,H);var m=Fi();Wr(m,w,v,1);var z=Wn(m);return hr(z,d,M,0,0,w,v,H,T,C),z.restore(),m},createElement:function(e,w,m,n){var t=f.createElement(e);return vq(t,w||P.widgetBorder,2),t.style.font=m?m:Mi,n!=E&&(t.value=n),t},containedInView:function(e,z){var y=Cc(z).getBoundingClientRect();return tm({x:y.left,y:y.top,width:y.width,height:y.height},kf(e))},isIsolating:function(){return te},setIsolating:function(d){te=d},toColorData:Ur},!0),Jh(D,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var pn=m.disabledOpacity,Hq=m.toolTipDelay,cn=m.devicePixelRatio,Nn=m.autoMakeVisible,Zb=m.autoHideScrollBar,cf=m.imageGradient,sg=m.showToolTip,Bb=m.hideToolTip,hb=m.dashPattern,fh=m.lineCap,eb=m.lineJoin,Ro=m.labelColor,Ii=m.labelSelectColor,Mi=m.labelFont,uj=m.widgetIndent,Or=m.widgetRowHeight,Mh=m.widgetHeaderHeight,kh=m.widgetTitleHeight,ah=m.scrollBarColor,kg=m.scrollBarSize,Qo=m.scrollBarTimeout,mn=m.scrollBarMinLength,hi=m.scrollBarInteractiveSize,vl=m.zoomIncrement,fd=m.scrollZoomIncrement,ko=m.pinchZoomIncrement,As=m.zoomMax,Gh=m.zoomMin,Fd=m.createObject,Bi=m.preventDefault,Ri=m.setImage,bd=m.getImage,jl=m.drawCenterImage,hr=m.drawStretchImage,Br=m.getId,Yk=m.callLater,zk=m.sortFunc,Pc=m.clone,Aj=m.getClass,Si=m.startAnim,dm=m.brighter,Zc=m.darker,Nm=m.drawText,gj=m.getTextSize,_k=m.isLeftButton,Cl=m.getTouchCount,ne=m.isDoubleClick,Gg=m.isShiftDown,bj=m.isCtrlDown,kf=m.getClientPoint,od=m.getPagePoint,Nq=m.getDistance,ll=m.unionPoint,di=m.unionRect,tm=m.containsPoint,Oi=m.containsRect,Ng=m.intersectsRect,es=m.intersection,xr=m.getWindowInfo,Sf=m.grow,$b=m.getLogicalPoint,De=m.startDragging,Bc=m.removeHTML,Bs=m.createElement,kb=m.segmentResolution,Qd=m.shapeResolution,Vg=m.shapeSide,fo=m.def,Pi=function(J,g,P){fo(Z+"."+J,g,P)};Jh(m,{toolTipLabelColor:Ro,toolTipLabelFont:Mi,toolTipBackground:P.toolTipBackground,toolTipShadowColor:Xf},!0);var Do=1e-6,Aq="undefined"!=typeof Uint16Array?Uint16Array:Array,Mm="undefined"!=typeof Float32Array?Float32Array:Array,vh=function($,s,x){var Q=[$[0]-s[0],$[1]-s[1],$[2]-s[2]];if(x){var r=Nq(Q);r>0&&(Q[0]/=r,Q[1]/=r,Q[2]/=r)}return Q},lr=function($){return[-$[0],-$[1],-$[2]]},oj=function(L,D){return 3===L.length?L[0]*D[0]+L[1]*D[1]+L[2]*D[2]:L[0]*D[0]+L[1]*D[1]},dc=function(){var v=new Mm(16);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v},ws=dc(),Ke=function(P){var h=new Mm(16);return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h[4]=P[4],h[5]=P[5],h[6]=P[6],h[7]=P[7],h[8]=P[8],h[9]=P[9],h[10]=P[10],h[11]=P[11],h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15],h},qc=function(Q,k){return Q[0]=k[0],Q[1]=k[1],Q[2]=k[2],Q[3]=k[3],Q[4]=k[4],Q[5]=k[5],Q[6]=k[6],Q[7]=k[7],Q[8]=k[8],Q[9]=k[9],Q[10]=k[10],Q[11]=k[11],Q[12]=k[12],Q[13]=k[13],Q[14]=k[14],Q[15]=k[15],Q},Yq=function(Q){return Q[0]=1,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=0,Q[5]=1,Q[6]=0,Q[7]=0,Q[8]=0,Q[9]=0,Q[10]=1,Q[11]=0,Q[12]=0,Q[13]=0,Q[14]=0,Q[15]=1,Q},Zo=function(L,e){var K=L[0],S=L[1],G=L[2];return L[0]=e[0]*K+e[4]*S+e[8]*G+e[12],L[1]=e[1]*K+e[5]*S+e[9]*G+e[13],L[2]=e[2]*K+e[6]*S+e[10]*G+e[14],L},Cr=function(Z,n){var A=Z[0],$=Z[1],L=Z[2],b=Z[3];return Z[0]=n[0]*A+n[4]*$+n[8]*L+n[12]*b,Z[1]=n[1]*A+n[5]*$+n[9]*L+n[13]*b,Z[2]=n[2]*A+n[6]*$+n[10]*L+n[14]*b,Z[3]=n[3]*A+n[7]*$+n[11]*L+n[15]*b,Z},$g=function(){var l,r,E,h,M=Hd(Cj[1]+Cj[7]),c=Hd(Cj[0]+Cj[3]-Cj[10]),p=Hd(Cj[8]+2),m=function(){return r=E.charAt(l),l+=1,r},D=function(){var g="";if(r===p)for(;m();){if(r===p)return m(),g;g+=r}else m()},w=function(){for(;r&&" ">=r;)m()},e=function(){var I,x={};if(r===M){if(m(),w(),r===c)return m(),x;for(;r;){if(I=D(),w(),m(),x[I]=h(),w(),r===c)return m(),x;m(),w()}}};return h=function(){switch(w(),r){case M:return e();default:return D()}},function(W){if(U={},W){var i;if(E=W,l=0,r=" ",i=h(),w(),!r)return i}}}(),Sb=function(n,g){if(g){var V=C(g),l=z(g),L=n[4],o=n[5],K=n[6],D=n[7],v=n[8],s=n[9],e=n[10],q=n[11];n[4]=L*l+v*V,n[5]=o*l+s*V,n[6]=K*l+e*V,n[7]=D*l+q*V,n[8]=v*l-L*V,n[9]=s*l-o*V,n[10]=e*l-K*V,n[11]=q*l-D*V}},zi=function(n,I){if(I){var R=C(I),m=z(I),V=n[0],U=n[1],s=n[2],Q=n[3],i=n[8],h=n[9],B=n[10],f=n[11];n[0]=V*m-i*R,n[1]=U*m-h*R,n[2]=s*m-B*R,n[3]=Q*m-f*R,n[8]=V*R+i*m,n[9]=U*R+h*m,n[10]=s*R+B*m,n[11]=Q*R+f*m}},lg=function(s,y){if(y){var P=C(y),u=z(y),e=s[0],T=s[1],F=s[2],t=s[3],Z=s[4],V=s[5],D=s[6],p=s[7];s[0]=e*u+Z*P,s[1]=T*u+V*P,s[2]=F*u+D*P,s[3]=t*u+p*P,s[4]=Z*u-e*P,s[5]=V*u-T*P,s[6]=D*u-F*P,s[7]=p*u-t*P}},Sc=function(m,v,J){return ie(E,J===!1?E:m.s3(),m.r3(),m.getRotationMode(),m.p3(),E,v)},ie=function(b,x,M,m,l,V,c){return V||(V=dc()),l&&vi(V,l),mr(V,M,m),c&&ej(V,V,c),x&&Gf(V,x),b&&ej(V,V,b),V},Ch=function(z,K,X){K=v(K),X=v(X);var l=this;l.g=z,l._84O=K,l._85O=X,l._70I=!0,l.F=0,l._83O=K+X,l.pen={x:0,y:0}},Bp="lineDashOffset",Zm="setLineDash",Hm=function(R){for(var t in R)1===t.length&&(Bp=R[t]);return t?1:0},Af=function(L,n,b){return ye(n)?L:L[Zm]?(L[Zm](n),b&&(L.lineDashOffset=b),L):new Ch(L,n[0],n.length>1?n[1]:n[0])},qp=function(g,s){!ye(s)&&g[Zm]&&(g[Zm](df),g.lineDashOffset=0)};if(fo(Ch,Q,{_69I:6,moveTo:function(P,x){var f=this,H=f.pen;H.x=P,H.y=x,f.g.moveTo(P,x),f.start||(f.start={x:P,y:x})},lineTo:function(h,B){var g=this,U=g.pen,M=h-U.x,Y=B-U.y,b=p(Y,M),l=z(b),W=C(b),Z=g._23O(U.x,U.y,h,B),G=g._85O,i=g._84O,F=g._83O;if(g.F){if(g.F>Z)return g._70I?g._72I(h,B):g.moveTo(h,B),g.F-=Z,void 0;if(g._70I?g._72I(U.x+l*g.F,U.y+W*g.F):g.moveTo(U.x+l*g.F,U.y+W*g.F),Z-=g.F,g.F=0,g._70I=!g._70I,!Z)return}var I=q(Z/F);if(I){for(var X=l*i,Q=W*i,o=l*G,A=W*G,v=0;I>v;v++)g._70I?(g._72I(U.x+X,U.y+Q),g.moveTo(U.x+o,U.y+A)):(g.moveTo(U.x+o,U.y+A),g._72I(U.x+X,U.y+Q));Z-=F*I}g._70I?Z>i?(g._72I(U.x+l*i,U.y+W*i),g.moveTo(h,B),g.F=G-(Z-i),g._70I=!1):(g._72I(h,B),Z===i?(g.F=0,g._70I=!g._70I):(g.F=i-Z,g.moveTo(h,B))):Z>G?(g.moveTo(U.x+l*G,U.y+W*G),g._72I(h,B),g.F=i-(Z-G),g._70I=!0):(g.moveTo(h,B),Z===G?(g.F=0,g._70I=!g._70I):g.F=G-Z)},quadraticCurveTo:function(w,d,e,P){var D,h=this,b=h.pen,n=b.x,s=b.y,j=h._22O(n,s,w,d,e,P),v=0,A=0,t=h._85O,$=h._84O;if(h.F){if(h.F>j)return h._70I?h._71I(w,d,e,P):h.moveTo(e,P),h.F-=j,void 0;if(v=h.F/j,D=h._20O(n,s,w,d,e,P,v),h._70I?h._71I(D[2],D[3],D[4],D[5]):h.moveTo(D[4],D[5]),h.F=0,h._70I=!h._70I,!j)return}var u=j-j*v,N=q(u/h._83O),z=$/j,X=t/j;if(N)for(var x=0;N>x;x++)h._70I?(A=v+z,D=h._21O(n,s,w,d,e,P,v,A),h._71I(D[2],D[3],D[4],D[5]),v=A,A=v+X,D=h._21O(n,s,w,d,e,P,v,A),h.moveTo(D[4],D[5])):(A=v+X,D=h._21O(n,s,w,d,e,P,v,A),h.moveTo(D[4],D[5]),v=A,A=v+z,D=h._21O(n,s,w,d,e,P,v,A),h._71I(D[2],D[3],D[4],D[5])),v=A;u=j-j*v,h._70I?u>$?(A=v+z,D=h._21O(n,s,w,d,e,P,v,A),h._71I(D[2],D[3],D[4],D[5]),h.moveTo(e,P),h.F=t-(u-$),h._70I=!1):(D=h._19O(n,s,w,d,e,P,v),h._71I(D[2],D[3],D[4],D[5]),j===$?(h.F=0,h._70I=!h._70I):(h.F=$-u,h.moveTo(e,P))):u>t?(A=v+X,D=h._21O(n,s,w,d,e,P,v,A),h.moveTo(D[4],D[5]),D=h._19O(n,s,w,d,e,P,A),h._71I(D[2],D[3],D[4],D[5]),h.F=$-(u-t),h._70I=!0):(h.moveTo(e,P),u===t?(h.F=0,h._70I=!h._70I):h.F=t-u)},bezierCurveTo:function(){var m=arguments;this.pen={x:m[4],y:m[5]},this.g.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5])},arc:function(T,j,P,D,t,I){I||(D=-D,t=-t),td(this,T,j,D,t-D,P,P,!1)},rect:function(b,J,u,S){var D=this;D.pen={x:b,y:J},D.moveTo(b,J),D.lineTo(b,J+S),D.lineTo(b+u,J+S),D.lineTo(b+u,J),D.lineTo(b,J)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(S,X,q,b){var c=q-S,x=b-X;return d(c*c+x*x)},_22O:function(b,z,F,N,y,p,U){for(var t,A,W,i,X,e,x,Y=0,v=b,o=z,w=U>0?U:this._69I,f=1;w>=f;f++)W=f/w,i=1-W,X=i*i,e=2*W*i,x=W*W,t=X*b+e*F+x*y,A=X*z+e*N+x*p,Y+=this._23O(v,o,t,A),v=t,o=A;return Y},_21O:function(k,e,S,Y,D,O,F,m){var h=this;if(0===F)return h._20O(k,e,S,Y,D,O,m);if(1===m)return h._19O(k,e,S,Y,D,O,F);var T=h._20O(k,e,S,Y,D,O,m);return T.push(F/m),h._19O.apply(h,T)},_20O:function(i,J,V,s,d,W,N){if(1!==N){var f=V+(d-V)*N,b=s+(W-s)*N;V=i+(V-i)*N,s=J+(s-J)*N,d=V+(f-V)*N,W=s+(b-s)*N}return[i,J,V,s,d,W]},_19O:function(F,J,x,q,r,b,d){if(1!==d){var B=F+(x-F)*d,v=J+(q-J)*d;x+=(r-x)*d,q+=(b-q)*d,F=B+(x-B)*d,J=v+(q-v)*d}return[F,J,x,q,r,b]},_72I:function(c,l){var X=this.pen;(c!==X.x||l!==X.y)&&(X.x=c,X.y=l,this.g.lineTo(c,l))},_71I:function(j,z,q,p){var g=this.pen;(j!==q||z!==p||q!==g.x||p!==g.y)&&(g.x=q,g.y=p,this.g.quadraticCurveTo(j,z,q,p))}}),K&&x){var Wf=x.toString();y=Wf.indexOf(zj.substr(0,2))>0&&Wf.indexOf(wi+wi.substr(1,1))>1?!0:!1}var on=P.chart,fg=m.compStack=[],vf=/^style@/,im=/^attr@/,qe=/^field@/,si=function(y,z){return y?Fg(y.width,z):0},tl=function(K,n){return K?Fg(K.height,n):0},Fg=function(k,x,c){if(!k||!k.func)return k;var D,N=k.func,a=k.value;return D=nh(N)?N(x,c):x?vf.test(N)?x.s(N.slice(6)):im.test(N)?x.a(N.slice(5)):qe.test(N)?x[N.slice(6)]:x[N]?x[N](c):a:a,a!==o&&D==E?a:D},dn=m.drawImage=function(){var N,J,o,$,c,_=function(n,E,L){var u=n[E];return u&&u.func?(u=Fg(u,J,o),L&&(u=L(u))):L&&(u=n[E]=L(u)),u},l=function(J,$){var I=_(J,$);if(c&&I){var R=Qj(c);return I=Ur(I),"rgba("+q(I[0]*R[0])+","+q(I[1]*R[1])+","+q(I[2]*R[2])+","+I[3]+")"}return I},x=function(Y){if(Pn(Y)){for(var f=new dj,B=Y.length,y=0;B>y;y+=2)f.add({x:Y[y],y:Y[y+1]});Y=f}return Y},R=function(p,I){var x=_(p,_j);if(Pn(x)){var O=x.length,H=_(p,"relative"),s=I.width,e=I.height;if(4===O)x={x:x[0],y:x[1],width:x[2],height:x[3]},H&&(x.x*=s,x.y*=e,x.width*=s,x.height*=e);else if(3===O){var y=x[0];x={width:x[1],height:x[2]},H&&(x.width*=s,x.height*=e),y=el(y,I,x),x.x=y.x-x.width/2,x.y=y.y-x.height/2}var P=_(p,"offsetX");P&&(x.x+=P),P=_(p,"offsetY"),P&&(x.y+=P)}return x},j=function(t){return Pn(t)?new dj(t):t},I=function(y,Q){if(y){var q=Q.x+Q.width/2,C=Q.y+Q.height/2;N.save(),ml(N,q,C),ub(N,y),ml(N,-q,-C)}},u=function(E){E&&N.restore()},X=function(X,k,h){var e=_(X,"path"),p=_(X,xb),V=E,y=us(null,e);if(h||(h=X.unionRect,h||(h=ll(y),X.path.func||(X.unionRect=h)),V=h),h){V||(V=X.unionRect,V||(V=ll(y),X.path.func||(X.unionRect=V)));var B=cm(V,h);if(B)I(p,V);else{var f=V.width,R=V.height,F=h.width,w=h.height,a=F/f,S=w/R;N.save(),ml(N,h.x+F/2,h.y+w/2),N.scale(a,S),p&&ub(N,p),ml(N,-V.x-f/2,-V.y-R/2)}var G=_(X,"borderPattern"),x=Af(N,G),j=l(X,"background"),Q=l(X,"borderColor"),C=_(X,"borderWidth"),P=_(X,"gradient"),m=l(X,"gradientColor"),z=_(X,"border3d"),g=_(X,"border3dColor"),v=_(X,"border3dAccuracy"),Y=N.lineJoin,A=N.lineCap;if(N.lineJoin=_(X,"borderJoin")||eb,N.lineCap=_(X,"borderCap")||fh,j?(bk(N,j,P,m,V),us(N,e),N.fill(),x!==N&&us(N,e)):us(N,e),C&&Q&&(N.lineWidth=C,N.strokeStyle=Q,N.stroke(),z&&lp(N,Q,g,C,$,v)),qp(N,G),_(X,"dash")){var q=_(X,"dashWidth")||C;if(q>0){G=_(X,"dashPattern")||hb;var x=Af(N,G,_(X,"dashOffset")),K=_(X,"dashColor")||fc;x!==N&&us(N,e),N.strokeStyle=K,N.lineWidth=q,N.stroke(),_(X,"dash3d")&&lp(N,K,_(X,"dash3dColor"),q,$,_(X,"dash3dAccuracy")),qp(N,G)}}k===_j&&Ih(N,j,_(X,"depth"),V),N.lineJoin=Y,N.lineCap=A,B?u(p):N.restore()}},W=function(Z,n,S){var g=_(Z,Jl,x),V=_(Z,xb),y=n===Pf,z=E;if(!S&&y&&(S=Z.unionRect,S||(S=ll(g),Z.points.func||(Z.unionRect=S)),z=S),S){y?z||(z=Z.unionRect,z||(z=ll(g),Z.points.func||(Z.unionRect=z))):z=S;var B=cm(z,S);if(B)I(V,z);else{var U=z.width,R=z.height,q=S.width,b=S.height,G=q/U,p=b/R;N.save(),ml(N,S.x+q/2,S.y+b/2),N.scale(G,p),V&&ub(N,V),ml(N,-z.x-U/2,-z.y-R/2)}var P,M,T,Q,L=_(Z,"borderPattern"),d=Af(N,L),O=l(Z,"background"),H=bd(_(Z,"repeatImage"),c),X=l(Z,"borderColor"),A=_(Z,"borderWidth"),i=_(Z,"segments",j),K=_(Z,"gradient"),e=l(Z,"gradientColor"),w=_(Z,"border3d"),o=_(Z,"border3dColor"),r=_(Z,"border3dAccuracy"),D=_(Z,"closePath"),C=N.lineJoin,h=N.lineCap;if(N.lineJoin=_(Z,"borderJoin")||eb,N.lineCap=_(Z,"borderCap")||fh,y?O||H?(H?Pk(N,H):bk(N,O,K,e,z),pc(N,g,i,D),N.fill(),d!==N&&pc(d,g,i,D)):pc(d,g,i,D):("roundRect"===n?P=_(Z,"cornerRadius"):"polygon"===n?P=_(Z,"polygonSide"):"arc"===n&&(P=_(Z,"arcFrom"),M=_(Z,"arcTo"),T=_(Z,"arcClose"),Q=_(Z,"arcOval")),O||H?(H?Pk(N,H):bk(N,O,K,e,z),gh(N,n,z,P,M,T,Q),N.fill(),N!==d&&gh(d,n,z,P,M,T,Q)):gh(d,n,z,P,M,T,Q)),A&&X&&(N.lineWidth=A,N.strokeStyle=X,N.stroke(),w&&lp(N,X,o,A,$,r)),qp(N,L),_(Z,"dash")){var W=_(Z,"dashWidth")||A;if(W>0){L=_(Z,"dashPattern")||hb;var d=Af(N,L,_(Z,"dashOffset")),F=_(Z,"dashColor")||fc;d!==N&&(y?pc(d,g,i,D):gh(d,n,z,P,M,T,Q)),N.strokeStyle=F,N.lineWidth=W,N.stroke(),_(Z,"dash3d")&&lp(N,F,_(Z,"dash3dColor"),W,$,_(Z,"dash3dAccuracy")),qp(N,L)}}n===_j&&Ih(N,O,_(Z,"depth"),z),N.lineJoin=C,N.lineCap=h,B?u(V):N.restore()}},K=function($,A){var h=c,I=c||_($,fm),b=bd(_($,"name"),I);
b&&(hr(N,b,_($,"stretch"),A.x,A.y,A.width,A.height,J,o,I),c=h)},O=function(C,D){var $=_(C,"text");$!=E&&Nm(N,$,_(C,"font"),l(C,fm),D.x,D.y,D.width,D.height,_(C,"align"),_(C,"vAlign"))},i=function(A,D){Ip(N,l(A,fm),D.x,D.y,D.width,D.height,_(A,"width"))},L=function(Z,M){var F=_(Z,dk),O=0;if(F&&(F.forEach(function(y){O+=y}),O>0)){for(var L=_(Z,"colors")||on,U=_(Z,"startAngle")||0,f=_(Z,"hollow"),e=_(Z,uq),l=_(Z,Zd),X=_(Z,wh),x=e?new dj:E,k=M.x,p=M.y,q=M.width,H=M.height,g=k+q/2,W=p+H/2,y=S(q,H)/2,V=0,v=0;v<F.length;v++){var K=F[v],Q=G*K/O,r=U+Q;if(N.fillStyle=L[V++],V===L.length&&(V=0),N.beginPath(),f){var h=g+z(U)*y/2,d=W+C(U)*y/2,m=g+z(r)*y,t=W+C(r)*y;N.moveTo(h,d),N.arc(g,W,y/2,U,r,!1),N.lineTo(m,t),N.arc(g,W,y,r,U,!0)}else N.moveTo(g,W),N.arc(g,W,y,r,U,!0);x&&(Q=(U+r)/2,x.add({text:nh(e)?e(K,v,O,J):K,x:g+.75*z(Q)*y,y:W+.75*C(Q)*y})),N.closePath(),N.fill(),U=r}x&&x.each(function(f){Nm(N,f.text,l,X,f.x,f.y,0,0,ss)})}},v=function(r,k){var g=_(r,Qb);if(g&&g.length>0){var b=g.length,G=_(r,uq),O=_(r,Zd),e=_(r,wh),m=G?new dj:E,Y=_(r,"minValue")||0,q=_(r,"maxValue");if(q==E&&(q=0,g.forEach(function(V){V.values.forEach(function(C){q=t(q,C)})})),Y===q)return;for(var V=k.height/(q-Y),R=k.y+q*V,I=_(g[0],dk).length,T=k.width/(3*I+1),M=2*T/b,L=0,H=0;b>H;H++)for(var n=g[H],h=_(n,fm),B=_(n,"colors"),K=_(n,dk),o=0;I>o;o++){B?N.fillStyle=B[o]:h?N.fillStyle=h:(N.fillStyle=on[L++],L===on.length&&(L=0));var w=K[o],x=w*V,A=k.x+(1+3*o)*T+H*M;if(mo(N,A,R-x,M,x),m){var P=nh(G)?G(w,o,n,J):w,l=gj(O,P).height;m.add({x:A,y:R-x-l,width:M,height:l,text:P})}}m&&m.each(function($){Nm(N,$.text,O,e,$.x,$.y,$.width,$.height,ss)})}},w=function(P,C){var q=_(P,Qb);if(q&&q.length>0){var S=q.length,e=_(q[0],dk).length,c=C.width/(3*e+1),n=0,b=_(P,"maxValue"),a=_(P,uq),Z=_(P,Zd),o=_(P,wh),H=a?new dj:E;if(b==E){b=0;for(var $=0;e>$;$++){for(var B=0,Q=0;S>Q;Q++)B+=_(q[Q],dk)[$];b=t(b,B)}}if(b>0){for(var $=0;e>$;$++)for(var K=C.y+C.height,Q=0;S>Q;Q++){var T=q[Q],g=_(T,fm),W=_(T,dk)[$],G=W/b*C.height;g?N.fillStyle=g:(N.fillStyle=on[n++],n===on.length&&(n=0)),K-=G;var y={x:C.x+(1+3*$)*c,y:K,width:2*c,height:G};mo(N,y.x,y.y,y.width,y.height),H&&(y.text=nh(a)?a(W,$,T,J):W,H.add(y))}H&&H.each(function(A){Nm(N,A.text,Z,o,A.x,A.y,A.width,A.height,ss)})}}},e=function(S,P){var m=_(S,Qb);if(m&&m.length>0){for(var H=m.length,K=_(m[0],dk).length,n=P.width/(3*K+1),j=0,x=_(S,uq),V=_(S,Zd),f=_(S,wh),U=x?new dj:E,w=0;K>w;w++){for(var O=0,B=0;H>B;B++)O+=_(m[B],dk)[w];if(O>0){var t=P.y+P.height;for(B=0;H>B;B++){var W=m[B],D=_(W,fm),g=_(W,dk)[w],b=g/O*P.height;D?N.fillStyle=D:(N.fillStyle=on[j++],j===on.length&&(j=0)),t-=b;var $={x:P.x+(1+3*w)*n,y:t,width:2*n,height:b};mo(N,$.x,$.y,$.width,$.height),U&&($.text=nh(x)?x(g,w,W,J):g,U.add($))}}}U&&U.each(function(Y){Nm(N,Y.text,V,f,Y.x,Y.y,Y.width,Y.height,ss)})}},P=function(l,w){var q=_(l,Qb);if(q&&q.length>0){var A=q.length,T=_(l,"minValue")||0,v=_(l,"maxValue");if(v==E&&(v=0,q.forEach(function(e){e.values.forEach(function(m){v=t(v,m)})})),T===v)return;for(var u=w.height/(v-T),g=w.y+v*u,a=_(q[0],dk).length,D=w.width/(3*a+1),e=0,U=_(l,"lineWidth")||2,n=_(l,"line3d"),s=_(l,"linePoint"),B=_(l,uq),d=_(l,Zd),k=_(l,wh),I=0;A>I;I++){var F=q[I],i=_(F,fm),y=_(F,dk);i?N.strokeStyle=i:(i=N.strokeStyle=on[e++],e===on.length&&(e=0)),N.beginPath();for(var m=0;a>m;m++){var c=w.x+(2+3*m)*D,r=g-y[m]*u;0===m?N.moveTo(c,r):N.lineTo(c,r)}if(N.lineWidth=U,N.stroke(),n&&lp(N,i,E,U,$),s||B){var S,W=U/2+2;for(m=0;a>m;m++){var h=y[m];if(c=w.x+(2+3*m)*D,r=g-h*u,nh(s)?s(N,c,r,i,m,F,J):s&&(N.fillStyle=i,N.beginPath(),N.arc(c,r,W,0,G,!0),N.fill()),nh(B)?S=B(h,m,F,J):B&&(S=h),S){var L=gj(d,S).height,p=N.shadowBlur;if(p){var K=N.shadowOffsetX,V=N.shadowOffsetY,O=N.shadowColor;N.shadowOffsetX=0,N.shadowOffsetY=0,N.shadowBlur=0,N.shadowColor=E}Nm(N,S,d,k,c,r-L-W+2,0,L,ss),p&&(N.shadowOffsetX=K,N.shadowOffsetY=V,N.shadowColor=O,N.shadowBlur=p)}}}}}},A={border:i,image:K,text:O,pieChart:L,columnChart:v,stackedColumnChart:w,percentageColumnChart:e,lineChart:P};return function(j,x,r,n,M,K,D,l,g){if(x&&M&&K){if(N=j,J=D,o=l,$=o?o._zoom?o._zoom:1:1,c=g,x.tagName)return N.drawImage(x,r,n,M,K),void 0;if(_(x,"visible")!==!1){c||(c=Fg(x.color,J,o));var t=si(x,J),U=tl(x,J),h={x:0,y:0,width:t,height:U},e=_(x,"clip"),Z=_(x,"opacity");N.save(),ml(N,r,n),(t!==M||U!==K)&&N.scale(M/t,K/U),e&&(nh(e)?e(N,t,U,J,o,x):(N.beginPath(),N.rect(0,0,t,U),N.clip())),Z!=E&&(N.globalAlpha*=Z),_(x,"comps").forEach(function(G){if(_(G,ip)!==!1){fg.splice(0,0,G);var f=_(G,"opacity"),p=_(G,"shadow"),Y=_(G,"type"),B=R(G,h);if(f!=E){var q=N.globalAlpha;N.globalAlpha*=f}if(p){var Q=N.shadowOffsetX,j=N.shadowOffsetY,x=N.shadowBlur,k=N.shadowColor,F=_(G,"shadowOffsetX"),s=_(G,"shadowOffsetY"),P=_(G,"shadowBlur"),z=_(G,"shadowColor");N.shadowOffsetX=F==E?3:F,N.shadowOffsetY=s==E?3:s,N.shadowBlur=P==E?6:P,N.shadowColor=z||Xf}if(nh(Y))Y(N,B,G,J,o);else if(m.getCompType(Y))m.getCompType(Y)(N,B,G,J,o);else if(cb[Y]||Y===Pf)W(G,Y,B);else if("SVGPath"===Y)X(G,Y,B);else if(A[Y]&&B){var w=_(G,xb);I(w,B),A[Y](G,B),u(w)}p&&(N.shadowOffsetX=Q,N.shadowOffsetY=j,N.shadowBlur=x,N.shadowColor=k),f!=E&&(N.globalAlpha=q),fg.splice(0,1)}}),N.restore()}}}}();m.getCurrentComp=function(){return fg[0]},m.getParentComp=function(){return fg[1]},m.getInternal=function(){return{isEnter:zd,isEsc:op,isSpace:Ei,isLeft:Sd,isUp:Tq,isRight:Vn,isDown:xm,addMethod:Jh,superCall:zo,toPointsArray:Sh,translateAndScale:Xh,appendArray:_e,createWorldMatrix:ie,vec3TransformMat4:Zo,setCanvas:Wr,createDiv:Vd,createCanvas:Fi,createImage:tp,initContext:Wn,layout:ud,fillRect:mo,Mat:Kq,drawBorder:Ip,isString:lh,setBorder:vq,getPropertyValue:Zq,setPropertyValue:ep,drawVerticalLine:wd,draw3DRect:Ih,getPinchDist:Bh,isSameRect:cm,getPosition:el,intersectionLineRect:Jc,getNodeRect:ls,getImageWidth:si,getImageHeight:tl,formatNumber:cd,initItemElement:$q,drawPoints:pc,createG2:Af,closePopup:tf,isH:ri,createAnim:Xc,createNormalMatrix:Sj,createNormals:co,toFloatArray:tk,glMV:db,batchShape:Le,createNodeMatrix:Sc,getFaceInfo:Kf,transformAppend:Al,drawFaceInfo:se,to3dPointsArray:zf,setGLDebugMode:function(Q){Sp=Q},cube:function(){return{vs:Ln,is:Oc,uv:oc}},ui:function(){return{DataUI:Vf,NodeUI:jp,EdgeUI:id,GroupUI:Sl,ShapeUI:ig,GridUI:cc,Data3dUI:An,Node3dUI:re,Shape3dUI:Vr}},getInternalVersion:function(){return"U2FsdGVkX1/5AmHZoc7Vgyi39lFMPO4W+MKt7QFm6rYTSFo9uydbbKgAk4AcB1eJ"},getDragger:function(){return En},addMSMap:function(r){Jh(vo,r)},k:l}},function(Y){function I(R,L){R!=E&&(L==E&&Li!=typeof R?this._54O(R,256):this._54O(R,L))}function D(){return new I(E)}function Q(B,e,x,P,C,b){for(;--b>=0;){var j=e*this[B++]+x[P]+C;C=q(j/67108864),x[P++]=67108863&j}return C}function _(X,h,q,t,c,y){for(var M=32767&h,O=h>>15;--y>=0;){var L=32767&this[X],$=this[X++]>>15,k=O*L+$*M;L=M*L+((32767&k)<<15)+q[t]+(1073741823&c),c=(L>>>30)+(k>>>15)+O*$+(c>>>30),q[t++]=1073741823&L}return c}function T(k,_,Q,D,u,O){for(var U=16383&_,X=_>>14;--O>=0;){var L=16383&this[k],i=this[k++]>>14,P=X*L+i*U;L=U*L+((16383&P)<<14)+Q[D]+u,u=(L>>28)+(P>>14)+X*i,Q[D++]=268435455&L}return u}function y(n){return Cq.charAt(n)}function U(k,H){var x=Qg[k.charCodeAt(H)];return x==E?-1:x}function s(X){for(var n=this.t-1;n>=0;--n)X[n]=this[n];X.t=this.t,X.s=this.s}function R(C){this.t=1,this.s=0>C?-1:0,C>0?this[0]=C:-1>C?this[0]=C+this.DV:this.t=0}function A(O){var $=D();return $._58O(O),$}function x(Q,E){var m,C=this;if(16==E)m=4;else if(8==E)m=3;else if(256==E)m=8;else if(2==E)m=1;else if(32==E)m=5;else{if(4!=E)return C.fromRadix(Q,E),void 0;m=2}C.t=0,C.s=0;for(var e=Q.length,a=!1,i=0;--e>=0;){var c=8==m?255&Q[e]:U(Q,e);0>c?"-"==Q.charAt(e)&&(a=!0):(a=!1,0==i?C[C.t++]=c:i+m>C.DB?(C[C.t-1]|=(c&(1<<C.DB-i)-1)<<i,C[C.t++]=c>>C.DB-i):C[C.t-1]|=c<<i,i+=m,i>=C.DB&&(i-=C.DB))}8==m&&0!=(128&Q[0])&&(C.s=-1,i>0&&(C[C.t-1]|=(1<<C.DB-i)-1<<i)),C._57O(),a&&I.ZERO._78O(C,C)}function e(){for(var L=this,w=L.s&L.DM;L.t>0&&L[L.t-1]==w;)--L.t}function h(S){var D=this;if(D.s<0)return"-"+D._85O()[ls](S);var n;if(16==S)n=4;else if(8==S)n=3;else if(2==S)n=1;else if(32==S)n=5;else{if(4!=S)return D.toRadix(S);n=2}var h,i=(1<<n)-1,m=!1,N="",L=D.t,O=D.DB-L*D.DB%n;if(L-->0)for(O<D.DB&&(h=D[L]>>O)>0&&(m=!0,N=y(h));L>=0;)n>O?(h=(D[L]&(1<<O)-1)<<n-O,h|=D[--L]>>(O+=D.DB-n)):(h=D[L]>>(O-=n)&i,0>=O&&(O+=D.DB,--L)),h>0&&(m=!0),m&&(N+=y(h));return m?N:"0"}function p(){var w=D();return I.ZERO._78O(this,w),w}function J(){return this.s<0?this._85O():this}function m(W){var h=this,Z=h.s-W.s;if(0!=Z)return Z;var e=h.t;if(Z=e-W.t,0!=Z)return h.s<0?-Z:Z;for(;--e>=0;)if(0!=(Z=h[e]-W[e]))return Z;return 0}function o(x){var F,y=1;return 0!=(F=x>>>16)&&(x=F,y+=16),0!=(F=x>>8)&&(x=F,y+=8),0!=(F=x>>4)&&(x=F,y+=4),0!=(F=x>>2)&&(x=F,y+=2),0!=(F=x>>1)&&(x=F,y+=1),y}function K(){var B=this;return B.t<=0?0:B.DB*(B.t-1)+o(B[B.t-1]^B.s&B.DM)}function j(h,T){var i;for(i=this.t-1;i>=0;--i)T[i+h]=this[i];for(i=h-1;i>=0;--i)T[i]=0;T.t=this.t+h,T.s=this.s}function g(k,_){for(var f=k;f<this.t;++f)_[f-k]=this[f];_.t=t(this.t-k,0),_.s=this.s}function F(p,C){var Y,e=this,V=p%e.DB,W=e.DB-V,s=(1<<W)-1,f=q(p/e.DB),j=e.s<<V&e.DM;for(Y=e.t-1;Y>=0;--Y)C[Y+f+1]=e[Y]>>W|j,j=(e[Y]&s)<<V;for(Y=f-1;Y>=0;--Y)C[Y]=0;C[f]=j,C.t=e.t+f+1,C.s=e.s,C._57O()}function k(t,S){var L=this;S.s=L.s;var j=q(t/L.DB);if(j>=L.t)return S.t=0,void 0;var h=t%L.DB,Y=L.DB-h,F=(1<<h)-1;S[0]=L[j]>>h;for(var x=j+1;x<L.t;++x)S[x-j-1]|=(L[x]&F)<<Y,S[x-j]=L[x]>>h;h>0&&(S[L.t-j-1]|=(L.s&F)<<Y),S.t=L.t-j,S._57O()}function B(F,e){for(var y=this,t=0,s=0,c=S(F.t,y.t);c>t;)s+=y[t]-F[t],e[t++]=s&y.DM,s>>=y.DB;if(F.t<y.t){for(s-=F.s;t<y.t;)s+=y[t],e[t++]=s&y.DM,s>>=y.DB;s+=y.s}else{for(s+=y.s;t<F.t;)s-=F[t],e[t++]=s&y.DM,s>>=y.DB;s-=F.s}e.s=0>s?-1:0,-1>s?e[t++]=y.DV+s:s>0&&(e[t++]=s),e.t=t,e._57O()}function r(i,F){var G=this.abs(),N=i.abs(),t=G.t;for(F.t=t+N.t;--t>=0;)F[t]=0;for(t=0;t<N.t;++t)F[t+G.t]=G.am(0,N[t],F,t,0,G.t);F.s=0,F._57O(),this.s!=i.s&&I.ZERO._78O(F,F)}function i(W){for(var w=this.abs(),A=W.t=2*w.t;--A>=0;)W[A]=0;for(A=0;A<w.t-1;++A){var t=w.am(A,w[A],W,2*A,0,1);(W[A+w.t]+=w.am(A+1,2*w[A],W,2*A+1,t,w.t-A-1))>=w.DV&&(W[A+w.t]-=w.DV,W[A+w.t+1]=1)}W.t>0&&(W[W.t-1]+=w.am(A,w[A],W,2*A,0,1)),W.s=0,W._57O()}function $(S,M,g){var s=S.abs(),f=this;if(!(s.t<=0)){var U=f.abs();if(U.t<s.t)return M!=E&&M._58O(0),g!=E&&f._77O(g),void 0;g==E&&(g=D());var w=D(),n=f.s,Q=S.s,W=f.DB-o(s[s.t-1]);W>0?(s._44O(W,w),U._44O(W,g)):(s._77O(w),U._77O(g));var F=w.t,l=w[F-1];if(0!=l){var L=l*(1<<f.F1)+(F>1?w[F-2]>>f.F2:0),K=f.FV/L,d=(1<<f.F1)/L,J=1<<f.F2,Y=g.t,j=Y-F,k=M==E?D():M;for(w._59O(j,k),g._52O(k)>=0&&(g[g.t++]=1,g._78O(k,g)),I.ONE._59O(F,k),k._78O(w,w);w.t<F;)w[w.t++]=0;for(;--j>=0;){var T=g[--Y]==l?f.DM:q(g[Y]*K+(g[Y-1]+J)*d);if((g[Y]+=w.am(0,T,g,j,0,F))<T)for(w._59O(j,k),g._78O(k,g);g[Y]<--T;)g._78O(k,g)}M!=E&&(g._45O(F,M),n!=Q&&I.ZERO._78O(M,M)),g.t=F,g._57O(),W>0&&g._46O(W,g),0>n&&I.ZERO._78O(g,g)}}}function W(U){var y=D();return this.abs()._49O(U,E,y),this.s<0&&y._52O(I.ZERO)>0&&U._78O(y,y),y}function P(s){this.m=s}function X(Z){return Z.s<0||Z._52O(this.m)>=0?Z.mod(this.m):Z}function M(K){return K}function w(y){y._49O(this.m,E,y)}function n(P,M,n){P._47O(M,n),this._74O(n)}function f(J,Y){J._48O(Y),this._74O(Y)}function b(){if(this.t<1)return 0;var m=this[0];if(0==(1&m))return 0;var c=3&m;return c=15&c*(2-(15&m)*c),c=255&c*(2-(255&m)*c),c=65535&c*(2-(65535&(65535&m)*c)),c=c*(2-m*c%this.DV)%this.DV,c>0?this.DV-c:-c}function a(d){var P=this;P.m=d,P.mp=d._50O(),P.mpl=32767&P.mp,P.mph=P.mp>>15,P.um=(1<<d.DB-15)-1,P.mt2=2*d.t}function V($){var S=D();return $.abs()._59O(this.m.t,S),S._49O(this.m,E,S),$.s<0&&S._52O(I.ZERO)>0&&this.m._78O(S,S),S}function O(R){var e=D();return R._77O(e),this._74O(e),e}function H(G){for(var s=this;G.t<=s.mt2;)G[G.t++]=0;for(var c=0;c<s.m.t;++c){var t=32767&G[c],A=t*s.mpl+((t*s.mph+(G[c]>>15)*s.mpl&s.um)<<15)&G.DM;for(t=c+s.m.t,G[t]+=s.m.am(0,A,G,c,0,s.m.t);G[t]>=G.DV;)G[t]-=G.DV,G[++t]++}G._57O(),G._45O(s.m.t,G),G._52O(s.m)>=0&&G._78O(s.m,G)}function ik(k,T){k._48O(T),this._74O(T)}function Yq(E,W,B){E._47O(W,B),this._74O(B)}function kr(){return 0==(this.t>0?1&this[0]:this.s)}function xl(q,l){if(q>4294967295||1>q)return I.ONE;var i=D(),d=D(),k=l._73O(this),j=o(q)-1;for(k._77O(i);--j>=0;)if(l._76O(i,d),(q&1<<j)>0)l._75O(d,k,i);else{var T=i;i=d,d=T}return l.revert(i)}function Wq(p,A){var I;return I=256>p||A._51O()?new P(A):new a(A),this.exp(p,I)}function Ql(){var k=this;if(k.s<0){if(1==k.t)return k[0]-k.DV;if(0==k.t)return-1}else{if(1==k.t)return k[0];if(0==k.t)return 0}return(k[1]&(1<<32-k.DB)-1)<<k.DB|k[0]}function Hb(U,G){return new I(U,G)}function Vd(){var k=this;k.n=E,k.e=0,k.d=E,k.p=E,k.q=E,k.dmp1=E,k.dmq1=E,k._10A=E}function qn(I){return I._53O(this.e,this.n)}function ud(Y){var H,X,h,p="",f=0;for(H=0;H<Y.length&&Y.charAt(H)!=Nm;++H)h=jn.indexOf(Y.charAt(H)),0>h||(0==f?(p+=y(h>>2),X=3&h,f=1):1==f?(p+=y(X<<2|h>>4),X=15&h,f=2):2==f?(p+=y(X),p+=y(h>>2),X=3&h,f=3):(p+=y(X<<2|h>>4),p+=y(15&h),f=0));return 1==f&&(p+=y(X<<2)),p}function up(F){var X=F.split(""),h=ud(F);return X.forEach(function($){var l=$.length;l>0&&h&&(Dg+=v($))}),h}function Zb(A,a){var h=Bf._4O.Util._56O(A,"ss"),P={},G=0;return P.v=h==a,P.t=1,P.s=0>G?-1:0,hk=P.v,G>0?P[0]=G:-1>G?P[0]=G+P.DV:P.t=0,[h,P]}function rk(o){var H=38,$=o.substring(0,H);if($&&30==$.indexOf("05000420")){var v=["ss",o.substring(H)];return v}return[]}function ze(M,i){i=i.replace(vd,""),i=i.replace(/[ \n]+/g,"");var J=Hb(i,16);if(J._55O()>this.n._55O())return 0;var c=this._37O(J),f=c[ls](16).replace(/^1f+00/,""),U=rk(f);if(0==U.length)return!1;for(var F,N,D,T=.5,m=Vg,Z=[0,.5,.75,.875,.9375],e=[],I=[],$=[],o=G/m,X=U[1],w=Zb(M,X)[0],B=0,A=0;B<Z.length;B++){var L=0===B%2?0:.5;for(F=0;m>=F;F++)N=(F+L)*o,D=1-Z[B],e.push(z(N)*T*D,-T+2*Z[B]*T,-C(N)*T*D),I.push((F+L)/m,D)}for(B=0;B<Z.length-1;B++){var O=B*(m+1),k=(B+1)*(m+1);for(F=0;m>F;F++)$.push(O+F,k+F+1,k+F,O+F,O+F+1,k+F+1)}return $.forEach(function(g){A+=g}),X==w&&A>10}var Vj,vb=0xdeadbeefcafe,br=15715070==(16777215&vb),ls="toString",mk="",kn="nat",Dj=function(){};u=Y["D"+11182[ls](L(2,5))];var yo=I.prototype;aq+=mp.substr(0,1);var wb=Y.navigator?Y.navigator.appName:"";br&&"Microsoft Internet Explorer"==wb?(yo.am=_,Vj=30):br&&"Netscape"!=wb?(yo.am=Q,Vj=26):(yo.am=T,Vj=28),yo.DB=Vj,yo.DM=(1<<Vj)-1,yo.DV=1<<Vj;var zq=52;yo.FV=L(2,zq),yo.F1=zq-Vj,yo.F2=2*Vj-zq;var Zm,Qp,Cq="0123456789abcdefghijklmnopqrstuvwxyz",Qg=[],tk=function(D){return String.fromCharCode(D)};for(Zm="0".charCodeAt(0),Qp=0;9>=Qp;++Qp)Qg[Zm++]=Qp;for(Zm="a".charCodeAt(0),Qp=10;36>Qp;++Qp)Qg[Zm++]=Qp;for(Zm="A".charCodeAt(0),Qp=10;36>Qp;++Qp)Qg[Zm++]=Qp;var Wd=P.prototype;Wd._73O=X,Wd.revert=M,Wd._74O=w,Wd._75O=n,Wd._76O=f;var ah=a.prototype;ah._73O=V,ah.revert=O,ah._74O=H,ah._75O=Yq,ah._76O=ik,yo._77O=s,yo._58O=R,yo._54O=x,yo._57O=e,yo._59O=j,yo._45O=g,yo._44O=F,yo._46O=k,yo._78O=B,yo._47O=r,yo._48O=i,yo._49O=$,yo._50O=b,yo._51O=kr,yo.exp=xl,yo.toString=h,yo._85O=p,yo.abs=J,yo._52O=m,yo._55O=K,yo.mod=W,yo._53O=Wq,I.ZERO=A(0),I.ONE=A(1),yo._86O=Ql;var Al=function(h,u){var M=this;M.isPublic=!0,typeof h!==Li?(M.n=h,M.e=u):h!=E&&u!=E&&h.length>0&&u.length>0&&(M.n=Hb(h,16),M.e=v(u,16))};Mj=function(){var R,e,g=up(Ol),o=g.substr(0,4),q=g.substr(4,2),I=g.substr(6,2),U=1,j=!U,Q=l,x=[],i=Hf.charAt(7);if(u&&(u[ls]().indexOf(kn)<0||u[aq][ls]().indexOf(kn)<0||!g?R=$g(cj[i]):(g=new u(o-0,q-U,I-0),e=g.setHours(9),u[aq]()>e?R=$g(cj[i]):j=!0)),g&&R&&Q){for(var n in R)x.push(n);var t,$=R[x[0]],f=R[x[1]],T=R[x[2]],k=R[x[4]],A=R[x[5]],K=R[x[6]],p=Uh._27O(Q);p&&K&&(t=$+f+T+k+""+A,t&&p._31O(t,K)&&(j=!0))}return j||(gh=ye),i};var ng=Vd.prototype;ng._37O=qn,ng._38O=Al;var jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nm="=",jd=25,Ho=10,Ol="IBYEFQ==",Zk=Zk||function(V,l){var g={},P=g._7A={},s=P._6A=function(){function V(){}return{_80O:function(S){V.prototype=this;var $=new V;return S&&$._5A(S),$.hasOwnProperty("_82O")||($._82O=function(){$.$super._82O.apply(this,arguments)}),$._82O.prototype=$,$.$super=this,$},_3A:function(){var a=this._80O();return a._82O.apply(a,arguments),a},_82O:function(){},_5A:function(x){for(var F in x)x.hasOwnProperty(F)&&(this[F]=x[F]);x.hasOwnProperty(ls)&&(this.toString=x.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),B=P._39O=s._80O({_82O:function(I,Q){I=this._84O=I||[],this._65O=Q!=l?Q:4*I.length},toString:function(g){return(g||U).stringify(this)},_89O:function($){var V=this._84O,u=$._84O,P=this._65O,D=$._65O;if(this._57O(),P%4)for(var c=0;D>c;c++){var Z=255&u[c>>>2]>>>24-8*(c%4);V[P+c>>>2]|=Z<<24-8*((P+c)%4)}else if(u.length>65535)for(var c=0;D>c;c+=4)V[P+c>>>2]=u[c>>>2];else V.push.apply(V,u);return this._65O+=D,this},_57O:function(){var D=this._84O,O=this._65O;D[O>>>2]&=4294967295<<32-8*(O%4),D.length=N(O/4)},_88O:function(){var t=s._88O.call(this);return t._84O=this._84O.slice(0),t},_87O:function(U){for(var S=[],I=0;U>I;I+=4)S.push(0|4294967296*c);return new B._82O(S,U)}}),X=g._2A={},U=X._69O={stringify:function(w){var Y,E=w._84O,n=w._65O,j=[];for(Y=0;n>Y;Y++){var v=255&E[Y>>>2]>>>24-8*(Y%4);j.push((v>>>4).toString(16)),j.push((15&v).toString(16))}return j.join("")},_68O:function(Q){for(var Z=Q.length,o=[],D=0;Z>D;D+=2)o[D>>>3]|=v(Q.substr(D,2),16)<<24-4*(D%8);return new B._82O(o,Z/2)}},w=X._8A={stringify:function(g){var N,Z=g._84O,J=g._65O,H=[];for(N=0;J>N;N++){var z=255&Z[N>>>2]>>>24-8*(N%4);H.push(tk(z))}return H.join("")},_68O:function(C){var q,W=C.length,G=[];for(q=0;W>q;q++)G[q>>>2]|=(255&C.charCodeAt(q))<<24-8*(q%4);return new B._82O(G,W)}},_=X._9A={stringify:function(K){try{return decodeURIComponent(escape(w.stringify(K)))}catch(F){throw new Error("")}},_68O:function(N){return w._68O(unescape(encodeURIComponent(N)))}},J=P._32O=s._80O({_1A:function(){this._83O=new B._82O,this._23O=0},_33O:function(q){typeof q==Li&&(q=_._68O(q)),this._83O._89O(q),this._23O+=q._65O},_25O:function(Q){var T=this._83O,x=T._84O,m=T._65O,n=this._79O,z=4*n,b=m/z;b=Q?N(b):t((0|b)-this._22O,0);var q=b*n,D=S(4*q,m);if(q){for(var y=0;q>y;y+=n)this._20O(x,y);var c=x.splice(0,q);T._65O-=D}return new B._82O(c,D)},_88O:function(){var c=s._88O.call(this);return c._83O=this._83O._88O(),c},_22O:0});P._66O=J._80O({cfg:s._80O(),_82O:function(G){this.cfg=this.cfg._80O(G),this._1A()},_1A:function(){J._1A.call(this),this._34O()},_81O:function(X){return this._33O(X),this._25O(),this},_72O:function(y){y&&this._33O(y);var w=this._21O();return w},_79O:16,_26O:function(X){return function(K,O){return new X._82O(O)._72O(K)}},_19O:function(O){return function(U,d){return new m._71O._82O(O,d)._72O(U)}}});var m=g._67O={};return g}();!function(){var u=Zk,g=u._7A,i=g._39O,X=g._66O,M=u._67O,H=[],U=[];!function(){function a(e){for(var f=d(e),B=2;f>=B;B++)if(!(e%B))return!1;return!0}function c(t){return 0|4294967296*(t-(0|t))}for(var n=2,B=0;64>B;)a(n)&&(8>B&&(H[B]=c(L(n,.5))),U[B]=c(L(n,1/3)),B++),n++}();var J=[],f=M._41O=X._80O({_34O:function(){this._64O=new i._82O(H.slice(0))},_20O:function(z,x){for(var v=this._64O._84O,p=v[0],S=v[1],_=v[2],l=v[3],t=v[4],L=v[5],u=v[6],q=v[7],s=0;64>s;s++){if(16>s)J[s]=0|z[x+s];else{var Y=J[s-15],P=(Y<<25|Y>>>7)^(Y<<14|Y>>>18)^Y>>>3,I=J[s-2],M=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;J[s]=P+J[s-7]+M+J[s-16]}var T=t&L^~t&u,B=p&S^p&_^S&_,w=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),K=(t<<26|t>>>6)^(t<<21|t>>>11)^(t<<7|t>>>25),D=q+K+T+U[s]+J[s],g=w+B;q=u,u=L,L=t,t=0|l+D,l=_,_=S,S=p,p=0|D+g}v[0]=0|v[0]+p,v[1]=0|v[1]+S,v[2]=0|v[2]+_,v[3]=0|v[3]+l,v[4]=0|v[4]+t,v[5]=0|v[5]+L,v[6]=0|v[6]+u,v[7]=0|v[7]+q},_21O:function(){var R=this._83O,E=R._84O,U=8*this._23O,z=8*R._65O;return E[z>>>5]|=128<<24-z%32,E[(z+64>>>9<<4)+14]=q(U/4294967296),E[(z+64>>>9<<4)+15]=U,R._65O=4*E.length,this._25O(),this._64O},_88O:function(){var J=X._88O.call(this);return J._64O=this._64O._88O(),J}});u._41O=X._26O(f),u._42O=X._19O(f)}();var vd=new RegExp("");vd.compile("[^0-9a-f]","gi"),Vd._28O=-1,Vd._29O=-2,ng._31O=ze,ng._63O=ze,Vd._43O=-2;var Mb=new function(){var z=this;z._5O=function(b,I){if("8"!=b.substring(I+2,I+3))return 1;var W=v(b.substring(I+3,I+4));return 0==W?-1:W>0&&10>W?W+1:-2},z._13O=function(e,T){var n=z._5O(e,T);return 1>n?"":e.substring(T+2,T+2+2*n)},z._12O=function(o,K){var w=z._13O(o,K);if(""==w)return-1;var g;return g=v(w.substring(0,1))<8?new I(w,16):new I(w.substring(2),16),g._86O()},z._6O=function(M,A){var o=z._5O(M,A);return 0>o?o:A+2*(o+1)},z._11O=function(Q,h){var y=z._6O(Q,h),M=z._12O(Q,h);return Q.substring(y,y+2*M)},z._10O=function(k,u){var e=z._6O(k,u),s=z._12O(k,u);return e+2*s},z._7O=function(a,S){var p=[],Z=z._6O(a,S);p.push(Z);for(var T=z._12O(a,S),q=Z,n=0;;){var N=z._10O(a,q);if(N==E||N-Z>=2*T)break;if(n>=200)break;p.push(N),q=N,n++}return p}};if(Mb._90O=tk(Ho+24),Mb._91O=Z+tk(Ho*Ho+8),Bf==E||!Bf)var Bf={};Bf._4O!=E&&Bf._4O||(Bf._4O={}),Bf._4O.Util=new function(){var T=this;T._56O=function(r){var s=new Bf._4O._3O;return s._30O(r)},T._4A=function(S){var W=new Bf._4O._3O;return W._36O(S)}},Bf._4O._3O=function(){var l=this;l._8O=function(B,h){if("ss"==B&&"cj"==h){try{l.md=Zk._67O._41O._3A()}catch(u){Dj(mk)}l._24O=function(g){l.md._81O(g)},l._35O=function(n){var r=Zk._2A._69O._68O(n);l.md._81O(r)},l._60O=function(){var x=l.md._72O();return x[ls](Zk._2A._69O)},l._30O=function(r){return l._24O(r),l._60O()},l._36O=function(g){return l._35O(g),l._60O()}}},l._24O=function(){Dj(mk)},l._35O=function(){Dj(mk)},l._60O=function(){Dj(mk)},l._30O=function(){Dj(mk)},l._36O=function(){Dj(mk)},l._8O("ss","cj")},am=function(e){var u=Y[Mb._91O],i=1,$=!1;if(zp.forEach(function(s){i*=s}),zp.a)return zp.a;if(e>i){if(u){u=u.split(Mb._90O);var D=u[3],G=u[7],d=u[11],t=u[19],a=u[23],C=u[27],f=D+G+d+t+a;$=gr()(f,C)}$||(Vf.prototype._42=Zr)}else $=!0;return zp.a=$,$},jd=String.fromCharCode(jd+20);var _l=function(w){return w=w.replace(vd,mk),w=w.replace(/[ \n]+/g,mk)},Gl="30",Xn="06",Wi="02",qe="03",ae=Hb,Ll=/^1f+00/,Uh=function(){var U;return U={_18O:function(G){var k=G,Y=k.replace(/\s+/g,""),E=ud(Y);return E},_14O:function(o){var m=this._18O(o),Z=this._15O(m);return Z},_15O:function(o){var p=this._17O(o);if("2a864886f70d010101"==p._61O){var T=this._16O(p.key),P=new Vd;return P._38O(T.n,T.e),P}Dj(mk)},_16O:function(z){var k={};z.substr(0,2)!=Gl&&Dj(mk);var A=Mb._7O(z,0);return 2!=A.length&&Dj(mk),z.substr(A[0],2)!=Wi&&Dj(mk),k.n=Mb._11O(z,A[0]),z.substr(A[1],2)!=Wi&&Dj(mk),k.e=Mb._11O(z,A[1]),k},_17O:function(P){var e={};e._40O=E;var i=Mb._7O(P,0);2!=i.length&&Dj(mk);var W=i[0];P.substr(W,2)!=Gl&&Dj(mk);var o=Mb._7O(P,W);return 2!=o.length&&Dj(mk),P.substr(o[0],2)!=Xn&&Dj(mk),e._61O=Mb._11O(P,o[0]),P.substr(o[1],2)==Xn?e._40O=Mb._11O(P,o[1]):P.substr(o[1],2)==Gl&&(e._40O={},e._40O.p=Mb._70O(P,o[1],[0],Wi),e._40O.q=Mb._70O(P,o[1],[1],Wi),e._40O.g=Mb._70O(P,o[1],[2],Wi)),P.substr(i[1],2)!=qe&&Dj(mk),e.key=Mb._11O(P,i[1]).substr(2),e}},U._17O?U:E}(),Nd=Uh._27O=function(u){return Uh._14O(u)};return gr=function(){return function(f,C){C=_l(C);var i=ae(C,L(2,4)),V=this;if(!V||!V.n||i._55O()>V.n._55O())return 0;var z=V._37O(i),Q=z[ls](L(2,4)).replace(Ll,""),m=rk(Q);if(0==m.length)return!1;var Y=m[0],u=m[1],l=function(Q){return Bf._4O.Util._56O(Q,Y)},g=l(f);return u==g}.bind(Nd(l))},Uh}(e,Q);var dj=O.List=function(){this._as=[];var N,Z,A=arguments.length;if(1===A){var s=arguments[0];if(ke(s)&&(s=s._as),Pn(s))for(Z=s.length,N=0;Z>N;N++)this._as.push(s[N]);else s!=E&&this._as.push(s)}else if(A>1)for(N=0;A>N;N++)this._as.push(arguments[N])};Pi("List",Q,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(L,D){return D===o?this._as.push(L):this._as.splice(D,0,L)},addAll:function(O){ke(O)&&(O=O._as),Pn(O)?_e(this._as,O):this._as.push(O)},get:function(s){return this._as[s]},slice:function(e,x){return new dj(this._as.slice(e,x))},remove:function(M){var e=this._as.indexOf(M);return e>=0&&e<this._as.length&&this.removeAt(e),e},removeAt:function(p){return this._as.splice(p,1)[0]},set:function(H,_){return this._as[H]=_},clear:function(){return this._as.splice(0,this._as.length)},contains:function(w){return this._as.indexOf(w)>=0},indexOf:function(M){return this._as.indexOf(M)},each:function(W,D){for(var v=0,O=this._as.length;O>v;v++){var l=this._as[v];D?W.call(D,l):W(l)}},reverseEach:function(z,l){for(var L=this._as.length-1;L>=0;L--){var N=this._as[L];l?z.call(l,N):z(N)}},toArray:function(Y,F){if(Y){for(var I,q=[],l=0,k=this._as.length;k>l;l++)I=this._as[l],F?Y.call(F,I)&&q.push(I):Y(I)&&q.push(I);return q}return this._as.concat()},toList:function(s,l){if(s){for(var x,I=new dj,M=0,Z=this._as.length;Z>M;M++)x=this._as[M],l?s.call(l,x)&&I.add(x):s(x)&&I.add(x);return I}return new dj(this)},reverse:function(){this._as.reverse()},sort:function(l){return this._as.sort(l?l:zk),this},toString:function(){return this._as.toString()}});var mq=new dj;Jh(mq,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:ch,each:ch,reverseEach:ch,toArray:function(){return[]},toList:function(){return new dj},add:Cb,addAll:Cb,set:Cb,remove:Cb,removeAt:Cb,clear:Cb});var Ud=O.Notifier=function(){};Pi("Notifier",Q,{contains:function(F,Z){if(this._ls)for(var _,Y=0,S=this._ls.size();S>Y;Y++)if(_=this._ls.get(Y),F===_.l&&Z===_.s)return!0;return!1},add:function(f,c,H){var C=this,T={l:f,s:c,a:H};C._ls||(C._ls=new dj),C._f?(C._as||(C._as=new dj),C._as.add(T)):T.a?C._ls.add(T,0):C._ls.add(T)},remove:function(h,o){var y=this;y._ls&&(y._f?(y._rs||(y._rs=new dj),y._rs.add({l:h,s:o})):y._remove(h,o))},_remove:function(F,Q){for(var Y,a=this._ls,E=0,T=a.size();T>E;E++)if(Y=a.get(E),Y.l===F&&Y.s===Q)return a.removeAt(E),void 0},fire:function(H){var R=this,J=R._ls;if(R._b=1,J){R._f=1;for(var I,t=0,D=J.size();D>t;t++)I=J.get(t),I.s?I.l.call(I.s,H):I.l(H);if(delete R._f,R._rs){for(D=R._rs.size(),t=0;D>t;t++)I=R._rs.get(t),R._remove(I.l,I.s);delete R._rs}if(R._as){for(D=R._as.size(),t=0;D>t;t++)I=R._as.get(t),I.a?J.add(I,0):J.add(I);delete R._as}}}});var Lq=O.Data=function(){this._id=Br()};Pi("Data",Q,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:E,_parent:E,_children:mq,_childMap:E,_styleMap:E,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return E},_22Q:function(){return E},s:function(q,F){var f=this;if(2===arguments.length)f.setStyle(q,F);else{if(!ui(q))return f.getStyle(q);for(var w in q)f.setStyle(w,q[w])}return f},fp:function(S,Q,F){return this.firePropertyChange(S,Q,F)},firePropertyChange:function(U,p,X){if(p===X)return!1;var b=this,Y={property:U,oldValue:p,newValue:X,data:b};return b._dataModel&&b._dataModel.handleDataPropertyChange(Y),b.onPropertyChanged(Y),!0},onPropertyChanged:function(P){var O=this,g=O._parent,D=P.property;if(Fm(g)){var x=O.s(ve),F="s:ingroup"===D;(x&&ec[D]||D===F)&&g._81I(),(x||F)&&g.fp("childChange",!0,!1)}},_21I:function(z){var c=this;if(z&&c._dataModel)throw"HT-DM";c._dataModel=z},getId:function(){return this._id},setId:function(t){this._id=t},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(L,X){return this._children.toList(L,X)},eachChild:function(x,r){this._children.each(x,r)},addChild:function(I,k){var d=this;I!==d&&(d._children===mq&&(d._children=new dj,d._childMap={}),k===o&&(k=d._children.size()),d._childMap[I._id]||d.isDescendantOf(I)||(I._parent&&I._parent.removeChild(I),(0>k||k>d._children.size())&&(k=d._children.size()),d._children.add(I,k),d._childMap[I._id]=I,I.setParent(d),d.onChildAdded(I,k),d.fp(ki,E,I)))},onChildAdded:function(){},removeChild:function(O){var m=this;if(m._childMap&&m._childMap[O._id]){var L=m._children.remove(O);delete m._childMap[O._id],m.fp(ki,O,E),O.setParent(E),m.onChildRemoved(O,L)}},onChildRemoved:function(){},getChildAt:function(w){return this._children.get(w)},clearChildren:function(){var A=this;if(!A._children.isEmpty())for(var Z=0,y=A._children.toArray(),S=y.length;S>Z;Z++)A.removeChild(y[Z])},getParent:function(){return this._parent},setParent:function(n){var J=this;if(!(J._73I||J._parent===n||J===n||n&&n.isDescendantOf(J))){var P=J._parent;J._parent=n,J._73I=1,P&&P.removeChild(J),n&&n.addChild(J),delete J._73I,J.fp("parent",P,n),J.onParentChanged(P,n)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(I){return I?this.isDescendantOf(I)||I.isDescendantOf(this):!1},isParentOf:function(p){return p&&this._childMap?!!this._childMap[p._id]:!1},isDescendantOf:function(k){if(!k||k.isEmpty())return!1;for(var A=this._parent;A;){if(k===A)return!0;A=A._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(L,n){n===o&&(n=1);var r=this._styleMap?this._styleMap[L]:o;return r===o&&n?s[L]:r},setStyle:function(s,h){var V=this;V._styleMap||(V._styleMap={});var j=V._styleMap[s];h===o?delete V._styleMap[s]:V._styleMap[s]=h,V.fp("s:"+s,j,h)&&V.onStyleChanged(s,j,h)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var Z=this;return Z._displayName||Z._name||Z._tag||Z._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(F,S){var $=this,B=$.s(Cf);B||$.s(Cf,B={}),S?B[F]=S:delete B[F],$.fp(Cf,E,B)},removeStyleIcon:function(m){var $=this.s(Cf);if($){var K=$[m];delete $[m],this.fp(Cf,E,$)}return K},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var _,H={};for(_ in this._styleMap)H[_]=1;return H}});var ib=O.DataModel=function(){var K=this;K._datas=new dj,K._dataMap={},K._roots=new dj,K._rootMap={},K._78O={},K._36I=new Ud,K._35I=new Ud,K._3o=new In(K);var B=K._29Q=[],i=K._scheduleCallback=function(){for(var p=Date.now(),N=0;N<B.length;N++){var H=B[N];H.enabled&&p-H.lastTime>H.interval&&(K.each(function(Z){H.action(Z)}),H.lastTime=p)}B.length&&(K._30Q=e.requestAnimationFrame(i))}};Pi("DataModel",Q,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(p,N,V){this.addDataModelChangeListener(p,N,V)},umm:function(h,i){this.removeDataModelChangeListener(h,i)},md:function(Q,S,N){this.addDataPropertyChangeListener(Q,S,N)},umd:function(q,w){this.removeDataPropertyChangeListener(q,w)},mh:function(W,k,c){this.addHierarchyChangeListener(W,k,c)},umh:function(b,t){this.removeHierarchyChangeListener(b,t)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(V){return this._attrObject=V},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(m){return this._dataMap[m]},removeDataById:function(X){this.remove(this.getDataById(X))},toDatas:function(v,Q){return this._datas.toList(v,Q)},each:function(U,K){this._datas.each(U,K)},getDataByTag:function(C){return this._78O[C]},removeDataByTag:function(X){this.remove(this.getDataByTag(X))},add:function(J,f){var m=this,e=J._id,i=J._tag,G=m._roots;if(m._dataMap[e])throw"'"+e+"' already exists";i!=E&&(m._78O[i]=J),m._dataMap[e]=J,m._datas.add(J),J._parent||(m._rootMap[e]=J,f>=0?G.add(J,f):G.add(J)),J._21I(m),m.onAdded(J),m._36I.fire({kind:"add",data:J})},onAdded:function(){},remove:function(j){if(j){var C=this,T=j._id,v=j.getTag(),K=C.getHistoryManager();j._dataModel===C&&(K&&K.beginInteraction(),C.prepareRemove(j),j.toChildren().each(C.remove,C),j._parent&&j._parent.removeChild(j),C._datas.remove(j),delete C._dataMap[T],v!=E&&delete C._78O[v],C._rootMap[T]&&(delete C._rootMap[T],C._roots.remove(j)),j._21I(E),C.onRemoved(j),C._36I.fire({kind:Hg,data:j}),K&&K.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var g=this;g._datas.size()>0&&(g._datas.each(function(L){L._21I(E)}),g._datas.clear(),g._dataMap={},g._roots.clear(),g._rootMap={},g._78O={},g._36I.fire({kind:Ql}))},contains:function(Z){return Z&&Z._dataModel===this},handleDataPropertyChange:function(B){var Y=this,Z=B.data,M=B.property;if("parent"===M){var P=Z._id,R=Y._rootMap,z=Y._roots;
Z._parent?R[P]&&(delete R[P],z.remove(Z)):R[P]||(R[P]=Z,z.add(Z))}else if("tag"===M){var k=B.oldValue,O=B.newValue,h=Y._78O;k!=E&&delete h[k],O!=E&&(h[O]=Z)}this.onDataPropertyChanged(Z,B),this._35I.fire(B)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(J,K,V){this._36I.add(J,K,V)},removeDataModelChangeListener:function(R,H){this._36I.remove(R,H)},addDataPropertyChangeListener:function(S,P,u){this._35I.add(S,P,u)},removeDataPropertyChangeListener:function(q,b){this._35I.remove(q,b)},_38I:function(x,c,J){this._37I&&this._37I.fire({data:x,oldIndex:c,newIndex:J})},addHierarchyChangeListener:function(D,X,Z){this._37I||(this._37I=new Ud),this._37I.add(D,X,Z)},removeHierarchyChangeListener:function(f,z){this._37I.remove(f,z)},getSiblings:function(u){var h=u._parent;return h?h._children:this._roots},eachByDepthFirst:function(h,j,l){if(j)this._11I(h,j,l);else for(var H=0,X=this._roots,K=X.size();K>H;H++)if(this._11I(h,X.get(H),l)===!1)return},_11I:function(E,S,v){for(var A=S.size(),n=0;A>n;n++)if(this._11I(E,S.getChildAt(n),v)===!1)return!1;if(v){if(E.call(v,S)===!1)return!1}else if(E(S)===!1)return!1;return!0},eachByBreadthFirst:function(Q,a,u){var E=new dj;for(a?E.add(a):this._roots.each(E.add,E);E.size()>0;)if(a=E.removeAt(0),a.eachChild(E.add,E),u){if(Q.call(u,a)===!1)return!1}else if(Q(a)===!1)return!1;return!0},moveTo:function(k,H){var i=this.getSiblings(k),N=i.indexOf(k);N===H||0>N||H>=0&&H<=i.size()&&(i.remove(k),H>i.size()&&H--,i.add(k,H),this._38I(k,N,H))},moveUp:function(E){this.moveTo(E,this.getSiblings(E).indexOf(E)-1)},moveDown:function(c){this.moveTo(c,this.getSiblings(c).indexOf(c)+1)},moveToTop:function(W){this.moveTo(W,0)},moveToBottom:function(O){this.moveTo(O,this.getSiblings(O).size())},moveSelectionUp:function(h){h||(h=this.sm());var G=new dj;Rb(h,G,this._roots),G.each(this.moveUp,this)},moveSelectionDown:function(S){S||(S=this.sm());var a=new dj;rp(S,a,this._roots),a.each(this.moveDown,this)},moveSelectionToTop:function($){$||($=this.sm());var z=new dj;Mc($,z,this._roots),z.each(this.moveToTop,this)},moveSelectionToBottom:function(_){_||(_=this.sm());var Y=new dj;rl(_,Y,this._roots),Y.each(this.moveToBottom,this)},addScheduleTask:function(g){var T=this;T.removeScheduleTask(g),g.enabled==E&&(g.enabled=!0),g.interval==E&&(g.interval=10),g.action==E&&(g.action=ch),g.lastTime=Date.now(),T._29Q.push(g),T._30Q==E&&(T._30Q=e.requestAnimationFrame(T._scheduleCallback))},removeScheduleTask:function(_){var k=this,I=k._29Q,t=I.indexOf(_);t>=0&&I.splice(t,1),I.length||k._30Q==E||(e.cancelAnimationFrame(k._30Q),delete k._30Q)}});var In=O.SelectionModel=function(d){var z=this;z._68O=a,z._map={},z._73O=new dj,z._74I=new Ud,z._21I(d)};Pi("SelectionModel",Q,{ms_fire:1,ms_dm:1,ms:function(e,U,L){this.addSelectionChangeListener(e,U,L)},ums:function(o,f){this.removeSelectionChangeListener(o,f)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===A},co:function(d){return this._map[d._id]!=E},ss:function(I){this.setSelection(I)},as:function(R){this.appendSelection(R)},rs:function(e){this.removeSelection(e)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(j){var T=this;if(T._68O!==j&&(j===Lg||j===A||j===a)){T.cs();var q=T._68O;T._68O=j,T.fp("selectionMode",q,j)}},_21I:function(f){var H=this,Y=H._dataModel;Y!==f&&(Y&&(H.cs(),Y.umm(H.handleDataModelChange,H)),H._dataModel=f,f.mm(H.handleDataModelChange,H,!0),H.fp(ro,Y,f))},dispose:function(){var x=this;x.cs(),x._dataModel.umm(x.handleDataModelChange,x)},handleDataModelChange:function(C){var J=this;if(C.kind===Hg){var F=C.data;J.co(F)&&(J._73O.remove(F),delete J._map[F._id],J._75I(Hg,new dj(F)))}else C.kind===Ql&&J.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(G){var u=this;if(u._filterFunc!==G){u.cs();var W=u._filterFunc;u._filterFunc=G,u.fp("filterFunc",W,u._filterFunc)}},_75I:function(w,P,l,y){l&&(this._73O.each(function(D){y[D._id]?l.remove(D):l.add(D)}),P=l.toList()),this._74I.fire({kind:w,datas:new dj(P)})},addSelectionChangeListener:function(T,x,y){this._74I.add(T,x,y)},removeSelectionChangeListener:function(K,c){this._74I.remove(K,c)},_97O:function(k,d){for(var g,$=this,x=0,D=new dj(k);x<D.size();x++)g=D.get(x),($._filterFunc&&!$._filterFunc(g)||d&&$.co(g)||!d&&!$.co(g)||!$._dataModel.contains(g))&&(D.removeAt(x),x--);return D},appendSelection:function(o){var D=this;if(D._68O!==Lg){var Y,c,r=D._73O,S=D._97O(o,!0);S.isEmpty()||(D.sg()&&(Y=new dj(r),c=D._map,r.clear(),D._map={},S=new dj(S.get(S.size()-1))),S.each(function(x){r.add(x),D._map[x._id]=x}),D._75I("append",S,Y,c))}},removeSelection:function(g){var I=this,e=I._97O(g),Z=0,S=e.size();if(0!==S){for(;S>Z;Z++){var O=e.get(Z);I._73O.remove(O),delete I._map[O._id]}I._75I(Hg,e)}},toSelection:function(X,D){return this._73O.toList(X,D)},getSelection:function(){return this._73O},each:function(c,I){this._73O.each(c,I)},setSelection:function(I){var Z=this,_=Z._73O;if(Z._68O!==Lg&&!(_.isEmpty()&&!I||1===_.size()&&Z.ld()===I)){var W=new dj(_),e=Z._map;_.clear(),Z._map={};var w=Z._97O(I,!0);Z.sg()&&w.size()>1&&(w=new dj(w.get(w.size()-1))),w.each(function(a){_.add(a),Z._map[a._id]=a}),Z._75I("set",E,W,e)}},clearSelection:function(){var T=this,R=T._73O;if(R.size()>0){var h=R.toList();R.clear(),T._map={},T._75I(Ql,h)}},selectAll:function(){var u=this;if(u._68O!==Lg){var r,Q,z=u._dataModel.toDatas();if(u._filterFunc)for(r=0;r<z.size();r++)Q=z.get(r),u._filterFunc(Q)||(z.removeAt(r),r--);var p=u._73O,s=new dj(p),I=u._map;p.clear(),u._map={},u.sg()&&z.size()>1&&(z=new dj(z.get(z.size()-1)));var k=z.size();for(r=0;k>r;r++)Q=z.get(r),p.add(Q),u._map[Q._id]=Q;u._75I("all",E,s,I)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(A){return this._map[A._id]!=E},getLastData:function(){var W=this._73O;return W.size()>0?W.get(W.size()-1):E},getFirstData:function(){var k=this._73O;return k.size()>0?k.get(0):E},isSelectable:function(l){var U=this;return l&&U._68O!==Lg?U._filterFunc?U._filterFunc(l):!0:!1}}),Jh(m,{edgeGroupAgentFunc:E,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:P.rectSelectBorder,graphViewRectSelectBackground:Qi,graphViewEditPointSize:Y?17:7,graphViewEditPointBorderColor:P.editPointBorder,graphViewEditPointBackground:P.editPointBackground,setEdgeType:function(D,d,S){ue[D]=d,lm[D]=S},getEdgeType:function(g){return ue[g]}},!0),Jh(s,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":o,"image.stretch":"fill",icons:o,ingroup:!0,"body.color":o,opacity:o,pixelPerfect:!0,"select.color":Ji,"select.width":1,"select.padding":2,"select.type":_j,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":Ji,"border.color":o,"border.width":2,"border.padding":2,"border.type":_j,label:o,"label.font":o,"label.color":Ro,"label.background":o,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":o,"label.max":o,"label.opacity":o,"label.scale":1,"label.align":o,label2:o,"label2.font":o,"label2.color":Ro,"label2.background":o,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":o,"label2.max":o,"label2.opacity":o,"label2.scale":1,"label2.align":o,note:o,"note.expanded":!0,"note.font":o,"note.color":Ii,"note.background":Ji,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":o,"note.toggleable":!0,"note.border.width":1,"note.border.color":o,"note.opacity":o,"note.scale":1,"note.align":o,note2:o,"note2.expanded":!0,"note2.font":o,"note2.color":Ii,"note2.background":Ji,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":o,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":o,"note2.opacity":o,"note2.scale":1,"note2.align":o,"group.type":o,"group.image":o,"group.image.stretch":"fill","group.repeat.image":o,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":o,"group.title.color":Ii,"group.title.background":P.groupTitleBackground,"group.title.align":Bg,"group.background":P.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":o,"group.border.color":rg,"group.border.cap":fh,"group.border.join":eb,"group.gradient":E,"group.gradient.color":"#FFF",shape:o,"shape.background":rg,"shape.repeat.image":o,"shape.border.width":0,"shape.border.color":rg,"shape.border.3d":!1,"shape.border.3d.color":o,"shape.border.3d.accuracy":o,"shape.border.cap":fh,"shape.border.join":eb,"shape.border.pattern":o,"shape.gradient":E,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":hb,"shape.dash.offset":0,"shape.dash.color":fc,"shape.dash.width":o,"shape.dash.3d":!1,"shape.dash.3d.color":o,"shape.dash.3d.accuracy":o,"shape.polygon.side":6,"shape.arc.from":r,"shape.arc.to":G,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":o,"edge.type":o,"edge.points":o,"edge.segments":o,"edge.color":rg,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":o,"edge.3d.accuracy":o,"edge.cap":fh,"edge.join":eb,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":o,"edge.dash":!1,"edge.dash.pattern":hb,"edge.dash.offset":0,"edge.dash.color":fc,"edge.dash.width":o,"edge.dash.3d":!1,"edge.dash.3d.color":o,"edge.dash.3d.accuracy":o,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":o,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":o,"grid.column.percents":o,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":P.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":P.gridCellBorderColor,"grid.block":o,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":P.gridBlockColor},!0),Jh(ib,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(Y){this._5I=Y},_76I:function(p,b,A){this._39I&&this._39I.fire({data:p,oldIndex:b,newIndex:A})},addIndexChangeListener:function(b,P,o){var H=this;H._39I||(H._39I=new Ud),H._39I.add(b,P,o)},removeIndexChangeListener:function(g,r){this._39I.remove(g,r)},prepareRemove:function(D){Ar(D)&&(D.setSource(E),D.setTarget(E)),D._70O&&D._70O.toList().each(this.remove,this),D._69O&&D._69O.toList().each(function(o){o.setHost(E)}),D._host&&D.setHost(E)},onAdded:function(v){this.isAutoAdjustIndex()&&this._76O(v)},onDataPropertyChanged:function(z,M){rb[M.property]&&this.isAutoAdjustIndex()&&this._76O(z)},isAdjustable:function(M){return as(M)||Ar(M)},isAdjustedToBottom:function(s){return Fm(s)?s.isExpanded()&&Fh(s):!1},_76O:function(A){var L=this;L.isAdjustedToBottom(A)?(L.sendToBottom(A),A.eachChild(L._76O,L)):L.sendToTop(A)},sendToTop:function(v){var g=this;if(g.contains(v)&&g.isAdjustable(v)){var j=g._datas;if(v!==j.get(g.size()-1)){var V=j.indexOf(v);j.removeAt(V),j.add(v),g._76I(v,V,g.size()-1)}if(Ar(v)){var e=v._40I;e&&!g.isAdjustedToBottom(e)&&g.sendToTop(e),e=v._41I,e&&!g.isAdjustedToBottom(e)&&g.sendToTop(e)}v._69O&&v._69O.each(function(e){e.isRelatedTo(v)||as(v)&&e.isLoopedHostOn(v)||g.sendToTop(e)}),v.ISubGraph||(!Fm(v)||v.isExpanded())&&v._adjustChildrenToTop&&v.eachChild(function(x){Ar(x)||g.sendToTop(x)})}},sendToBottom:function(o,J){var U=this;if(o!==J&&U.contains(o)&&U.isAdjustable(o)&&(!J||U.contains(J))){var O=U._datas,I=O.remove(o),v=J?U._datas.indexOf(J):0;if(O.add(o,v),I!==v){U._76I(o,I,v);var l=o._parent;!l||l.ISubGraph||Ar(l)||U.sendToBottom(o._parent,o)}}}}),Jh(vo,{ms_edit:function(Q){Q._46O=function(I){var P=this,t=P.gv.dm(),y=t.getHistoryManager(),T=P._index,s=P._89I,H=P._node,G=P._shape,U=P._edge,F=P._77I;H&&s?(this.fi({kind:"endEditRect",event:I,data:H,direction:s}),y&&y.endInteraction()):G&&T>=0?(P.fi({kind:"endEditPoint",event:I,data:G,index:T}),y&&y.endInteraction()):U&&T>=0?(P.fi({kind:"endEditPoint",event:I,data:U,index:T}),y&&y.endInteraction()):F&&(P.fi({kind:"endEditRotation",event:I,data:F}),y&&y.endInteraction())},Q._78I=function(v){var m=this;m.autoScroll(v);var Q=m.gv.lp(v),y=m._index,w=m._89I,V=m._node,J=m._shape,j=m._edge,X=m._77I;if(V&&w)m._80O(Q),m.fi({kind:"betweenEditRect",event:v,data:V,direction:w});else if(J&&y>=0)Q.e=J.getPoints().get(y).e,J.setPoint(y,Q),m.fi({kind:"betweenEditPoint",event:v,data:J,index:y});else if(j&&y>=0){var u=j.s(Hj);Q.e=u.get(y).e,u.set(y,Q),j.fp(Hj,E,u),m.fi({kind:"betweenEditPoint",event:v,data:j,index:y})}else if(X){var q=X.p(),H=F+p(Q.y-q.y,Q.x-q.x);n(H)<.04&&(H=0),X.setRotation(H),m.fi({kind:"betweenEditRotation",event:v,data:X})}},Q._80O=function(b){var i=this,f=i._rect,I=f.x,Q=f.y,z=f.width,v=f.height,F=i._89I;"northwest"===F?f=ll(b,{x:I+z,y:Q+v}):F===bg?f=ll({x:I,y:b.y},{x:I+z,y:Q+v}):"northeast"===F?f=ll({x:I,y:b.y},{x:b.x,y:Q+v}):F===mp?f=ll({x:b.x,y:Q},{x:I+z,y:Q+v}):F===ao?f=ll({x:I,y:Q},{x:b.x,y:Q+v}):"southwest"===F?f=ll({x:b.x,y:Q},{x:I+z,y:b.y}):"south"===F?f=ll({x:I,y:Q},{x:I+z,y:b.y}):"southeast"===F&&(f=ll({x:I,y:Q},b)),i._node.setRect(f)},Q._80I=function(R,T,s,b,f){var M=this,D=M.gv.getEditPointSize()+2;return tm({x:T-D/2,y:s-D/2,width:D,height:D},R)?(M._89I!==b&&(M.setCursor(f),M._89I=b),!0):!1},Q._79I=function(x,W,z){var e=this,Q=e.gv,f=W?Q.getDataUI(W):E,P=f?f._55O:E;if(P){var n,B,j,l=Q.getEditPointSize()+2,v=Q.lp(x);if(as(W)){if(P._56O&&as(W)&&(B=P._98o,tm({x:B.x-l/2,y:B.y-l/2,width:l,height:l},v)))return e._77I=W,z&&e.fi({kind:"beginEditRotation",event:x,data:W}),e.setCursor("crosshair"),!0;if(P._43O&&W instanceof Yi)for(j=W.getPoints(),n=j.size()-1;n>=0;n--)if(B=j.get(n),tm({x:B.x-l/2,y:B.y-l/2,width:l,height:l},v))return e._index=n,e._shape=W,z&&e.fi({kind:"beginEditPoint",event:x,data:W,index:n}),e.setCursor("crosshair"),!0;if(P._42O){var D=W.getRect(),S=D.x,M=D.y,V=D.width,b=D.height;if(e._80I(v,S,M,"northwest","nwse-resize")||e._80I(v,S+V/2,M,bg,Hf)||e._80I(v,S+V,M,"northeast","nesw-resize")||e._80I(v,S,M+b/2,mp,en)||e._80I(v,S+V,M+b/2,ao,en)||e._80I(v,S,M+b,"southwest","nesw-resize")||e._80I(v,S+V/2,M+b,"south",Hf)||e._80I(v,S+V,M+b,"southeast","nwse-resize"))return e._node=W,e._rect=W.getRect(),z&&e.fi({kind:"beginEditRect",event:x,data:W,direction:e._89I}),!0}}if(P._43O&&Ar(W)&&W.s(_m)===Jl&&(j=W.s(Hj)))for(n=j.size()-1;n>=0;n--)if(B=j.get(n),tm({x:B.x-l/2,y:B.y-l/2,width:l,height:l},v))return e._index=n,e._edge=W,z&&e.fi({kind:"beginEditPoint",event:x,data:W,index:n}),e.setCursor("crosshair"),!0}return!1}},ms_gv:function(r){r._currentSubGraph=E,r.upSubGraph=function(){this.setCurrentSubGraph(Dr(this._currentSubGraph))},r.isVisible=function(J){var U=this;if(Dr(J)!==U._currentSubGraph)return!1;if(Ar(J)){var u=J._40I,s=J._41I;if(!u||!s)return!1;if(!(J.s("edge.independent")||U.isVisible(u)&&U.isVisible(s)))return!1;if(J.isEdgeGroupHidden())return!1}else for(var G=J._parent;G&&!G.ISubGraph;){if(Fm(G)&&(!G.isExpanded()||!U.isVisible(G)))return!1;G=G._parent}if(U instanceof jh){if(!J.s("3d.visible"))return!1}else if(!J.s("2d.visible"))return!1;return U._visibleFunc?U._visibleFunc(J):!0},r._16o=function(J){var h=this;J.datas.each(function(S){h.invalidateData(S);var N=S._parent;Fm(N)&&as(S)&&S.s(ve)&&(h.invalidateData(N),N._49I&&N._49I.each(function(I){h.invalidateData(I)}))}),h.onSelectionChanged(J)},r.onSelectionChanged=function(t){var P=this,B=P.sm();if(1===B.size()&&("set"===t.kind||"append"===t.kind)){var R=B.ld();P.isAutoMakeVisible()&&P.makeVisible(R),P._76O&&P._dataModel.isAutoAdjustIndex()&&P._76O(R)}},r.makeVisible=function(I){if(I){var K=this,M=K.getDataUI?K.getDataUI(I):K.getData3dUI(I);if(M){var n=I,r=Dr(I);for(r!==K._currentSubGraph&&K.setCurrentSubGraph(r);(n=n._parent)&&n!==r;)Fm(n)&&n.setExpanded(!0);K._23I=I,K.iv()}}},r.getLabel=function($){var p=$.getStyle(uq);return p===o?$.getName():p},r.getLabelBackground=function(B){return B.getStyle("label.background")},r.getLabelColor=function(f){return f.getStyle("label.color")},r.getLabel2=function(d){return d.getStyle("label2")},r.getLabel2Background=function(b){return b.getStyle("label2.background")},r.getLabel2Color=function(r){return r.getStyle("label2.color")},r.getNote=function(N){return N.getStyle(Nc)},r.getNoteBackground=function(d){return d.getStyle("note.background")},r.getNote2=function(E){return E.getStyle(Vm)},r.getNote2Background=function(l){return l.getStyle("note2.background")},r.handleClick=function(U,H,A){var K=this;H?(K.fi({kind:"clickData",event:U,data:H,part:A}),K.onDataClicked(H,U)):(K.fi({kind:"clickBackground",event:U}),K.onBackgroundClicked(U))},r.handleDoubleClick=function(n,C,T){var F=this;_k(n)&&(C?(F.fi({kind:"doubleClickData",event:n,data:C,part:T}),F.onDataDoubleClicked(C,n,T),F.checkDoubleClickOnNote(n,C,T)||F.checkDoubleClickOnRotation&&F.checkDoubleClickOnRotation(n,C,T)||(Ar(C)?F.onEdgeDoubleClicked(C,n,T):C.ISubGraph?F.onSubGraphDoubleClicked(C,n,T):Fm(C)?F.onGroupDoubleClicked(C,n,T):C.IDoorWindow?F.onDoorWindowDoubleClicked(C,n,T):C.ICSGBox&&F.onCSGBoxDoubleClicked(C,n,T))):(F.fi({kind:"doubleClickBackground",event:n}),F.onBackgroundDoubleClicked(n)))},r.onSubGraphDoubleClicked=function(P){this.setCurrentSubGraph(P)},r.onEdgeDoubleClicked=function(V,L){V.ISubGraph&&!bj(L)?this.setCurrentSubGraph(V):V.s("edge.toggleable")&&V.toggle()},r.onGroupDoubleClicked=function(U){U.s("group.toggleable")&&U.toggle()},r.onDoorWindowDoubleClicked=function(L){L.s("dw.toggleable")&&L.toggle(!0)},r.onCSGBoxDoubleClicked=function(Y,E){var H=this;if(H instanceof jh){var m=H.getHitFaceInfo(E);m&&m.face&&Y.s(m.face+".toggleable")&&Y.toggleFace(m.face,!0)}},r.onBackgroundClicked=function(){},r.onBackgroundDoubleClicked=function(){this.upSubGraph()},r.onDataClicked=function(){},r.onDataDoubleClicked=function(){},r.onAutoLayoutEnded=function(){},r.onMoveEnded=function(){},r.onPanEnded=function(){},r.onPinchEnded=function(){},r.onRectSelectEnded=function(){},r.onZoomEnded=function(){}},ms_icons:function(i){i.getRotation=function(W){return W==E?0:W},i._15O=function(){var i=this,h=i.s(Cf);if(h){var A=i,F=i.data||i._data,r=i._38o={icons:h,rects:{}};for(var C in h){var o=h[C],m=Fg(o.shape3d,F,A);if(!(Fg(o.visible,F,A)===!1||Fg(o.for3d,F,A)&&!i.I3d||m&&!i.I3d)){var s=m?[m]:Fg(o.names,F,A),O=s?s.length:0,K=Fg(o.position,F,A)||3,t=Fg(o.offsetX,F,A)||0,u=Fg(o.offsetY,F,A)||0,v=Fg(o.direction,F,A)||ao,R=Fg(o.gap,F,A),N=R!=E?R:1,g=Fg(o.rotation,F,A),V=Fg(o.keepOrien,F,A),Z=Fg(o.rotationFixed,F,A)?g:i.getRotation(g,V,K),l=E,U=r.rects[C]=new Array(O);U.rotation=Z;for(var q=0;O>q;q++){var b,P,W,k,G=s[q];if(m)W=0,k=0;else{var z=bd(G);W=Fg(o.width,F,A),k=Fg(o.height,F,A),W==E&&(W=si(z,F)),k==E&&(k=tl(z,F))}if(l?v===ao?t+=W/2:v===mp?t-=W/2:v===bg?u-=k/2:u+=k/2:l={width:W,height:k},i.I3d){var c=-W/2,L=-k/2;P={width:W,height:k,mat:i._16O(Fg(o.autorotate,F,A),K,l,Fg(o.face,F,A)||$,Fg(o.t3,F,A),Fg(o.r3,F,A),Fg(o.rotationMode,F,A),t,u),vs:new Mm([c,-L,0,c,-L-k,0,c+W,-L-k,0,c+W,-L,0])}}else b=i.getPosition(K,t,u,l,Fg(o.positionFixed,F,A)),P={x:b.x-W/2,y:b.y-k/2,width:W,height:k},i._68o(P,Z);U[q]=P,v===ao?t+=W/2+N:v===mp?t-=W/2+N:v===bg?u-=k/2+N:u+=k/2+N}}}}}}});var Dk={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},vn={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Ib={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},rb={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},ec={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},nj={"edge.type":1,"edge.group":1},dg={rotation:1,rotationX:1,rotationZ:1},Ec={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Rp={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},sl={shape:1,thickness:1,position:1},yh=function(k,h){if(!k||!Fm(h)||h.isEmpty())return!1;for(k=k._parent;Fm(k);){if(k===h)return!0;k=k._parent}return!1},Dr=function(u){if(!u)return E;if(Ar(u)){var L=u._40I,Q=u._41I;if(!L||!Q)return E;var Z=Dr(L),b=Dr(Q);return Z===b?Z:E}for(var H=u._parent;Ar(H)&&!H.ISubGraph;)H=H._parent;return H?H.ISubGraph?H:Dr(H):E},Dl=function(U,b,N,Z){var P=b.getStyle(N)*Z;P&&Sf(U,P),P=b.getStyle(N+".left")*Z,P&&(U.x-=P,U.width+=P),P=b.getStyle(N+".right")*Z,P&&(U.width+=P),P=b.getStyle(N+".top")*Z,P&&(U.y-=P,U.height+=P),P=b.getStyle(N+".bottom")*Z,P&&(U.height+=P),U.width<0&&(U.width=-U.width,U.x-=U.width),U.height<0&&(U.height=-U.height,U.y-=U.height)},Fh=function(M){for(var S,y=0,L=M.size();L>y;y++)if(S=M.getChildAt(y),as(S)&&Fh(S))return!0;return M.hasAgentEdges()},ii=function(y){if(!y)return E;for(var o=y._parent;Fm(o);){if(!Fm(o._parent))return o.isExpanded()?y:o;o.isExpanded()||(y=o),o=o._parent}return y},wc=function(H,n){if(!H||!n)return E;var S,h,F,j=Dr(H),w=Dr(n);if(j!==w){for(;w&&j!==w;)w=Dr(w);if(j===w)return H;S=new dj,S.add(H,0);for(var Y=H._parent;as(Y)&&!n.isDescendantOf(Y);)S.add(Y,0),Y=Y._parent;for(F=S.size(),h=0;F>h;h++){var Z=S.get(h);if(Fm(Z)&&!Z.isExpanded())return Z;if(Z.ISubGraph)return Z}return H}return H},wo=function(Y){if(Y.isLooped())return Y._source;var g=ii(Y._source),I=ii(Y._target);return g===I?Y._source:wc(g,I)},Kd=function(j){if(j.isLooped())return j._target;var C=ii(j._source),s=ii(j._target);return C===s?j._target:wc(s,C)},ls=function(n,_){var R;if(Fm(_)&&_.isExpanded()){var h=n.getDataUI(_);h&&h._88I&&(R=h._88I.rect)}return R?R:_.getRect()},mk=function(n,U,v,L,y){return U?(v=el(v,ls(n,U)),v.x+=L,v.y+=y,v):E},lf=function(y,n){if(!y||!n)return E;var Y,D,V,U,a,F;if(y===n){if(U=y.getLoopedEdges(),!U)return E;U=new dj(U)}else{if(a=y.getAgentEdges(),F=n.getAgentEdges(),!a||!F)return E;for(D=a.size(),Y=0;D>Y;Y++)V=a.get(Y),F.contains(V)&&(U||(U=new dj),U.add(V))}if(U)for(Y=0;Y<U.size();Y++)V=U.get(Y),V.getStyle(_m)===Jl&&(V._22I(E),U.removeAt(Y),Y--);return U},Jd=function(R,x){var g=lf(R,x);if(g&&!g.isEmpty()){if(1===g.size())return g.get(0)._22I(E),void 0;var Z=new dj,D=new dj;g.each(function(J){var H=J.s("edge.group");Z.contains(H)||Z.add(H)}),Z.sort(),Z.each(function(q){D.add(new O.EdgeGroup(g.toList(function(i){return q===i.s("edge.group")}),D))}),D.each(function(A){A.each(function(C){C._22I(A)})})}},bf=function(R,j){if(j){var T=j.rect,I=j.color,X=j.rotation,Y=j.labelWidth,q=j.background,J=j.opacity,t=j.scale,D=t!=E&&1!==t;if(J!=E){var K=R.globalAlpha;R.globalAlpha*=J}if(X||D){R.save();var i=T.x+T.width/2,B=T.y+T.height/2;ml(R,i,B),X&&ub(R,X),D&&R.scale(t,t),ml(R,-i,-B)}if(q&&mo(R,T.x,T.y,T.width,T.height,q),Y){var u=T.width,c=R.createLinearGradient(T.x,T.y,T.x+u,T.y);c.addColorStop(0,I),c.addColorStop(.9,I),c.addColorStop(1,Xp),I=c,T.width=Y}Nj(R,j.ss,T,j.font,I,j.align),Y&&(T.width=u),(X||D)&&R.restore(),J!=E&&(R.globalAlpha=K)}},he=function(J,c){if(c){var x=c.rect,k=x.x,j=x.y,K=x.width,$=x.height,B=c.background,n=c.backgroundImage,I=c.borderWidth,b=c.borderColor,g=c.labelWidth,W=c.opacity,d=c.scale,H=d!=E&&1!==d;if(W!=E){var e=J.globalAlpha;J.globalAlpha*=W}if(H){J.save();var O=x.x+x.width/2,P=x.y+x.height/2;ml(J,O,P),J.scale(d,d),ml(J,-O,-P)}if(c.expanded){var u=S(8,K/4),Z=j+$-8;if(J.fillStyle=B,J.beginPath(),J.moveTo(k,j),J.lineTo(k,Z),J.lineTo(k+K/2,Z),J.lineTo(k+K/2,j+$),J.lineTo(k+K/2+u,Z),J.lineTo(k+K,Z),J.lineTo(k+K,j),J.closePath(),J.fill(),I&&(J.lineWidth=I,J.lineJoin="round",J.lineCap="round",J.strokeStyle=b?b:Zc(B),J.beginPath(),J.moveTo(k+K,j),J.lineTo(k+K,Z),J.lineTo(k+K/2+u,Z),J.lineTo(k+K/2,j+$),J.stroke(),J.strokeStyle=b?b:dm(B),J.beginPath(),J.moveTo(k+K,j),J.lineTo(k,j),J.lineTo(k,Z),J.lineTo(k+K/2,Z),J.lineTo(k+K/2,j+$),J.stroke()),n)hr(J,bd(n),ae,x.x,x.y,x.width,x.height-8,c.data,c.view);else{if(x.height-=8,B=c.color,g){var w=K,T=J.createLinearGradient(k,j,k+w,j);T.addColorStop(0,B),T.addColorStop(.9,B),T.addColorStop(1,Xp),B=T,x.width=g}Nj(J,c.ss,x,c.font,B,c.align),g&&(x.width=w),x.height+=8}}else if(c.icon)dn(J,bd(c.icon),k,j,K,$,c.data,c.view);else{var m=K/2;I&&(J.lineWidth=I,J.lineJoin="round",J.lineCap="round",J.strokeStyle=b?b:Zc(B),J.beginPath(),J.arc(k+m,j+m,m,F,1.6*r,!0),J.moveTo(k+m,j+$),J.lineTo(k+K-m/5,j+m),J.stroke(),J.strokeStyle=b?b:dm(B),J.beginPath(),J.arc(k+m,j+m,m,1.6*r,F,!0),J.moveTo(k+m,j+$),J.lineTo(k+m/5,j+m),J.stroke()),J.fillStyle=B,J.beginPath(),J.arc(k+m,j+m,m,0,G,!0),J.moveTo(k+m,j+$),J.lineTo(k+K-m/5,j+m),J.lineTo(k+m/5,j+m),J.closePath(),J.fill(),J.fillStyle=c.color,J.beginPath(),J.arc(k+m,j+m,m/3,0,G,!0),J.fill()}H&&J.restore(),W!=E&&(J.globalAlpha=e)}},Hb=function(v,H){return H>2*v?v:H/2},Hk=function(L,k,M,Z){if(!L||!k)return 0;var j=p(k.y-L.y,k.x-L.x);return M||(j=k.x<L.x?j+r:j),j+Z},xi=function(k,n,o,b,A,T,E){E&&(k.x>n.x||k.x===n.x&&k.y>n.y)&&(o=Kj[o],A=-A);var Q=el(o,{x:0,y:0,width:Nq(k,n),height:0},T);return Q.x+=b,Q.y+=A,Q=new Kq(p(n.y-k.y,n.x-k.x)).tf(Q),Q.x+=k.x,Q.y+=k.y,Q},aj=function(W,P,b,K,o){if(W._19Q=!0,!b.getEdgeGroup())return K?b.s("edge.gap"):0;var U,f=0,O=0,C=0;if(b.getEdgeGroup().getSiblings().each(function(X){X.each(function(k){if(P.isVisible(k)&&k.s(_m)==o){var F=k.s("edge.gap");U?(O+=C/2+F/2,C=F):(U=k,C=F),k===b&&(f=O)}})}),K)return O-f+C;var y=f-O/2;return U&&b._40I!==U._40I&&(W._19Q=!1),y},yc=function(){var H=function(N){var m=[];return N.forEach(function(G){m.push({x:G.x,y:G.y}),m.push({x:G.x+G.width,y:G.y+G.height}),m.push({x:G.x+G.width,y:G.y}),m.push({x:G.x,y:G.y+G.height})}),m};return function(o,k,j){if("oval"===o){var u=0,y=j.height/j.width,U=y*y,a=j.x+j.width/2,R=j.y+j.height/2,f=H(k);f.forEach(function(M){var w=M.x-a,d=M.y-R,q=w*w+d*d/U;q>u&&(u=q)}),u=d(u);var B=y*u;return{x:a-u,y:R-B,width:2*u,height:2*B}}if("circle"===o){var W=0,a=j.x+j.width/2,R=j.y+j.height/2,f=H(k);return f.forEach(function(Y){var U=Y.x-a,A=Y.y-R,F=U*U+A*A;F>W&&(W=F)}),W=d(W),{x:a-W,y:R-W,width:2*W,height:2*W}}return"roundRect"===o?(Sf(j,S(j.width,j.height)/16),j):j}}(),gm=O.graph={},Ob=function(y,N,g){fo(Z+".graph."+y,N,g)};O.layout={};var Yd={comps:[{type:Pf,points:[85,50,70,115,100,71,86,107,88,49,57,89,57,122,81,112,43,99,89,80,73,115,103,78,82,66,115,97,73,78,105,122,122,122,82,74,77,101,90,117,66,57,76,117,101,114,79,70,99,102,57,70,109,113,119,70,99,87,83,57,76,107,76,103],borderWidth:1,borderColor:E}]};Yd[jm]=Yd[Kn]=160,Ri("node_image",tp(30,30,[{type:_j,rect:[4,5,22,16],gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[2,3,26,20],borderWidth:1,borderColor:rg},{type:_j,rect:[11,23,8,4],background:rg},{type:_j,rect:[6,27,18,2],background:rg}])),Ri("node_icon",tp(16,16,[{type:_j,rect:[2,2,12,10],gradient:cf,gradientColor:xd,background:rg},{type:Lj,rect:[2,2,12,10],width:1,color:rg},{type:_j,rect:[6,12,4,2],background:rg},{type:_j,rect:[4,14,8,1],background:rg}])),Ri("group_image",tp(66,39,[{type:_j,rect:[44.3,18,18.1,12.8],gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[3.3,17.8,18.1,12.8],gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:rg,gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[26.2,29.4,12.8,4.2],background:rg},{type:_j,rect:[21.3,33.5,22.5,2.3],background:rg},{type:_j,rect:[5.3,32.7,14.1,2.1],background:rg},{type:_j,rect:[9,30.4,6.7,2.4],background:rg},{type:_j,rect:[50,30.7,6.7,2.4],background:rg},{type:_j,rect:[46.3,33,14.1,2.1],background:rg}])),Ri("group_icon",tp(16,16,[{type:_j,rect:[4,12,4,2],background:rg},{type:_j,rect:[2,13,8,1],background:rg},{type:_j,rect:[12,12,2,1],background:rg},{type:_j,rect:[11,13,4,1],background:rg},{type:_j,rect:[10,7,6,5],gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[1,2,10,10],gradient:cf,gradientColor:xd,background:rg},{type:Lj,rect:[1,2,10,10],width:1,color:rg}])),Ri("edge_icon",tp(16,16,[{type:_j,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[10.8,1,4,4],background:rg},{type:_j,rect:[1,11,4,4],background:rg}])),Ri("subGraph_image",tp(72,45,[{type:Pf,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[29.6,30.7,3.6,1.8],background:rg},{type:_j,rect:[28.4,32.3,6,1.2],background:rg},{type:_j,rect:[37.3,32,10.8,1.8],background:rg},{type:_j,rect:[39.1,29.9,7.2,2.3],background:rg},{type:_j,rect:[26.6,23.7,9.6,7.2],gradient:cf,gradientColor:xd,background:rg},{type:_j,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:rg,gradient:cf,gradientColor:xd,background:rg}])),Ri("subGraph_icon",tp(17,17,[{type:Pf,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:cf,gradientColor:xd,background:rg}])),Ri("shape_icon",tp(16,16,[{type:Pf,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:rg}])),Ri("polyline_icon",tp(16,16,[{type:Pf,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:rg},pl(7.5,.4),pl(7.5,6.3),pl(13.6,6.3),pl(13.6,14),pl(.7,13.9),pl(.7,.3)])),Ri("grid_icon",tp(16,16,[{type:_j,rect:[1,1,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[6,1,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[11,1,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[11,6,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[6,6,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[1,6,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[11,11,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[6,11,4,4],background:rg,gradient:cf,gradientColor:xd},{type:_j,rect:[1,11,4,4],background:rg,gradient:cf,gradientColor:xd}])),Ri("light_icon",tp(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:rg},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:rg,gradient:cf,gradientColor:xd,background:{func:function(T){var I=T?T.s(jr):E;return Pn(I)?"rgb("+v(255*I[0])+","+v(255*I[1])+","+v(255*I[2])+")":I||rg}}}]));var bp=function(N,o){for(var s=N.vertices,j=0;j<s.length;j++){var $=s[j],r=$.y;$.y=$.z,$.z=-r,o&&($.y+=o)}},Yj=function(b){for(var Z,j,v,t,C,N,T=[],u=[],z=[],g=b.faces,Q=0,R=0,y=0,i=g.length;i>Q;Q++,R+=6,y+=9){var w=g[Q];1===w.i?(Z||(Z=[],j=[],v=[]),Ik(w,Q,R,y,b,Z,v,j)):2===w.i?(t||(t=[],C=[],N=[]),Ik(w,Q,R,y,b,t,N,C)):Ik(w,Q,R,y,b,T,z,u)}return{vs:T,uv:u,ns:z,top_vs:Z,top_uv:j,top_ns:v,bottom_vs:t,bottom_uv:C,bottom_ns:N}},Ik=function(E,c,Z,_,h,S,$,d){var B=h.vertices,F=h.faceVertexUvs,m=B[E.a],i=B[E.b],q=B[E.c];S[_]=m.x,S[_+1]=m.y,S[_+2]=m.z,S[_+3]=i.x,S[_+4]=i.y,S[_+5]=i.z,S[_+6]=q.x,S[_+7]=q.y,S[_+8]=q.z;var n=E.vertexNormals;if(3===n.length){var w=n[0],s=n[1],l=n[2];$[_]=w.x,$[_+1]=w.y,$[_+2]=w.z,$[_+3]=s.x,$[_+4]=s.y,$[_+5]=s.z,$[_+6]=l.x,$[_+7]=l.y,$[_+8]=l.z}else{var N=E.normal;$[_]=N.x,$[_+1]=N.y,$[_+2]=N.z,$[_+3]=N.x,$[_+4]=N.y,$[_+5]=N.z,$[_+6]=N.x,$[_+7]=N.y,$[_+8]=N.z}var W=F[0][c][0],t=F[0][c][1],H=F[0][c][2];d[Z]=W.x,d[Z+1]=W.y,d[Z+2]=t.x,d[Z+3]=t.y,d[Z+4]=H.x,d[Z+5]=H.y},Yr=function(g,B,d,f,S,k,y,O,r){d==E&&(d=!0),f==E&&(f=!0),y==E&&(y=1),O==E&&(O=0);var u=new qk;
return pc(u,g,B,r),Yj(new nr(u,{top:d,bottom:f,curveSegments:S,amount:y,repeatUVLength:k},-y/2+O))},Ge=function(N,q){this.x=N||0,this.y=q||0};Ge.prototype={constructor:Ge,add:function(T){return this.x+=T.x,this.y+=T.y,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this},equals:function(X){return X.x===this.x&&X.y===this.y},multiplyScalar:function(Y){return this.x*=Y,this.y*=Y,this},distanceTo:function(e){return d(this.distanceToSquared(e))},distanceToSquared:function(C){var A=this.x-C.x,y=this.y-C.y;return A*A+y*y},clone:function(){return new Ge(this.x,this.y)}};var Sn=function(T,q,h){this.x=T||0,this.y=q||0,this.z=h||0};Sn.prototype={constructor:Sn,set:function(x,y,i){return this.x=x,this.y=y,this.z=i,this},setY:function(f){return this.y=f,this},copy:function(P){return this.x=P.x,this.y=P.y,this.z=P.z,this},add:function($){return this.x+=$.x,this.y+=$.y,this.z+=$.z,this},addVectors:function(A,_){return this.x=A.x+_.x,this.y=A.y+_.y,this.z=A.z+_.z,this},sub:function(A){return this.x-=A.x,this.y-=A.y,this.z-=A.z,this},subVectors:function(l,g){return this.x=l.x-g.x,this.y=l.y-g.y,this.z=l.z-g.z,this},multiplyScalar:function(q){return this.x*=q,this.y*=q,this.z*=q,this},applyMatrix4:function(g){var u=this.x,d=this.y,$=this.z,t=g.elements;return this.x=t[0]*u+t[4]*d+t[8]*$+t[12],this.y=t[1]*u+t[5]*d+t[9]*$+t[13],this.z=t[2]*u+t[6]*d+t[10]*$+t[14],this},divideScalar:function(t){if(0!==t){var s=1/t;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return this},dot:function(D){return this.x*D.x+this.y*D.y+this.z*D.z},length:function(){return d(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(N){var r=this.x,B=this.y,E=this.z;return this.x=B*N.z-E*N.y,this.y=E*N.x-r*N.z,this.z=r*N.y-B*N.x,this},crossVectors:function(A,r){var w=A.x,M=A.y,v=A.z,H=r.x,k=r.y,O=r.z;return this.x=M*O-v*k,this.y=v*H-w*O,this.z=w*k-M*H,this},distanceTo:function(_){return d(this.distanceToSquared(_))},distanceToSquared:function(h){var g=this.x-h.x,f=this.y-h.y,l=this.z-h.z;return g*g+f*f+l*l},clone:function(){return new Sn(this.x,this.y,this.z)}};var Bd=function(){this.elements=new Float32Array(16)};Bd.prototype={constructor:Bd,set:function(i,u,U,$,I,d,X,y,e,Y,W,f,b,q,a,J){var R=this.elements;return R[0]=i,R[4]=u,R[8]=U,R[12]=$,R[1]=I,R[5]=d,R[9]=X,R[13]=y,R[2]=e,R[6]=Y,R[10]=W,R[14]=f,R[3]=b,R[7]=q,R[11]=a,R[15]=J,this},makeRotationAxis:function(B,p){var i=z(p),G=C(p),f=1-i,o=B.x,x=B.y,X=B.z,v=f*o,t=f*x;return this.set(v*o+i,v*x-G*X,v*X+G*x,0,v*x+G*X,t*x+i,t*X-G*o,0,v*X-G*x,t*X+G*o,f*X*X+i,0,0,0,0,1),this}};var _b=function(G){this.repeatUVLength=G};_b.prototype={generateTopUV:function(S,W,q,y,G,g,Q){var v,J,U,F,t=S.vertices,n=t[y].x,C=t[y].y,M=t[G].x,_=t[G].y,j=t[g].x,X=t[g].y,K=this.repeatUVLength;if(K)v=0,J=0,U=K,F=K;else{this._bb||(this._bb=W.getBoundingBox());var p=this._bb;v=p.minX,J=p.minY,U=p.maxX-v,F=p.maxY-J}return Q?[new Ge((n-v)/U,(C-J)/F),new Ge((M-v)/U,(_-J)/F),new Ge((j-v)/U,(X-J)/F)]:[new Ge((n-v)/U,1-(C-J)/F),new Ge((M-v)/U,1-(_-J)/F),new Ge((j-v)/U,1-(X-J)/F)]},generateBottomUV:function(q,b,i,s,c,y){return this.generateTopUV(q,b,i,s,c,y,!0)},generateSideWallUV:function(i,o,x,_,W,Y,G,w,Q,e,S,B){if(!this._cl){for(var c,P,p=[],h=0,q=x.length,r=0;q>r;r++){c=x[r],P=x[(r+1)%q];var M=c.x-P.x,A=c.y-P.y,R=d(M*M+A*A);p.push(h),h+=R}for(var r=0;q>r;r++)p[r]/=h;this._cl=p}var p=this._cl,J=1-Q/e,y=1-(Q+1)/e,t=p[S],U=p[B];return U>t&&(t+=1),[new Ge(t,J),new Ge(U,J),new Ge(U,y),new Ge(t,y)]}};var eq=function(l,F,i,f,G,D){this.a=l,this.b=F,this.c=i,this.i=D,this.normal=f instanceof Sn?f:new Sn,this.vertexNormals=f instanceof Array?f:[]};eq.prototype={constructor:eq};var we=function(){},Sq=we.prototype;Sq.getPointAt=function(A){var L=this.getUtoTmapping(A);return this.getPoint(L)},Sq.getPoints=function(y){y||(y=5);var f,w=[];for(f=0;y>=f;f++)w.push(this.getPoint(f/y));return w},Sq.getSpacedPoints=function(q){q||(q=5);var m,Z=[];for(m=0;q>=m;m++)Z.push(this.getPointAt(m/q));return Z},Sq.getLength=function(){var M=this.getLengths();return M[M.length-1]},Sq.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var u,d,f=[],D=this.getPoint(0),q=0;for(f.push(0),d=1;e>=d;d++)u=this.getPoint(d/e),q+=u.distanceTo(D),f.push(q),D=u;return this.cacheArcLengths=f,f},Sq.getUtoTmapping=function(i,A){var R,U=this.getLengths(),T=0,P=U.length;R=A?A:i*U[P-1];for(var H,c=0,S=P-1;S>=c;)if(T=q(c+(S-c)/2),H=U[T]-R,0>H)c=T+1;else{if(!(H>0)){S=T;break}S=T-1}if(T=S,U[T]==R){var o=T/(P-1);return o}var v=U[T],J=U[T+1],p=J-v,x=(R-v)/p,o=(T+x)/(P-1);return o},Sq.getTangent=function(d){var I=1e-4,w=d-I,L=d+I;0>w&&(w=0),L>1&&(L=1);var N=this.getPoint(w),Z=this.getPoint(L),q=Z.clone().sub(N);return q.normalize()},Sq.getTangentAt=function(o){var X=this.getUtoTmapping(o);return this.getTangent(X)},we.create=function(e,Z){return e.prototype=pp(we.prototype),e.prototype.getPoint=Z,e};var zb=function(){this.curves=[],this.autoClose=!1},Eb=zb.prototype=pp(Sq);Eb.add=function(o){this.curves.push(o)},Eb.closePath=function(){var S=this.curves[0].getPoint(0),u=this.curves[this.curves.length-1].getPoint(1);S.equals(u)||this.curves.push(new Og(u,S))},Eb.getPoint=function(Z){for(var u,W,A=Z*this.getLength(),O=this.getCurveLengths(),k=0;k<O.length;){if(O[k]>=A){u=O[k]-A,W=this.curves[k];var S=1-u/W.getLength();return W.getPointAt(S)}k++}return null},Eb.getLength=function(){var p=this.getCurveLengths();return p[p.length-1]},Eb.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var N,U=[],_=0,o=this.curves.length;for(N=0;o>N;N++)_+=this.curves[N].getLength(),U.push(_);return this.cacheLengths=U,U},Eb.getTransformedPoints=function(f){return this.getPoints(f)},Eb.getBoundingBox=function(){var U,X,D,k,c,R,W=this.getPoints();U=X=Number.NEGATIVE_INFINITY,k=c=Number.POSITIVE_INFINITY;var o,T,Q,L,w=W[0]instanceof Sn;for(L=w?new Sn:new Ge,T=0,Q=W.length;Q>T;T++)o=W[T],o.x>U&&(U=o.x),o.x<k&&(k=o.x),o.y>X&&(X=o.y),o.y<c&&(c=o.y),w&&(o.z>D&&(D=o.z),o.z<R&&(R=o.z)),L.add(o);var B={minX:k,minY:c,maxX:U,maxY:X};return w&&(B.maxZ=D,B.minZ=R),B};var Lf=function(S){zb.call(this),this.actions=[],S&&this.fromPoints(S)},dr=Lf.prototype=pp(zb.prototype),uo="moveTo",Td="lineTo",hq="quadraticCurveTo",Od="bezierCurveTo",Io="arc",gi="ellipse";dr.fromPoints=function(k){this.moveTo(k[0].x,k[0].y);for(var O=1,y=k.length;y>O;O++)this.lineTo(k[O].x,k[O].y)},dr.moveTo=function(){var d=Array.prototype.slice.call(arguments);this.actions.push({action:uo,args:d})},dr.lineTo=function(P,Z){var l=Array.prototype.slice.call(arguments),M=this.actions[this.actions.length-1].args,Y=M[M.length-2],c=M[M.length-1],V=new Og(new Ge(Y,c),new Ge(P,Z));this.curves.push(V),this.actions.push({action:Td,args:l})},dr.quadraticCurveTo=function(r,I,K,g){var Q=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,v=l[l.length-2],x=l[l.length-1],p=new Op(new Ge(v,x),new Ge(r,I),new Ge(K,g));this.curves.push(p),this.actions.push({action:hq,args:Q})},dr.bezierCurveTo=function(m,c,E,o,n,X){var i=Array.prototype.slice.call(arguments),C=this.actions[this.actions.length-1].args,s=C[C.length-2],R=C[C.length-1],u=new dp(new Ge(s,R),new Ge(m,c),new Ge(E,o),new Ge(n,X));this.curves.push(u),this.actions.push({action:Od,args:i})},dr.arc=function(O,n,h,A,S,P){var g=this.actions[this.actions.length-1].args,B=g[g.length-2],G=g[g.length-1];this.absarc(O+B,n+G,h,A,S,P)},dr.absarc=function(_,I,X,e,H,M){this.absellipse(_,I,X,X,e,H,M)},dr.ellipse=function($,V,k,B,M,q,u){var x=this.actions[this.actions.length-1].args,K=x[x.length-2],Q=x[x.length-1];this.absellipse($+K,V+Q,k,B,M,q,u)},dr.absellipse=function(h,o,s,d,Z,U,i){var r=Array.prototype.slice.call(arguments),Y=new Ae(h,o,s,d,Z,U,i);this.curves.push(Y);var a=Y.getPoint(1);r.push(a.x),r.push(a.y),this.actions.push({action:gi,args:r})},dr.getSpacedPoints=function(Q){Q||(Q=40);for(var c=[],G=0;Q>G;G++)c.push(this.getPoint(G/Q));return c},dr.getPoints=function(S,p){S=S||12;var h,a,P,k,J,w,u,E,q,s,b,l,x,M,U,N,Z,L,o=[];for(h=0,a=this.actions.length;a>h;h++)switch(P=this.actions[h],k=P.action,J=P.args,k){case uo:o.push(new Ge(J[0],J[1]));break;case Td:o.push(new Ge(J[0],J[1]));break;case hq:for(w=J[2],u=J[3],s=J[0],b=J[1],o.length>0?(M=o[o.length-1],l=M.x,x=M.y):(M=this.actions[h-1].args,l=M[M.length-2],x=M[M.length-1]),U=1;S>=U;U++)N=U/S,Z=yi.b2(N,l,s,w),L=yi.b2(N,x,b,u),o.push(new Ge(Z,L));break;case Od:for(w=J[4],u=J[5],s=J[0],b=J[1],E=J[2],q=J[3],o.length>0?(M=o[o.length-1],l=M.x,x=M.y):(M=this.actions[h-1].args,l=M[M.length-2],x=M[M.length-1]),U=1;S>=U;U++)N=U/S,Z=yi.b3(N,l,s,E,w),L=yi.b3(N,x,b,q,u),o.push(new Ge(Z,L));break;case Io:var j,D=J[0],K=J[1],t=J[2],R=J[3],Q=J[4],F=!!J[5],f=Q-R,$=2*S;for(U=1;$>=U;U++)N=U/$,F||(N=1-N),j=R+N*f,Z=D+t*z(j),L=K+t*C(j),o.push(new Ge(Z,L));break;case gi:var j,D=J[0],K=J[1],Y=J[2],v=J[3],R=J[4],Q=J[5],F=!!J[6],f=Q-R,$=2*S;for(U=1;$>=U;U++)N=U/$,F||(N=1-N),j=R+N*f,Z=D+Y*z(j),L=K+v*C(j),o.push(new Ge(Z,L))}var I=o[o.length-1],T=1e-10;return n(I.x-o[0].x)<T&&n(I.y-o[0].y)<T&&o.splice(o.length-1,1),p&&o.push(o[0]),o},dr.toShapes=function(_,y){function L(E){var F,d,N,p,G,j=[],S=new Lf;for(F=0,d=E.length;d>F;F++)N=E[F],G=N.args,p=N.action,p==uo&&0!=S.actions.length&&(j.push(S),S=new Lf),S[p].apply(S,G);return 0!=S.actions.length&&j.push(S),j}function g(n){for(var a=[],b=0,W=n.length;W>b;b++){var w=n[b],B=new qk;B.actions=w.actions,B.curves=w.curves,a.push(B)}return a}function s(V,z){for(var p=1e-10,u=z.length,L=!1,C=u-1,D=0;u>D;C=D++){var M=z[C],v=z[D],h=v.x-M.x,s=v.y-M.y;if(n(s)>p){if(0>s&&(M=z[D],h=-h,v=z[C],s=-s),V.y<M.y||V.y>v.y)continue;if(V.y==M.y){if(V.x==M.x)return!0}else{var B=s*(V.x-M.x)-h*(V.y-M.y);if(0==B)return!0;if(0>B)continue;L=!L}}else{if(V.y!=M.y)continue;if(v.x<=V.x&&V.x<=M.x||M.x<=V.x&&V.x<=v.x)return!0}}return L}var k=L(this.actions);if(0==k.length)return[];if(y===!0)return g(k);var K,U,M,T=[];if(1==k.length)return U=k[0],M=new qk,M.actions=U.actions,M.curves=U.curves,T.push(M),T;var Z=!qk.Utils.isClockWise(k[0].getPoints());Z=_?!Z:Z;var d,v=[],b=[],h=[],S=0;b[S]=o,h[S]=[];var w,R;for(w=0,R=k.length;R>w;w++)U=k[w],d=U.getPoints(),K=yi.isClockWise(d),K=_?!K:K,K?(!Z&&b[S]&&S++,b[S]={s:new qk,p:d},b[S].s.actions=U.actions,b[S].s.curves=U.curves,Z&&S++,h[S]=[]):h[S].push({h:U,p:d[0]});if(!b[0])return g(k);if(b.length>1){for(var X=!1,W=[],j=0,a=b.length;a>j;j++)v[j]=[];for(var j=0,a=b.length;a>j;j++){b[j];for(var A=h[j],t=0;t<A.length;t++){for(var V=A[t],p=!0,Y=0;Y<b.length;Y++)s(V.p,b[Y].p)&&(j!=Y&&W.push({froms:j,tos:Y,hole:t}),p?(p=!1,v[Y].push(V)):X=!0);p&&v[j].push(V)}}W.length>0&&(X||(h=v))}var N,r,G;for(w=0,R=b.length;R>w;w++)for(M=b[w].s,T.push(M),N=h[w],r=0,G=N.length;G>r;r++)M.holes.push(N[r].h);return T};var qk=function(){Lf.apply(this,arguments),this.holes=[]},or=qk.prototype=pp(dr);or.getPointsHoles=function(w){var V,z=this.holes.length,r=[];for(V=0;z>V;V++)r[V]=this.holes[V].getTransformedPoints(w);return r},or.extractAllPoints=function(F){return{shape:this.getTransformedPoints(F),holes:this.getPointsHoles(F)}},or.extractPoints=function(e){return this.extractAllPoints(e)};var yi={triangulateShape:function(H,z){function Q(C,I,Y){return C.x!=I.x?C.x<I.x?C.x<=Y.x&&Y.x<=I.x:I.x<=Y.x&&Y.x<=C.x:C.y<I.y?C.y<=Y.y&&Y.y<=I.y:I.y<=Y.y&&Y.y<=C.y}function k(u,N,w,j,W){var Z=1e-10,B=N.x-u.x,D=N.y-u.y,J=j.x-w.x,r=j.y-w.y,Y=u.x-w.x,a=u.y-w.y,k=D*J-B*r,R=D*Y-B*a;if(n(k)>Z){var _;if(k>0){if(0>R||R>k)return[];if(_=r*Y-J*a,0>_||_>k)return[]}else{if(R>0||k>R)return[];if(_=r*Y-J*a,_>0||k>_)return[]}if(0==_)return!W||0!=R&&R!=k?[u]:[];if(_==k)return!W||0!=R&&R!=k?[N]:[];if(0==R)return[w];if(R==k)return[j];var v=_/k;return[{x:u.x+v*B,y:u.y+v*D}]}if(0!=R||r*Y!=J*a)return[];var x=0==B&&0==D,X=0==J&&0==r;if(x&&X)return u.x!=w.x||u.y!=w.y?[]:[u];if(x)return Q(w,j,u)?[u]:[];if(X)return Q(u,N,w)?[w]:[];var S,L,g,C,c,o,T,i;return 0!=B?(u.x<N.x?(S=u,g=u.x,L=N,C=N.x):(S=N,g=N.x,L=u,C=u.x),w.x<j.x?(c=w,T=w.x,o=j,i=j.x):(c=j,T=j.x,o=w,i=w.x)):(u.y<N.y?(S=u,g=u.y,L=N,C=N.y):(S=N,g=N.y,L=u,C=u.y),w.y<j.y?(c=w,T=w.y,o=j,i=j.y):(c=j,T=j.y,o=w,i=w.y)),T>=g?T>C?[]:C==T?W?[]:[c]:i>=C?[c,L]:[c,o]:g>i?[]:g==i?W?[]:[S]:i>=C?[S,L]:[S,o]}function x(p,K,c,h){var M=1e-10,w=K.x-p.x,$=K.y-p.y,f=c.x-p.x,a=c.y-p.y,_=h.x-p.x,q=h.y-p.y,A=w*a-$*f,Q=w*q-$*_;if(n(A)>M){var E=_*a-q*f;return A>0?Q>=0&&E>=0:Q>=0||E>=0}return Q>0}function r(H,w){function C(u,v){var S=Y.length-1,q=u-1;0>q&&(q=S);var m=u+1;m>S&&(m=0);var f=x(Y[u],Y[q],Y[m],z[v]);if(!f)return!1;var s=z.length-1,G=v-1;0>G&&(G=s);var B=v+1;return B>s&&(B=0),f=x(z[v],z[G],z[B],Y[u]),f?!0:!1}function M(o,E){var U,b,y;for(U=0;U<Y.length;U++)if(b=U+1,b%=Y.length,y=k(o,E,Y[U],Y[b],!0),y.length>0)return!0;return!1}function p(v,K){var H,l,X,s,t;for(H=0;H<E.length;H++)for(l=w[E[H]],X=0;X<l.length;X++)if(s=X+1,s%=l.length,t=k(v,K,l[X],l[s],!0),t.length>0)return!0;return!1}for(var z,A,c,_,u,e,r,S,m,j,V,Y=H.concat(),E=[],l=[],U=0,i=w.length;i>U;U++)E.push(U);for(var v=0,y=2*E.length;E.length>0&&(y--,!(0>y));)for(c=v;c<Y.length;c++){_=Y[c],A=-1;for(var U=0;U<E.length;U++)if(e=E[U],r=_.x+":"+_.y+":"+e,l[r]===o){z=w[e];for(var F=0;F<z.length;F++)if(u=z[F],C(c,F)&&!M(_,u)&&!p(_,u)){A=F,E.splice(U,1),S=Y.slice(0,c+1),m=Y.slice(c),j=z.slice(A),V=z.slice(0,A+1),Y=S.concat(j).concat(V).concat(m),v=c;break}if(A>=0)break;l[r]=!0}if(A>=0)break}return Y}for(var I,E,O,U,K,A,q={},t=H.concat(),p=0,$=z.length;$>p;p++)Array.prototype.push.apply(t,z[p]);for(I=0,E=t.length;E>I;I++)K=t[I].x+":"+t[I].y,q[K]!==o,q[K]=I;var S=r(H,z),h=Ub.Triangulate(S,!1);for(I=0,E=h.length;E>I;I++)for(U=h[I],O=0;3>O;O++)K=U[O].x+":"+U[O].y,A=q[K],A!==o&&(U[O]=A);return h.concat()},isClockWise:function(y){return Ub.Triangulate.area(y)<0},b2p0:function(e,G){var f=1-e;return f*f*G},b2p1:function(T,D){return 2*(1-T)*T*D},b2p2:function(c,a){return c*c*a},b2:function(d,F,M,T){return this.b2p0(d,F)+this.b2p1(d,M)+this.b2p2(d,T)},b3p0:function(j,m){var N=1-j;return N*N*N*m},b3p1:function(Z,q){var c=1-Z;return 3*c*c*Z*q},b3p2:function(Q,Z){var o=1-Q;return 3*o*Q*Q*Z},b3p3:function(P,X){return P*P*P*X},b3:function(a,F,A,X,G){return this.b3p0(a,F)+this.b3p1(a,A)+this.b3p2(a,X)+this.b3p3(a,G)}},Ub={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(g){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(d){var T=d.familyName.toLowerCase(),b=this;return b.faces[T]=b.faces[T]||{},b.faces[T][d.cssFontWeight]=b.faces[T][d.cssFontWeight]||{},b.faces[T][d.cssFontWeight][d.cssFontStyle]=d,b.faces[T][d.cssFontWeight][d.cssFontStyle]=d,d},drawText:function(g){var E,v=this.getFace(),k=this.size/v.resolution,b=0,Y=String(g).split(""),d=Y.length,$=[];for(E=0;d>E;E++){var t=new Lf,Z=this.extractGlyphPoints(Y[E],v,k,b,t);b+=Z.offset,$.push(Z.path)}var K=b/2;return{paths:$,offset:K}},extractGlyphPoints:function(O,v,B,d,P){var S,$,C,L,G,M,q,x,K,I,H,V,u,m,g,f,w,c,F,Y=[],z=v.glyphs[O]||v.glyphs["?"];if(z){if(z.o)for(L=z._cachedOutline||(z._cachedOutline=z.o.split(" ")),M=L.length,q=B,x=B,S=0;M>S;)switch(G=L[S++]){case"m":K=L[S++]*q+d,I=L[S++]*x,P.moveTo(K,I);break;case"l":K=L[S++]*q+d,I=L[S++]*x,P.lineTo(K,I);break;case"q":if(H=L[S++]*q+d,V=L[S++]*x,g=L[S++]*q+d,f=L[S++]*x,P.quadraticCurveTo(g,f,H,V),F=Y[Y.length-1])for(u=F.x,m=F.y,$=1,C=this.divisions;C>=$;$++){var n=$/C;yi.b2(n,u,g,H),yi.b2(n,m,f,V)}break;case"b":if(H=L[S++]*q+d,V=L[S++]*x,g=L[S++]*q+d,f=L[S++]*x,w=L[S++]*q+d,c=L[S++]*x,P.bezierCurveTo(g,f,w,c,H,V),F=Y[Y.length-1])for(u=F.x,m=F.y,$=1,C=this.divisions;C>=$;$++){var n=$/C;yi.b3(n,u,g,w,H),yi.b3(n,m,f,c,V)}}return{offset:z.ha*B,path:P}}}};Ub.generateShapes=function(U,F){F=F||{};var v=F.size!==o?F.size:100,m=F.curveSegments!==o?F.curveSegments:4,X=F.font!==o?F.font:"helvetiker",y=F.weight!==o?F.weight:"normal",q=F.style!==o?F.style:"normal";Ub.size=v,Ub.divisions=m,Ub.face=X,Ub.weight=y,Ub.style=q;for(var g=Ub.drawText(U),r=g.paths,W=[],b=0,J=r.length;J>b;b++)Array.prototype.push.apply(W,r[b].toShapes());return W},function(E){var S=1e-10,n=function(x,G){var e=x.length;if(3>e)return null;var N,P,K,U=[],k=[],j=[];if(J(x)>0)for(P=0;e>P;P++)k[P]=P;else for(P=0;e>P;P++)k[P]=e-1-P;var M=e,F=2*M;for(P=M-1;M>2;){if(F--<=0)return G?j:U;if(N=P,N>=M&&(N=0),P=N+1,P>=M&&(P=0),K=P+1,K>=M&&(K=0),A(x,N,P,K,M,k)){var X,W,D,H,B;for(X=k[N],W=k[P],D=k[K],U.push([x[X],x[W],x[D]]),j.push([k[N],k[P],k[K]]),H=P,B=P+1;M>B;H++,B++)k[H]=k[B];M--,F=2*M}}return G?j:U},J=function(g){for(var N=g.length,c=0,I=N-1,J=0;N>J;I=J++)c+=g[I].x*g[J].y-g[J].x*g[I].y;return.5*c},A=function(J,_,B,x,U,o){var M,I,O,Y,j,r,R,G,s;if(I=J[o[_]].x,O=J[o[_]].y,Y=J[o[B]].x,j=J[o[B]].y,r=J[o[x]].x,R=J[o[x]].y,S>(Y-I)*(R-O)-(j-O)*(r-I))return!1;var L,K,l,E,N,y,h,w,i,C,k,Q,Z,H,f;for(L=r-Y,K=R-j,l=I-r,E=O-R,N=Y-I,y=j-O,M=0;U>M;M++)if(G=J[o[M]].x,s=J[o[M]].y,!(G===I&&s===O||G===Y&&s===j||G===r&&s===R)&&(h=G-I,w=s-O,i=G-Y,C=s-j,k=G-r,Q=s-R,f=L*C-K*i,Z=N*w-y*h,H=l*Q-E*k,f>=-S&&H>=-S&&Z>=-S))return!1;return!0};return E.Triangulate=n,E.Triangulate.area=J,E}(Ub),e._typeface_js={faces:Ub.faces,loadFace:Ub.loadFace};var sq=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Zg=sq.prototype={constructor:sq,computeFaceNormals:function(){for(var H=new Sn,C=new Sn,K=0,V=this.faces.length;V>K;K++){var b=this.faces[K],p=this.vertices[b.a],U=this.vertices[b.b],N=this.vertices[b.c];H.subVectors(N,U),C.subVectors(p,U),H.cross(C),H.normalize(),b.normal.copy(H)}},computeVertexNormals:function(G){var U,n,F,N,C,Y;for(Y=new Array(this.vertices.length),U=0,n=this.vertices.length;n>U;U++)Y[U]=new Sn;if(G){var v,X,d,u=new Sn,Z=new Sn;for(F=0,N=this.faces.length;N>F;F++)C=this.faces[F],v=this.vertices[C.a],X=this.vertices[C.b],d=this.vertices[C.c],u.subVectors(d,X),Z.subVectors(v,X),u.cross(Z),Y[C.a].add(u),Y[C.b].add(u),Y[C.c].add(u)}else for(F=0,N=this.faces.length;N>F;F++)C=this.faces[F],Y[C.a].add(C.normal),Y[C.b].add(C.normal),Y[C.c].add(C.normal);for(U=0,n=this.vertices.length;n>U;U++)Y[U].normalize();for(F=0,N=this.faces.length;N>F;F++)C=this.faces[F],C.vertexNormals[0]=Y[C.a].clone(),C.vertexNormals[1]=Y[C.b].clone(),C.vertexNormals[2]=Y[C.c].clone()},mergeVertices:function(){var X,u,j,S,B,A,z,U,Z={},V=[],$=[],O=4,c=L(10,O);for(j=0,S=this.vertices.length;S>j;j++)X=this.vertices[j],u=g(X.x*c)+"_"+g(X.y*c)+"_"+g(X.z*c),Z[u]===o?(Z[u]=j,V.push(this.vertices[j]),$[j]=V.length-1):$[j]=$[Z[u]];var t=[];for(j=0,S=this.faces.length;S>j;j++){B=this.faces[j],B.a=$[B.a],B.b=$[B.b],B.c=$[B.c],A=[B.a,B.b,B.c];for(var h=0;3>h;h++)if(A[h]==A[(h+1)%3]){t.push(j);break}}for(j=t.length-1;j>=0;j--){var p=t[j];for(this.faces.splice(p,1),z=0,U=this.faceVertexUvs.length;U>z;z++)this.faceVertexUvs[z].splice(p,1)}var K=this.vertices.length-V.length;return this.vertices=V,K}},Ae=function(e,Q,K,H,g,z,t){this.aX=e,this.aY=Q,this.xRadius=K,this.yRadius=H,this.aStartAngle=g,this.aEndAngle=z,this.aClockwise=t};Ae.prototype=pp(Sq),Ae.prototype.getPoint=function(a){var N,h=this.aEndAngle-this.aStartAngle;0>h&&(h+=G),h>G&&(h-=G),N=this.aClockwise===!0?this.aEndAngle+(1-a)*(G-h):this.aStartAngle+a*h;var u=this.aX+this.xRadius*z(N),R=this.aY+this.yRadius*C(N);return new Ge(u,R)};var Og=function(n,q){this.v1=n,this.v2=q},hh=Og.prototype=pp(Sq);hh.getPoint=function(J){var G=this.v2.clone().sub(this.v1);return G.multiplyScalar(J).add(this.v1),G},hh.getPointAt=function(t){return this.getPoint(t)},hh.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};var Op=function(H,q,C){this.v0=H,this.v1=q,this.v2=C};Op.prototype=pp(Sq),Op.prototype.getPoint=function(T){var R,u;return R=yi.b2(T,this.v0.x,this.v1.x,this.v2.x),u=yi.b2(T,this.v0.y,this.v1.y,this.v2.y),new Ge(R,u)};var dp=function(l,i,w,k){this.v0=l,this.v1=i,this.v2=w,this.v3=k};dp.prototype=pp(Sq),dp.prototype.getPoint=function(c){var N,n;return N=yi.b3(c,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n=yi.b3(c,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Ge(N,n)},we.create(function(w,I){this.v1=w,this.v2=I},function(z){var Q=new Sn;return Q.subVectors(this.v2,this.v1),Q.multiplyScalar(z),Q.add(this.v1),Q});var Gi=we.create(function(s,F,$){this.v0=s,this.v1=F,this.v2=$},function(I){var u,B,l;return u=yi.b2(I,this.v0.x,this.v1.x,this.v2.x),B=yi.b2(I,this.v0.y,this.v1.y,this.v2.y),l=yi.b2(I,this.v0.z,this.v1.z,this.v2.z),new Sn(u,B,l)}),lb=we.create(function(e,i,b,h){this.v0=e,this.v1=i,this.v2=b,this.v3=h},function(Q){var m,V,g;return m=yi.b3(Q,this.v0.x,this.v1.x,this.v2.x,this.v3.x),V=yi.b3(Q,this.v0.y,this.v1.y,this.v2.y,this.v3.y),g=yi.b3(Q,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Sn(m,V,g)}),Cp=function(l,A,M,s,t,k,L,n){sq.call(this),s=s!==o?s:.5,t=t!==o?t:.5,n=n!==o?n:1,l=l||8,k=k||0,L=L||G;var j,W,B=1,F=n/2,p=[],g=[],D=this.vertices,I=this.faces,m=this.faceVertexUvs;for(W=0;B>=W;W++){var S=[],Z=[],h=W/B,i=h*(t-s)+s;for(j=0;l>=j;j++){var c=j/l,y=new Sn,K=-(c*L+k);y.z=i*C(K),y.y=-h*n+F,y.x=i*z(K),D.push(y),S.push(D.length-1),Z.push(new Ge(c,h))}p.push(S),g.push(Z)}var a,u,J=(t-s)/n;for(j=0;l>j;j++)for(0!==s?(a=D[p[0][j]].clone(),u=D[p[0][j+1]].clone()):(a=D[p[1][j]].clone(),u=D[p[1][j+1]].clone()),a.setY(d(a.x*a.x+a.z*a.z)*J).normalize(),u.setY(d(u.x*u.x+u.z*u.z)*J).normalize(),W=0;B>W;W++){var b=p[W][j],e=p[W+1][j],x=p[W+1][j+1],R=p[W][j+1],X=a.clone(),N=a.clone(),O=u.clone(),H=u.clone(),$=g[W][j].clone(),Y=g[W+1][j].clone(),Q=g[W+1][j+1].clone(),P=g[W][j+1].clone();I.push(new eq(b,e,R,[X,N,H])),m[0].push([$,Y,P]),I.push(new eq(e,x,R,[N.clone(),O,H.clone()])),m[0].push([Y.clone(),Q,P.clone()])}if(A&&s>0)for(this.vertices.push(new Sn(0,F,0)),j=0;l>j;j++){var b=p[0][j],e=p[0][j+1],x=this.vertices.length-1,X=new Sn(0,1,0),N=new Sn(0,1,0),O=new Sn(0,1,0),$=g[0][j].clone(),Y=g[0][j+1].clone(),Q=new Ge(Y.x,0);I.push(new eq(b,e,x,[X,N,O],null,1));var q=j/l*G,v=z(q),T=C(q),E=(j+1)/l*G,w=z(E),_=C(E);m[0].push([new Ge(.5+.5*v,.5+.5*T),new Ge(.5+.5*w,.5+.5*_),new Ge(.5,.5)])}if(M&&t>0)for(this.vertices.push(new Sn(0,-F,0)),j=0;l>j;j++){var b=p[W][j+1],e=p[W][j],x=D.length-1,X=new Sn(0,-1,0),N=new Sn(0,-1,0),O=new Sn(0,-1,0),$=g[W][j+1].clone(),Y=g[W][j].clone();I.push(new eq(b,e,x,[X,N,O],null,2));var q=j/l*G,v=z(q),T=C(q),E=(j+1)/l*G,w=z(E),_=C(E);m[0].push([new Ge(.5+.5*w,.5-.5*_),new Ge(.5+.5*v,.5-.5*T),new Ge(.5,.5)])}};Cp.prototype=pp(Zg);var Ep=function(w,u,S,R,K,J,E){sq.call(this),E=E||.5,w=w||16,u=u||16,S=(S!==o?S:0)-r,R=R!==o?R:G,K=K!==o?K:0,J=J!==o?J:r;var v,h,l=[],D=[],T=this.vertices,m=this.faces,s=this.faceVertexUvs;for(h=0;u>=h;h++){var Y=[],L=[];for(v=0;w>=v;v++){var X=v/w,k=h/u,M=new Sn;M.x=-E*z(S+X*R)*C(K+k*J),M.y=E*z(K+k*J),M.z=E*C(S+X*R)*C(K+k*J),T.push(M),Y.push(T.length-1),L.push(new Ge(X,k))}l.push(Y),D.push(L)}for(h=0;u>h;h++)for(v=0;w>v;v++){var p=l[h][v+1],b=l[h][v],W=l[h+1][v],V=l[h+1][v+1],F=T[p].clone().normalize(),g=T[b].clone().normalize(),O=T[W].clone().normalize(),d=T[V].clone().normalize(),i=D[h][v+1].clone(),a=D[h][v].clone(),H=D[h+1][v].clone(),Z=D[h+1][v+1].clone();n(T[p].y)===E?(i.x=(i.x+a.x)/2,m.push(new eq(p,W,V,[F,O,d])),s[0].push([i,H,Z])):n(T[W].y)===E?(H.x=(H.x+Z.x)/2,m.push(new eq(p,b,W,[F,g,O])),s[0].push([i,a,H])):(m.push(new eq(p,b,V,[F,g,d])),s[0].push([i,a,Z]),m.push(new eq(b,W,V,[g.clone(),O,d.clone()])),s[0].push([a.clone(),H,Z.clone()]))}};Ep.prototype=pp(Zg);var $f=function(Q,F,V,y,I,E){sq.call(this),Q=Q||.33,F=F||.17,y=y||8,V=V||6,I=I||0,E=E||G;for(var R=new Sn,K=[],h=[],m=0;y>=m;m++)for(var U=m/y*G+r,T=0;V>=T;T++){var l=T/V*E+I;R.x=Q*z(l),R.z=-Q*C(l);var D=new Sn,t=Q+F*z(U);D.x=t*z(l),D.z=-t*C(l),D.y=F*C(U),this.vertices.push(D),K.push(new Ge(T/V,1-m/y)),h.push(D.clone().sub(R).normalize())}for(var m=1;y>=m;m++)for(var T=1;V>=T;T++){var n=(V+1)*m+T-1,A=(V+1)*(m-1)+T-1,k=(V+1)*(m-1)+T,P=(V+1)*m+T,d=new eq(n,A,P,[h[n].clone(),h[A].clone(),h[P].clone()]);this.faces.push(d),this.faceVertexUvs[0].push([K[n].clone(),K[A].clone(),K[P].clone()]),d=new eq(A,k,P,[h[A].clone(),h[k].clone(),h[P].clone()]),this.faces.push(d),this.faceVertexUvs[0].push([K[A].clone(),K[k].clone(),K[P].clone()])}this.computeFaceNormals()};$f.prototype=pp(Zg);var nr=function(w,y,Y){return w?(sq.call(this),w=w instanceof Array?w:[w],this.addShapeList(w,y),bp(this,Y),this.computeFaceNormals(),void 0):(w=[],void 0)},oi=nr.prototype=pp(sq.prototype);oi.addShapeList=function(a,L){for(var s=a.length,f=0;s>f;f++){var X=a[f];this.addShape(X,L)}},oi.addShape=function(n,Y){function k(){if(Y.bottom)for(var U=0;b>U;U++)l=h[U],q(l[2],l[1],l[0],!0);if(Y.top)for(U=0;b>U;U++)l=h[U],q(l[0]+D*S,l[1]+D*S,l[2]+D*S,!1)}function L(){var I=0;for(X(g,I),I+=g.length,A=0,P=r.length;P>A;A++)u=r[A],X(u,I),I+=u.length}function X(k,F){for(var K,a,n=k.length;--n>=0;){K=n,a=n-1,0>a&&(a=k.length-1);var T=0,b=S;for(T=0;b>T;T++){var P=D*T,p=D*(T+1),t=F+K+P,O=F+a+P,X=F+a+p,Q=F+K+p;U(t,O,X,Q,k,T,b,K,a)}}}function x(r,V,d){B.vertices.push(new Sn(r,V,d))}function q(J,q,E,N){J+=I,q+=I,E+=I,B.faces.push(new eq(J,q,E,null,null,N?2:1));var a=N?t.generateBottomUV(B,n,Y,J,q,E):t.generateTopUV(B,n,Y,J,q,E);B.faceVertexUvs[0].push(a)}function U(E,A,d,T,J,s,e,g,h){E+=I,A+=I,d+=I,T+=I,B.faces.push(new eq(E,A,T)),B.faces.push(new eq(A,d,T));var b=t.generateSideWallUV(B,n,J,Y,E,A,d,T,s,e,g,h);B.faceVertexUvs[0].push([b[0],b[1],b[3]]),B.faceVertexUvs[0].push([b[1],b[2],b[3]])}var R,e,C,i,E,M=Y.amount,K=Y.curveSegments||Qd,S=Y.steps||1,T=Y.extrudePath,p=!1,t=new _b(Y.repeatUVLength);T&&(R=T.getSpacedPoints(S),p=!0,e=Y.frames!==o?Y.frames:new mj.FrenetFrames(T,S,!1),C=new Sn,i=new Sn,E=new Sn);var u,A,P,B=this,I=this.vertices.length,N=n.extractPoints(K),$=N.shape,r=N.holes,W=!yi.isClockWise($);if(W){for($=$.reverse(),A=0,P=r.length;P>A;A++)u=r[A],yi.isClockWise(u)&&(r[A]=u.reverse());W=!1}var h=yi.triangulateShape($,r),g=$;for(A=0,P=r.length;P>A;A++)u=r[A],$=$.concat(u);for(var F,l,D=$.length,b=h.length,w=0;D>w;w++)F=$[w],p?(i.copy(e.normals[0]).multiplyScalar(F.x),C.copy(e.binormals[0]).multiplyScalar(F.y),E.copy(R[0]).add(i).add(C),x(E.x,E.y,E.z)):x(F.x,F.y,0);var v;for(v=1;S>=v;v++)for(w=0;D>w;w++)F=$[w],p?(i.copy(e.normals[v]).multiplyScalar(F.x),C.copy(e.binormals[v]).multiplyScalar(F.y),E.copy(R[v]).add(i).add(C),x(E.x,E.y,E.z)):x(F.x,F.y,M/S*v);k(),L()};var mj=function(w,K,U,L,k){function p(F,J,N){return $.vertices.push(new Sn(F,J,N))-1}sq.call(this),K=K||64,U=U||1,L=L||8,k=k||!1;var F,d,u,D,S,j,H,t,B,Z,f,N,g,E,s,T,q,a,O,Q,I=[],$=this,v=K+1,X=new Sn,W=new mj.FrenetFrames(w,K,k),r=W.tangents,M=W.normals,c=W.binormals;for(this.tangents=r,this.normals=M,this.binormals=c,B=0;v>B;B++)for(I[B]=[],D=B/(v-1),t=w.getPointAt(D),F=r[B],d=M[B],u=c[B],Z=0;L>Z;Z++)S=Z/L*G,j=-U*z(S),H=U*C(S),X.copy(t),X.x+=j*d.x+H*u.x,X.y+=j*d.y+H*u.y,X.z+=j*d.z+H*u.z,I[B][Z]=p(X.x,X.y,X.z);for(B=0;K>B;B++)for(Z=0;L>Z;Z++)f=k?(B+1)%K:B+1,N=(Z+1)%L,g=I[B][Z],E=I[f][Z],s=I[f][N],T=I[B][N],q=new Ge(B/K,Z/L),a=new Ge((B+1)/K,Z/L),O=new Ge((B+1)/K,(Z+1)/L),Q=new Ge(B/K,(Z+1)/L),this.faces.push(new eq(g,E,T)),this.faceVertexUvs[0].push([q,a,Q]),this.faces.push(new eq(E,s,T)),this.faceVertexUvs[0].push([a.clone(),O,Q.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};mj.prototype=pp(Zg),mj.FrenetFrames=function(f,q,g){function V(){G[0]=new Sn,Q[0]=new Sn,I=Number.MAX_VALUE,J=n(L[0].x),a=n(L[0].y),c=n(L[0].z),I>=J&&(I=J,d.set(1,0,0)),I>=a&&(I=a,d.set(0,1,0)),I>=c&&d.set(0,0,1),r.crossVectors(L[0],d).normalize(),G[0].crossVectors(L[0],r),Q[0].crossVectors(L[0],G[0])}var X,I,J,a,c,U,O,d=new Sn,L=[],G=[],Q=[],r=new Sn,i=new Bd,k=q+1,j=1e-4;for(this.tangents=L,this.normals=G,this.binormals=Q,U=0;k>U;U++)O=U/(k-1),L[U]=f.getTangentAt(O),L[U].normalize();for(V(),U=1;k>U;U++)G[U]=G[U-1].clone(),Q[U]=Q[U-1].clone(),r.crossVectors(L[U-1],L[U]),r.length()>j&&(r.normalize(),X=H(vg(L[U-1].dot(L[U]),-1,1)),G[U].applyMatrix4(i.makeRotationAxis(r,X))),Q[U].crossVectors(L[U],G[U]);if(g)for(X=H(vg(G[0].dot(G[k-1]),-1,1)),X/=k-1,L[0].dot(r.crossVectors(G[0],G[k-1]))>0&&(X=-X),U=1;k>U;U++)G[U].applyMatrix4(i.makeRotationAxis(L[U],X*U)),Q[U].crossVectors(L[U],G[U])};var er=function(o,q,J,m){sq.call(this),q=q||18,J=J||0,m=m==E?G:m;for(var F=1/(o.length-1),Z=1/q,h=0,s=q;s>=h;h++)for(var T=J+h*Z*m,M=z(T),t=C(T),N=0,c=o.length;c>N;N++){var g=o[N],b=new Sn;b.x=M*g.x-t*g.y,b.y=t*g.x+M*g.y,b.z=g.z,this.vertices.push(b)}for(var R=o.length,h=0,s=q;s>h;h++)for(var N=0,c=o.length-1;c>N;N++){var U=N+R*h,K=U,S=U+R,M=U+1+R,p=U+1,_=h*Z,y=N*F,e=_+Z,Q=y+F;this.faces.push(new eq(K,p,S)),this.faceVertexUvs[0].push([new Ge(_,y),new Ge(_,Q),new Ge(e,y)]),this.faces.push(new eq(S,p,M)),this.faceVertexUvs[0].push([new Ge(e,y),new Ge(_,Q),new Ge(e,Q)])}this.mergeVertices(),bp(this),this.computeFaceNormals(),this.computeVertexNormals()};er.prototype=pp(Zg);var Fj=function(v,N){N=N||{};var e=Ub.generateShapes(v,N);N.amount=N.height!==o?N.height:50,nr.call(this,e,N)};Fj.prototype=pp(oi);var um=O.Node=function(){zo(um,this)},sn={X:Sb,Y:zi,Z:lg},dd={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},jg="xzy",mr=function(S,l,B){if(l){var k=l[0],P=l[1],J=l[2];"xzy"===B?(zi(S,P),lg(S,J),Sb(S,k)):"xyz"===B?(lg(S,J),zi(S,P),Sb(S,k)):"yxz"===B?(lg(S,J),Sb(S,k),zi(S,P)):"yzx"===B?(Sb(S,k),lg(S,J),zi(S,P)):"zxy"===B?(zi(S,P),Sb(S,k),lg(S,J)):"zyx"===B?(Sb(S,k),zi(S,P),lg(S,J)):(zi(S,P),lg(S,J),Sb(S,k))}};Pi("Node",Lq,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:jg,_64O:0,_rotationX:0,_53O:0,_host:E,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return jp},_22Q:function(){return re},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(w,y){Zo(w,ie(E,E,this.r3(),this.getRotationMode())),this.translate3d(w[0]*y,w[1]*y,w[2]*y)},translateFront:function(y){this.translate3dBy([0,0,1],y)},translateBack:function(g){this.translate3dBy([0,0,-1],g)},translateLeft:function(n){this.translate3dBy([-1,0,0],n)},translateRight:function(u){this.translate3dBy([1,0,0],u)},translateTop:function(g){this.translate3dBy([0,1,0],g)},translateBottom:function(d){this.translate3dBy([0,-1,0],d)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(u,D,z){1===arguments.length&&(D=u[1],z=u[2],u=u[0]),this.p(u,z),this.setElevation(D)},translate3d:function(U,W,u){1===arguments.length&&(W=U[1],u=U[2],U=U[0]),this.translate(U,u),this.setElevation(this._54O+W)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(J,P,x){1===arguments.length&&(P=J[1],x=J[2],J=J[0]),this.setSize(J,x),this.setTall(P)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(x,j,l){1===arguments.length&&(j=x[1],l=x[2],x=x[0]),this.setRotationX(x),this.setRotation(-j),this.setRotationZ(l)},setRotationY:function(u){this.setRotation(-u)},getRotationY:function(){return-this._64O},lookAt:function(v,w){w=w||$;var f=this,k=vh(v,f.p3()),c=Nq(k);w===$?(f.r3([-j(k[1]/c),-p(k[2],k[0])+F,0]),f.setRotationMode("xzy")):w===Bk?(f.r3(0,-p(k[2],k[0]),j(k[1]/c)),f.setRotationMode("zyx")):w===Bg?(f.r3(0,-p(k[2],k[0])+r,-j(k[1]/c)),f.setRotationMode("zyx")):w===wi?(f.r3([-j(k[1]/c)+F,-p(k[2],k[0])+F,0]),f.setRotationMode("xzy")):w===_g&&(f.r3([-j(k[1]/c)-F,-p(k[2],k[0])+F,0]),f.setRotationMode("xzy")),w===rj&&(f.r3([-j(k[1]/c)+r,-p(k[2],k[0])+F,r]),f.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host
},setHost:function(m){var K=this;if(K!==m&&K._host!==m){var v=K._host;v&&v._removeAttach(K),K._host=m,K._host&&K._host._addAttach(K),K.fp("host",v,m),K.onHostChanged(v,m)}},getAttaches:function(){return this._69O},_addAttach:function(Y){var u=this;u._69O||(u._69O=new dj),u._69O.add(Y),u.fp("attaches",E,Y)},_removeAttach:function(I){var Z=this;Z._69O.remove(I),Z._69O.isEmpty()&&delete Z._69O,Z.fp("attaches",I,E)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(e){var a=this;a._44I||(a._44I=new dj),a._42I||(a._42I=new dj),a._44I.add(e),a._42I.add(e),a._20I()},_4I:function(j){var b=this;b._44I||(b._44I=new dj),b._43I||(b._43I=new dj),b._44I.add(j),b._43I.add(j),b._20I()},_16I:function(f){var C=this;C._44I.remove(f),C._42I.remove(f),C._44I.isEmpty()&&delete C._44I,C._42I.isEmpty()&&delete C._42I,C._20I()},_18I:function(T){var z=this;z._44I.remove(T),z._43I.remove(T),z._44I.isEmpty()&&delete z._44I,z._43I.isEmpty()&&delete z._43I,z._20I()},_20I:function(){var V=this;if(delete V._45I,!V._44I||V._44I.isEmpty())return delete V._70O,void 0;var c;V._44I.each(function(O){O.isLooped()&&(c||(c={}),c[O._id]||(V._45I||(V._45I=new dj),V._45I.add(O),c[O._id]=O))}),c?(V._70O=new dj,V._44I.each(function(P){c[P._id]?"A"===c[P._id]||(c[P._id]="A",V._70O.add(P)):V._70O.add(P)})):V._70O=V._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(C){var B=this;B._46I||(B._46I=new dj),B._48I||(B._48I=new dj),B._46I.add(C),B._48I.add(C),B._19I()},_3I:function(m){var I=this;I._47I||(I._47I=new dj),I._48I||(I._48I=new dj),I._47I.add(m),I._48I.add(m),I._19I()},_15I:function($){var w=this;w._46I.remove($),w._48I.remove($),w._46I.isEmpty()&&delete w._46I,w._48I.isEmpty()&&delete w._48I,w._19I()},_17I:function(k){var H=this;H._47I.remove(k),H._48I.remove(k),H._47I.isEmpty()&&delete H._47I,H._48I.isEmpty()&&delete H._48I,H._19I()},_19I:function(){var g=this;delete g._49I;var I=g._48I;if(I&&!I.isEmpty()){var F={};I.each(function(L){F[L._id]?g._49I||(g._49I=new dj):F[L._id]=L}),g._49I?I.each(function(T){F[T._id]&&(g._49I.add(T),delete F[T._id])}):g._49I=I}},getImage:function(){return this._image},setImage:function(H){var S=this,Y=S._image,v=S.getWidth(),n=S.getHeight();S._image=H,S.fp("image",Y,H),S.fp(jm,v,S.getWidth()),S.fp(Kn,n,S.getHeight())},getElevation:function(){return this._54O},setElevation:function(E){var f=this;if(!f._50O){f._50O=1;var z=f._54O;f._54O=E,f.fp(Um,z,E),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(k){var H=this;if(!H._49O){H._49O=1;var X=H._64O;H._64O=k,H.fp(xb,X,k),delete H._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(X){var q=this;if(!q._51O){q._51O=1;var E=q._rotationX;q._rotationX=X,q.fp("rotationX",E,X),delete q._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(n){var e=this;if(!e._52O){e._52O=1;var g=e._53O;e._53O=n,e.fp("rotationZ",g,n),delete e._52O}},getPosition:function(){return this._position},setPosition:function(l,_){var X=this;if(!X._50I){X._50I=1;var m;if(m=2===arguments.length?{x:l,y:_}:l,m.x!==X._position.x||m.y!==X._position.y){var w=X._position;X._position=m,X.fp(pj,w,m)}delete X._50I}},translate:function(R,i){var C=this._position;this.p(C.x+R,C.y+i)},getWidth:function(){var O=this;if(O._width>=0)return O._width;var l=bd(O._image);return l?si(l,O):20},setWidth:function(X){var b=this,j=b._width;b._width=X,b.fp(jm,j,X)},getHeight:function(){var Q=this;if(Q._height>=0)return Q._height;var b=bd(Q._image);return b?tl(b,Q):20},setHeight:function(_){var X=this,q=X._height;X._height=_,X.fp(Kn,q,_)},setSize:function(K,W){var y=this;2===arguments.length?(y.setWidth(K),y.setHeight(W)):(y.setWidth(K.width),y.setHeight(K.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(d,x,c,r){var N=this;1===arguments.length?(N.p(d.x+d.width/2,d.y+d.height/2),N.setWidth(d.width),N.setHeight(d.height)):(N.p(d+c/2,x+r/2),N.setWidth(c),N.setHeight(r))},getRect:function(){var V=this,x=V.getWidth(),R=V.getHeight();return Oe({x:V._position.x-x/2,y:V._position.y-R/2,width:x,height:R},V._64O)},getCorners:function(a,v){a==E&&(a=0),v==E&&(v=a);var n=this,e=n._position,F=n.getWidth()/2+a,W=n.getHeight()/2+v,U=new Kq(n._64O,e.x,e.y);return[U.tf(-F,-W),U.tf(F,-W),U.tf(F,W),U.tf(-F,W)]},rotateAt:function(Q,I,Z){var P=this,G=P._position,S=P._64O,m=new Kq(S,G.x,G.y).tf(Q,I),v=d(Q*Q+I*I),R=p(G.y-m.y,G.x-m.x)+Z;P.setRotation(S+Z),P.p(m.x+v*z(R),m.y+v*C(R))},onParentChanged:function(){um.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(c){c._7I()})},onPropertyChanged:function(c){var k=this;um.superClass.onPropertyChanged.call(k,c),k._69O&&k._69O.each(function(R){R.handleHostPropertyChange(c)}),k._49I&&k._49I.each(function(P){P.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(N){this.updateAttach(N)},onStyleChanged:function(t){um.superClass.onStyleChanged.apply(this,arguments),Rp[t]&&this.updateAttach()},updateAttach:function(P){var f=this;f._51I||te||(f._51I=1,f._71O(P),delete f._51I)},_71O:function(r){var m,d,A,g,N,Y,t=this,Q=t._host,f=r?r.property:E,w=r?r.oldValue:E,U=r?r.newValue:E;if(Q instanceof bq){if(f===Um)t.setElevation(t._54O+U-w);else if(!r||Ec[f]){if(m=t.s("attach.row.index"),d=t.s("attach.column.index"),A=Q.getCellRect(m,d),!A)return;g=t.s("attach.row.span"),N=t.s("attach.column.span"),(1!==g||1!==N)&&(A=di(A,Q.getCellRect(m+g-1,d+N-1))),Dl(A,t,"attach.padding",1),t.setRect(A)}}else if(Q instanceof Yi&&(Y=t.s("attach.index"))>=0&&(!r||sl[f])){var K=t.s("attach.thickness");K!=E&&t.setHeight(Q.getThickness()*K);var I=t.s("attach.offset"),H=Q.getPoints(),T=H.size();if(T>Y){var u=H.get(Y),q=T===Y+1?H.get(0):H.get(Y+1),W=[q.x-u.x,q.y-u.y],k=Nq(W);if(k){t.s("attach.offset.relative")&&(I*=k),t.s("attach.offset.opposite")&&(I=k-I);var $={x:u.x+W[0]/k*I,y:u.y+W[1]/k*I},i=t.s("attach.gap");i&&(t.s("attach.gap.relative")&&(i*=Q.getThickness()),$=Dh(E,$,q,i)),t.p($),t.setRotation(p(W[1],W[0]))}}}else r&&(f===pj?t.translate(U.x-w.x,U.y-w.y):f===Um?t.setElevation(t._54O+U-w):dg[f]&&t._11Q(Q,f,U-w))},_11Q:function(f,W,a){var k=this,G=f.p3(),g=vh(k.p3(),G),J=dc(),T=dd[k.getRotationMode()],V=T[0],F=T[1],l=T[2],t=sn[V],Q=sn[F],o=sn[l];W===xb&&(W="rotationY",a=-a),W===xb+V?(o(J,f[Em+l]()),Q(J,f[Em+F]()),t(J,a),Q(J,-f[Em+F]()),o(J,-f[Em+l]()),k[Cn+V](k[Em+V]()+a)):W===xb+F?(o(J,f[Em+l]()),Q(J,a),o(J,-f[Em+l]()),k[Cn+F](k[Em+F]()+a)):W===xb+l&&(o(J,a),k[Cn+l](k[Em+l]()+a)),Zo(g,J),k.p3(G[0]+g[0],G[1]+g[1],G[2]+g[2])},isHostOn:function(v){var h=this;if(h._host&&v&&v._69O)for(var V={},P=h._host;P&&P!==h&&!V[P._id];){if(P===v)return!0;V[P._id]=P,P=P._host}return!1},isLoopedHostOn:function(S){return this.isHostOn(S)&&S.isHostOn(this)},getSerializableProperties:function(){var l=um.superClass.getSerializableProperties.call(this);return Jh(l,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),l}});var Zl=O.Edge=function(s,L){var Q=this;zo(Zl,Q),Q.setSource(s),Q.setTarget(L)};Pi("Edge",Lq,{_icon:"edge_icon",getUIClass:function(){return id},_22Q:function(){return fi},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(A){var Q=this;if(Q._source!==A){var C=Q._source;Q._source=A,C&&C._16I(Q),A&&A._2I(Q),Q._7I(),Q.fp("source",C,A)}},setTarget:function(t){var g=this;if(g._target!==t){var e=g._target;g._target=t,e&&e._18I(g),t&&t._4I(g),g._7I(),g.fp("target",e,t)}},isLooped:function(){var W=this;return W._source===W._target&&!!W._source&&!!W._target},_7I:function(){var s,p=this,_=wo(p);p._40I!==_&&(s=this._40I,s&&s._15I(p),p._40I=_,_&&_._1I(p),p.fp("sourceAgent",s,_),Jd(s,p._41I),Jd(_,p._41I));var j=Kd(p);p._41I!==j&&(s=p._41I,s&&s._17I(p),p._41I=j,j&&j._3I(p),p.fp("targetAgent",s,j),Jd(s,p._40I),Jd(j,p._40I))},_22I:function(z){this._52I=z,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var X=this;return X._52I&&X._52I.get(0)!==X&&!X.getStyle(hc)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var G=this,S=G._52I;return S&&!G.getStyle(hc)&&S.size()>1&&G===S.get(0)},toggle:function(){var Q=this._52I,M=!this.s(hc);Q&&Q.size()>1&&(Q.each(function(E){E.s(hc,M)}),Q.getSiblings().each(function(Z){Z!==Q&&Z.each(function(m){m.fp("edgeGroup",E,Z)})}))},setStyle:function(E,A){(E===Hj||"edge.segments"===E)&&(A=Xb(A)),Zl.superClass.setStyle.call(this,E,A)},onStyleChanged:function(u){Zl.superClass.onStyleChanged.apply(this,arguments),nj[u]&&Jd(this._41I,this._40I)},getSerializableProperties:function(){var Y=Zl.superClass.getSerializableProperties.call(this);return Jh(Y,{source:1,target:1}),Y}});var cq=O.Group=function(){zo(cq,this)};Pi("Group",um,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Sl},onChildAdded:function(){cq.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){cq.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var H=this;if(!H._54I&&!te){var s=H.getChildrenRect();s&&(H._53I=1,H.p(el(H.s("group.position"),s,H.getSize())),delete H._53I)}},getChildrenRect:function(){var b,s=this;return s.eachChild(function(z){b=di(b,s.getChildRect(z))}),b},getChildRect:function(b){var N;return as(b)&&b.s(ve)&&(Fm(b)&&b.isExpanded()&&b.eachChild(function(s){N=di(N,b.getChildRect(s))}),!N&&b.getRect&&(N=b.getRect())),N},setPosition:function(W,S){var V=this;if(!V._54I){var b;b=2===arguments.length?{x:W,y:S}:W,te||V._53I||(V._54I=1,_p(V._children,b.x-V._position.x,b.y-V._position.y),delete V._54I),cq.superClass.setPosition.call(this,b)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(B){var s=this;if(s._57O!==B){var P=s._57O;s._57O=B,s.fp("expanded",P,s._57O),s._8I()}},_8I:function(){cq.superClass._8I.call(this),this.eachChild(function(N){as(N)&&N._8I()})},onStyleChanged:function(b){cq.superClass.onStyleChanged.apply(this,arguments),"group.position"===b&&this._81I()},getSerializableProperties:function(){var i=cq.superClass.getSerializableProperties.call(this);return i.expanded=1,i}});var bq=O.Grid=function(){zo(bq,this)};Pi("Grid",um,{IRotatable:!1,_icon:"grid_icon",_image:E,getUIClass:function(){return cc},setRotation:function(){},getCellRect:function(W,M){var L=this,Z=L.s("grid.row.count"),K=L.s("grid.column.count");if(0>=Z||0>=K||0>W||W>=Z||0>M||M>=K)return E;var d,$,p,C=L.getRect(),T=L.s("grid.row.percents"),F=L.s("grid.column.percents");if(Dl(C,L,"grid.border",-1),T&&T._as&&(T=T._as),F&&F._as&&(F=F._as),T&&T.length===Z){for(p=0,d=0;W>d;d++)p+=C.height*T[d];C.y+=p,C.height=C.height*T[W]}else C.height=C.height/Z,C.y+=C.height*W;if(F&&F.length===K){for($=0,d=0;M>d;d++)$+=C.width*F[d];C.x+=$,C.width=C.width*F[M]}else C.width=C.width/K,C.x+=C.width*M;return Sf(C,-L.s("grid.gap")),C}});var Yi=O.Shape=function(){zo(Yi,this),this._59O=new dj};Yi.__de__=Yd,Pi("Shape",um,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return ig},_22Q:function(){return Vr},getLength:function(R){return Xg(Sh(this._59O,this._58O,R,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var T=this._58O;return T?new dj(T._as.slice(0)):T},setSegments:function(i){var w=this._58O;i=i?Pn(i)?new dj(i.slice(0)):new dj(i._as.slice(0)):new dj,(w&&i&&w._as.join(",")!==i._as.join(",")||w!==i)&&(this._58O=i,this.fp("segments",w,i))},getPoints:function(){return this._59O},toPoints:function(){var G=this._59O;return new dj(G._as.slice(0))},setPoints:function(V){var I=this._59O;V=V?Pn(V)?new dj(V.slice(0)):new dj(V._as.slice(0)):new dj,(I&&V&&I._as.join(",")!==V._as.join(",")||I!==V)&&(this._59O=V,this.fs(),this.fp("points",I,V))},addPoint:function(D,i){var P=this.toPoints();P.add(D,i),this.setPoints(P)},setPoint:function(h,R){var A=this.toPoints();A.set(h,R),this.setPoints(A)},removePointAt:function(O){var A=this.toPoints();A.removeAt(O),this.setPoints(A)},setWidth:function(k){var S=this;if(1>k&&(k=1),!S._55I&&!te&&S.getWidth()){S._55I=1;var y=S._position.x,$=k/S.getWidth(),K=S.toPoints(),R=new dj;K.each(function(X){R.add({x:(X.x-y)*$+y,y:X.y,e:X.e})}),S.setPoints(R),S.fs(),delete S._55I}Yi.superClass.setWidth.call(S,k)},setHeight:function(A){var i=this;if(1>A&&(A=1),!i._55I&&!te&&i.getHeight()){i._55I=1;var L=i._position.y,T=A/i.getHeight(),f=i.toPoints(),d=new dj;f.each(function(l){d.add({x:l.x,y:(l.y-L)*T+L,e:l.e})}),i.setPoints(d),i.fs(),delete i._55I}Yi.superClass.setHeight.call(i,A)},setPosition:function(T,j){var b,r=this;if(!r._28Q){if(r._28Q=1,!r._55I&&!te){b=2===arguments.length?{x:T,y:j}:T;var t=b.x-r._position.x,u=b.y-r._position.y;if(0===t&&0===u)return delete r._28Q,void 0;r._55I=1;var $=r.toPoints(),e=new dj;$.each(function(U){e.add({x:U.x+t,y:U.y+u,e:U.e})}),r.setPoints(e),r.fs(),delete r._55I}Yi.superClass.setPosition.apply(r,arguments),delete r._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var I=this;if(!I._55I&&!te){var i=ll(I._59O);i&&(I._55I=1,I.setRect(i),delete I._55I)}I.fp(Pf,!1,!0)},getSerializableProperties:function(){var h=Yi.superClass.getSerializableProperties.call(this);return h.segments=1,h.points=1,h.thickness=1,h.closePath=1,h}});var Ie=O.Polyline=function(){zo(Ie,this),this.s({"shape.background":null,"shape.border.width":2})};Pi("Polyline",Yi,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Hr},getUIClass:function(){return Hh},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(s){var T=this;if(!T._24Q&&!te&&T.getTall()){T._24Q=1;var j=T._54O,P=s/T.getTall();T._59O.each(function(S){S.e=S.e==E?j:(S.e-j)*P+j}),T.fs(),delete T._24Q}Ie.superClass.setTall.call(T,s)},setElevation:function(p){var b=this;if(!b._24Q&&!te){b._24Q=1;var c=p-b._54O;b._59O.each(function(y){y.e==E?y.e=p:y.e+=c}),b.fs(),delete b._24Q}Ie.superClass.setElevation.apply(b,arguments)},fireShapeChange:function(){var f=this,J=f._59O;if(!f._24Q&&!te){var n=J.size();if(n){var D=1,b=J.get(0),X=f._54O;b.e==E&&(b.e=X);for(var Y=b.e,A=0;n>D;D++){b=J.get(D),b.e==E&&(b.e=X);var u=S(Y,b.e),_=t(Y+A,b.e);Y=u,A=_-u}f._24Q=1,f.setTall(A),f.setElevation(Y+A/2),delete f._24Q}}Ie.superClass.fireShapeChange.apply(f,arguments)}});var He=O.SubGraph=function(){zo(He,this)};Pi("SubGraph",um,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){He.superClass._8I.call(this),this.eachChild(function(O){as(O)&&O._8I()})}}),O.EdgeGroup=function(d,S){this._70O=d,this._siblings=S;for(var Y,I,A=0,B=d.size(),R=s[hc];B>A;A++)if(Y=d.get(A).getStyle(hc,!1),Y!=E){R=Y;break}R==E&&(R=!0);var i=m.edgeGroupAgentFunc;for(i&&(I=i(d),I&&I!==d.get(0)&&(d.remove(I),d.add(I,0))),A=0;B>A;A++)d.get(A).s(hc,R)},Pi("EdgeGroup",Q,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(M){return this._70O.get(M)},indexOf:function(p){return this._70O.indexOf(p)},each:function(L,X){this._70O.each(L,X)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(K,C){this._siblings.each(function(D){D._70O.each(K,C)})}});var nn=O.JSONSerializer=function(M,e){this.dm=this._dataModel=M,this._hierarchical=!!e};Pi("JSONSerializer",Q,{ms_ac:["hierarchical"],serialize:function(N){return JSON.stringify(this.toJSON(),function(h,T){return fr(T)?cd(T):T},N==E?2:N)},toJSON:function(){var Z=this,h=Z.dm,G=h.getRoots(),I=Z.json={v:m.getVersion(),d:[],a:{}},n=h.getSerializableAttrs();for(var L in n){var f=h.a(L);f!==o&&Z[tg](L,f,I.a)}return Wb(I.a)&&delete I.a,Z._hierarchical?G.each(Z.serializeData,this):h.each(function($){Z.serializeData($)}),I},isSerializable:function(){return!0},getProperties:function(w){return w.getSerializableProperties()},getStyles:function(h){return h.getSerializableStyles()},getAttrs:function(t){return t.getSerializableAttrs()},serializeData:function(F){var C=this;if(C.isSerializable(F)){var L,W,y,t,O=F.getClass(),g=new O,n={c:F.getClassName(),i:F.getId(),p:{},s:{},a:{}};C.json.d.push(n),L=C.getProperties(F);for(W in L)t=qm(W),F[t]&&(y=F[t](),y!==g[t]()&&C[tg](W,y,n.p));L=C.getStyles(F);for(W in L)y=F.s(W),y!==g.s(W)&&C[tg](W,y,n.s);L=C.getAttrs(F);for(W in L)y=F.a(W),y!==g.a(W)&&C[tg](W,y,n.a);Wb(n.p)&&delete n.p,Wb(n.s)&&delete n.s,Wb(n.a)&&delete n.a}C._hierarchical&&F.getChildren().each(C.serializeData,C)},serializeValue:function(k,X,n){ke(X)?X={__a:X._as}:X instanceof Lq&&(X={__i:X.getId()}),n[k]=X},deserialize:function(r,g,x){te=!0;var h=this;r=h.json=lh(r)?JSON.parse(r):r,h._82I={};for(var K=h.dm,$=new dj,A=new dj,T=0,L=r.d.length;L>T;T++){var B=r.d[T],l=Aj(B.c),_=new l,o=B.i;x&&o!=E&&(_._id=o),h._82I[o]=_,$.add(_),A.add(B)}for(T=0;L>T;T++)h.deserializeData($.get(T),A.get(T));$.each(function(R){g&&!R.getParent()&&R.setParent(g),K.add(R)});for(var N in r.a)K.a(N,h[Fo](r.a[N]));return te=!1,$},deserializeData:function(j,O){for(var U in O.p)j[ti(U)](this[Fo](O.p[U]));for(U in O.s)j.s(U,this[Fo](O.s[U]));for(U in O.a)j.a(U,this[Fo](O.a[U]))},deserializeValue:function(H){if(ui(H)){var Q=H.__i;if(Q!=E)return this._82I[Q];if(Q=H.__a,Pn(Q))return new dj(Q)}return H}}),Jh(ib,{serialize:function(O,i){return new nn(this,i).serialize(O)},toJSON:function(e){return new nn(this,e).toJSON()},deserialize:function(x,N,e){return new nn(this).deserialize(x,N,e)}}),gm.GraphView=function(h){var E=this;E._24I={},E._34I=new dj,E._25I={},E._56I={},E._view=Vd(1),E._canvas=Fi(E._view),E.dm(h?h:new ib),E.setEditable(!1),E.setScrollBarVisible(m.graphViewScrollBarVisible)},Ob("GraphView",Q,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",js,Ak,Gp,kp,"resettable","editInteractor",Gb,"pannable","rectSelectable","autoScrollZone",Oj,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:m.graphViewResettable,_pannable:m.graphViewPannable,_rectSelectable:m.graphViewRectSelectable,_autoScrollZone:m.graphViewAutoScrollZone,_rectSelectBackground:m.graphViewRectSelectBackground,_rectSelectBorderColor:m.graphViewRectSelectBorderColor,_editPointSize:m.graphViewEditPointSize,_editPointBorderColor:m.graphViewEditPointBorderColor,_editPointBackground:m.graphViewEditPointBackground,_scrollBarColor:ah,_scrollBarSize:kg,_autoHideScrollBar:Zb,_autoMakeVisible:Nn,setEditable:function(X){var Z=this,j=gm.XEditInteractor;X?Z.setInteractors([new Yg(Z),j?new j(Z):new fn(Z),new Dm(Z),new xc(Z),new Kb(Z,{editable:!j})]):Z.setInteractors([new Yg(Z),new Dm(Z),new xc(Z),new Kb(Z,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(T){var M=T.getUIClass();return M?new M(this,T):E},getDataUI:function(V){var b=this,j=b._25I[V._id];return j===o&&(j=b._33I(V),b._25I[V._id]=j),j},invalidateAll:function(I){var l=this;if(I){for(var i in l._25I){var L=l._25I[i];L&&L.dispose()}l._25I={},l._56I={},l._24I={},l._34I.clear(),l.redraw()}else l.dm().each(function(D){l.invalidateData(D)})},invalidateSelection:function(){var z=this;z.sm().each(function(t){z.invalidateData(t)})},invalidateData:function(H){var D=this;D._24I[H._id]=H,D._21Q(H),D.iv()},_21Q:function(z){var E=this,m=E._24I;if(Ar(z)&&lm[z.s(_m)]){var A=z.getSourceAgent();A&&A.getAgentEdges().each(function(P){m[P._id]=P}),A=z.getTargetAgent(),A&&A.getAgentEdges().each(function(e){m[e._id]=e}),E.iv()}},redraw:function(I){var O=this;O._32I||(I?O._34I.add(I):(O._32I=1,O._34I.clear()),O.iv())},each:function(x,N){var h,S,Y,i=0,K=this._layers,k=this._dataModel._datas._as,$=k.length;if(K)for(var f=K.length;f>i;i++){Y=K[i];for(var I=0;$>I;I++)if(h=k[I],h._layer===Y&&(S=N?x.call(N,h):x(h),S===!1))return}else for(;$>i;i++)if(h=k[i],S=N?x.call(N,h):x(h),S===!1)return},reverseEach:function(D,x){var O,Q,V,t,y=this._layers,w=this._dataModel._datas._as,j=w.length;if(y)for(O=y.length-1;O>=0;O--){t=y[O];for(var q=j-1;q>=0;q--)if(Q=w[q],Q._layer===t&&(V=x?D.call(x,Q):D(Q),V===!1))return}else for(O=j-1;O>=0;O--)if(Q=w[O],V=x?D.call(x,Q):D(Q),V===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var C=this,R=C._84I;return R||(C.each(function(J){C.isVisible(J)&&(R=di(R,C.getDataUIBounds(J)))}),C._84I=R?R:Uk),C._84I},getScrollRect:function(){return di(this.getContentRect(),this._29I)},fitData:function(I,V,c,H,p){var Y=this;if(!Y.getWidth()||!Y.getHeight())return p||Yk(Y.fitData,Y,[I,V,c,H,!0],200),void 0;Y.makeVisible(I),Y.validate();var J=Y.getDataUIBounds(I);J&&(J=Pc(J),Sf(J,c==E?20:c),Y.fitRect(J,V,H))},fitContent:function(f,i,m,a){var x=this;if(!x.getWidth()||!x.getHeight())return a||Yk(x.fitContent,x,[f,i,m,!0],200),void 0;x.validate();var U=Pc(x.getContentRect());Sf(U,i==E?20:i),x.fitRect(U,f,m)},fitRect:function(p,x,g){var O=this,P=O.getWidth(),V=O.getHeight(),m=p.x+p.width/2,M=p.y+p.height/2,k=S(P/p.width,V/p.height),u=O._zoom,Y=-m*u+P/2,C=-M*u+V/2;0===k||isNaN(k)||(g&&(k=S(1,k)),x?O.setTranslate(Y,C,{finishFunc:function(){O.setZoom(k,x)}}):(O.setTranslate(Y,C),O.setZoom(k)))},toCanvas:function(n){this.validateImpl();var c=this,d=c.getContentRect(),p=Fi(),x=c._zoom,G=d.x*x,P=d.y*x,u=d.width*x,I=d.height*x;Wr(p,u,I,1);var j=Wn(p);return n&&mo(j,0,0,u,I,n),ml(j,-G,-P),j.scale(x,x),c._42(j),j.restore(),p},toDataURL:function(i,V){return this.toCanvas(i).toDataURL(V||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(Y,n){var J,d,R=this;R._93db(Y,n),R.each(function(Z){R._56I[Z._id]&&(J=R.getDataUI(Z),J&&(d=J._79o(),O.HtmlNode&&Z instanceof O.HtmlNode?J._42(Y):(!n||Ng(n,d))&&J._42(Y)))}),R._92db(Y,n)},validateImpl:function(){var n,A,w,m,W,Z=this,c=Z.tx(),I=Z.ty(),i=Z._zoom,O=Z._canvas,g=this.getWidth(),X=this.getHeight(),H=Z._29I,l={x:-c/i,y:-I/i,width:g/i,height:X/i},k={},E=Z._34I,T=Z._24I,f=Z._32I,V=Z._23I;(g!==O.clientWidth||X!==O.clientHeight)&&(Wr(O,g,X),f=1),f||cm(l,H)||(f=1),Z._29I=l,Z.each(function(C){A=C._id;var W=k[A]=Z.isVisible(C);W!==Z._56I[A]&&(T[A]=C,w=Z.getDataUI(T[A]),w&&w._84o(W),Z._84o(C,W))},Z);for(A in T)w=Z.getDataUI(T[A]),w&&(!f&&Z._56I[A]&&(W=w._79o(),W&&E.add(W)),w.invalidate()),Z._83I=1;if(Z._56I=k,!f)for(A in T)k[A]&&(w=Z.getDataUI(T[A]),w&&(W=w._79o(),W&&E.add(W)));if(f?m=l:(E.each(function(q){Ng(l,q)&&(m=di(m,q))}),m&&(Sf(m,t(1,1/i)),m.x=q(m.x*i)/i,m.y=q(m.y*i)/i,m.width=N(m.width*i)/i,m.height=N(m.height*i)/i,m=es(l,m))),Z._74O=m,m&&(n=Wn(O),Xh(n,c,I,i),n.beginPath(),n.rect(m.x,m.y,m.width,m.height),n.clip(),n.clearRect(m.x,m.y,m.width,m.height),Z._42(n,m),n.restore(),delete Z._74O),Z._24I={},E.clear(),delete Z._32I,V&&g>0&&X>0){var w=Z.getDataUI(V);if(w){var W=w._79o(),j=Z._29I,F=j.x,r=j.y,o=j.width,B=j.height,i=Z._zoom;W&&!Ng(W,j)&&(W.x+W.width<F&&Z.tx(-W.x*i),W.x>F+o&&Z.tx(-(W.x+W.width-o)*i),W.y+W.height<r&&Z.ty(-W.y*i),W.y>r+B&&Z.ty(-(W.y+W.height-B)*i))}delete Z._23I}Z._83I&&(delete Z._83I,delete Z._84I),Z._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(Y){var n=this;Y!==n.isScrollBarVisible()&&(Y?(Gn(n._view,n._79O=Vd()),Gn(n._79O,n._27I=Vd()),Gn(n._79O,n._28I=Vd())):(Bc(n._79O),delete n._79O,delete n._27I,delete n._28I),n.fp("scrollBarVisible",!Y,Y))},showScrollBar:function(){var j=this;j._79O&&(j._85I||(B(function(){j._86I()},Qo),j.iv()),j._85I=new Date)},_86I:function(){var K=this;if(K._85I){var P=new Date,E=P.getTime();E-K._85I.getTime()>=Qo?(delete K._85I,K.iv()):B(function(){K._86I()},Qo)}},_98O:function(){var b=this,G=this._27I,B=this._28I;if(b._79O){if(b._autoHideScrollBar&&!b._85I)return G.style.visibility=zj,B.style.visibility=zj,void 0;var m=b.getScrollBarColor(),c=b._zoom,f=b.getScrollBarSize(),p=b.getViewRect(),n=b.getScrollRect(),U=p.height*c,C=n.height*c,J=p.width*c-f-2,P=U*((p.y-n.y)*c/C),v=U*(U/C),N=G.style;C-.5>U?(mn>v&&(P=P+v/2-mn/2,0>P&&(P=0),P+mn>U&&(P=U-mn),v=mn),ud(G,J,P,f,v),N.visibility=ip,N.background=m,N.borderRadius=f/2+Rk):N.visibility=zj;var O=p.width*c,s=n.width*c,P=p.height*c-f-2,J=O*((p.x-n.x)*c/s),S=O*(O/s),N=B.style;s-.5>O?(mn>S&&(J=J+S/2-mn/2,0>J&&(J=0),J+mn>O&&(J=O-mn),S=mn),ud(B,J,P,S,f),N.visibility=ip,N.background=m,N.borderRadius=f/2+Rk):N.visibility=zj}},setDataModel:function(X){var c=this,J=c._dataModel,C=c._3o;J!==X&&(J&&(J.umm(c.handleDataModelChange,c),J.umd(c.handleDataPropertyChange,c),J.removeIndexChangeListener(c._75O,c),C||J.sm().ums(c._16o,c)),c._dataModel=X,X.mm(c.handleDataModelChange,c),X.md(c.handleDataPropertyChange,c),X.addIndexChangeListener(c._75O,c),C?C._21I(X):X.sm().ms(c._16o,c),c.invalidateAll(!0),c.fp(ro,J,X))},handleDataPropertyChange:function(P){this.invalidateData(P.data)},onPropertyChanged:function(f){var q=this,G=f.property;q.redraw(),Ib[G]?q.showScrollBar():G===Gb&&q.onCurrentSubGraphChanged(f)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(O){var x=this,U=O.kind,b=O.data;if(x._83I=1,"add"===U)x.invalidateData(b),Ar(b)&&b.getEdgeGroup()&&b.getEdgeGroup().eachSiblingEdge(x.invalidateData,x);else if(U===Hg){x._21Q(b);var Q=b._id,N=x._25I[Q];if(N){if(x._56I[Q]){var o=N._79o();o&&x.redraw(o)}N.dispose(),delete x._25I[Q],delete x._24I[Q],delete x._56I[Q]}b===x._currentSubGraph&&x.setCurrentSubGraph(E)}else U===Ql&&(x.invalidateAll(!0),x.setCurrentSubGraph(E))},_75O:function(A){this.invalidateData(A.data)},_76O:function(D){var g=this;if(g.isVisible(D)){for(var A=D;A._parent&&g.isVisible(A._parent);)A=A._parent;A&&A!==D&&g._dataModel._76O(A),g._dataModel._76O(D)}},isMovable:function(t){var D=this;return Ar(t)&&t.getStyle(_m)!==Jl?!1:t.s("2d.movable")?D._movableFunc?D._movableFunc(t):!0:!1},isSelectable:function(g){return g.s("2d.selectable")&&this.sm().isSelectable(g)},isEditable:function(E){var B=this;if(!B._editInteractor||!B.isSelected(E))return!1;if(Fm(E)){var A=B.getDataUI(E);if(!A||A._88I)return!1}return Ar(E)&&E.getStyle(_m)!==Jl?!1:E.s("2d.editable")?B._editableFunc?B._editableFunc(E):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(p){return as(p)&&0!==p.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(p):!0},isRectEditable:function(d){return as(d)&&0!==d.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(d):!0},isRotationEditable:function(x){return x.setRotation&&x.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(x):!0:!1},getRotationPoint:function(t){var c=sc(t.getRotation(),0,-t.getHeight()/2-(Y?32:16)),B=t.p();return c.x+=B.x,c.y+=B.y,c},getLogicalPoint:function(d){var T=this;return $b(d,T._canvas,T.tx(),T.ty(),T._zoom,T._zoom)},getSelectedDataAt:function(w){var G=this;return this.getDataAt(w,function(n){return G.isSelected(n)})},getDataAt:function(h,T,I){h.target&&(h=this.lp(h));var t;return this.reverseEach(function(Z){return(T?T(Z):this.isSelectable(Z))&&this.rectIntersects(Z,Kp(h.x,h.y,I))?(t=Z,!1):void 0},this),t},getIconInfoAt:function(X,p){var T=this;if(X.target&&(X=T.lp(X)),p||(p=T.getDataAt(X)),p){var M=T.getDataUI(p);if(M&&M._38o){var J,W=M._38o,a=new dj;for(J in W.icons)a.add(J);for(var z=a.size()-1;z>=0;z--){J=a.get(z);for(var q=W.rects[J],V=q.rotation,F=q.length-1;F>=0;F--){var N=q[F],D=N.width,g=N.height,o={x:X.x-N.x-D/2,y:X.y-N.y-g/2};V!=E&&(o=sc(-V,o.x,o.y));var N={x:-D/2,y:-g/2,width:D,height:g};if(tm(N,o))return{key:J,index:F,name:W.icons[J].names[F],rect:q[F],point:X,rotation:V,relativeRect:N,relativePoint:o,data:p}}}}}return E},getDatasInRect:function(y,r,m){m===o&&(m=1);var L=this,z=new dj;return L.reverseEach(function(A){m&&!L.isSelectable(A)||(r?L.rectIntersects(A,y):L.rectContains(A,y))&&z.add(A)}),z},moveSelection:function(S,F){var E,p=this,O=p.dm();O&&(E=O.getHistoryManager()),E&&E.beginInteraction(),_p(p.sm().toSelection(p.isMovable,p),S,F),E&&E.endInteraction()},getDataUIBounds:function(V){var s=this.getDataUI(V);return s?s._79o():E},getBoundsForGroup:function(D){return D.s(ve)?this.getDataUIBounds(D):E},rectIntersects:function(e,Y){this.validate();var $=E;if(this._56I[e._id]){var j=this._25I[e._id];if(j){var b=j._79o();if(Oi(Y,b))$=!0;else if((Y=es(Y,b))&&(j.rectIntersects&&($=j.rectIntersects(Y)),$==E)){if(!e.s("pixelPerfect"))return!0;var K=Y.x,N=Y.y,k=Y.width,T=Y.height,X=1,L=m.hitMaxArea,G=k*T;G>L&&(X=L/G);var h=po(k*X,T*X);ml(h,-K*X,-N*X),h.scale(X,X),j._42(h);try{for(var q=0,U=h.getImageData(0,0,k*X,T*X).data;q<U.length;q+=4)if(0!==U[q+3]){$=!0;break}h.restore()}catch(x){uf=E,$=!0}}}}return $?!0:!1},rectContains:function(U,t){if(this._56I[U._id]){var G=this._25I[U._id];if(G)return Oi(t,G._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function($){var X=this,l=X._focusData,O=l&&X._25I[l._id],e=0,G=X._dataModel._datas;l&&l._enabled&&l._editable&&O&&O.onKeyDown&&O.onKeyDown($)===!0||(9===$.keyCode&&(l&&(e=G.indexOf(l),Gg($)?-1===--e&&(e=0):++e===G.size()&&(e=0)),X._focusData=l=G.get(e),X.sm().setSelection(l)),dq($)?X.selectAll():Ei($)&&X.isResettable()&&X.reset(),X.sm().isEmpty()||(Ti($)&&X.handleDelete($),Sd($)&&(X.moveSelection(-1,0),X.fi({kind:"moveLeft"})),Tq($)&&(X.moveSelection(0,-1),X.fi({kind:"moveUp"})),Vn($)&&(X.moveSelection(1,0),X.fi({kind:"moveRight"})),xm($)&&(X.moveSelection(0,1),X.fi({kind:"moveDown"}))))},handleScroll:function(r,O){Bi(r);var n=this.lp(r);O>0?this.scrollZoomIn(n):0>O&&this.scrollZoomOut(n)},handlePinch:function(N,g,T){g>T?this.pinchZoomIn(N):this.pinchZoomOut(N)},checkDoubleClickOnNote:function(y,M){var V=this,e=V.lp(y),L=V.getDataUI(M),X=L.note2Info;return X&&M.s("note2.toggleable")&&tm(X.clickRect,e)?(M.s(Ad,!M.s(Ad)),V.fi({kind:"toggleNote2",event:y,data:M}),!0):(X=L.noteInfo,X&&M.s("note.toggleable")&&tm(X.clickRect,e)?(M.s(Xi,!M.s(Xi)),V.fi({kind:"toggleNote",event:y,data:M}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(h,n){var q=this,A=q.getAutoScrollZone(),l=A/q.getZoom(),z=A/4,i=q._29I,c=q.lp(h),D={x:q.tx(),y:q.ty()};return c&&A>0&&i&&(c.x-i.x<l?q.translate(z,0):i.x+i.width-c.x<l&&q.translate(-z,0),c.y-i.y<l?q.translate(0,z):i.y+i.height-c.y<l&&q.translate(0,-z)),D.x=q.tx()-D.x,D.y=q.ty()-D.y,n&&(n.x+=D.x,n.y+=D.y),D},getMoveMode:function(E,K){var I=K.s("2d.move.mode");return I?I:Fc["88"]?"x":Fc["89"]?"y":"xy"}});var Vf=function(c,A){var G=this;G.gv=c,G.s=function(K){return A.getStyle(K)},G._data=A,G._87I=new dj};fo(Vf,Q,{_6I:E,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var Q=this,z=Q.gv.isSelected(Q._data);return!z||Q.isShadowed()?0:this.s("select.width")},getBodyColor:function(f){var X=this._data,P=this.gv.getBodyColor(X);return P?P:f?X.getStyle(f):E},_2Q:function(g){return this.s(g)},_1Q:function(t,d,L,I){var m=this.s,o=m(d+".dash.color");t.strokeStyle=o,t.lineWidth=L,t.stroke(),m(d+".dash.3d")&&lp(t,o,m(d+".dash.3d.color"),L,this.gv._zoom,m(d+".dash.3d.accuracy")),qp(t,I)},invalidate:function(){this._6I=E},_79o:function(){var O=this;if(!O._6I){O.labelInfo=O.label2Info=O.noteInfo=O.note2Info=O._38o=E,O._87I.clear(),O._3O();var _=O._data,z=O.gv;O._55O=z.isEditable(_)?{_42O:z.isRectEditable(_),_43O:z.isPointEditable(_),_56O:z.isRotationEditable(_)}:E,O._6I=O._81o()}return O._6I},_3O:function(){},getPosition:function(){return Uk},_68o:function(P,h){P&&this._87I.add(Oe(P,h))},_81o:function(){var E=this,V=E.s;E._24O(uq,"getLabel"),E._24O(Xo,"getLabel2"),E._26O(Nc,"getNote"),E._26O(Vm,"getNote2"),E._15O(),E._55O&&E._48O();var m;if(E._87I.each(function(b){m=di(m,b)}),m&&E.isShadowed()){var X=Pc(m);
X.x+=V("shadow.offset.x"),X.y+=V("shadow.offset.y"),Sf(X,V("shadow.blur")),m=di(m,X)}return E._87I.clear(),m},_42:function(c){var z=this,H=z._data,l=z.gv,V=z.s,h=V("opacity"),x=this.isShadowed();if(x){var T=c.shadowOffsetX,L=c.shadowOffsetY,v=c.shadowBlur,M=c.shadowColor;c.shadowOffsetX=V("shadow.offset.x"),c.shadowOffsetY=V("shadow.offset.y"),c.shadowBlur=V("shadow.blur"),c.shadowColor=V("shadow.color")}if(h!=E){var j=c.globalAlpha;c.globalAlpha=h}z._80o(c),l.isLabelVisible(H)&&(bf(c,z.labelInfo),bf(c,z.label2Info)),l.isNoteVisible(H)&&(he(c,z.noteInfo),he(c,z.note2Info)),z._99O(c),h!=E&&(c.globalAlpha=j),x&&(c.shadowOffsetX=T,c.shadowOffsetY=L,c.shadowBlur=v,c.shadowColor=M),z._55O&&l.isEditVisible(H)&&z._47O(c)},_80o:function(){},_47O:function(){},_24O:function(N,i){var G=this,V=G._data,Z=G.gv,B=G.s,s=Z[i](V);if(s!=E){var q=B(N+".scale"),A=B(N+".max"),Q=B(N+".position"),u=G[N+"Info"]={label:s,scale:q,color:Z[i+"Color"](V),font:B(N+".font"),opacity:B(N+".opacity"),align:B(N+".align"),rotation:G.getRotation(B(N+".rotation"),!1,Q),background:Z[i+"Background"](V)},M=Mk(u,s);A>0&&A<M.width&&(u.labelWidth=M.width,M.width=A),1!==q&&(M.width*=q,M.height*=q);var O=G.getPosition(Q,B(N+".offset.x"),B(N+".offset.y"),M,B(N+".position.fixed"));if(M.x=O.x-M.width/2,M.y=O.y-M.height/2,G._68o(u.rect=M,u.rotation),1!==q){var z=M.width/q,r=M.height/q;u.rect={x:O.x-z/2,y:O.y-r/2,width:z,height:r}}}},_26O:function(m,t){var Y=this,V=Y.gv,i=Y._data,c=Y.s,T=V[t](i);if(T!=E){var v,$,a=c(m+".scale"),e=Y[m+"Info"]={note:T,scale:a,data:i,view:V,expanded:c(m+".expanded"),font:c(m+".font"),color:c(m+".color"),opacity:c(m+".opacity"),align:c(m+".align"),icon:c(m+".icon"),backgroundImage:c(m+".backgroundImage"),borderWidth:c(m+".border.width"),borderColor:c(m+".border.color"),background:V[t+"Background"](i)},r=Y.getPosition(c(m+".position"),c(m+".offset.x"),c(m+".offset.y")),w=r.x,n=r.y;if(e.expanded){var l,x=c(m+".max"),B=c(m+".backgroundImage");B?(B=bd(B),l={width:si(B,i),height:tl(B,i)}):l=Mk(e,T),l.width+=6,l.height+=2,x>0&&x<l.width&&(e.labelWidth=l.width,l.width=x),v=l.width,$=l.height+8,e.clickRect={x:w-v*a/2,y:n-$*a,width:v*a,height:$*a*l.height/$}}else{var z=c(m+".icon");z?(z=bd(z),v=si(z,i),$=tl(z,i)):(v=12,$=18),e.clickRect={x:w-v*a/2,y:n-$*a,width:v*a,height:$*a}}e.rect={x:w-v/2,y:n-$*a/2-$/2,width:v,height:$};var A=N(e.borderWidth/2)*a;Y._68o({x:w-v*a/2-A,y:n-$*a-A,width:v*a+2*A,height:$*a+2*A})}},_48O:function(){},_99O:function(n){var h=this,j=h._38o;if(j){var S=h.gv,N=h._data,V=j.icons;for(var t in V){var e=V[t],r=j.rects[t];if(r){var Q=Fg(e.opacity,N,S),T=Fg(e.names,N,S),R=T?T.length:0,P=r.rotation;if(Q!=E){var o=n.globalAlpha;n.globalAlpha*=Q}for(var f=0;R>f;f++){var I=T[f],w=bd(I),s=r[f];if(P){var g=s.x+s.width/2,i=s.y+s.height/2;n.save(),ml(n,g,i),ub(n,P),ml(n,-g,-i)}hr(n,w,Fg(e.stretch,N,S),s.x,s.y,s.width,s.height,h._data,h.gv),P&&n.restore()}Q!=E&&(n.globalAlpha=o)}}}}});var jp=function(u,l){zo(jp,this,[u,l])};fo(jp,Vf,{_40O:function(Q,s){var R=this,f=R.s,A=Q.rect;(Q.borderColor=R.gv.getBorderColor(R._data))&&(Q.borderType=f("border.type"),Q.borderWidth=f("border.width"),Q.borderPadding=f("border.padding"),s=t(s,Q.borderPadding+Q.borderWidth/2)),(Q.selectWidth=R._2o())&&(Q.selectType=f("select.type"),Q._97o=f("select.color"),Q.selectPadding=f("select.padding"),s=t(s,Q.selectPadding+Q.selectWidth/2)),s>0&&(A=Pc(A),Sf(A,s)),R._68o(A)},_39O:function($,R){var w=R.rect;if(R.borderWidth>0){var Z=R.borderPadding;$.strokeStyle=R.borderColor,$.lineWidth=R.borderWidth,gh($,R.borderType,{x:w.x-Z,y:w.y-Z,width:w.width+2*Z,height:w.height+2*Z}),$.stroke()}R.selectWidth>0&&(Z=R.selectPadding,$.strokeStyle=R._97o,$.lineWidth=R.selectWidth,gh($,R.selectType,{x:w.x-Z,y:w.y-Z,width:w.width+2*Z,height:w.height+2*Z}),$.stroke())},_3O:function(){var A=this,H=A.s,G=A._data,S=G.getStyle(Pf),L=A.getBodyColor(),r=A._83o=S?{shape:S,_53o:A.getBodyColor("shape.background"),_27Q:bd(H("shape.repeat.image"),L),_54o:H("shape.border.width"),_55o:H("shape.border.color"),_56o:H("shape.border.3d"),_57o:H("shape.border.3d.color"),_58o:H("shape.border.3d.accuracy"),shapeGradient:H("shape.gradient"),_59o:H("shape.gradient.color"),_60o:H("shape.border.pattern"),_61o:H("shape.border.cap"),_62o:H("shape.border.join")}:{img:bd(G.getImage(),L),bodyColor:L,stretch:H("image.stretch")};K&&!y||(r.rect=G.getRect(),r.position=G.p(),r.rotation=G.getRotation(),S===_j&&(r._63o=H("shape.depth")),A._40O(r,S?So(E,r._54o/2,r._62o):0))},getPosition:function(g,f,m,O){var M=el(g,this._83o.rect,O);return M.x+=f,M.y+=m,M},_80o:function(Z){var k=this,N=k.s,B=k.gv,x=k._data,K=k._83o,$=K.rect,c=$,C=K.position,o=K.rotation,n=K.shape;if($.width>0&&$.height>0){if(o&&(Z.save(),ml(Z,C.x,C.y),ub(Z,o),ml(Z,-C.x,-C.y),c=x.getSize(),c.x=C.x-c.width/2,c.y=C.y-c.height/2),k.freeDraw)k.freeDraw(Z,c,K);else if(n){var J,w,P,Y,I=K._60o,v=Af(Z,I),d=K._53o,m=K._27Q,h=K._54o,j=K._55o,t=Z.lineJoin,W=Z.lineCap;if("roundRect"===n?J=N("shape.corner.radius"):"polygon"===n?J=N("shape.polygon.side"):"arc"===n&&(J=N("shape.arc.from"),w=N("shape.arc.to"),P=N("shape.arc.close"),Y=N("shape.arc.oval")),Z.lineJoin=K._62o,Z.lineCap=K._61o,d||m?(m?Pk(Z,m):bk(Z,d,K.shapeGradient,K._59o,c),gh(Z,n,c,J,w,P,Y),Z.fill(),Z!==v&&gh(v,n,c,J,w,P,Y)):gh(v,n,c,J,w,P,Y),h>0&&(Z.lineWidth=h,Z.strokeStyle=j,Z.stroke(),K._56o&&lp(Z,j,K._57o,h,B._zoom,K._58o)),qp(Z,I),N("shape.dash")){var y=N("shape.dash.width")||h;if(y>0){I=N("shape.dash.pattern");var v=Af(Z,I,k._2Q("shape.dash.offset"));v!==Z&&gh(v,n,c,J,w,P,Y),k._1Q(Z,"shape",y,I)}}Ih(Z,d,K._63o,c),Z.lineJoin=t,Z.lineCap=W}else hr(Z,K.img,K.stretch,c.x,c.y,c.width,c.height,x,B,K.bodyColor);o&&Z.restore()}k._39O(Z,K)},_48O:function(){var _,K=this,t=K._data,x=K.gv,N=K._55O,J=x.getEditPointSize()/2+2;if(N._42O&&(_=t.getRect(),Sf(_,J)),N._56O){var r=N._98o=x.getRotationPoint(t);_=di(_,{x:r.x-J,y:r.y-J,width:2*J,height:2*J})}K._68o(_)},_47O:function(Z){var f=this,v=f.gv,B=f._55O,r=f._data.getRect(),p=v.getEditPointSize(),C=B._98o;B._42O&&(Z.fillStyle=v.getEditPointBackground(),Z.strokeStyle=v.getEditPointBorderColor(),Z.lineWidth=1,[{x:r.x,y:r.y},{x:r.x+r.width/2,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x,y:r.y+r.height/2},{x:r.x+r.width,y:r.y+r.height/2},{x:r.x,y:r.y+r.height},{x:r.x+r.width/2,y:r.y+r.height},{x:r.x+r.width,y:r.y+r.height}].forEach(function(U){mo(Z,U.x-p/2,U.y-p/2,p,p),Z.stroke()})),B._56O&&(Z.fillStyle=v.getEditPointBorderColor(),Z.strokeStyle=v.getEditPointBackground(),Z.lineWidth=1,Z.beginPath(),Z.arc(C.x,C.y,p/2,0,G,!0),Z.fill(),Z.stroke())}});var id=function(i,Q){zo(id,this,[i,Q])},Iq=function(m,E,X,y){var O=Nq(m,E);return X=y?S(X,O):Hb(X,O),O?X/=O:X=0,{x:m.x+(E.x-m.x)*X,y:m.y+(E.y-m.y)*X}};fo(id,Vf,{_3O:function(){var H,F=this,A=F._data,O=F.gv,s=F.s,l=s(_m),X=A.isLooped(),y=s("edge.width"),T=s("edge.center"),V=s("edge.offset"),w=O.getBorderColor(A),d=w?s("border.width"):0,J=F._2o(),C=A._40I,o=A._41I,u=F._78o=C&&o?{looped:X,type:l,width:y,center:T,color:F.getBodyColor("edge.color"),borderColor:w,borderWidth:d,_97o:J?s("select.color"):E,selectWidth:J,pattern:s("edge.pattern"),cap:s("edge.cap"),join:s("edge.join"),is3d:s("edge.3d"),_67o:s("edge.3d.color"),_66o:s("edge.3d.accuracy")}:E;if(u){var U=m.getEdgeType(l);if(U){var S=U(A,aj(F,O,A,X,l),O,F._19Q);S.points&&S.points.size()>1&&(u._4O=S,H=ll(u._4O.points))}else{var K=mk(O,C,s("edge.source.position"),s("edge.source.offset.x"),s("edge.source.offset.y")),n=mk(O,o,s("edge.target.position"),s("edge.target.offset.x"),s("edge.target.offset.y"));if(l===Jl){var z=u.points=s(Hj)||mq,Q=z.size();if(u.segments=s("edge.segments"),!T)if(V){var B=Iq(K,Q?z.get(0):n,V,Q),N=Iq(n,Q?z.get(Q-1):K,V,Q);K=B,n=N}else{var b=ls(O,C),Y=ls(O,o),k=Jc(K,Q?z.get(0):n,b);k&&(K={x:k[0],y:k[1]}),k=Jc(Q?z.get(Q-1):K,n,Y),k&&(n={x:k[0],y:k[1]})}H=di(ll(u.points),ll(K,n))}else{var $=aj(F,O,A,X,l);if(F._19Q||($=-$),X)K=Pc(K),K.x-=C.getWidth()/2,u.radius=$,H={x:K.x-$,y:K.y-$,width:2*$,height:2*$};else{var _=Nq(K,n),t=Hb(V,_),B={x:t,y:$},N={x:_-t,y:$},x=p(n.y-K.y,n.x-K.x),W=u.mat=new Kq(x);if(u.orienAngle=x,u.angle=n.x<K.x?x+r:x,u.rect={x:B.x,y:B.y,width:N.x-B.x,height:0},u.origin=K,B=W.tf(B),B.x+=K.x,B.y+=K.y,N=W.tf(N),N.x+=K.x,N.y+=K.y,T){var P={x:_,y:0};P=W.tf(P),P.x+=K.x,P.y+=K.y,H=ll([K,B,N,P]),u.c1=K,u.c2=P}else H=ll(B,N);K=B,n=N}}u._69o=K,u._70o=n}So(H,y/2+d+J,u.join),F._68o(H)}},getRotation:function(m,K,Y){m=m||0;var b=this._78o;if(b){var L,i=b.angle,v=b.points,z=b._4O;if(i!=E)return K?b.orienAngle+m:i+m;if(z){var r=z.points;return L=r.size(),vn[Y]?L&&0===L%2?Hk(r.get(L/2-1),r.get(L/2),K,m):m:Dk[Y]?Hk(r.get(0),r.get(1),K,m):Hk(r.get(L-2),r.get(L-1),K,m)}if(v)return L=v.size(),vn[Y]?L&&0===L%2?Hk(v.get(L/2-1),v.get(L/2),K,m):m:Dk[Y]?Hk(b._69o,L?v.get(0):b._70o,K,m):Hk(L?v.get(L-1):b._69o,b._70o,K,m)}return m},getPosition:function(M,s,$,j,v){var g=this._78o;if(g){var e,O=g.type,A=g.points,o=g._4O,X=g._69o,N=g._70o;if(!O)return g.looped?{x:X.x-g.radius+s,y:X.y+$}:(v&&X&&N&&(X.x>N.x||X.x===N.x&&X.y>N.y)&&(M=Kj[M],$=-$),e=el(M,g.rect,j),e.x+=s,e.y+=$,e=g.mat.tf(e),e.x+=g.origin.x,e.y+=g.origin.y,e);if(A){var e,V=A.size();if(vn[M]){if(V){var K=V%2;if(0===K)return xi(A.get(V/2-1),A.get(V/2),M,s,$,j,v);e=A.get((V-K)/2)}else e={x:(X.x+N.x)/2,y:(X.y+N.y)/2};return e=el(M,{x:e.x,y:e.y,width:0,height:0},j),e.x+=s,e.y+=$,e}return Dk[M]?xi(X,V?A.get(0):N,M,s,$,j,v):xi(V?A.get(V-1):X,N,M,s,$,j,v)}if(o){var d=o.points,V=d.size();if(vn[M]){var K=V%2;return 0===K?xi(d.get(V/2-1),d.get(V/2),M,s,$,j,v):(e=d.get((V-K)/2),e=el(M,{x:e.x,y:e.y,width:0,height:0},j),e.x+=s,e.y+=$,e)}return Dk[M]?xi(d.get(0),d.get(1),M,s,$,j,v):xi(d.get(V-2),d.get(V-1),M,s,$,j,v)}}return Uk},_42:function(L){this._78o&&id.superClass._42.call(this,L)},drawPath:function(v,B){v.beginPath();var c=B.type,b=B.points,Y=B.segments,L=B._4O;if(!c||b){var h=B._69o,f=h.x,F=h.y,J=B._70o,l=J.x,g=J.y;if(c)if(Y){var D=new dj({x:f,y:F});D.addAll(b),D.add({x:l,y:g}),pc(v,D,Y)}else v.moveTo(f,F),b.each(function(y){v.lineTo(y.x,y.y)}),v.lineTo(l,g);else B.looped?v.arc(f,F,B.radius,0,G,!0):B.center?(v.moveTo(B.c1.x,B.c1.y),v.lineTo(f,F),v.lineTo(l,g),v.lineTo(B.c2.x,B.c2.y)):(v.moveTo(f,F),v.lineTo(l,g))}else L&&pc(v,L.points,L.segments)},_80o:function(F){var t=this,L=t.s,O=t._78o,l=O.width,S=O.selectWidth,p=O.borderWidth,v=O.color,d=F.lineJoin,w=F.lineCap,e=O.pattern;if(F.lineJoin=O.join,F.lineCap=O.cap,t.drawPath(Af(F,e),O),S&&(F.strokeStyle=O._97o,F.lineWidth=l+2*(p+S),F.stroke()),p&&(F.strokeStyle=O.borderColor,F.lineWidth=l+2*p,F.stroke()),F.strokeStyle=v,F.lineWidth=l,F.stroke(),O.is3d&&lp(F,v,O._67o,l,t.gv._zoom,O._66o),qp(F,e),L("edge.dash")){e=L("edge.dash.pattern");var K=Af(F,e,t._2Q("edge.dash.offset"));K!==F&&t.drawPath(K,O),t._1Q(F,"edge",L("edge.dash.width")||l,e)}F.lineJoin=d,F.lineCap=w},_48O:function(){var O=this,A=O._78o;if(O._55O._43O&&A&&A.points){var W=ll(A.points);W&&(Sf(W,O.gv.getEditPointSize()/2+2),O._68o(W))}},_47O:function(q){var j=this,C=j.gv,D=j._78o;if(j._55O._43O&&D&&D.points){var V=C.getEditPointSize()/2;q.fillStyle=C.getEditPointBackground(),q.strokeStyle=C.getEditPointBorderColor(),q.lineWidth=1,D.points.each(function(n){q.beginPath(),q.arc(n.x,n.y,V,0,G,!0),q.fill(),q.stroke()})}},_71o:function(D,d){var v=this,c=v._data;if(v._19Q=!0,!c.getEdgeGroup())return D?c.s("edge.gap"):0;var u,s=0,X=0,N=0;if(c.getEdgeGroup().getSiblings().each(function(f){f.each(function(m){if(v.gv.isVisible(m)&&m.s(_m)==d){var g=m.s("edge.gap");u?(X+=N/2+g/2,N=g):(u=m,N=g),m===c&&(s=X)}})}),D)return X-s+N;var T=s-X/2;return u&&c._40I!==u._40I&&(v._19Q=!1),T}});var Sl=function(u,S){zo(Sl,this,[u,S])};fo(Sl,jp,{_3O:function(){var K,T,C=this,s=C.s,u=C._data,q=C.gv;if(C._88I=E,u.isExpanded()&&u.eachChild(function(S){var z=q.getBoundsForGroup(S);z&&(T||(T=[]),T.push(z),K=di(K,z))}),K){var x=q.getLabel(u),P=s("group.type");K=yc(P,T,K),Dl(K,u,"group.padding",1);var f=C._88I={type:P,rect:K,_64o:K};if(!P&&x!=E){var g,W=C.labelInfo={label:x,color:s("group.title.color"),font:s("group.title.font")},D=Mk(W,x),N=D.width,Q=D.height,X=s("group.title.align");N>K.width&&(K.width=N),W.rect={y:K.y-Q,width:D.width,height:Q},g=X===Bg?K.x:X===Bk?K.x+K.width-N:K.x+K.width/2-N/2,W.rect.x=g,f.titleRect={x:K.x,y:K.y-Q,width:K.width,height:Q+1},f.rect={x:K.x,y:K.y-Q,width:K.width,height:K.height+Q}}C._40O(f,s("group.border.width")/2)}else Sl.superClass._3O.call(C)},getPosition:function(N,w,U,B){var p=this._88I;if(p){var c=el(N,p.rect,B);return c.x+=w,c.y+=U,c}return Sl.superClass.getPosition.apply(this,arguments)},_24O:function(z,Q){var J=this._88I;(!J||J.type||"label2"===z)&&Sl.superClass._24O.call(this,z,Q)},_80o:function(x){var E=this,M=E._88I;if(M){var V=E._data,u=E.s,X=E.gv,S=M.type,L=M.rect,H=M._64o,k=M.titleRect,C=E.getBodyColor(),o=bd(u("group.image"),C),p=u("group.image.stretch"),t=E.getBodyColor("group.background"),a=bd(u("group.repeat.image"),C),z=u("group.gradient"),q=u("group.gradient.color"),j=u("group.depth");if(S){var r=u("group.border.pattern"),_=u("group.border.width"),y=x.lineJoin,b=x.lineCap;if(x.lineJoin=u("group.border.join"),x.lineCap=u("group.border.cap"),o){if(x.save(),gh(x,S,L),x.clip(),hr(x,o,p,L.x,L.y,L.width,L.height,V,X,C),x.restore(),_>0){var g=Af(x,r);gh(g,S,L),x.lineWidth=_,x.strokeStyle=u("group.border.color"),x.stroke(),qp(x,r)}}else{var g=Af(x,r);t||a?(a?Pk(x,a):bk(x,t,z,q,L),gh(x,S,L),x.fill(),x!==g&&gh(g,S,L)):gh(g,S,L),_>0&&(x.lineWidth=_,x.strokeStyle=u("group.border.color"),x.stroke()),qp(x,r),S===_j&&Ih(x,t,j,L)}x.lineJoin=y,x.lineCap=b}else if(o?hr(x,o,p,H.x,H.y,H.width,H.height,V,X,E.getBodyColor()):(t||a)&&(a?Pk(x,a):bk(x,t,z,q,H),gh(x,_j,H),x.fill(),Ih(x,t,j,H)),k){var l=u("group.title.background");mo(x,k.x,k.y,k.width,k.height,l),Ih(x,l,j,k)}E._39O(x,M)}else Sl.superClass._80o.call(E,x)}});var ig=function(q,w){zo(ig,this,[q,w])};fo(ig,jp,{_3O:function(){var k=this,L=k._data,J=k.s,C=k.gv,y=L.getPoints(),N=C.getBorderColor(L),T=N?J("border.width"):0,l=k._2o(),m=J("shape.border.width"),F=L.getRect(),M=C.getBodyColor(L),G=k._99o=y.isEmpty()?E:{rect:F,rotation:L.getRotation(),position:L.p(),points:y,segments:L.getSegments(),bodyColor:M,borderColor:N,borderWidth:T,_94o:J("shape.border.3d"),_95o:J("shape.border.3d.color"),_96o:J("shape.border.3d.accuracy"),_97o:l?J("select.color"):E,selectWidth:l,_53o:J("shape.background"),_27Q:bd(J("shape.repeat.image"),M),_54o:m,_55o:J("shape.border.color"),shapeGradient:J("shape.gradient"),_59o:J("shape.gradient.color"),_60o:J("shape.border.pattern"),_61o:J("shape.border.cap"),_62o:J("shape.border.join")};if(G){var h=m/2+T+l;h&&(F=Pc(F),So(F,h,G._62o)),k._68o(F)}},getPosition:function(r,M,$,k){var G=this._99o;if(G){var F=el(r,G.rect,k);return F.x+=M,F.y+=$,F}return Uk},_42:function(q){this._99o&&ig.superClass._42.call(this,q)},_80o:function(o){var B,b=this,T=b.s,Z=b._99o,x=Z.position,f=Z.rotation,S=Z.bodyColor,d=Z.borderWidth,O=Z.selectWidth,N=Z._53o,l=Z._27Q,G=Z._54o,y=Z.points,i=Z.segments,Y=b._data.isClosePath();f&&(o.save(),ml(o,x.x,x.y),ub(o,f),ml(o,-x.x,-x.y));var w=Z._60o,X=Af(o,w),D=o.lineJoin,H=o.lineCap;if(o.lineJoin=Z._62o,o.lineCap=Z._61o,N||l?(l?Pk(o,l):(B=S?S:N,bk(o,B,Z.shapeGradient,Z._59o,Z.rect)),pc(o,y,i,Y),o.fill(),X!==o&&pc(X,y,i,Y)):pc(X,y,i,Y),O&&(o.strokeStyle=Z._97o,o.lineWidth=G+2*(d+O),o.stroke()),d&&(o.strokeStyle=Z.borderColor,o.lineWidth=G+2*d,o.stroke()),G&&(B=Z._55o,!N&&S&&(B=S),o.strokeStyle=B,o.lineWidth=G,o.stroke(),Z._94o&&lp(o,B,Z._95o,G,b.gv._zoom,Z._96o)),qp(o,w),T("shape.dash")){var L=T("shape.dash.width")||G;if(L>0){w=T("shape.dash.pattern");var X=Af(o,w,b._2Q("shape.dash.offset"));X!==o&&pc(X,y,i,Y),b._1Q(o,"shape",L,w)}}o.lineJoin=D,o.lineCap=H,f&&o.restore()},_48O:function(){var R=this;if(ig.superClass._48O.call(R),R._55O._43O){var F=R._data.getRect();Sf(F,R.gv.getEditPointSize()/2+2),R._68o(F)}},_47O:function(A){var j=this;if(ig.superClass._47O.call(j,A),j._55O._43O){var l=j.gv,r=l.getEditPointSize()/2;A.fillStyle=l.getEditPointBackground(),A.strokeStyle=l.getEditPointBorderColor(),A.lineWidth=1,j._data.getPoints().each(function(R){A.beginPath(),A.arc(R.x,R.y,r,0,G,!0),A.fill(),A.stroke()})}}});var Hh=function(c,Q){zo(Hh,this,[c,Q])};fo(Hh,ig,{getRotation:function(Y,n,W){Y=Y||0;var J=this._data.getPoints(),u=J.size();return u>1?vn[W]?u&&0===u%2?Hk(J.get(u/2-1),J.get(u/2),n,Y):Y:Dk[W]?Hk(J.get(0),J.get(1),n,Y):Hk(J.get(u-2),J.get(u-1),n,Y):Y},getPosition:function(f,w,R,D,i){var C=this._data.getPoints(),m=C.size();if(m>1){if(vn[f]){var M=m%2;if(0===M)return xi(C.get(m/2-1),C.get(m/2),f,w,R,D,i);var d=C.get((m-M)/2),e={x:d.x,y:d.y,width:0,height:0};return d=el(f,e,D),d.x+=w,d.y+=R,d}return Dk[f]?xi(C.get(0),C.get(1),f,w,R,D,i):xi(C.get(m-2),C.get(m-1),f,w,R,D,i)}return Uk}});var cc=function(Z,g){zo(cc,this,[Z,g])};fo(cc,jp,{_3O:function(){var f=this;cc.superClass._3O.call(f);var Y=f.s,M=f._83o;f._82o=M.img||M.shape?E:{background:f.getBodyColor("grid.background"),depth:Y("grid.depth"),rect:M.rect,_88o:Y("grid.cell.depth"),cellBorderColor:Y("grid.cell.border.color"),_89o:Y("grid.row.count"),_90o:Y("grid.column.count"),block:Y("grid.block"),_91o:Y("grid.block.color"),_92o:Y("grid.block.padding"),_93o:Y("grid.block.width")}},_80o:function(K){var b=this,N=b._82o;if(!N)return cc.superClass._80o.call(b,K),void 0;var w,O,A=b._data,o=N.background,Q=N.rect,Z=N.block,a=N._91o,L=N._92o,V=N._93o,s=N._88o,D=N.cellBorderColor,G=N._89o,x=N._90o;if(o)if(mo(K,Q.x,Q.y,Q.width,Q.height,o),Ih(K,o,N.depth,Q),s)for(w=0;G>w;w++)for(O=0;x>O;O++)Q=A.getCellRect(w,O),Q&&Ih(K,o,s,Q);else if(D){for(K.beginPath(),w=0;G>w;w++)for(O=0;x>O;O++)Q=A.getCellRect(w,O),Q&&K.rect(Q.x,Q.y,Q.width,Q.height);K.strokeStyle=D,K.lineWidth=1,K.stroke()}if("h"===Z)for(w=0;G>w;w++)Q=di(A.getCellRect(w,0),A.getCellRect(w,x-1)),Sf(Q,L),Ip(K,a,Q.x,Q.y,Q.width,Q.height,V);else if("v"===Z)for(O=0;x>O;O++)Q=di(A.getCellRect(0,O),A.getCellRect(G-1,O)),Sf(Q,L),Ip(K,a,Q.x,Q.y,Q.width,Q.height,V);b._39O(K,b._83o)}});var Se=gm.Interactor=function(n){this.gv=this._graphView=n};Ob("Interactor",Q,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(C){this.gv.fi(C)},setCursor:function(u){Y||(this.getView().style.cursor=u)},startDragging:function(f){var c=this;c._lastClientPoint=kf(f),c._lastLogicalPoint=c.gv.lp(f),De(c,f)},clearDragging:function(){var e=this;e._lastClientPoint=e._lastLogicalPoint=e._logicalPoint=E},autoScroll:function(C){return this.gv.autoScroll(C,this._lastClientPoint)}});var xc=gm.DefaultInteractor=function(C){zo(xc,this,[C])};Ob("DefaultInteractor",Se,{handle_mousedown:function(K){Bi(K);var d=this,G=d.gv,s=G.getDataAt(K);G.setFocus(K)&&!G._editing&&(ne(K)?G.handleDoubleClick(K,s):G.handleClick(K,s),G.isPannable()&&!s&&_k(K)&&!bj(K)&&(d._tx=G.tx(),d._ty=G.ty(),d.startDragging(K)))},handleWindowMouseUp:function(Y){var b=this,M=b.gv;M._panning&&(delete M._panning,M.onPanEnded(),b.fi({kind:"endPan",event:Y})),delete b._tx,delete b._ty,b.clearDragging()},handle_mousemove:function(y){var $=this,j=$.gv;$._hoverTimer&&(R($._hoverTimer),delete $._hoverTimer),$._hoverTimer=B(function(){$.fi({kind:"hover",event:y}),R($._hoverTimer),delete $._hoverTimer},j.getHoverDelay()||800)},handle_touchmove:function(j){this.handle_mousemove(j)},handleWindowMouseMove:function(o){var c=this,H=c.gv,K=c._lastClientPoint;c.fi({kind:H._panning?"betweenPan":"beginPan",event:o}),H._panning=1,H.setTranslate(c._tx+o.clientX-K.x,c._ty+o.clientY-K.y)},handle_mousewheel:function(H){this.gv.handleScroll(H,H.wheelDelta)},handle_DOMMouseScroll:function(i){2===i.axis&&this.gv.handleScroll(i,-i.detail)},handle_keydown:function(P){this.gv.handleKeyDown(P)}});var Yg=gm.SelectInteractor=function(m){zo(Yg,this,[m])};Ob("SelectInteractor",Se,{_42:function(){var S=this,o=S.gv,I=o.getZoom(),y=S.mark,r=S.div;r||(r=S.div=Vd(),Gn(S.getView(),r));var C={};C.x=y.x*I+o.tx(),C.y=y.y*I+o.ty(),C.width=y.width*I,C.height=y.height*I,ud(r,C),this.intersects()?(r.style.border="",r.style.background=o.getRectSelectBackground()):(r.style.background="",r.style.border="1px solid "+o.getRectSelectBorderColor())},handle_mousedown:function(X){var $=this,c=$.gv;if($._57I=E,!c._editing){var Y=c.getDataAt(X),H=c.sm();Y?bj(X)?H.co(Y)?H.rs(Y):H.as(Y):H.co(Y)||H.ss(Y):bj(X)||!c.isPannable()?_k(X)&&(bj(X)||H.cs(),c.isRectSelectable()&&($.startDragging(X),c._77O=1)):$._57I=kf(X)}},handle_mouseup:function(G){var P=this,b=P._57I;b&&(Nq(b,kf(G))<=1&&P.gv.sm().cs(),P._57I=E)},handleWindowMouseUp:function(M){this.clear(M)},handleWindowMouseMove:function(m){var E=this,F=E.gv;E._logicalPoint=F.lp(m),E.mark?(E.fi({kind:"betweenRectSelect",event:m}),E.autoScroll(m),E.redraw()):E.fi({kind:"beginRectSelect",event:m}),E.mark=ll(E._lastLogicalPoint,E._logicalPoint),E.redraw()},intersects:function(){var y=this,M=y._lastLogicalPoint,t=y._logicalPoint;return M.x>t.x||M.y>t.y},clear:function(Y){var X=this,P=X.gv,U=X.mark;if(X._57I=E,X._lastLogicalPoint){if(U){if(0!==U.width&&0!==U.height){var F=P.getDatasInRect(U,X.intersects());if(!F.isEmpty()){var r=P.sm(),w=r.toSelection();F.each(function(W){r.co(W)?w.remove(W):w.add(W)}),r.ss(w)}}Bc(X.div),delete X.div,delete X.mark,X.redraw(),X.fi({kind:"endRectSelect",event:Y}),P.onRectSelectEnded()}X.clearDragging(),delete P._77O}},redraw:function(){var X=this;X._draw||(X._draw=1,B(function(){X.mark&&X._42(),delete X._draw},16))}});var Dm=gm.MoveInteractor=function(R){zo(Dm,this,[R])};Ob("MoveInteractor",Se,{handle_mousedown:function(h){var H=this,I=H.gv;if(_k(h)&&!I._editing){var Z=I.getSelectedDataAt(h);Z?(H._data=Z,I.handleMouseDown&&I.handleMouseDown(h,Z),H.startDragging(h),I.isMovable(Z)&&(I._moving=1)):I._focusData=E}},handleWindowMouseUp:function(r){var y=this,T=y.gv;T.handleMouseUp&&T.handleMouseUp(r,y._data),y.clear(r)},handleWindowMouseMove:function(Y){var B=this,Q=B.gv,c=B._data,a=Q.getDataModel(),Z=a.getHistoryManager();if((!Q._93O||!Q._93O(Y,c))&&Q._moving){var N=B._logicalPoint?"betweenMove":"beginMove",F={kind:N,event:Y},_=B._logicalPoint=Q.lp(Y);Z&&"beginMove"===N&&Z.beginInteraction();var G=_.x-B._lastLogicalPoint.x,k=_.y-B._lastLogicalPoint.y,M=Q.getMoveMode(Y,c);M&&("x"===M?k=0:"y"===M?G=0:"xy"!==M&&(G=k=0)),Q.moveSelection(G,k),B._lastLogicalPoint=_,B.autoScroll(Y),B.fi(F)}},clear:function(T){var I=this,M=I.gv,l=M.getDataModel(),p=l.getHistoryManager();I._lastLogicalPoint&&(I._lastLogicalPoint=I._data=M._moving=E,I._logicalPoint&&(I.fi({kind:"endMove",event:T}),M.onMoveEnded(),p&&p.endInteraction()),I.clearDragging())}});var fn=gm.EditInteractor=function(z){zo(fn,this,[z])};Ob("EditInteractor",Se,{ms_edit:1,setUp:function(){var K=this;fn.superClass.setUp.call(K),Y||K.gv.setEditInteractor(K)},tearDown:function(){fn.superClass.tearDown.call(this),Y||this.gv.setEditInteractor(E)},clear:function(){var G=this,p=G.gv;p._editing&&(p._editing=G._77I=G._node=G._edge=G._shape=G._rect=G._89I=G._index=E,G.clearDragging(),G.setCursor(w))},handle_mousedown:function(X){var k=this,E=k.gv.dm(),s=E.getHistoryManager(),F=k._index,L=k._node,x=k._shape,b=k._edge,C=k._77I,f=k._89I;_k(X)&&k.gv._editing&&(L&&f?(k._rect=L.getRect(),k.startDragging(X),s&&s.beginInteraction(),k.fi({kind:"beginEditRect",event:X,data:L,direction:f})):x&&F>=0?(k.startDragging(X),s&&s.beginInteraction(),k.fi({kind:"beginEditPoint",event:X,data:x,index:F})):b&&F>=0?(k.startDragging(X),s&&s.beginInteraction(),k.fi({kind:"beginEditPoint",event:X,data:b,index:F})):C&&(k.startDragging(X),s&&s.beginInteraction(),k.fi({kind:"beginEditRotation",event:X,data:C})))},handleWindowMouseUp:function(_){this._46O(_),this.clear()},handleWindowMouseMove:function(i){this._78I(i)},handle_mousemove:function($){if(!En){var W=this,x=W.gv;W._79I($,x.getSelectedDataAt($))?x._editing=1:W.clear()}}});var Kb=gm.TouchInteractor=function(J,t){t=t||{},t.selectable===o&&(t.selectable=!0),t.movable===o&&(t.movable=!0),t.pannable===o&&(t.pannable=!0),t.pinchable===o&&(t.pinchable=!0),t.editable===o&&(t.editable=!0),this.params=t,zo(Kb,this,[J])};Ob("TouchInteractor",Se,{ms_edit:1,setUp:function(){var u=this;Kb.superClass.setUp.call(u),Y&&u.params.editable&&u.gv.setEditInteractor(u)},tearDown:function(){var z=this;Kb.superClass.tearDown.call(z),Y&&z.params.editable&&z.gv.setEditInteractor(E)},clear:function(n){var Z=this,J=Z.gv,Y=J.dm().getHistoryManager();J._moving&&(Z.fi({kind:"endMove",event:n}),delete J._moving,J.onMoveEnded(),Y&&Y.endInteraction()),J._panning&&(Z.fi({kind:"endPan",event:n}),delete J._panning,J.onPanEnded()),J._pinching&&(Z.fi({kind:"endPinch",event:n}),delete J._pinching,J.onPinchEnded()),J._editing&&(Z._46O(n),Z._77I=Z._node=Z._edge=Z._shape=Z._rect=Z._89I=Z._index=J._editing=E),Z._moving=Z._panning=Z._pinching=Z._editing=Z._57I=Z._data=Z._beginHistory=E,Z.clearDragging()},handle_touchstart:function(N){var h=this;if(!h.gv._editing){Bi(N),h._57I=E;var Z=h.params,t=h.gv,k=t.sm(),l=t.getDataAt(N),y=Cl(N);if(1===y)ne(N)?t.handleDoubleClick(N,l):(t.handleClick(N,l),l&&(t.handleMouseDown&&t.handleMouseDown(N,l),h._data=l)),Z.selectable||(l=E),l?(k.co(l)||k.ss(l),Z.editable&&t.isEditable(l)&&h._79I(N,l,!0)?(h._editing=1,h.startDragging(N)):Z.movable&&t.isMovable(l)&&(h._moving=1,h.startDragging(N))):(h._57I=kf(N),Z.pannable&&t.isPannable()&&(h._panning=1,h.startDragging(N),h._translate={x:t.tx(),y:t.ty()}));else if(Z.pinchable&&2===y){h._pinching=1,h.startDragging(N);var Q=t.getView(),S=t.getZoom(),D=Q.getBoundingClientRect(),O=N.touches[0],V=N.touches[1],K={x:(O.clientX+V.clientX)/2-D.left,y:(O.clientY+V.clientY)/2-D.top};K.x-=t.tx(),K.y-=t.ty(),K.x/=S,K.y/=S,h._p=K,h._d=Bh(N)}}},handle_touchend:function(N){var y=this,V=y.gv,l=y._57I,k=y._data;l&&(Nq(l,kf(N))<=1&&V.sm().cs(),y._57I=E),k&&V.handleMouseUp&&V.handleMouseUp(N,k)},handleWindowTouchEnd:function(f){this.clear(f)},handleWindowTouchMove:function(h){var e=this,q=e.gv,C=q.dm().getHistoryManager(),W=Cl(h);if(1===W){if(e._editing&&(C&&!e._beginHistory&&(e._beginHistory=1,C.beginInteraction()),q._editing=1,e._78I(h)),e._moving)C&&!e._beginHistory&&(e._beginHistory=1,C.beginInteraction()),e.handleMove(h);else if(e._panning){var d=kf(h);q.setTranslate(e._translate.x+d.x-e._lastClientPoint.x,e._translate.y+d.y-e._lastClientPoint.y),e.fi({kind:q._panning?"betweenPan":"beginPan",event:h}),q._panning=1}}else if(2===W&&e._pinching){var K=Bh(h);q.handlePinch(e._p,K,e._d),e._d=K,e.fi({kind:q._pinching?"betweenPinch":"beginPinch",event:h}),q._pinching=1}},handleMove:function(c){var V=this,H=V.gv,k=H.lp(c);H._93O&&H._93O(c,V._data)||(H.moveSelection(k.x-V._lastLogicalPoint.x,k.y-V._lastLogicalPoint.y),V._lastLogicalPoint=k,V.autoScroll(c),V.fi({kind:H._moving?"betweenMove":"beginMove",event:c}),H._moving=1)}});var Un="directional",dl="point",jn="spot",jr="light.color";Jh(m,{graph3dViewAttributes:E,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:r/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Qi,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:r/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(h,s){qf[h]=s},getShape3dModel:function(n){return qf[n]},createMatrix:function(C,X){Pn(C)||(C=[C]);for(var I=C.length-1;I>=0;I--){var h=C[I];X=ie(h.mat,h.s3,h.r3,h.rotationMode,h.t3,X)}return X},transformVec:function(r,n){return Zo(r,n)},createBoxModel:function(){return{vs:Ln,ns:tj,uv:oc,is:Oc}},createRoundRectModel:function(V,w){return Qc.roundRect(V,w)},createStarModel:function(I,n){return Qc.star(I,n)},createRectModel:function(F,M){return Qc.rect(F,M)},createTriangleModel:function(S,R){return Qc.triangle(S,R)},createRightTriangleModel:function(v,V){return Qc.rightTriangle(v,V)},createParallelogramModel:function(Y,y){return Qc.parallelogram(Y,y)},createTrapezoidModel:function(I,$){return Qc.trapezoid(I,$)},createSmoothSphereModel:function(I,h,p,y,q,o,Q){return Yj(new Ep(I,h,p,y,q,o,Q))},createSphereModel:function(c,w,$,x,Y,W){return c?bb(c,w,$,x,Y,W):m.createSmoothSphereModel()},createSmoothConeModel:function(L,t,v,O,B){return Oq(L,t,v,O,B)},createConeModel:function(T,u,v,F,g,n){return T?rc(T,u,v,F,g,n):Oq(n)},createSmoothCylinderModel:function(E,d,U,i,s,V,C,A){return Yj(new Cp(E,d,U,i,s,V,C,A))},createCylinderModel:function(Y,X,t,i,M,I,F){return Y?Df(Y,X,t,i,M,I,F):qr(I,F)},createSmoothTorusModel:function(E,k,n,F,H,G){return Yj(new $f(E,k,n,F,H,G))},createTorusModel:function(h,Y,A,V,Z,L,s){return h?Md(h,Y,A,V,Z,L,s):mc(L,s)},createExtrusionModel:function(U,V,y,v,S,G,t,R){return kl(U,V,y,v,S,G,t,R)},createSmoothRingModel:function(p,l,N,c,K,$){for(var B=[],j=0;j<p.length-1;j+=2)B.push({x:p[j],y:p[j+1]});for(p=Sh(B,l,N)[0],B=[],j=0;j<p.length;j++){var U=p[j];B.push(new Sn(U.x,0,U.y))}return Yj(new er(B,$,c,K))},createRingModel:function(S,Y,D,W,w,L,R,Q,p,r){for(var Z=[],V=0;V<S.length-1;V+=2)Z.push({x:S[V],y:S[V+1]});L=L||m.shapeSide,R=R||0,Q=Q||L;var _,t,e,$,j,T,F,K,g,J,V,n,c,G,l,u,i,a,o=[],h=[],x=p?[]:E,k=p?[]:E,y=r?[]:E,d=r?[]:E,M=W?[]:E,B=W?[]:E,U=w?[]:E,s=w?[]:E,S=Sh(Z,Y,D),A=Xg(S),O=0,b=2*Math.PI/L;return S.forEach(function(N){if(e=N.length,e>1){if($=N[0],W)for(T=$.x,K=$.y,V=R;Q>V;V++)n=V+1,c=V*b,G=n*b,l=z(c),u=C(c),i=z(G),a=C(G),M.push(l*T,K,-u*T,i*T,K,-a*T,0,K,0),B.push(.5-.5*l,.5-.5*u,.5-.5*i,.5-.5*a,.5,.5);for(J=0;e>J;J++){for(j=N[J],T=$.x,F=j.x,K=$.y,g=j.y,_=O/A,O+=Nq($,j),t=O/A,V=R;Q>V;V++)n=V+1,c=V*b,G=n*b,l=z(c),u=C(c),i=z(G),a=C(G),o.push(l*F,g,-u*F,i*F,g,-a*F,l*T,K,-u*T,i*F,g,-a*F,i*T,K,-a*T,l*T,K,-u*T),h.push(V/L,t,n/L,t,V/L,_,n/L,t,n/L,_,V/L,_),p&&V===R&&(x.push(0,K,0,0,g,0,l*F,g,-u*F,l*F,g,-u*F,l*T,K,-u*T,0,K,0),k.push(0,.5-K,0,.5-g,2*F,.5-g,2*F,.5-g,2*T,.5-K,0,.5-K)),r&&n===Q&&(y.push(0,K,0,i*F,g,-a*F,0,g,0,i*F,g,-a*F,0,K,0,i*T,K,-a*T),d.push(1,.5-K,1-2*F,.5-g,1,.5-g,1-2*F,.5-g,1,.5-K,1-2*T,.5-K));$=j}if(w)for(T=$.x,K=$.y,V=R;Q>V;V++)n=V+1,c=V*b,G=n*b,l=z(c),u=C(c),i=z(G),a=C(G),U.push(i*T,K,-a*T,l*T,K,-u*T,0,K,0),s.push(.5-.5*i,.5+.5*a,.5-.5*l,.5+.5*u,.5,.5)}}),{vs:o,uv:h,bottom_vs:U,bottom_uv:s,top_vs:M,top_uv:B,from_vs:x,from_uv:k,to_vs:y,to_uv:d}}},!0),Jh(s,{"3d.move.mode":o,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":o,"edge.gradient.color":o,"edge.source.t3":o,"edge.target.t3":o,"light.type":dl,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":r/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Ji,"wf.short":!1,"wf.mat":o,batch:o,"transparent.mask":!1,brightness:o,"select.brightness":.7,"repeat.uv.length":o,"label.face":$,"label.t3":o,"label.r3":o,"label.texture.scale":2,"label.rotationMode":jg,"label.light":!1,"label.blend":o,"label.reverse.flip":!1,"label.reverse.color":Je,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":$,"label2.t3":o,"label2.r3":o,"label2.texture.scale":2,"label2.rotationMode":jg,"label2.light":!1,"label2.blend":o,"label2.reverse.flip":!1,"label2.reverse.color":Je,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":$,"note.t3":o,"note.r3":o,"note.texture.scale":2,"note.rotationMode":jg,"note.light":!1,"note.blend":o,"note.reverse.flip":!1,"note.reverse.color":Je,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":$,"note2.t3":o,"note2.r3":o,"note2.texture.scale":2,"note2.rotationMode":jg,"note2.light":!1,"note2.blend":o,"note2.reverse.flip":!1,"note2.reverse.color":Je,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:o,"shape3d.color":rg,"shape3d.top.color":o,"shape3d.bottom.color":o,"shape3d.from.color":o,"shape3d.to.color":o,"shape3d.image":o,"shape3d.top.image":o,"shape3d.bottom.image":o,"shape3d.from.image":o,"shape3d.to.image":o,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":o,"shape3d.side.to":o,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":o,"shape3d.opacity":o,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Je,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":o,"shape3d.uv.scale":o,"shape3d.top.uv.offset":o,"shape3d.top.uv.scale":o,"shape3d.bottom.uv.offset":o,"shape3d.bottom.uv.scale":o,"shape3d.from.uv.offset":o,"shape3d.from.uv.scale":o,"shape3d.to.uv.offset":o,"shape3d.to.uv.scale":o,"shape3d.top.cap":o,"shape3d.bottom.cap":o,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":rg,"all.image":o,"all.blend":o,"all.opacity":o,"all.reverse.flip":!1,"all.reverse.color":Je,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":o,"all.uv.offset":o,"all.uv.scale":o,"all.discard.selectable":!0,mat:o,"left.mat":o,"right.mat":o,"top.mat":o,"bottom.mat":o,"front.mat":o,"back.mat":o},!0);
var Sp,mm=!1,_l=[0,0,0,1/255],hg={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:Bg,2:Bk,3:wi,4:_g,5:$,6:rj}},Fb=function(E,N,C,k){if(N.getFaceVisible(E,C)){db(N,Sc(E,N.getFaceMat(E,C)||N.getMat(E)));var B=N._26I;N.getFaceReverseCull(E,C)?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),Ah(B,N._prg.uFixPickReverseColor,hg[C]),Gm(B,k,6),fj(N)}},bm=function(R){return R instanceof Oh},oe=function(F){return[F.x,F.e||0,F.y]},mg=function(r,H,n){for(var H=Qj(H),f=H[0],k=H[1],Q=H[2];n--;)r.push(f,k,Q)},og=function(j,U,K){for(var U=Qj(U),G=U[0],b=U[1],c=U[2],B=U[3];K--;)j.push(G,b,c,B)},Al=function(G,l,y){if(l)for(var N,$,C,g=l[0],e=l[1],D=l[2],A=l[4],L=l[5],U=l[6],c=l[8],S=l[9],K=l[10],b=l[12],n=l[13],s=l[14],Q=y.length,X=0,X=0;Q>X;X+=3)N=y[X],$=y[X+1],C=y[X+2],G.push(g*N+A*$+c*C+b,e*N+L*$+S*C+n,D*N+U*$+K*C+s);else _e(G,y)},nq=function(e,n){var q=n.s("light.intensity"),I=Qj(n.s(jr)),p=I[0],F=I[1],l=I[2];1!==q&&(p*=q,F*=q,l*=q),e.push(p,F,l,n.s("light.disabled")?1:0)},zc=function(G,$,L){Ah($,L.uHeadlightRange,G._headlightRange);var R=G._headlightIntensity,h=Qj(G._headlightColor);1!==R&&(h=[h[0]*R,h[1]*R,h[2]*R]),Ah($,L.uHeadlightColor,[h[0],h[1],h[2],G._headlightDisabled?1:0]);var m=G._59O,b=G._spots,M=G._dirs;if(m.length){var o=[],B=[],K=[];m.forEach(function(P){nq(o,P),_e(B,P.p3()),K.push(P.s("light.range"))}),$.uniform4fv(L.uPointColor,o),$.uniform1fv(L.uPointRange,K),$.uniform3fv(L.uPointPosition,B)}if(b.length){var f=[],c=[],J=[],j=[],e=[],d=[];b.forEach(function(l){nq(f,l),_e(c,l.p3()),_e(J,l.s("light.center")),j.push(l.s("light.range")),e.push(z(l.s("light.angle")/2)),d.push(l.s("light.exponent"))}),$.uniform4fv(L.uSpotColor,f),$.uniform1fv(L.uSpotRange,j),$.uniform1fv(L.uSpotAngle,e),$.uniform1fv(L.uSpotExponent,d),$.uniform3fv(L.uSpotPosition,c),$.uniform3fv(L.uSpotCenter,J)}if(M.length){var S=[],T=[];M.forEach(function(y){nq(S,y),_e(T,y.p3())}),$.uniform4fv(L.uDirColor,S),$.uniform3fv(L.uDirPosition,T)}},Sk=function(Z){return Z>0&&0===(Z-1&Z)},Pj=function(n){return n=t(0,S(r,n)),n=t(Do,S(r-Do,n))},sm=function(){return.05+c()/2},Wg=function(p,o,u,G){var K,W=p.getEye();return p.isOrtho()?(K=vh(p.getCenter(),W),K[0]+=G[0],K[1]+=G[1],K[2]+=G[2]):K=W,hj(o,u,G,K)},hj=function(l,_,N,j){var U=oj(l,_),Z=vh(j,N,!0),w=oj(Z,_);if(n(w)<Do)return E;var C=(U-oj(N,_))/w;return[N[0]+Z[0]*C,N[1]+Z[1]*C,N[2]+Z[2]*C]},Kh=function(Z,s){return{x:2*Z.x-s.x,y:2*Z.y-s.y}},Dh=function(e,c,n,A){var O,D;if(!e)return O=p(c.y-n.y,n.x-c.x),{x:c.x+A*C(O),y:c.y+A*z(O)};if(!n)return O=p(e.y-c.y,c.x-e.x),{x:c.x+A*C(O),y:c.y+A*z(O)};var q=vh([e.x,e.y,0],[c.x,c.y,0],!0),F=vh([n.x,n.y,0],[c.x,c.y,0],!0),m=-(q[0]+F[0])/2,Q=-(q[1]+F[1])/2,X=d(m*m+Q*Q);return Do>X?(O=p(e.y-c.y,c.x-e.x),{x:c.x+A*C(O),y:c.y+A*z(O)}):(O=H(oj(q,F))/2,D=q[1]*F[0]-q[0]*F[1]>0?-1:1,m/=X,Q/=X,X=A/C(O),{x:c.x+D*X*m,y:c.y+D*X*Q})},qn=function(h){var I=h[1],V=h[2],J=h[3],R=h[6],u=h[7],E=h[11];h[1]=h[4],h[2]=h[8],h[3]=h[12],h[4]=I,h[6]=h[9],h[7]=h[13],h[8]=V,h[9]=R,h[11]=h[14],h[12]=J,h[13]=u,h[14]=E},pm=function(u){var J=u[0],X=u[1],O=u[2],v=u[3],F=u[4],g=u[5],z=u[6],G=u[7],k=u[8],w=u[9],S=u[10],i=u[11],c=u[12],m=u[13],K=u[14],I=u[15],N=J*g-X*F,T=J*z-O*F,d=J*G-v*F,o=X*z-O*g,H=X*G-v*g,e=O*G-v*z,Q=k*m-w*c,n=k*K-S*c,Y=k*I-i*c,q=w*K-S*m,C=w*I-i*m,b=S*I-i*K,A=N*b-T*C+d*q+o*Y-H*n+e*Q;return A?(A=1/A,u[0]=(g*b-z*C+G*q)*A,u[1]=(O*C-X*b-v*q)*A,u[2]=(m*e-K*H+I*o)*A,u[3]=(S*H-w*e-i*o)*A,u[4]=(z*Y-F*b-G*n)*A,u[5]=(J*b-O*Y+v*n)*A,u[6]=(K*d-c*e-I*T)*A,u[7]=(k*e-S*d+i*T)*A,u[8]=(F*C-g*Y+G*Q)*A,u[9]=(X*Y-J*C-v*Q)*A,u[10]=(c*H-m*d+I*N)*A,u[11]=(w*d-k*H-i*N)*A,u[12]=(g*n-F*q-z*Q)*A,u[13]=(J*q-X*n+O*Q)*A,u[14]=(m*T-c*o-K*N)*A,u[15]=(k*o-w*T+S*N)*A,void 0):E},vi=function(P,M){if(M){var p=M[0],U=M[1],h=M[2];P[12]=P[0]*p+P[4]*U+P[8]*h+P[12],P[13]=P[1]*p+P[5]*U+P[9]*h+P[13],P[14]=P[2]*p+P[6]*U+P[10]*h+P[14],P[15]=P[3]*p+P[7]*U+P[11]*h+P[15]}},Gf=function(_,w){if(w){var B=w[0],Y=w[1],D=w[2];_[0]=_[0]*B,_[1]=_[1]*B,_[2]=_[2]*B,_[3]=_[3]*B,_[4]=_[4]*Y,_[5]=_[5]*Y,_[6]=_[6]*Y,_[7]=_[7]*Y,_[8]=_[8]*D,_[9]=_[9]*D,_[10]=_[10]*D,_[11]=_[11]*D}},ej=function(S,$,v){var B=$[0],O=$[1],R=$[2],J=$[3],t=$[4],l=$[5],j=$[6],k=$[7],o=$[8],F=$[9],d=$[10],Z=$[11],e=$[12],w=$[13],Q=$[14],N=$[15],U=v[0],H=v[1],m=v[2],T=v[3];return S[0]=U*B+H*t+m*o+T*e,S[1]=U*O+H*l+m*F+T*w,S[2]=U*R+H*j+m*d+T*Q,S[3]=U*J+H*k+m*Z+T*N,U=v[4],H=v[5],m=v[6],T=v[7],S[4]=U*B+H*t+m*o+T*e,S[5]=U*O+H*l+m*F+T*w,S[6]=U*R+H*j+m*d+T*Q,S[7]=U*J+H*k+m*Z+T*N,U=v[8],H=v[9],m=v[10],T=v[11],S[8]=U*B+H*t+m*o+T*e,S[9]=U*O+H*l+m*F+T*w,S[10]=U*R+H*j+m*d+T*Q,S[11]=U*J+H*k+m*Z+T*N,U=v[12],H=v[13],m=v[14],T=v[15],S[12]=U*B+H*t+m*o+T*e,S[13]=U*O+H*l+m*F+T*w,S[14]=U*R+H*j+m*d+T*Q,S[15]=U*J+H*k+m*Z+T*N,S},Km=function(G,K,b,i){var q,l,o,J,E,W,L,c,M,u,v=K[0],k=K[1],X=K[2],$=i[0],z=i[1],w=i[2],D=b[0],C=b[1],U=b[2];return n(v-D)<Do&&n(k-C)<Do&&n(X-U)<Do?Yq(G):(L=v-D,c=k-C,M=X-U,u=1/d(L*L+c*c+M*M),L*=u,c*=u,M*=u,q=z*M-w*c,l=w*L-$*M,o=$*c-z*L,u=d(q*q+l*l+o*o),u?(u=1/u,q*=u,l*=u,o*=u):(q=0,l=0,o=0),J=c*o-M*l,E=M*q-L*o,W=L*l-c*q,u=d(J*J+E*E+W*W),u?(u=1/u,J*=u,E*=u,W*=u):(J=0,E=0,W=0),G[0]=q,G[1]=J,G[2]=L,G[3]=0,G[4]=l,G[5]=E,G[6]=c,G[7]=0,G[8]=o,G[9]=W,G[10]=M,G[11]=0,G[12]=-(q*v+l*k+o*X),G[13]=-(J*v+E*k+W*X),G[14]=-(L*v+c*k+M*X),G[15]=1,G)},Eo=function(y,o,U,A,Q){var l=1/X(o/2),j=1/(A-Q);return y[0]=l/U,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=l,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=(Q+A)*j,y[11]=-1,y[12]=0,y[13]=0,y[14]=2*Q*A*j,y[15]=0,y},Mg=function(X,e,R,m,S,J,w){var C=1/(e-R),O=1/(m-S),B=1/(J-w);return X[0]=-2*C,X[1]=0,X[2]=0,X[3]=0,X[4]=0,X[5]=-2*O,X[6]=0,X[7]=0,X[8]=0,X[9]=0,X[10]=2*B,X[11]=0,X[12]=(e+R)*C,X[13]=(S+m)*O,X[14]=(w+J)*B,X[15]=1,X},up=function(R,e){return Km(e?e:dc(),R._eye,R._center,R._up)},Gd=function(I){var f=I.getAspect(),$=I._near,j=I._far,z=dc();if(I._ortho){var V=I._orthoWidth/2,A=V/f;Mg(z,-V,V,-A,A,$,j)}else Eo(z,I._fovy,f,$,j);return z},co=function(S,F){if(!S)return E;var H=0,x=1,N=2,w=[],r=0,n=S.length,J=n/3;if(F){for(;n>r;r++)w[r]=0;for(r=0;r<F.length;r+=3){var M=[],O=[],o=[];M[H]=S[3*F[r+1]+H]-S[3*F[r]+H],M[x]=S[3*F[r+1]+x]-S[3*F[r]+x],M[N]=S[3*F[r+1]+N]-S[3*F[r]+N],O[H]=S[3*F[r+2]+H]-S[3*F[r+1]+H],O[x]=S[3*F[r+2]+x]-S[3*F[r+1]+x],O[N]=S[3*F[r+2]+N]-S[3*F[r+1]+N],o[H]=M[x]*O[N]-M[N]*O[x],o[x]=M[N]*O[H]-M[H]*O[N],o[N]=M[H]*O[x]-M[x]*O[H];for(var c=0;3>c;c++)w[3*F[r+c]+H]+=o[H],w[3*F[r+c]+x]+=o[x],w[3*F[r+c]+N]+=o[N]}}else for(r=0;J>r;r+=3){var M=[],O=[],o=[];M[H]=S[3*(r+1)+H]-S[3*r+H],M[x]=S[3*(r+1)+x]-S[3*r+x],M[N]=S[3*(r+1)+N]-S[3*r+N],O[H]=S[3*(r+2)+H]-S[3*(r+1)+H],O[x]=S[3*(r+2)+x]-S[3*(r+1)+x],O[N]=S[3*(r+2)+N]-S[3*(r+1)+N],o[H]=M[x]*O[N]-M[N]*O[x],o[x]=M[N]*O[H]-M[H]*O[N],o[N]=M[H]*O[x]-M[x]*O[H];for(var c=0;3>c;c++)w[3*(r+c)+H]=o[H],w[3*(r+c)+x]=o[x],w[3*(r+c)+N]=o[N]}for(r=0;n>r;r+=3){var z=[];z[H]=w[r+H],z[x]=w[r+x],z[N]=w[r+N];var Q=d(z[H]*z[H]+z[x]*z[x]+z[N]*z[N]);0===Q&&(Q=Do),z[H]=z[H]/Q,z[x]=z[x]/Q,z[N]=z[N]/Q,w[r+H]=z[H],w[r+x]=z[x],w[r+N]=z[N]}return new Mm(w)},ak=function(e,O,z){if(z||(z=e.createTexture()),O){var S=e.TEXTURE_2D,R=e.LINEAR,r=e.REPEAT,A=e.CLAMP_TO_EDGE,N=e.TEXTURE_MIN_FILTER;Ml(e,z),e.texImage2D(S,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,O),yf(e,e.TEXTURE_MAG_FILTER,R),Sk(O.width)&&Sk(O.height)?(yf(e,e.TEXTURE_WRAP_S,r),yf(e,e.TEXTURE_WRAP_T,r),yf(e,N,e.LINEAR_MIPMAP_LINEAR),e.generateMipmap(S)):(yf(e,e.TEXTURE_WRAP_S,A),yf(e,e.TEXTURE_WRAP_T,A),yf(e,N,R)),Ml(e,E)}return z},Lp=function(A){A._26I&&A._prg&&(A._26I.deleteProgram(A._prg),A._prg=E)},kr=function(l,w,N,Y){var P=l.createShader(N);return l.shaderSource(P,Y),l.compileShader(P),l.attachShader(w,P),P},fe=function(q){return q.createBuffer()},Ml=function(F,z){F.bindTexture(F.TEXTURE_2D,z)},Om=function(z,T){z.bindFramebuffer(z.FRAMEBUFFER,T)},yf=function(T,_,y){T.texParameteri(T.TEXTURE_2D,_,y)},vs=function(X,x){if(x){var x=Qj(x);X.clearColor(x[0],x[1],x[2],x[3])}},Dn=function(j,W){Ah(j,W.uFix,!0),Dd(j,W.aNormal)},Xm=function(h,T){Ah(h,T.uFix,!1),iq(h,T.aNormal)},eg=function(J,S,L,f,X,u,I,l){J._picking||(L?(Ah(J,S.uBlend,!0),Ah(J,S.uBlendColor,L)):Ah(J,S.uBlend,!1),Ah(J,S.uLight,f==E?!0:f),fr(X)&&1!==X&&Ah(J,S.uPartOpacity,X),Ah(J,S.uReverseFlip,u==E?!1:u),Ah(J,S.uFixPickReverseColor,I||Je)),l?J.enable(J.CULL_FACE):J.disable(J.CULL_FACE)},Tb=function(b,g){b._picking||Ah(b,g.uPartOpacity,1)},Ej=function($,z,M,h,F,i,N,Y){if(M){Ah($,z.uTexture,!0),Ah($,z.uDiscardSelectable,_o(h)?h:!0),iq($,z.aUv),ts($,F,i,z.aUv,2),$.activeTexture($.TEXTURE0),Ml($,M),$.uniform1i(z.uSampler,0);var j=[0,0,1,1];N&&(j[0]=N[0],j[1]=N[1]),Y&&(j[2]=Y[0],j[3]=Y[1]),Ah($,z.uOffsetScale,j)}},Ci=function(L,t,J){J&&(Ml(L,E),Dd(L,t.aUv),Ah(L,t.uTexture,!1))},Tg=function(H,T,c,d,A,G){c&&!_&&H.lineWidth(c),d&&!H._picking&&Ah(H,T.uFixPickReverseColor,d),A&&ts(H,A,G,T.aPosition)},Po=function(X,S,t,y){Sp&&(y=X[Sp]),X.drawArrays(y==E?X.TRIANGLES:y,S,t)},Gm=function(h,p,s,u){Sp&&(u=h[Sp]),h.drawElements(u==E?h.TRIANGLES:u,s,h.UNSIGNED_SHORT,p==E?0:2*p)},ts=function(B,e,C,F,x){var y=B.ARRAY_BUFFER;B.bindBuffer(y,e),C&&B.bufferData(y,C,B.STATIC_DRAW),F!=E&&B.vertexAttribPointer(F,x?x:3,B.FLOAT,!1,0,0)},jo=function(y,p,T){var x=y.ELEMENT_ARRAY_BUFFER;y.bindBuffer(x,p),T&&y.bufferData(x,T,y.STATIC_DRAW)},Ah=function(x,s,d){if(d!=E&&s!=E){d=Qj(d);var M=d.length;3===M?x.uniform3fv(s,d):4===M?x.uniform4fv(s,d):16===M?x.uniformMatrix4fv(s,!1,d):_o(d)?x.uniform1i(s,d?1:0):2===M?x.uniform2fv(s,d):x.uniform1f(s,d)}},iq=function(X,z){z!=E&&z>=0&&X.enableVertexAttribArray(z)},Dd=function(X,B){B!=E&&B>=0&&X.disableVertexAttribArray(B)},fj=function(X,E){var j=X.getGL(),A=X._prg;X._7O=X._8O.pop(),E&&(Ah(j,A.uMVMatrix,X._7O),X._6O=E,Ah(j,A.uNMatrix,E))},Sj=function(k,N){return N||(N=dc()),qc(N,k),pm(N),qn(N),N},db=function(z,M){var j=z.getGL(),A=z._prg,Z=z._7O;M&&(z._8O.push(Ke(Z)),ej(Z,Z,M)),Ah(j,A.uMVMatrix,Z),Ah(j,A.uNMatrix,Sj(Z,z._6O))},gk=function(F,X,g,u,D,H){if(g){if(u){var G=g.value++,N=[(255&G>>24)/255,(255&G>>16)/255,(255&G>>8)/255,(255&G)/255];g[G]={data:D,part:H}}else N=_l;return Ah(F,X.uFixPickReverseColor,N),N}},eo=function(){var r={center:function(R,H,$,K,o){var c=H[1]/2,O={x:-H[0]/2,y:c,width:H[0],height:H[1]},t=el(R,O,$);return[t.x+K,2*c-t.y-o,sm()]},front:function(O,y,b,L,l){var f=y[1]/2,x={x:-y[0]/2,y:f,width:y[0],height:y[1]},Z=el(O,x,b);return[Z.x+L,2*f-Z.y-l,y[2]/2+sm()]},back:function(q,K,$,B,Q){var c=K[0]/2,W=K[1]/2,J={x:c,y:W,width:K[0],height:K[1]},d=el(q,J,$);return[2*c-d.x-B,2*W-d.y-Q,-K[2]/2-sm()]},left:function(M,n,A,m,T){var z=n[1]/2,j={x:-n[2]/2,y:z,width:n[2],height:n[1]},D=el(M,j,A);return[-n[0]/2-sm(),2*z-D.y-T,D.x+m]},right:function(P,K,O,A,I){var Z=K[2]/2,n=K[1]/2,C={x:Z,y:n,width:K[2],height:K[1]},F=el(P,C,O);return[K[0]/2+sm(),2*n-F.y-I,2*Z-F.x-A]},top:function(t,J,N,X,S){var v={x:-J[0]/2,y:-J[2]/2,width:J[0],height:J[2]},G=el(t,v,N);return[G.x+X,J[1]/2+sm(),G.y+S]},bottom:function(e,L,O,s,M){var b=L[2]/2,S={x:-L[0]/2,y:b,width:L[0],height:L[2]},A=el(e,S,O);return[A.x+s,-L[1]/2-sm(),2*b-A.y-M]}};return function(z,B,H,Y,p,V){return r[Y](z,B,H,p||0,V||0)}}(),Jf=function(C,m,O,A,x,Z,p,L,l,R){if(x&&(m[0]+=x[0],m[1]+=x[1],m[2]+=x[2]),vi(C,O),L){var v=dc();if(mr(v,l,R),Zo(m,v),vi(C,m),C.auto=L,C.pos=Zo([0,0,0],C),Z){var c=C.mat2=dc();mr(c,Z,p)}}else mr(C,l,R),vi(C,m),A===Bg?zi(C,-F):A===Bk?zi(C,F):A===wi?Sb(C,-F):A===_g?Sb(C,F):A===rj&&zi(C,r),mr(C,Z,p);return C},sh=function(V,G){var l=G.auto,E=G.mat2,X=V.gv;if(l){var C=vh(V.gv.getEye(),G.pos),D=dc();zi(D,r/2+p(-C[2],C[0])),"y"!==l&&Sb(D,-p(C[1],d(C[2]*C[2]+C[0]*C[0]))),E&&ej(D,D,E),D=ej(dc(),G,D),db(X,D)}else db(X,G)},Ki=function(I,W,X,e,C){var v=I.s,V=I.gv,O=V.getGL(),d=V._prg,G=V._buffer,M=V._1O;ak(O,uf,M),sh(I,X),eg(O,d,v(W+".blend"),v(W+".light"),v(W+".opacity"),v(W+".reverse.flip"),v(W+".reverse.color"),v(W+".reverse.cull")),Ej(O,d,M,C,G.uv,yl),ts(O,G.vs,e,d.aPosition),ts(O,G.ns,_r,d.aNormal),jo(O,G.is,rn),Gm(O,0,rn.length),Ci(O,d,M),Tb(O,d),fj(V)},Kf=function(W,F,m){var x=W.gv,H=W.data,y=W[F]={blend:x.getBodyColor(H)||x.getFaceBlend(H,F),light:x.getFaceLight(H,F),color:x.getFaceColor(H,F),opacity:x.getFaceOpacity(H,F),transparent:x.getFaceTransparent(H,F),reverseFlip:x.getFaceReverseFlip(H,F),reverseColor:x.getFaceReverseColor(H,F),reverseCull:x.getFaceReverseCull(H,F),texture:x.getFaceImage(H,F),discardSelectable:x.getFaceDiscardSelectable(H,F)};if("csg"!==F){y.uv=x.getFaceUv(H,F)||m&&m[F+"Uv"],y.uvScale=x.getFaceUvScale(H,F)||m&&m[F+"UvScale"],y.uvOffset=x.getFaceUvOffset(H,F)||m&&m[F+"UvOffset"];var R=x.getFaceMat(H,F);R&&(y.mat=Sc(H,R))}return y},se=function(L,e,q,F,K){if(F){if(!K(F.transparent))return;var p=L.data,z=L.gv,s=z._buffer,C=z.getTexture(F.texture,p);Ej(e,q,C,F.discardSelectable,s.uv,F.tuv,F.uvOffset,F.uvScale),eg(e,q,F.blend,F.light,F.opacity,F.reverseFlip,F.reverseColor,F.reverseCull),Ah(e,q.uDiffuse,F.color),ts(e,s.vs,F.vs,q.aPosition),ts(e,s.ns,F.ns,q.aNormal),Po(e,0,F.vs.length/3),Tb(e,q),Ci(e,q,C)}},Hi=function(P,w,V,U,E,s){var k,v,A,l,Q,n,J,X,p,D,Z,H=[U-w,E-V],T=P?P.length:0;for(A=0;T>A;A++){for(l=2,k=P[A],Q=k[0],n=k[1];l+1<k.length;){if(J=k[l],X=k[l+1],v=Xq(w,V,U,E,Q,n,J,X,!0)){p=[J-Q,X-n],D=Nq(p),p[0]/=D,p[1]/=D,D=oj(H,p),D=D>0?s:-s,Z=[p[0]*D,p[1]*D];break}Q=J,n=X,l+=2}if(Z)break}if(Z)for(U=w+Z[0],E=V+Z[1],A=0;T>A;A++)for(l=2,k=P[A],Q=k[0],n=k[1];l+1<k.length;){if(J=k[l],X=k[l+1],v=Xq(w,V,U,E,Q,n,J,X,!0))return[0,0];Q=J,n=X,l+=2}return Z?Z:[U-w,E-V]},Jb=O.graph3d={},oh=function(H,U,i){fo(Z+".graph3d."+H,U,i)},Ze="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",ok="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";Jh(m,{setBatchInfo:function(Z,t){wj[Z]=t},getBatchInfo:function(Z){return wj[Z]}},!0);var Ld=[1,1,1],qg=[1,0,0,0,0,1,0,1,1,1,1,0],Ol=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],El=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],gs=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],tb=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],xg=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],vm=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],ag=function(v,z){Mo(v,z),Zf(v,z,"_wireframeModelMap","_wireframeIndexMap"),Zf(v,z,"_polylineModelMap","_polylineIndexMap")},Mo=function(o,O){if(O){var V,a,B=O._id,P=o._33O,q=o._34O,$=q[B];if($){a=$.batch,V=P[a];var p=$.begin,f=$.size,v=3*p,Y=3*f,n=4*p,E=4*f,I=V.vs,r=V.uv,F=V.cs,G=V.bs,S=V.rs,z=V.ds,W=$.index;if(V.invalidate=!0,delete q[B],z.splice(W,1),ye(z))delete P[a];else{for(;W<z.length;W++)$=q[z[W]._id],$.index--,$.begin-=f;I.splice(v,Y),V.ns.splice(v,Y),V.ps.splice(n,E),r&&r.splice(2*p,2*f),F&&F.splice(n,E),G&&G.splice(v,Y),S&&S.splice(p,f)}}}else o._34O={},o._33O={}},Zf=function(y,h,D,m){if(h){var C,O,c=h._id,W=y[D],R=y[m],w=R[c];if(w){O=w.batch,C=W[O];var g=w.begin,z=w.size,Z=3*g,t=3*z,v=4*g,L=4*z,N=C.ds,M=w.index;if(C.invalidate=!0,delete R[c],N.splice(M,1),ye(N))delete W[O];else{for(;M<N.length;M++)w=R[N[M]._id],w.index--,w.begin-=z;C.vs.splice(Z,t),C.cs.splice(v,L),C.ps.splice(v,L),C.ls&&C.ls.splice(g,z)}}}else y[D]={},y[m]={}},Qm=function(O,v,A,Y){if(!Y)return E;var w=v[Y];if(!w){var D=wj[Y]||qi,d=D.image?[]:E;w=v[Y]={vs:[],ns:[],uv:d,cs:d?E:D.color?E:[],bs:D.blend?[]:E,ps:[],rs:D.brightness?[]:E,ds:[]}}return w.invalidate=!0,O[A._id]={index:w.ds.length,begin:w.vs.length/3,batch:Y},w.ds.push(A),w},zm=function(k,q){return q!=E&&1!==q?[k[0]*q,k[1]*q,k[2]*q,k[3]]:k},Ue=function(V,j,q){var S=V.getBrightness(j),T=Qj(q.color||"white"),E=T[3]<1,a=Math.ceil(q.width)||1,L=(E?"T":"O")+a,I=V._wireframeIndexMap,e=V._wireframeModelMap,B=e[L];B||(B=e[L]={vs:[],cs:[],ps:[],ds:[],T:E,W:a}),B.invalidate=!0;var P=B.vs,c=B.cs,A=B.ds,_=I[j._id]={index:A.length,begin:P.length/3,batch:L};A.push(j),Al(P,Sc(j,q.mat),q.short?Ve:ef);var K=_.size=P.length/3-_.begin;og(c,zm(T,S),K)},Zi=function(c,C,n,N,t,F,w,T,m){var U=c.getBrightness(C);U==E&&(U=1);var A=zm(Qj(N),U),r=A[3]<1;F=Math.ceil(F)||1;var Y=(r?"T":"O")+F;if(w){var R=w[0],_=(w[1]||R)+R;Y+="-"+R+"-"+_,m&&(Y+="-"+Ur(m)+"-"+U,m=zm(Qj(m),U))}var a=c._polylineIndexMap,v=c._polylineModelMap,x=v[Y];x||(x=v[Y]={vs:[],cs:[],ps:[],ds:[],ls:w?[]:E,T:r,W:F},w&&(x.D=R,x.G=_,x.A=m)),x.invalidate=!0;var V,i=x.vs,G=x.cs,z=x.ds,q=x.ls,M=a[C._id]={index:z.length,begin:i.length/3,batch:Y};z.push(C),_e(i,n);var $,y=M.size=i.length/3-M.begin,g=n.length,e=0,H=[];if(w||t)for(V=0;g>V;V+=6)$=Nq([n[V],n[V+1],n[V+2]],[n[V+3],n[V+4],n[V+5]]),H.push($),e+=$;if(e&&t){var O,j=zm(Qj(t),U),L=[j[0]-A[0],j[1]-A[1],j[2]-A[2],j[3]-A[3]],D=0;for(V=0;g>V;V+=6)O=D/e,og(G,[A[0]+L[0]*O,A[1]+L[1]*O,A[2]+L[2]*O,A[3]+L[3]*O],1),D+=H[V/6],O=D/e,og(G,[A[0]+L[0]*O,A[1]+L[1]*O,A[2]+L[2]*O,A[3]+L[3]*O],1)}else og(G,A,y);if(w)for(D=T||0,V=0;g>V;V+=6)q.push(D),D+=H[V/6],q.push(D)},Wp=function(w,k,D){if(k)for(var d=4*k.begin,e=D[k.batch].ps,S=0;S<k.size;S++)e[d++]=w[0],e[d++]=w[1],e[d++]=w[2],e[d++]=w[3]},_f=function(h,j){var t=j+["32"],A=h[j],I=h[t];A?I&&I.length===A.length?I.set(A):h[t]=new Mm(A):delete h[t]},vj=function(C,r,A,e,k,n,l,R,T){if(Pn(A))A.forEach(function(p){vj(C,r,p,e,k,n,l,R,T)});else if(lh(A))vj(C,r,ee(e,A),e,k,n,l,R,T);else if(ui(A)){var Z,U=Fg(A.mat,r,C),P=Fg(A.s3,r,C),D=Fg(A.t3,r,C),G=Fg(A.r3,r,C);if((P||G||D||U)&&(Z=ie(U,P,G,Fg(A.rotationMode,r,C),D),n.push(Z)),A.shape3d)vj(C,r,A.shape3d,e,k,n,l,R,A);else{T=T||qi;var H=n[0],O=n.length,i=e("shape3d.color",A.color,T.color);if(k||(k=e("shape3d.blend",A.blend,T.blend)),O>1){H=Ke(H);for(var B=1;O>B;B++)ej(H,H,n[B])}A.vs&&e(fb,A.visible,T.visible)&&ci(H,l,R,A.vs,A.uv,A.is,k,i),A.top_vs&&e(hn,A.topVisible,T.topVisible)&&ci(H,l,R,A.top_vs,A.top_uv,A.top_is,k,e("shape3d.top.color",A.topColor,T.topColor)||i),A.bottom_vs&&e(yj,A.bottomVisible,T.bottomVisible)&&ci(H,l,R,A.bottom_vs,A.bottom_uv,A.bottom_is,k,e("shape3d.bottom.color",A.bottomColor,T.bottomColor)||i),A.from_vs&&e(Dq,A.fromVisible,T.fromVisible)&&ci(H,l,R,A.from_vs,A.from_uv,A.from_is,k,e("shape3d.from.color",A.fromColor,T.fromColor)||i),A.to_vs&&e(uh,A.toVisible,T.toVisible)&&ci(H,l,R,A.to_vs,A.to_uv,A.to_is,k,e("shape3d.to.color",A.toColor,T.toColor)||i)}Z&&n.pop()}},ci=function(e,g,l,O,y,f,c,B){var m,L=g.cs,t=g.uv,C=g.bs;if(f){m=f.length;for(var J=0;m>J;J++){var K=f[J];Al(l,e,[O[3*K],O[3*K+1],O[3*K+2]]),t&&_e(t,[y[2*K],y[2*K+1]])}}else m=O.length/3,Al(l,e,O),t&&_e(t,y);L&&og(L,B,m),C&&(c?mg(C,c,m):_e(C,Ld,m))},Le=function(x,E,X,d){var G=[];d?vj(x.gv,x.data,d,x.s,x.getBodyColor(),[E],X,G):(Pb(x,Bg,E,X,G),Pb(x,Bk,E,X,G),Pb(x,$,E,X,G),Pb(x,rj,E,X,G),Pb(x,wi,E,X,G),Pb(x,_g,E,X,G),Pb(x,"csg",E,X,G)),G.length&&(_e(X.vs,G),_e(X.ns,co(G)))},Pb=function(q,n,K,Z,p){var f=q[n];if(f){var i=f.tuv;if(i){var w,Q,M,u,H=f.uvScale,U=f.uvOffset;if(H)for(w=i.length,Q=H[0],M=H[1],u=0;w>u;u+=2)i[u]*=Q,i[u+1]*=M;if(U)for(w=i.length,Q=U[0],M=U[1],u=0;w>u;u+=2)i[u]+=Q,i[u+1]+=M}ci(K,Z,p,f.vs,i,E,f.blend,f.color)}},Fk=function(M,C,m,e,j,L,y,d){var D,w=m.cs,P=m.uv,p=m.bs;if(M.getFaceVisible(C,L)){var E=M.getFaceMat(C,L);if(E&&(j=Sc(C,E)),Al(y,j,d),w&&og(w,M.getFaceColor(C,L),6),P){var o=M.getFaceUv(C,L)||e[L+"Uv"],n=M.getFaceUvScale(C,L)||e[L+"UvScale"],b=M.getFaceUvOffset(C,L)||e[L+"UvOffset"];o=o?[o[6],o[7],o[0],o[1],o[2],o[3],o[2],o[3],o[4],o[5],o[6],o[7]]:qg;var A=o[0],O=o[1],Y=o[2],u=o[3],G=o[4],z=o[5],q=o[6],f=o[7],k=o[8],r=o[9],v=o[10],l=o[11];if(n){var N=n[0],J=n[1];A*=N,O*=J,Y*=N,u*=J,G*=N,z*=J,q*=N,f*=J,k*=N,r*=J,v*=N,l*=J}if(b){var Z=b[0],x=b[1];A+=Z,O+=x,Y+=Z,u+=x,G+=Z,z+=x,q+=Z,f+=x,k+=Z,r+=x,v+=Z,l+=x}P.push(A,O,Y,u,G,z,q,f,k,r,v,l)}p&&(D=M.getBodyColor(C)||M.getFaceBlend(C,L),D?mg(p,D,6):_e(p,Ld,6))}},Xe=function(X,w,F,C){var s=X.getGL(),p=X._prg,z=X._buffer;if(!Wb(w)){db(X),Dn(s,p);for(var x in w){var D=w[x];if(!(C&&!D.T||!C&&D.T)){D.invalidate?(D.invalidate=!1,_f(D,"vs"),_f(D,"cs"),_f(D,"ls"),_f(D,"ps")):F&&_f(D,"ps");var d=D.vs32,k=F?D.ps32:D.cs32;Tg(s,p,D.W,E,z.vs,d);var m=D.D,A=!X._dashDisabled&&m;A&&(Ah(s,p.uDash,!0),Ah(s,p.uDashDistance,m),Ah(s,p.uDashGapDistance,D.G),iq(s,p.aLineDistance),ts(s,z.lineDistance,D.ls32,p.aLineDistance,1),Ah(s,p.uDiffuse,D.A||tc));var e=!X._batchColorDisabled;e&&(Ah(s,p.uBatchColor,!0),iq(s,p.aBatchColor),ts(s,z.batchColor,k,p.aBatchColor,4)),Po(s,0,d.length/3,s.LINES),e&&(Ah(s,p.uBatchColor,!1),Dd(s,p.aBatchColor)),A&&(Ah(s,p.uDash,!1),Dd(s,p.aLineDistance))}}Xm(s,p)}},Ic=function(r,S,z){var A,T,b,u,c,w,L,M,y,d,D,e=r.getGL(),h=r._prg,v=r._buffer,K=r._33O;if(!Wb(K)){db(r);for(A in K)if(T=wj[A]||qi,!(z&&!T.transparent||!z&&T.transparent)&&(b=K[A],S||!T.transparentMask)){var q=z&&T.autoSort!==!1&&(r._33Q||b.invalidate);if(b.invalidate?(b.invalidate=!1,_f(b,"vs"),_f(b,"ns"),_f(b,"cs"),_f(b,"rs"),_f(b,"ps"),_f(b,"bs"),_f(b,"uv")):S&&_f(b,"ps"),c=b.vs32,w=S?b.ps32:b.cs32,y=b.uv32,L=b.bs32,M=b.rs32,D=c.length/3,q&&(b.is=yp(c,r.getEye())),D){u=T.light,d=r.getTexture(T.image),eg(e,h,E,T.light,T.opacity,T.reverseFlip,T.reverseColor,T.reverseCull),w?r._batchColorDisabled||(Ah(e,h.uBatchColor,!0),iq(e,h.aBatchColor),ts(e,v.batchColor,w,h.aBatchColor,4)):Ah(e,h.uDiffuse,T.color);var i=L&&!r._batchBlendDisabled;i&&(Ah(e,h.uBatchBlend,!0),iq(e,h.aBatchBlend),ts(e,v.batchBlend,L,h.aBatchBlend));var o=M&&!r._batchBrightnessDisabled;o&&(Ah(e,h.uBatchBrightness,!0),iq(e,h.aBatchBrightness),ts(e,v.batchBrightness,M,h.aBatchBrightness,1)),y&&Ej(e,h,d,T.discardSelectable,v.uv,y,T.uvOffset,T.uvScale),ts(e,v.vs,c,h.aPosition),ts(e,v.ns,b.ns32,h.aNormal),b.is?(jo(e,v.is,b.is),Gm(e,0,D)):Po(e,0,D),y&&Ci(e,h,d),w&&!r._batchColorDisabled&&(Ah(e,h.uBatchColor,!1),Dd(e,h.aBatchColor)),i&&(Ah(e,h.uBatchBlend,!1),Dd(e,h.aBatchBlend)),o&&(Ah(e,h.uBatchBrightness,!1),Dd(e,h.aBatchBrightness)),Tb(e,h)}}}},yp=function(S,F){for(var h=S.length/3,d=new Array(h),o=h/3,H=new Array(o),A=0;o>A;A++)H[A]=A;H.sort(function(V,$){var N=9*V,z=[(S[N]+S[N+3]+2*S[N+6])/4,(S[N+1]+S[N+4]+2*S[N+7])/4,(S[N+2]+S[N+5]+2*S[N+8])/4];N=9*$;var M=[(S[N]+S[N+3]+2*S[N+6])/4,(S[N+1]+S[N+4]+2*S[N+7])/4,(S[N+2]+S[N+5]+2*S[N+8])/4],C=Nq(F,z)-Nq(F,M);return C>0?-1:0>C?1:0});for(var A=0;o>A;A++){var T=3*A,i=3*H[A];d[T]=i,d[T+1]=i+1,d[T+2]=i+2}return new Aq(d)},yl=new Mm([0,0,0,1,1,1,1,0]),_r=new Mm([0,0,1,0,0,1,0,0,1,0,0,1]),rn=new Aq([0,1,2,2,3,0]),Ln=new Mm([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Oc=new Aq([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),oc=new Mm([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Ee=new Mm([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),tj=co(Ln,Oc),ef=(new Mm([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Aq([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Ve=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],bb=function(v,k,V,F,u,l){l=l||16,v=v||16,k=k||0,V=V||v;var c,p,$,m,y,I,A,b,Q=.5,h=[],X=[],j=G/v,B=r/l;for(c=0;l>c;c++)for(y=c+1,m=c*B,b=y*B,p=k;V>p;p++)I=p+1,$=p*j,A=I*j,h.push(Q*C(m)*z($),Q*z(m),-Q*C(m)*C($),Q*C(b)*z(A),Q*z(b),-Q*C(b)*C(A),Q*C(m)*z(A),Q*z(m),-Q*C(m)*C(A),Q*C(m)*z($),Q*z(m),-Q*C(m)*C($),Q*C(b)*z($),Q*z(b),-Q*C(b)*C($),Q*C(b)*z(A),Q*z(b),-Q*C(b)*C(A)),X.push(p/v,c/l,I/v,y/l,I/v,c/l,p/v,c/l,p/v,y/l,I/v,y/l);if(F)for($=k*j,c=0;l>c;c++)y=c+1,m=c*B,b=y*B,h.push(0,0,0,Q*C(b)*z($),Q*z(b),-Q*C(b)*C($),Q*C(m)*z($),Q*z(m),-Q*C(m)*C($)),X.push(0,.5,k/v,y/l,k/v,c/l);if(u)for($=V*j,c=0;l>c;c++)y=c+1,m=c*B,b=y*B,h.push(0,0,0,Q*C(m)*z($),Q*z(m),-Q*C(m)*C($),Q*C(b)*z($),Q*z(b),-Q*C(b)*C($)),X.push(1,.5,V/v,c/l,V/v,y/l);return{vs:h,uv:X}},mc=function(t,h,a){t=t||.17,h=h||12,a=a||18,0>t?t=0:t>.25&&(t=.25);var _,I,l,Z,R,U,e,c=.5,o=[],k=[],L=[],E=G/a,H=G/h,i=c-t;for(I=0;h>=I;I++)for(Z=-r+I*H,U=z(Z),R=C(Z),_=0;a>=_;_++)l=_*E,e=i+t*U,o.push(z(l)*e,R*t,-C(l)*e),k.push(_/a,1-I/h);for(I=0;h>I;I++){var f=I*(a+1),A=(I+1)*(a+1);for(_=0;a>_;_++)L.push(f+_,A+_+1,A+_,f+_,f+_+1,A+_+1)}return{vs:o,uv:k,is:L}},Md=function(M,V,t,E,L,s,m){m=m||12,M=M||18,V=V||0,t=t||M,s=s||.17,0>s?s=0:s>.25&&(s=.25);var Y,T,o,K,P,D,J,R,v,q,i=.5,l=[],g=[],j=G/M,c=G/m,N=i-s;for(o=0;m>o;o++)for(K=o+1,J=-r+o*c,R=-r+K*c,Y=V;t>Y;Y++)T=Y+1,P=Y*j,D=T*j,v=N+s*z(J),q=N+s*z(R),l.push(z(P)*v,C(J)*s,-C(P)*v,z(D)*v,C(J)*s,-C(D)*v,z(D)*q,C(R)*s,-C(D)*q,z(P)*v,C(J)*s,-C(P)*v,z(D)*q,C(R)*s,-C(D)*q,z(P)*q,C(R)*s,-C(P)*q),g.push(Y/M,1-o/m,T/M,1-o/m,T/M,1-K/m,Y/M,1-o/m,T/M,1-K/m,Y/M,1-K/m);
if(E){var S=[],W=[];for(o=0;m>o;o++)K=o+1,J=-r+o*c,R=-r+K*c,P=V*j,v=N+s*z(J),q=N+s*z(R),S.push(z(P)*v,C(J)*s,-C(P)*v,z(P)*q,C(R)*s,-C(P)*q,z(P)*N,0,-C(P)*N),W.push(.5+.5*z(J),.5-.5*C(J),.5+.5*z(R),.5-.5*C(R),.5,.5)}if(L){var k=[],b=[];for(o=0;m>o;o++)K=o+1,J=-r+o*c,R=-r+K*c,P=t*j,v=N+s*z(J),q=N+s*z(R),k.push(z(P)*v,C(J)*s,-C(P)*v,z(P)*N,0,-C(P)*N,z(P)*q,C(R)*s,-C(P)*q),b.push(.5-.5*z(J),.5-.5*C(J),.5,.5,.5-.5*z(R),.5-.5*C(R))}return{vs:l,uv:g,from_vs:S,from_uv:W,to_vs:k,to_uv:b}},qr=function(f,a){for(var L,N,w,X=.5,E=16,o=[],y=[],V=[],P=G/E,$=0;E>=$;$++)L=$*P,N=z(L)*X,w=C(L)*X,o.push(N,-X,w,N,X,w),y.push(1-$/E,1,1-$/E,0);for($=0;E>$;$++)V.push(2*$,2*$+1,2*$+3,2*$,2*$+3,2*$+2);if(a){var d=[],H=[],K=[];for(d.push(0,-X,0),H.push(.5,.5),$=0;E>=$;$++)L=$*P,N=z(L),w=C(L),d.push(N*X,-X,-w*X),H.push(.5+.5*N,.5+.5*w);for($=0;E>$;$++)K.push(0,$+2,$+1)}if(f){var l=[],I=[],D=[];for(l.push(0,X,0),I.push(.5,.5),$=0;E>=$;$++)L=$*P,N=z(L),w=C(L),l.push(N*X,X,-w*X),I.push(.5+.5*N,.5-.5*w);for($=0;E>$;$++)D.push(0,$+1,$+2)}return{vs:o,uv:y,is:V,bottom_vs:d,bottom_uv:H,bottom_is:K,top_vs:l,top_uv:I,top_is:D}},Df=function(n,F,M,y,e,D,r){n=n||12,F=F||0,M=M||n;for(var s,Q,b,T,t,l,L,B,K=.5,_=[],m=[],N=G/n,c=F;M>c;c++)s=c+1,Q=c*N,b=s*N,T=z(Q)*K,t=C(Q)*K,l=z(b)*K,L=C(b)*K,_.push(T,-K,-t,l,-K,-L,T,K,-t,l,-K,-L,l,K,-L,T,K,-t),m.push(c/n,1,s/n,1,c/n,0,s/n,1,s/n,0,c/n,0);if(r){var k=[],A=[];for(c=F;M>c;c++)Q=N*c,b=N*(c+1),T=z(Q),t=C(Q),l=z(b),L=C(b),k.push(T*K,-K,-t*K,0,-K,0,l*K,-K,-L*K),A.push(.5+.5*T,.5+.5*t,.5,.5,.5+.5*l,.5+.5*L)}if(D){var O=[],Z=[];for(c=F;M>c;c++)Q=N*c,b=N*(c+1),T=z(Q),t=C(Q),l=z(b),L=C(b),O.push(T*K,K,-t*K,l*K,K,-L*K,0,K,0),Z.push(.5+.5*T,.5-.5*t,.5+.5*l,.5-.5*L,.5,.5)}return y&&(Q=N*F,T=z(Q)*K,t=C(Q)*K,B=F/n,_.push(0,K,0,0,-K,0,T,-K,-t,T,-K,-t,T,K,-t,0,K,0),m.push(0,0,0,1,B,1,B,1,B,0,0,0)),e&&(Q=N*M,T=z(Q)*K,t=C(Q)*K,B=M/n,_.push(0,-K,0,0,K,0,T,K,-t,T,K,-t,T,-K,-t,0,-K,0),m.push(1,1,1,0,B,0,B,0,B,1,1,1)),{vs:_,uv:m,bottom_vs:k,bottom_uv:A,top_vs:O,top_uv:Z}},Oq=function(S,_,h,Z,i){_=_||18,h=h||0,Z=Z==E?G:Z,i=i==E?.5:i;for(var t,c,K,X,F,Y,l=[0,.5,.75,.875,.9375],b=[],P=[],W=[],u=Z/_,D=0;D<l.length;D++){var y=0===D%2?0:.5;for(t=0;_>=t;t++)c=(t+y)*u+h,K=1-l[D],b.push(z(c)*i*K,-i+2*l[D]*i,-C(c)*i*K),P.push((t+y)/_,K)}for(D=0;D<l.length-1;D++){var U=D*(_+1),n=(D+1)*(_+1);for(t=0;_>t;t++)W.push(U+t,n+t+1,n+t,U+t,U+t+1,n+t+1)}for(Y=b.length/3-(_+1),t=0;_>t;t++)b.push(0,i,0),P.push((t+.5)/_,0);for(t=0;_>t;t++)W.push(Y+t,Y+t+1,Y+(_+1)+t);if(S){var e=[],p=[],o=[];for(e.push(0,-i,0),p.push(.5,.5),t=0;_>=t;t++)c=t*u+h,X=z(c),F=C(c),e.push(X*i,-i,-F*i),p.push(.5+.5*X,.5+.5*F);for(t=0;_>t;t++)o.push(0,t+2,t+1)}return{vs:b,uv:P,is:W,bottom_vs:e,bottom_uv:p,bottom_is:o}},rc=function(k,l,d,m,s,L){k=k||16,l=l||0,d=d||k;for(var t=.5,r=[],y=[],N=G/k,j=l;d>j;j++){var g=j+1,Z=N*j,W=N*g;r.push(z(Z)*t,-t,-C(Z)*t,z(W)*t,-t,-C(W)*t,0,t,0),y.push(j/k,1,g/k,1,(j+g)/2/k,0)}if(L){var O=[],$=[];for(j=l;d>j;j++){Z=N*j,W=N*(j+1);var F=z(Z),_=C(Z),V=z(W),v=C(W);O.push(F*t,-t,-_*t,0,-t,0,V*t,-t,-v*t),$.push(.5+.5*F,.5+.5*_,.5,.5,.5+.5*V,.5+.5*v)}}return m&&(Z=N*l,r.push(0,t,0,0,-t,0,z(Z)*t,-t,-C(Z)*t),y.push(0,0,0,1,l/k,1)),s&&(Z=N*d,r.push(0,-t,0,0,t,0,z(Z)*t,-t,-C(Z)*t),y.push(1,1,1,0,d/k,1)),{vs:r,uv:y,bottom_vs:O,bottom_uv:$}},kl=function(k,U,X,B,u,t,n,p){for(var g=[],C=0;C<k.length-1;C+=2)g.push({x:k[C],y:k[C+1]});return Yr(g,U,X,B,u,t,n,p,!1)},Qc={roundRect:function(I,p){return kl([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],I,p,3)},star:function(N,z){return kl([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],N,z)},rect:function(x,s){return kl([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],x,s)},triangle:function(Z,L){return kl([0,-.5,.5,.5,-.5,.5],[1,2,2,5],Z,L)},rightTriangle:function(z,c){return kl([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],z,c)},parallelogram:function(m,o){return kl([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],m,o)},trapezoid:function(j,i){return kl([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],j,i)}},Qq={sphere:1,cylinder:1,cone:1,torus:1},fs={torus:1,sphere:1},Vo=Jh(Pc(Qc),{cylinder:1}),Jm=Jh(Pc(Qc),{cylinder:1,cone:1}),Wj=function(C,Q,d){var M,X=Fg(C.mat,d,Q),l=Fg(C.s3,d,Q),W=Fg(C.t3,d,Q),L=Fg(C.r3,d,Q);return(l||L||W||X)&&(M=Ke(Q._6O),db(Q,ie(X,l,L,Fg(C.rotationMode,d,Q),W))),M},Qp=function(P,e,B,H,Z,w,b){if(Pn(B))B.forEach(function(p){Qp(P,e,p,H,Z,w,b)});else if(lh(B))Qp(P,e,ee(H,B),H,Z,w,b);else if(ui(B))if(B.shape3d){var h=Wj(B,P,e);Qp(P,e,B.shape3d,H,Z,w,B),h&&fj(P,h)}else zr(P,e,B,H,Z,w,b)},zr=function(w,j,p,D,B,u,i){if(i=i||qi,!u||u(D("shape3d.transparent",p.transparent,i.transparent))){var b=Wj(p,w,j);sk(p);var f=w._26I,l=w._prg,r=w._buffer,t=D("shape3d.color",p.color,i.color);B||(B=D("shape3d.blend",p.blend,i.blend)),eg(f,l,B,D("shape3d.light",p.light,i.light),D("shape3d.opacity",p.opacity,i.opacity),D("shape3d.reverse.flip",p.reverseFlip,i.reverseFlip),D("shape3d.reverse.color",p.reverseColor,i.reverseColor),D("shape3d.reverse.cull",p.reverseCull,i.reverseCull)),p.vs&&D(fb,p.visible,i.visible)&&an(f,l,r,t,w.getTexture(D("shape3d.image",p.image,i.image),j),D("shape3d.discard.selectable",p.discardSelectable,i.discardSelectable),p.vs,p.uv,p.ns,p.is,D("shape3d.uv.offset",p.uvOffset,i.uvOffset),D("shape3d.uv.scale",p.uvScale,i.uvScale)),p.top_vs&&D(hn,p.topVisible,i.topVisible)&&an(f,l,r,D("shape3d.top.color",p.topColor,i.topColor)||t,w.getTexture(D("shape3d.top.image",p.topImage,i.topImage),j),D("shape3d.top.discard.selectable",p.topDiscardSelectable,i.topDiscardSelectable),p.top_vs,p.top_uv,p.top_ns,p.top_is,D("shape3d.top.uv.offset",p.topUvOffset,i.topUvOffset),D("shape3d.top.uv.scale",p.topUvScale,i.topUvScale)),p.bottom_vs&&D(yj,p.bottomVisible,i.bottomVisible)&&an(f,l,r,D("shape3d.bottom.color",p.bottomColor,i.bottomColor)||t,w.getTexture(D("shape3d.bottom.image",p.bottomImage,i.bottomImage),j),D("shape3d.bottom.discard.selectable",p.bottomDiscardSelectable,i.bottomDiscardSelectable),p.bottom_vs,p.bottom_uv,p.bottom_ns,p.bottom_is,D("shape3d.bottom.uv.offset",p.bottomUvOffset,i.bottomUvOffset),D("shape3d.bottom.uv.scale",p.bottomUvScale,i.bottomUvScale)),p.from_vs&&D(Dq,p.fromVisible,i.fromVisible)&&an(f,l,r,D("shape3d.from.color",p.fromColor,i.fromColor)||t,w.getTexture(D("shape3d.from.image",p.fromImage,i.fromImage),j),D("shape3d.from.discard.selectable",p.fromDiscardSelectable,i.fromDiscardSelectable),p.from_vs,p.from_uv,p.from_ns,p.from_is,D("shape3d.from.uv.offset",p.fromUvOffset,i.fromUvOffset),D("shape3d.from.uv.scale",p.fromUvScale,i.fromUvScale)),p.to_vs&&D(uh,p.toVisible,i.toVisible)&&an(f,l,r,D("shape3d.to.color",p.toColor,i.toColor)||t,w.getTexture(D("shape3d.to.image",p.toImage,i.toImage),j),D("shape3d.to.discard.selectable",p.toDiscardSelectable,i.toDiscardSelectable),p.to_vs,p.to_uv,p.to_ns,p.to_is,D("shape3d.to.uv.offset",p.toUvOffset,i.toUvOffset),D("shape3d.to.uv.scale",p.toUvScale,i.toUvScale)),Tb(f,l),b&&fj(w,b)}},an=function(y,l,_,U,k,X,s,m,J,A,d,z){s&&(Ah(y,l.uDiffuse,U),m&&Ej(y,l,k,X,_.uv,m,d,z),ts(y,_.vs,s,l.aPosition),ts(y,_.ns,J,l.aNormal),A?(jo(y,_.is,A),Gm(y,0,A.length)):Po(y,0,s.length/3),m&&Ci(y,l,k))},ee=function(h,i){if(i||(i=h(Jg)),!i)return E;if(ui(i))return i;var o=qf[i];if(o)return o;var H=i;if(Qq[i]){var R=h("shape3d.side"),J=h("shape3d.side.from"),B=h("shape3d.side.to"),I=h(Dq),A=h(uh);3>R?(R=0,J=0,B=0,I=!1,A=!1):((J==E||0>J)&&(J=0),(B==E||B>R)&&(B=R),0===J&&B===R&&(I=!1,A=!1)),H+="-"+R+"-"+J+"-"+B+"-"+I+"-"+A}if(Vo[i]){var N=h(hn);H+="-"+N}if(Jm[i]){var w=h(yj);H+="-"+w}if("torus"===i){var c=h("shape3d.torus.radius");0>c?c=0:c>.25&&(c=.25),H+="-"+c}if(fs[i]){var s=h(Qe);H+="-"+s}return o=Il[H],o||("box"===i?o=m.createBoxModel():Qc[i]?o=Qc[i](N,w):"sphere"===i?o=m.createSphereModel(R,J,B,I,A,s):i===Ul?o=m.createCylinderModel(R,J,B,I,A,N,w):"cone"===i?o=m.createConeModel(R,J,B,I,A,w):"torus"===i&&(o=m.createTorusModel(R,J,B,I,A,c,s)),Il[H]=o),o},sk=function(){var H=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],G=["is","top_is","bottom_is","from_is","to_is"];return l=Cm(Ze.substr(Ze.indexOf("^#")+2)),Hm(m[qm(qd+H[15]+"n"+H[16])]())&&Mj()?function(e){e&&!e._complete_&&(e._complete_=!0,e.vs&&ye(e.ns)&&(e.ns=co(e.vs,e.is)),e.top_vs&&ye(e.top_ns)&&(e.top_ns=co(e.top_vs,e.top_is)),e.bottom_vs&&ye(e.bottom_ns)&&(e.bottom_ns=co(e.bottom_vs,e.bottom_is)),e.from_vs&&ye(e.from_ns)&&(e.from_ns=co(e.from_vs,e.from_is)),e.to_vs&&ye(e.to_ns)&&(e.to_ns=co(e.to_vs,e.to_is)),H.forEach(function(y){var L=e[y];Pn(L)&&(e[y]=new Mm(L))}),G.forEach(function(H){var m=e[H];Pn(m)&&(e[H]=new Aq(m))}))}:void 0}(),tk=function(F,e){var j=F[e];Pn(j)&&(F[e]=new Mm(j))};Jh(vo,{_25Q:function(h){h._16O=function(n,S,F,Y,w,d,T,q,R){var H=this.info;if(H){var r,W,k,B,v,N,Z=dc();if(vn[S]?(r=H.p3,W=H.c1,k=H.c2):Dk[S]?(W=H.s1||H.c1,k=H.s2||H.c2):(W=H.t1||H.c1,k=H.t2||H.c2),r)N=eo(S,No,F,Y,q,R);else{var t=vh(k,W),L=Nq(W,k);B=[0,-p(t[2],t[0]),j(t[1]/L)],v="zyx",r=[(W[0]+k[0])/2,(W[1]+k[1])/2,(W[2]+k[2])/2],N=eo(S,[L,0,0],F,Y,q,R)}return Jf(Z,N,r,Y,w,d,T,n,B,v)}return ws},h._80o=function(R,U,e){var M=this,n=M.shapeModel;if(n){var o=M.gv;db(o),Qp(o,M.data,n,M.s,M.getBodyColor(),e)}},h.createLineModel=function(R,v,S,j,L){for(var U=this,u=U.s,Q=zf(R,v,u(Qe)),i=[],z=0;z<Q.length;z++){var T=Q[z],$=T.length;if($>1){var r=T[0];i.push(r.x,r.y,r.z);for(var g=1;$-1>g;g++)r=T[g],i.push(r.x,r.y,r.z),i.push(r.x,r.y,r.z);r=T[$-1],i.push(r.x,r.y,r.z)}}var W,f,q,x=u(j+".color"),P=u(L),h=0;return P&&(f=u(L+".color"),W=u(L+".pattern"),h=u(L+".offset"),q=x),Zi(U.gv,U.data,i,f||x,q?E:u(j+".gradient.color"),S,W||u(j+".pattern"),h,q),Q},h.createTubeModel=function(s,S,y,C){for(var L=this,b=L.s,u=b("shape3d.side")||Vg,T=b("shape3d.start.angle"),Y=b(hn)?b("shape3d.top.cap"):E,p=b(yj)?b("shape3d.bottom.cap"):E,n="flat"===Y,H="flat"===p,X=n&&(C?C.uv:b("shape3d.top.image")),z=H&&(C?C.uv:b("shape3d.bottom.image")),c=C?C.uv:b("shape3d.image"),a={vs:[],uv:c?[]:E,top_vs:n?[]:E,top_uv:X?[]:E,bottom_vs:H?[]:E,bottom_uv:z?[]:E},G=zf(s,S,b(Qe),y),$=0,j=G.length;j>$;$++)ad(a,G[$],b(lj),y,u,T,Y,p);if(C){var o=[];vj(L.gv,L.data,a,b,L.getBodyColor(),[],C,o),o.length&&(_e(C.vs,o),_e(C.ns,co(o)))}else L.shapeModel=a;return G},h.getCache=function(){var p=this.info;if(p){var d=p.list;if(d){var m=p.cache;return m||(m=p.cache=Rl(d)),m}}return E}}});var so=function(Y,c){for(var f,m=0,h=Y.length,D=0,E=h-1;E>=D;)if(m=q(D+(E-D)/2),f=Y[m].length-c,0>f)D=m+1;else{if(!(f>0)){E=m;break}E=m-1}m=E;var x=Y[m],g=x.point;return m===h-1||x.length===c||(g=(new Sn).subVectors(Y[m+1].point,g).normalize().multiplyScalar(c-x.length).add(g)),{point:g,tangent:x.tangent}},Rl=function(T){for(var f,W,j=[],M=0,O=0;O<T.length;O++){for(var L=T[O],B=0;B<L.length;B++){f=L[B],W&&(M+=W.distanceTo(f));var H=new Sn,q=L[B+1];q?H.subVectors(q,f):W?H.subVectors(f,W):H.x=1,H.normalize(),j.push({point:f,length:M,tangent:H}),W=f}W=null}return j},zf=function(n,q,B,g){B=B||kb;for(var M=[],k=0,Q=n.size();Q>k;k++){var _=n.get(k);M.push(new Sn(_.x,_.e||0,_.y))}ke(q)&&(q=q._as);for(var z,s,P,L,X,D=[],p=0,A=0,T=q?q.length:Q;T>A;A++)if(X=q?q[A]:0===A?1:2,1===X)D.push(P=[]),P.push(M[p++]);else if(2===X||5===X)if(L=2===X?M[p++]:P[0],g){var I=q?q[A+1]:T>A+1?2:E;if(2===I||5===I){var H=P[P.length-1],v=2===I?M[p]:P[0],h=(new Sn).subVectors(H,L),O=(new Sn).subVectors(v,L),f=h.length(),J=O.length();if(g>f/2&&g>J/2)P.push(L);else for(h.multiplyScalar(S(g,f/2)/f).add(L),O.multiplyScalar(S(g,J/2)/J).add(L),z=new Gi(h,L,O).getPoints(B),s=0;B>=s;s++)P.push(z[s])}else P.push(L)}else P.push(L);else if(3===X)for(z=new Gi(P[P.length-1],M[p++],M[p++]).getPoints(B),s=1;B>=s;s++)P.push(z[s]);else if(4===X)for(z=new lb(P[P.length-1],M[p++],M[p++],M[p++]).getPoints(B),s=1;B>=s;s++)P.push(z[s]);return D},mb=function(p){for(var V,O,m=new Sn,u=[],x=[],_=[],Y=0,D=p.length;D>Y;Y++)V=p[Y],O=p[Y+1],O?m.subVectors(O,V):m.subVectors(V,p[Y-1]),u.push(m.normalize().clone());var b,i,J,a,E=new Sn,K=new Sn,Q=new Bd,I=1e-4,X=Number.MAX_VALUE,d=u[0],r=x[0]=new Sn,j=_[0]=new Sn;for(i=n(d.x),J=n(d.y),a=n(d.z),X>=i&&(X=i,E.set(1,0,0)),X>=J&&(X=J,E.set(0,1,0)),X>=a&&E.set(0,0,1),K.crossVectors(d,E).normalize(),r.crossVectors(d,K),j.crossVectors(d,r),Y=1;D>Y;Y++)x[Y]=x[Y-1].clone(),_[Y]=_[Y-1].clone(),K.crossVectors(u[Y-1],u[Y]),K.length()>I&&(K.normalize(),b=H(vg(u[Y-1].dot(u[Y]),-1,1)),x[Y].applyMatrix4(Q.makeRotationAxis(K,b))),_[Y].crossVectors(u[Y],x[Y]);return{B:_,T:u,N:x}},ad=function(){var g=function(Z){for(var N=1;N<arguments.length;N++){var Y=arguments[N];Z.push(Y.x,Y.y,Y.z)}},M=function(M){for(var n=1;n<arguments.length;n++){var w=arguments[n].uv;M.push(w[0],w[1])}},$=function(A,F,b,L,t){var D=-L*z(t),J=L*C(t);return new Sn(A.x+D*b.x+J*F.x,A.y+D*b.y+J*F.y,A.z+D*b.z+J*F.z)},u=function(y,v,Z,B,P,M,Q){for(var n=[],h=G/P,i=0;P>=i;i++){var A=$(y,v,Z,B,i*h+M);n.push(A),Q!=E&&(A.uv=[Q,i/P])}return n},S=function(x,i,e,A,w,V,v,h){var p=i?x.top_vs:x.bottom_vs;if(p)for(var l=i?x.top_uv:x.bottom_uv,f=G/v,c=0;v>c;c++){var U,N;i?(U=c*f+h,N=(c+1)*f+h):(N=c*f+h,U=(c+1)*f+h),g(p,$(e,A,w,V,U),$(e,A,w,V,N),e),l&&l.push(.5-.5*z(U),.5-.5*C(U),.5-.5*z(N),.5-.5*C(N),.5,.5)}};return function(J,z,L,s,H,a,i,F){var f=z.length;if(f>1){var l,A,j,U,D,K,n,I=mb(z),k=I.T,m=I.N,T=I.B;"flat"===i&&S(J,!0,z[0],T[0],m[0],s,H,a),"flat"===F&&S(J,!1,z[f-1],T[f-1],m[f-1],s,H,a);var Q,x,X=[],h=N(H/2),t="round"===i,R="round"===F,C=z[0],Z=k[0],e=T[0],G=m[0],q=z[f-1],Y=k[f-1],$=T[f-1],V=m[f-1];if(t){for(j=1;h>=j;j++)m.splice(0,0,G),T.splice(0,0,e),k.splice(0,0,Z),x=-j/h*s,z.splice(0,0,Z.clone().multiplyScalar(x).add(C)),X[h-j]=d(s*s-x*x);f+=h}if(R){for(j=1;h>=j;j++)m.push(V),T.push($),k.push(Y),x=j/h*s,z.push(Y.clone().multiplyScalar(x).add(q)),X[z.length-1]=d(s*s-x*x);f+=h}if(J.uv){var p=0,y=0,B=[];for(L&&(p=L),D=z[0],B[0]=0,j=1;f>j;j++)U=z[j],B[j]=D.distanceTo(U),D=U,L||(p+=B[j]);for(Q=[],j=0;f>j;j++)y+=B[j],Q[j]=p?y/p:0}for(j=0;f>j;j++){if(U=z[j],K=T[j],n=m[j],l=u(U,K,n,X[j]===o?s:X[j],H,a,Q?Q[j]:E),A)for(var P=0;H>P;P++){var r=A[P],O=A[P+1]||A[0],_=l[P],W=l[P+1]||l[0];g(J.vs,O,r,_,_,W,O),J.uv&&M(J.uv,O,r,_,_,W,O)}A=l}}}}();Jh(m,{getLineLength:function(O){return O[O.length-1].length},getLineOffset:function(M,w){return so(M,w)},getLineCacheInfo:function(R,p,J,u){return Rl(zf(R,p,J,u))}});var Oh=O.Light=function(){zo(Oh,this),this.s(jr,s[jr]),this.s(Jg,"sphere"),this.s3(20,20,20)};Pi("Light",um,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(L,Y,k){Oh.superClass.onStyleChanged.apply(this,arguments),L===jr&&this.s("shape3d.color",k)}});var jh=Jb.Graph3dView=function(S,f){var K=this;K._attributes=f||m.graph3dViewAttributes,K._25I={},K._view=Vd(1);var O=K._canvas=Fi(K._view);O.addEventListener("webglcontextlost",function(e){e.preventDefault(),Lp(K),K._26I=E,K._1o.texture=E,K._35O=!0},!1),O.addEventListener("webglcontextrestored",function(){K._35O=!1,K.iv()},!1),K._34O={},K._33O={},K._wireframeIndexMap={},K._wireframeModelMap={},K._polylineIndexMap={},K._polylineIndexMap={},K._8O=[],K._7O=dc(),K._6O=dc(),K._1o=new de(K),K._30O=new Ph(K),K._31O=new pb(K),K._32O=new Vc(K),K._33Q=!0,K._eye=Pc(m.graph3dViewEye),K._center=Pc(m.graph3dViewCenter),K._up=Pc(m.graph3dViewUp),K._lightChanged=!1,K._59O=[],K._spots=[],K._dirs=[],K.dm(S?S:new ib),K.setInteractors([new yq(K)])},le={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};oh("Graph3dView",Q,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",Gb,Gp,"firstPersonMode",Oj,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",mi,ss,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:o,_boundaries:o,_moveStep:m.graph3dViewMoveStep,_rotateStep:m.graph3dViewRotateStep,_pannable:m.graph3dViewPannable,_rotatable:m.graph3dViewRotatable,_walkable:m.graph3dViewWalkable,_resettable:m.graph3dViewResettable,_zoomable:m.graph3dViewZoomable,_firstPersonMode:m.graph3dViewFirstPersonMode,_mouseRoamable:m.graph3dViewMouseRoamable,_gridVisible:m.graph3dViewGridVisible,_gridSize:m.graph3dViewGridSize,_gridGap:m.graph3dViewGridGap,_gridColor:m.graph3dViewGridColor,_originAxisVisible:m.graph3dViewOriginAxisVisible,_centerAxisVisible:m.graph3dViewCenterAxisVisible,_axisXColor:m.graph3dViewAxisXColor,_axisYColor:m.graph3dViewAxisYColor,_axisZColor:m.graph3dViewAxisZColor,_ortho:m.graph3dViewOrtho,_orthoWidth:m.graph3dViewOrthoWidth,_fovy:m.graph3dViewFovy,_near:m.graph3dViewNear,_far:m.graph3dViewFar,_headlightColor:m.graph3dViewHeadlightColor,_headlightIntensity:m.graph3dViewHeadlightIntensity,_headlightRange:m.graph3dViewHeadlightRange,_headlightDisabled:m.graph3dViewHeadlightDisabled,_rectSelectable:m.graph3dViewRectSelectable,_rectSelectBackground:m.graph3dViewRectSelectBackground,_editSizeColor:m.graph3dViewEditSizeColor,_autoMakeVisible:Nn,_fogDisabled:m.graph3dViewFogDisabled,_fogColor:m.graph3dViewFogColor,_fogNear:m.graph3dViewFogNear,_fogFar:m.graph3dViewFogFar,_dashDisabled:m.graph3dViewDashDisabled,_batchColorDisabled:m.graph3dViewBatchColorDisabled,_batchBlendDisabled:m.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:m.graph3dViewBatchBrightnessDisabled,setEye:function(G,A,V){1===arguments.length&&(A=G[1],V=G[2],G=G[0]);var w=this._eye;w[0]=G,w[1]=A,w[2]=V,this.fp(mi,E,w)},setCenter:function(J,i,P){1===arguments.length&&(i=J[1],P=J[2],J=J[0]);var S=this._center;S[0]=J,S[1]=i,S[2]=P,this.fp(ss,E,S)},setUp:function(R,X,G){1===arguments.length&&(X=R[1],G=R[2],R=R[0]);var u=this._up;u[0]=R,u[1]=X,u[2]=G,this.fp("up",E,u)},isTransparentMask:function(x){return x.s("transparent.mask")},getAspect:function(){var I=this,M=I._aspect;return M?M:I.getWidth()/I.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(Q){var c=this,z=c._dataModel,Z=c._3o;z!==Q&&(z&&(z.umm(c.handleDataModelChange,c),z.umd(c.handleDataPropertyChange,c),Z||z.sm().ums(c._16o,c)),c._dataModel=Q,Q.mm(c.handleDataModelChange,c),Q.md(c.handleDataPropertyChange,c),Z?Z._21I(Q):Q.sm().ms(c._16o,c),c.invalidateAll(!0),c.invalidateLight(),c.fp(ro,z,Q))},handleDataPropertyChange:function(F){var S=F.data;this.invalidateData(S),bm(S)&&"s:light.type"===F.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(Z){var V=this,W=Z.property;V.iv(),V._18Q=E,"eye"===W?V._33Q=!0:"devicePixelRatio"===W?V._42(E,V._devicePixelRatio||cn):le[W]&&Lp(V)},_5O:function(j){var A=j._22Q();return A?new A(this,j):E},getData3dUI:function(p){var l=this._25I[p._id];return l===o&&(l=this._5O(p),this._25I[p._id]=l),l},invalidateAll:function(t){var q=this;if(t){for(var T in q._25I){var a=q._25I[T];a&&a.dispose()}q._25I={},q.iv(),ag(q)}else q.dm().each(function(p){q.invalidateData(p)})},invalidateSelection:function(){var W=this;W.sm().each(function(E){W.invalidateData(E)})},invalidateData:function(X){var J=this,q=J.getData3dUI(X);q&&(q.iv(),J.iv()),ag(J,X)},invalidateBatch:function(h){var N=this,i=N._33O,r=i[h];r&&(r.ds.forEach(function(g){var V=N.getData3dUI(g);V&&V.iv(),delete N._34O[g._id]}),delete i[h],N.iv())},handleDataModelChange:function(M){var I=this,z=M.kind,s=M.data;if("add"===z)I.invalidateData(s),Ar(s)&&s.getEdgeGroup()&&s.getEdgeGroup().eachSiblingEdge(I.invalidateData,I),bm(s)&&I.invalidateLight();else if(z===Hg){var d=s._id,w=I._25I[d];w&&(w.dispose(),delete I._25I[d],I.iv()),s===I._currentSubGraph&&I.setCurrentSubGraph(E),ag(I,s),bm(s)&&I.invalidateLight()}else z===Ql&&(I.invalidateAll(!0),I.setCurrentSubGraph(E),ag(I),I.invalidateLight())},toCanvas:function(N){var l=this,M=l.getGL();if(l.validate(),N){var T=M.getParameter(M.COLOR_CLEAR_VALUE);vs(M,N)}l._42(E,1);var e=l.getWidth(),t=l.getHeight(),U=new Uint8Array(4*e*t),L=Fi(),F=L.getContext("2d");M.readPixels(0,0,e,t,M.RGBA,M.UNSIGNED_BYTE,U),Wr(L,e,t,1);for(var c=F.getImageData(0,0,e,t),n=c.data,z=0;z<n.length;z+=4){var J=z/4,D=q(J/e),Q=J-D*e;J=4*((t-1-D)*e+Q),n[J]=U[z],n[J+1]=U[z+1],n[J+2]=U[z+2],n[J+3]=U[z+3]}return F.putImageData(c,0,0),N&&vs(M,T),l._42(E,l._devicePixelRatio||cn),L},toDataURL:function(q,U){var C=this,$=C.getGL();if(C.validate(),q){var Y=$.getParameter($.COLOR_CLEAR_VALUE);vs($,q)}C._42(E,1);var K=C._canvas.toDataURL(U||"image/png",1);return q&&vs($,Y),C._42(E,C._devicePixelRatio||cn),K},getGL:function(){var T=this,w=T._26I,N=T._prg;if(!w)try{T._2O={},w=T._26I=T._canvas.getContext("webgl",T._attributes)||T._canvas.getContext("experimental-webgl",T._attributes),T._buffer={vs:fe(w),ns:fe(w),is:fe(w),uv:fe(w),batchColor:fe(w),batchBlend:fe(w),batchBrightness:fe(w),lineDistance:fe(w)},T._1O=ak(w);var Z=T._cube={vs:fe(w),ns:fe(w),is:fe(w),uv:fe(w)};ts(w,Z.vs,Ln),ts(w,Z.ns,tj),ts(w,Z.uv,oc),jo(w,Z.is,Oc)}catch(H){}if(w&&!N){if(N=T._prg=w.createProgram(),!N)return E;var V=T._dirs.length,C=T._spots.length,y=T._59O.length,U=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];V&&U.push("uDirColor","uDirPosition"),C&&U.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),y&&U.push("uPointColor","uPointRange","uPointPosition"),vs(w,[0,0,0,0]),w.clearDepth(1),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),mm||(Ze=Cm(Ze.substring(0,Ze.indexOf("^#"))),ok=Cm(ok),mm=!0);var c=["#define MAX_DIR "+V,"#define MAX_SPOT "+C,"#define MAX_POINT "+y,T._fogDisabled?"":"#define FOG",T._dashDisabled?"":"#define DASH",T._batchColorDisabled?"":"#define BATCHCOLOR",T._batchBlendDisabled?"":"#define BATCHBLEND",T._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),D=kr(w,N,w.VERTEX_SHADER,Ze.replace("PREFIX",c)),o=kr(w,N,w.FRAGMENT_SHADER,ok.replace("PREFIX",c));_?U.push("aPosition"):(N.aPosition=0,w.bindAttribLocation(N,0,"aPosition")),w.linkProgram(N),U.forEach(function(G){N[G]=/^u/.test(G)?w.getUniformLocation(N,G):w.getAttribLocation(N,G)}),w.useProgram(N),w.deleteShader(D),w.deleteShader(o)}return w},getBrightness:function(o){var U=o.s("brightness"),c=this.isSelected(o)?o.s("select.brightness"):E;return U==E?c:c==E?U:U*c},getWireframe:function($){var p=$.s("wf.visible");return p===!0||"selected"===p&&this.isSelected($)?{color:$.s("wf.color"),width:$.s("wf.width"),"short":$.s("wf.short"),mat:$.s("wf.mat")}:void 0},getBodyColor:function(f){return f.s("body.color")},getMat:function(l){return l.getMat?l.getMat():l.s("mat")},getFaceMat:function(Q,$){return Q.getFaceMat?Q.getFaceMat($):Q.s($+".mat")},getFaceBlend:function(s,a){return s.s(a+".blend")||s.s("all.blend")},getFaceColor:function(H,J){return H.s(J+".color")||H.s("all.color")},getFaceImage:function(X,F){return X.s(F+".image")||X.s("all.image")},getFaceDiscardSelectable:function(G,P){var A=G.s(P+".discard.selectable");return A==E?G.s("all.discard.selectable"):A},getFaceUv:function(k,y){return k.s(y+".uv")||k.s("all.uv")},getFaceUvOffset:function(L,R){return L.s(R+".uv.offset")||L.s("all.uv.offset")},getFaceUvScale:function(m,r){return m.s(r+".uv.scale")||m.s("all.uv.scale")},getFaceLight:function(C,I){var X=C.s(I+".light");return X==E?C.s("all.light"):X},getFaceVisible:function(d,k){var p=d.s(k+".visible");return p==E?d.s("all.visible"):p},getFaceOpacity:function(p,j){var s=p.s(j+".opacity");return s==E?p.s("all.opacity"):s},getFaceTransparent:function(c,U){var w=c.s(U+".transparent");return w==E?c.s("all.transparent"):w},getFaceReverseColor:function(n,f){return n.s(f+".reverse.color")||n.s("all.reverse.color")},getFaceReverseFlip:function(u,D){var N=u.s(D+".reverse.flip");return N==E?u.s("all.reverse.flip"):N},getFaceReverseCull:function(i,D){var u=i.s(D+".reverse.cull");return u==E?i.s("all.reverse.cull"):u},getTextureMap:function(){return this._2O},deleteTexture:function(O){var S=this,N=S._2O[O];N&&(delete S._2O[O],S.getGL().deleteTexture(N))},getTexture:function(h,L){if(!h)return E;var m=this,f=m.getGL(),a=m._2O[h];if(!a){var X=bd(h);if(X)if(X.tagName){if(X.dynamic)return ak(f,X,m._1O);a=m._2O[h]=ak(f,X)}else{var s=si(X,L),V=tl(X,L);if(s>=1&&V>=1){var k=po(s,V);return dn(k,X,0,0,s,V,L,m),k.restore(),ak(f,uf,m._1O)}}}return a},redraw:function(){this.iv()},validateImpl:function(){var f=this;if(f._lightChanged){f._lightChanged=!1;var N=[],G=[],i=[];f.dm().each(function(u){if(bm(u)){var f=u.s("light.type");f===dl?N.push(u):f===jn?G.push(u):f===Un&&i.push(u)}}),(N.length!==f._59O.length||G.length!==f._spots.length||i.length!==f._dirs.length)&&Lp(f),f._59O=N,f._spots=G,f._dirs=i}f._42(),f._1o.iv()},_42:function(x,X){var s=this;if(!s._35O&&(!em||am(em))){var H,G;x&&(x instanceof um?G=x:H=x);var _=s._canvas,k=s.getWidth(),o=s.getHeight(),a=s.getGL(),Z=s._prg;if(a){if(X?x||Wr(_,k,o,X):(X=s._devicePixelRatio||cn,x||k===_.clientWidth&&o===_.clientHeight||Wr(_,k,o,X)),a.viewport(0,0,k*X,o*X),s._81O=E,a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),Ah(a,Z.uBrightness,1),Ah(a,Z.uOpacity,1),Ah(a,Z.uPartOpacity,1),a._picking=!!x,Ah(a,Z.uPick,!!x),Ah(a,Z.uTexture,!1),Ah(a,Z.uFix,!1),Ah(a,Z.uTransparent,!1),Ah(a,Z.uBatchColor,!1),Ah(a,Z.uBatchBlend,!1),Ah(a,Z.uBatchBrightness,!1),x||(zc(s,a,Z),s._fogDisabled||(Ah(a,Z.uFogColor,s._fogColor),Ah(a,Z.uFogNear,s._fogNear),Ah(a,Z.uFogFar,s._fogFar))),iq(a,Z.aPosition),iq(a,Z.aNormal),Dd(a,Z.aUv),Dd(a,Z.aBatchColor),Dd(a,Z.aBatchBlend),Dd(a,Z.aBatchBrightness),Dd(a,Z.aLineDistance),Ah(a,Z.uPMatrix,Gd(s)),Ah(a,Z.uViewMatrix,up(s,s._7O)),G){var F=a.getParameter(a.COLOR_CLEAR_VALUE);a.clearColor(0,0,0,0),a.disable(a.BLEND),Dd(a,Z.aNormal),ts(a,s._cube.vs,E,Z.aPosition),jo(a,s._cube.is),Fb(G,s,Bg,0),Fb(G,s,$,6),Fb(G,s,Bk,12),Fb(G,s,rj,18),Fb(G,s,wi,24),Fb(G,s,_g,30),iq(a,Z.aNormal),vs(a,F)}else if(H){H.value=2;var F=a.getParameter(a.COLOR_CLEAR_VALUE);a.clearColor(0,0,0,0),a.disable(a.BLEND),s._95I(a,Z,H),Ic(s,H),Xe(s,s._polylineModelMap,H),Xe(s,s._wireframeModelMap,H),Ah(a,Z.uTransparent,!0),s._95I(a,Z,H,!0),Ic(s,H,!0),Xe(s,s._polylineModelMap,H,!0),Xe(s,s._wireframeModelMap,H,!0),Ah(a,Z.uTransparent,!1),a.disable(a.DEPTH_TEST),s._30O._42(a,Z,H),a.enable(a.DEPTH_TEST),vs(a,F)}else a.disable(a.BLEND),s._31O._42(a,Z),s._95I(a,Z),Ic(s),Xe(s,s._polylineModelMap),Xe(s,s._wireframeModelMap),a.enable(a.BLEND),a.depthMask(!1),Ah(a,Z.uTransparent,!0),s._95I(a,Z,E,!0),Ic(s,E,!0),Xe(s,s._polylineModelMap,E,!0),Xe(s,s._wireframeModelMap,E,!0),Ah(a,Z.uTransparent,!1),a.depthMask(!0),a.disable(a.BLEND),a.disable(a.DEPTH_TEST),s._32O._42(a,Z),s._30O._42(a,Z),a.enable(a.DEPTH_TEST);ts(a,E),jo(a,E),s._33Q=!1}}},_95I:function(s,l,n,r){var q=this,R=function(u){return r?u:!u};q.dm().each(function(D){if(q.isVisible(D)&&(!K||y)){if(!n&&q.isTransparentMask(D))return;var i=q.getData3dUI(D);i&&i._42(s,l,n,R)}})},getLogicalPoint:function(U){return $b(U,this._canvas)},getHitFaceInfo:function(s){s.target&&(s=this.lp(s));var b=this.getDataInfoAt(s);if(b){var w=this._1o.face(b.data,Kp(s.x,s.y));if(w)return{data:b.data,face:w}}return E},getDataAt:function(a){var H=this.getDataInfoAt(a);return H?H.data:E},getDataInfoAt:function(H,L){return H.target&&(H=this.lp(H)),this._1o.get(Kp(H.x,H.y,L),!0)},getDatasInRect:function(b){return this._1o.get(b)},setEditable:function(b){var k=this,R=k._editable;k._editable=b,this.fp(Wk,R,b)},isEditable:function(P){var L=this;return L._editable?as(P)?P.s("3d.editable")?L._editableFunc?L._editableFunc(P):!0:!1:!1:!1},isSelectable:function(h){return h.s("3d.selectable")&&this.sm().isSelectable(h)},isMovable:function(B){var t=this;return Ar(B)&&B.getStyle(_m)!==Jl?!1:B.s("3d.movable")?t._movableFunc?t._movableFunc(B):!0:!1},isSizeEditable:function(q){return as(q)?this._sizeEditableFunc?this._sizeEditableFunc(q):!0:!1},isRotationEditable:function(j){return as(j)&&j.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(j):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(e){this.setZoom(vl,e)},zoomOut:function(k){this.setZoom(1/vl,k)},setZoom:function($,n){if(1!==$){var w=this;if(w._ortho)return w.setOrthoZoom($,n),void 0;w._14o&&w._14o.stop(!0);var o=1/$,F=w._eye,Z=w._center,i=Z[0]+(F[0]-Z[0])*o-F[0],x=Z[1]+(F[1]-Z[1])*o-F[1],M=Z[2]+(F[2]-Z[2])*o-F[2];if(!(Nq(F,Z)<w._moveStep&&1>o)){if(n=Xc(n)){var p=Pc(F);return n.action=function(Q){w.fi({kind:w._zooming?"betweenZoom":"beginZoom"}),w._zooming=1,F[0]=p[0]+i*Q,F[1]=p[1]+x*Q,F[2]=p[2]+M*Q,w.fp(mi,E,F)},n._37o=function(){delete w._14o,delete w._zooming,w.fi({kind:"endZoom"}),w.onZoomEnded()},w._14o=Si(n)}F[0]+=i,F[1]+=x,F[2]+=M,w.fp(mi,E,F)}}},setOrthoZoom:function(x,s){if(1!==x){var L=this;L._14o&&L._14o.stop(!0);var J=L._orthoWidth,r=J/x-J;if(!(J<L._moveStep&&x>1))return(s=Xc(s))?(s.action=function(y){L.fi({kind:L._zooming?"betweenZoom":"beginZoom"}),L._zooming=1,L.setOrthoWidth(J+r*y)},s._37o=function(){delete L._14o,delete L._zooming,L.fi({kind:"endZoom"}),L.onZoomEnded()},L._14o=Si(s)):(L.setOrthoWidth(J/x),void 0)}},getPositionInfo:function(p){var e=this,f=e._eye,J=e._center,w=e.getAspect(),Z=p?oj(vh(J,f,!0),vh(p,f)):Nq(f,J);if(e._ortho){var Y=e._orthoWidth;return{length:Z,height:Y/w,width:Y}}var L=2*X(e._fovy/2)*Z;return{length:Z,height:L,width:L*w}},getCenterInfo:function(){var y=this;return y._81O||(y._81O=y.getPositionInfo()),Pc(y._81O)},rotate:function(Y,u,m,Q){var o=this;if(Y||u){Q==E&&(Q=o._firstPersonMode),o._88O&&o._88O.stop(!0);var K=o._center,r=o._eye,S=o.getCenterInfo().length,I=Q?K:r,D=Q?r:K,x=vh(I,D),B=p(x[0],x[2]),_=p(d(x[0]*x[0]+x[2]*x[2]),x[1]),A=Q?ss:mi;return Q&&(u=-u),(m=Xc(m))?(m.action=function(F){o.fi({kind:o._rotating?"betweenRotate":"beginRotate"}),o._rotating=1;var i=B+Y*F,J=_+u*F;J=Pj(J),x[0]=S*C(J)*C(i),x[1]=S*z(J),x[2]=S*C(J)*z(i),I[0]=D[0]+x[0],I[1]=D[1]+x[1],I[2]=D[2]+x[2],o.fp(A,E,I)},m._37o=function(){delete o._88O,delete o._rotating,o.fi({kind:"endRotate"}),o.onRotateEnded()},o._88O=Si(m)):(B+=Y,_+=u,_=Pj(_),x[0]=S*C(_)*C(B),x[1]=S*z(_),x[2]=S*C(_)*z(B),I[0]=D[0]+x[0],I[1]=D[1]+x[1],I[2]=D[2]+x[2],o.fp(A,E,I),void 0)}},pan:function(h,y,m,N){if(h||y){var s=this;N==E&&(N=s._firstPersonMode),s._89O&&s._89O.stop(!0);var c=up(s),M=[c[0]*h,c[4]*h,c[8]*h],J=[c[1]*y,c[5]*y,c[9]*y],A=M[0]+J[0],G=M[1]+J[1],I=M[2]+J[2],o=s._center,x=s._eye;if(N){var D=Hi(s.getBoundaries(),x[0],x[2],x[0]+A,x[2]+I,d(A*A+I*I));A=D[0],I=D[1]}if(m=Xc(m)){var Q=Pc(x),X=Pc(o);return m.action=function(R){s.fi({kind:s._panning?"betweenPan":"beginPan"}),s._panning=1,o[0]=X[0]+A*R,o[1]=X[1]+G*R,o[2]=X[2]+I*R,x[0]=Q[0]+A*R,x[1]=Q[1]+G*R,x[2]=Q[2]+I*R,s.fp(mi,E,x),s.fp(ss,E,o)},m._37o=function(){delete s._89O,delete s._panning,s.fi({kind:"endPan"}),s.onPanEnded()},s._89O=Si(m)}o[0]+=A,o[1]+=G,o[2]+=I,x[0]+=A,x[1]+=G,x[2]+=I,s.fp(mi,E,x),s.fp(ss,E,o)}},walk:function(o,Y,I){if(o){var t=this;I==E&&(I=t._firstPersonMode),t._90O&&t._90O.stop(!0);var V=t._center,J=t._eye,w=vh(V,J,!0);if(I){var m=Hi(t.getBoundaries(),J[0],J[2],J[0]+w[0]*o,J[2]+w[2]*o,n(o));if(o=Nq(m),!o)return;w=[m[0]/o,0,m[1]/o]}if(Y=Xc(Y)){var F=Pc(J),L=Pc(V);return Y.action=function(b){t.fi({kind:t._walking?"betweenWalk":"beginWalk"}),t._walking=1;var U=o*b;J[0]=F[0]+w[0]*U,J[1]=F[1]+w[1]*U,J[2]=F[2]+w[2]*U,V[0]=L[0]+w[0]*U,V[1]=L[1]+w[1]*U,V[2]=L[2]+w[2]*U,t.fp(mi,E,J),t.fp(ss,E,V)
},Y._37o=function(){delete t._90O,delete t._walking,t.fi({kind:"endWalk"}),t.onWalkEnded()},t._90O=Si(Y)}J[0]+=w[0]*o,J[1]+=w[1]*o,J[2]+=w[2]*o,V[0]+=w[0]*o,V[1]+=w[1]*o,V[2]+=w[2]*o,t.fp(mi,E,J),t.fp(ss,E,V)}},handleScroll:function(Z,B){Z.preventDefault();var a=this,J=a._moveStep;a.isFirstPersonMode()?a.isPannable()&&a.pan(0,B>0?J:-J):a.isZoomable()&&a.setZoom(0>B?1/fd:fd)},handlePinch:function(L,P){this.isZoomable()&&this.setZoom(P>L?1/ko:ko)},reset:function(){this.setCenter(m.graph3dViewCenter),this.setEye(m.graph3dViewEye),this.setUp(m.graph3dViewUp)},moveSelection:function(I,J,A){var G,P=this,w=P.dm();w&&(G=w.getHistoryManager()),G&&G.beginInteraction(),_p(this.sm().toSelection(this.isMovable,this),I,J,A),G&&G.endInteraction()},getMoveMode:function(T,c){var x=c.s("3d.move.mode");if(x)return x;var M="88",A="89",U="90";return Gg(T)||Fc[M]&&Fc[A]&&Fc[U]?"xyz":Fc[M]&&Fc[A]?"xy":Fc[M]&&Fc[U]?"xz":Fc[A]&&Fc[U]?"yz":Fc[M]?"x":Fc[A]?"y":Fc[U]?"z":"xz"},handleTick:function(){var v=this,E=!1,W=v._moveStep,J=W,u=!1,N=!0,C=v._rotateStep*(N?-1:1);if(v.isWalkable()||(J=0),v.isPannable()||(W=0),v.isRotatable()||(C=0),v._32Q){var z=(Vk()-v._32Q)/50;J*=z,W*=z,C*=z}v._31Q&&(We(v._31Q),delete v._31Q,delete v._32Q),Rn()&&(E=!0,v.pan(-W,0,u,N)),qh()&&(E=!0,v.pan(W,0,u,N)),To()&&(E=!0,Gg()?v.pan(0,W,u,N):v.walk(J,u,N)),wm()&&(E=!0,Gg()?v.pan(0,-W,u,N):v.walk(-J,u,N)),Sd()&&(E=!0,v.rotate(-C,0,u,N)),Vn()&&(E=!0,v.rotate(C,0,u,N)),Tq()&&(E=!0,v.rotate(0,-C/2,u,N)),xm()&&(E=!0,v.rotate(0,C/2,u,N)),E&&(v._32Q=Vk(),v._31Q=Yk(v.handleTick,v))},handleKeyDown:function(c){var y=this;!bj(c)&&Nl[c.keyCode]?y.handleTick():dq(c)?y.selectAll():Ti(c)?y.handleDelete(c):Ei(c)&&this.isResettable()&&y.reset()},checkDoubleClickOnNote:function(T,d,J){var W=this;if(J===Nc){if(d.s("note.toggleable"))return d.s(Xi,!d.s(Xi)),W.fi({kind:"toggleNote",event:T,data:d,part:J}),!0}else if(J===Vm&&d.s("note2.toggleable"))return d.s(Ad,!d.s(Ad)),W.fi({kind:"toggleNote2",event:T,data:d,part:J}),!0;return!1},checkDoubleClickOnRotation:function(A,b,f){return f===Bq?(b.setRotationX(0),!0):f===Uq?(b.setRotationY(0),!0):f===rf?(b.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(v){var u=this,H=u.getWidth()/2,S=u.getHeight()/2,T=u._18Q;return T||(T=Gd(u),u._18Q=ej(T,T,up(u))),v=Cr([v[0],v[1],v[2],1],T),{x:H+H*v[0]/v[3],y:S-S*v[1]/v[3]}},getHitPosition:function(A,W,e){var N=this,B=N.getWidth(),O=N.getHeight(),Z=A.target?N.lp(A):A,n=Z.x-B/2,E=Z.y-O/2,H=N.getCenterInfo(),I=up(N);W=W?W:[0,0,0],e=e?e:[0,1,0],n=n/B*H.width,E=-1*E/O*H.height;var s=[I[0]*n,I[4]*n,I[8]*n],$=[I[1]*E,I[5]*E,I[9]*E],K=[s[0]+$[0],s[1]+$[1],s[2]+$[2]],G=N.getCenter(),y=Wg(N,W,e,[K[0]+G[0],K[1]+G[1],K[2]+G[2]]);return y?y:[0,0,0]},getLineLength:function(b){this.validate();var s=this.getData3dUI(b);if(s&&s.getCache){var e=s.getCache();if(e)return e[e.length-1].length}return 0},getLineOffset:function(l,R){this.validate();var D=this.getData3dUI(l);if(D&&D.getCache){var p=D.getCache();if(p)return so(p,R)}return E}});var Ab=Jb.Interactor=function(r){this.gv=r};oh("Interactor",Q,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var yq=Jb.DefaultInteractor=function(w){zo(yq,this,[w])};oh("DefaultInteractor",Ab,{handle_contextmenu:function(P){Bi(P)},handle_mousewheel:function(U){this.gv.handleScroll(U,U.wheelDelta/40)},handle_DOMMouseScroll:function(Y){2===Y.axis&&this.gv.handleScroll(Y,-Y.detail)},handle_keydown:function(V){this.gv.handleKeyDown(V)},handle_mousedown:function(v){this.handle_touchstart(v)},handle_touchstart:function(L){Bi(L);var M=this,k=M.gv,i=_k(L),D=k.getDataInfoAt(L),S=D?D.data:E,Z=D?D.part:E,j=k.sm(),p=Rg(L),F=Cl(L);k.setFocus(L)&&(M._62O=E,M._57I=E,S?bj(L)?j.co(S)?j.rs(S):j.as(S):j.co(S)||j.ss(S):i&&(bj(L)?k.isRectSelectable()&&(M._62O=Fp):M._57I=kf(L)),M._31Q&&(We(M._31Q),delete M._31Q,delete M._32Q),M._62O||(k.isFirstPersonMode()&&(Gg(L)||F>2?M._62O="pan":k.isMouseRoamable()||Y?(M._62O="roaming",M.foward=p&&_k(L),M._32Q=Vk(),M._31Q=Yk(M.tick,M)):i||(M._62O="roaming")),M._62O||(i&&p&&Hl[Z]?(M._62O=Z,M.p3=S.p3()):i&&p&&as(S)&&k.isSelected(S)&&k.isMovable(S)?(M._62O="move",M.p3=S.p3(),M.movedata=S):Y&&(F>2?M._62O="pan":2===F&&(M.dist=Bh(L),M._62O="pinch")))),M.point=k.lp(L),De(M,L),ne(L)?k.handleDoubleClick(L,S,Z):k.handleClick(L,S,Z))},tick:function(){var t=this,C=t.gv,r=C._moveStep;t.point&&C.isWalkable()&&(t._32Q&&(r*=(Vk()-t._32Q)/50),C.walk(t.foward?r:-r),t._32Q=Vk(),t._31Q=Yk(t.tick,t))},handle_mouseup:function(I){this.handle_touchend(I)},handle_touchend:function(A){var e=this._57I;e&&(Nq(e,kf(A))<=1&&this.gv.sm().cs(),this._57I=E)},handleWindowMouseMove:function(W){this.handleWindowTouchMove(W)},handleWindowTouchMove:function(_){var S,B,l=this,L=l.gv,D=l._62O,v=l.point,i=L.dm(),M=i.getHistoryManager(),s=L.lp(_),N=s.x-v.x,r=s.y-v.y,Y=-G*N/L.getWidth(),A=-G*r/L.getHeight();if("roaming"===D)l.rotate(_,Y/2,A/2);else if(D===Bq||D===Uq||D===rf)M&&!L._86O&&M.beginInteraction(),L.fi({kind:L._86O?"betweenEditRotation":"beginEditRotation",event:_}),L._86O=1,L.sm().each(function(F){if(as(F)&&L.isRotationEditable(F)){var M=n(Y)>n(A)?Y:A;D===Bq?F.setRotationX(F.getRotationX()+M):D===Uq?F.setRotationY(F.getRotationY()+M):D===rf&&F.setRotationZ(F.getRotationZ()+M)}});else if("move"===D||Hl[D]){D===Bo||D===Ag||D===Yc?(M&&!L._87O&&M.beginInteraction(),L.fi({kind:L._87O?"betweenEditSize":"beginEditSize",event:_}),L._87O=1):(M&&!L._moving&&M.beginInteraction(),L.fi({kind:L._moving?"betweenMove":"beginMove",event:_}),L._moving=1);var o,c=l.p3,H=L.getPositionInfo(c),x=up(L);o=D===Ac?"x":D===no?"y":D===pg?"z":D===Bo?"sx":D===Ag?"sy":D===Yc?"sz":L.getMoveMode(_,l.movedata),N=N/L.getWidth()*H.width,r=-1*r/L.getHeight()*H.height;var Q,g,q=[x[0]*N,x[4]*N,x[8]*N],V=[x[1]*r,x[5]*r,x[9]*r],W=q[0]+V[0],f=q[1]+V[1],O=q[2]+V[2],u=[c[0]+W,c[1]+f,c[2]+O],J=vh(L.getEye(),u,!0);if("xyz"===o?(Q=u,L.moveSelection(W,f,O)):"xz"===o?(Q=Wg(L,c,[0,1,0],u),Q&&L.moveSelection(Q[0]-c[0],0,Q[2]-c[2])):"xy"===o?(Q=Wg(L,c,[0,0,1],u),Q&&L.moveSelection(Q[0]-c[0],Q[1]-c[1],0)):"yz"===o?(Q=Wg(L,c,[1,0,0],u),Q&&L.moveSelection(0,Q[1]-c[1],Q[2]-c[2])):"x"===o||"sx"===o?(J[0]=0,Q=Wg(L,c,J,u),Q&&(g=Q[0]-c[0],"x"===o?L.moveSelection(g,0,0):L.sm().each(function(l){as(l)&&L.isSizeEditable(l)&&(S=t(Do,l.getWidth()+g),B=S/l.getWidth(),l.setWidth(S),Gg(_)&&(l.setHeight(l.getHeight()*B),l.setTall(l.getTall()*B)))}))):"y"===o||"sy"===o?(J[1]=0,Q=Wg(L,c,J,u),Q&&(g=Q[1]-c[1],"y"===o?L.moveSelection(0,g,0):L.sm().each(function(F){as(F)&&L.isSizeEditable(F)&&(S=t(Do,F.getTall()+g),B=S/F.getTall(),F.setTall(S),Gg(_)&&(F.setHeight(F.getHeight()*B),F.setWidth(F.getWidth()*B)))}))):("z"===o||"sz"===o)&&(J[2]=0,Q=Wg(L,c,J,u),Q&&(g=Q[2]-c[2],"z"===o?L.moveSelection(0,0,g):L.sm().each(function(e){as(e)&&L.isSizeEditable(e)&&(S=t(Do,e.getHeight()+g),B=S/e.getHeight(),e.setHeight(S),Gg(_)&&(e.setTall(e.getTall()*B),e.setWidth(e.getWidth()*B)))}))),!Q)return;l.p3=Q}else if(D===Fp){var Z=l.div;Z||(Z=l.div=Vd(),Gn(l.getView(),Z),Z.op=v,Z.style.background=L.getRectSelectBackground()),L.fi({kind:L._rectSelecting?"betweenRectSelect":"beginRectSelect",event:_}),L._rectSelecting=1,Z.rect=ll(Z.op,s),ud(Z,Z.rect)}else if("pinch"===D&&2===Cl(_)){L.fi({kind:L._pinching?"betweenPinch":"beginPinch",event:_}),L._pinching=1;var g=Bh(_);L.handlePinch(g,l.dist),l.dist=g}else"pan"===D||Gg(_)?l.pan(_,N,r):L.isFirstPersonMode()||(_k(_)?l.rotate(_,Y,A):(l.pan(_,N,0),L.isWalkable()&&(L.fi({kind:L._walking?"betweenWalk":"beginWalk",event:_}),L._walking=1,L.walk(r/L.getHeight()*L.getCenterInfo().height))));l.point=s},pan:function(G,U,d){var V=this.gv;if(V.isPannable()){var Q=V.getCenterInfo(),E=U/V.getWidth()*Q.width,M=-1*d/V.getHeight()*Q.height;V.fi({kind:V._panning?"betweenPan":"beginPan",event:G}),V._panning=1,V.pan(-E,-M)}},rotate:function(W,a,I){var R=this.gv;R.isRotatable()&&(R.fi({kind:R._rotating?"betweenRotate":"beginRotate",event:W}),R._rotating=1,R.rotate(a,I))},handleWindowMouseUp:function(P){this.handleWindowTouchEnd(P)},handleWindowTouchEnd:function(d){var K=this,y=K.gv,C=y.dm(),H=C.getHistoryManager(),B=K.div;if(B){var c=y.getDatasInRect(B.rect);if(!c.isEmpty()){var P=y.sm(),J=P.toSelection();c.each(function(U){P.co(U)?J.remove(U):J.add(U)}),P.ss(J)}Bc(B)}y._moving&&(delete y._moving,y.fi({kind:"endMove",event:d}),y.onMoveEnded(),H&&H.endInteraction()),y._panning&&(delete y._panning,y.fi({kind:"endPan",event:d}),y.onPanEnded()),y._rotating&&(delete y._rotating,y.fi({kind:"endRotate",event:d}),y.onRotateEnded()),y._86O&&(delete y._86O,y.fi({kind:"endEditRotation",event:d}),H&&H.endInteraction()),y._87O&&(delete y._87O,y.fi({kind:"endEditSize",event:d}),H&&H.endInteraction()),y._pinching&&(delete y._pinching,y.fi({kind:"endPinch",event:d}),y.onPinchEnded()),y._rectSelecting&&(delete y._rectSelecting,y.fi({kind:"endRectSelect",event:d}),y.onRectSelectEnded()),y._walking&&(delete y._walking,y.fi({kind:"endWalk",event:d}),y.onWalkEnded()),K.dist=K.point=K._62O=K.p3=K.movedata=K.div=K._57I=K._32Q=K._31Q=K.foward=E}});var de=function(s){this.gv=s};fo(de,Q,{_iv:!0,iv:function(){this._iv=!0},face:function(Z,M){var I=this,_=I.gv.getGL();if(!_||!as(Z))return E;var A=M.x,u=M.width,Y=M.height,t=I.height-M.y-Y,O=q(u/2),b=new Uint8Array(4*u*Y),s=0;for(I.iv(),I.validate(Z),Om(_,I.frame),_.readPixels(A,t,u,Y,_.RGBA,_.UNSIGNED_BYTE,b),Om(_,E),I.iv();O>=s;s++)for(var Q=O-s,V=O+s,r=Q;V>=r;r++)for(var j=Q;V>=j;j++)if(r===Q||r===V||j===Q||j===V){var m=hg.m[b[4*(r*u+j)]];if(m)return m}},get:function($,R){this.validate();var J=this,w=J.gv.getGL();if(!w)return E;var e,n,k=$.x,f=$.width,c=$.height,h=J.height-$.y-c,p=q(f/2),x=new Uint8Array(4*f*c),S=0,D=x.length,o=R?E:new dj,U=R?E:{};if(Om(w,J.frame),w.readPixels(k,h,f,c,w.RGBA,w.UNSIGNED_BYTE,x),Om(w,E),R){for(;p>=S;S++)for(var K=p-S,G=p+S,L=K;G>=L;L++)for(var I=K;G>=I;I++)if((L===K||L===G||I===K||I===G)&&(e=J.info(x,4*(L*f+I))))return e}else for(;D>S;S+=4)e=J.info(x,S),e&&(n=e.data,U[n._id]||(o.add(n),U[n._id]=n));return o},info:function(O,v){return this.colorMap[(O[v]<<24)+(O[v+1]<<16)+(O[v+2]<<8)+O[v+3]]},validate:function(a){var o=this,h=o.gv,b=h.getGL();if(b){var w=h.getWidth(),C=h.getHeight(),O=b.RGBA,v=b.TEXTURE_2D,N=b.RENDERBUFFER,U=b.FRAMEBUFFER;o.texture||(o.texture=ak(b),o.render=b.createRenderbuffer(),o.frame=b.createFramebuffer()),(o.width!==w||o.height!==C)&&(Ml(b,o.texture),b.texImage2D(v,0,O,w,C,0,O,b.UNSIGNED_BYTE,E),yf(b,b.TEXTURE_MIN_FILTER,b.LINEAR),b.bindRenderbuffer(N,o.render),b.renderbufferStorage(N,b.DEPTH_COMPONENT16,w,C),Om(b,o.frame),b.framebufferTexture2D(U,b.COLOR_ATTACHMENT0,v,o.texture,0),b.framebufferRenderbuffer(U,b.DEPTH_ATTACHMENT,N,o.render),Ml(b,E),b.bindRenderbuffer(N,E),Om(b,E),o.width=w,o.height=C),o._iv&&(o._iv=!1,Om(b,o.frame),h._42(a||(o.colorMap={}),1),Om(b,E))}}});var pb=function(E){this.gv=E};fo(pb,Q,{gap:0,size:0,_42:function(f,v){var h=this,W=h.gv,C=W._gridGap,M=W._gridSize;if(W._gridVisible){if(h.gap!==C||h.size!==M){for(var s=[],n=W._gridSize/2,I=C*n,D=0;2*n+1>D;D++){var R=6*D,t=6*(2*n+1)+R;s[R]=-I,s[R+1]=0,s[R+2]=-I+D*C,s[R+3]=I,s[R+4]=0,s[R+5]=-I+D*C,s[t]=-I+D*C,s[t+1]=0,s[t+2]=-I,s[t+3]=-I+D*C,s[t+4]=0,s[t+5]=I}h.vs=new Mm(s),h.gap=C,h.size=M}db(W),Dn(f,v),Tg(f,v,1,W._gridColor,W._buffer.vs,h.vs),Po(f,0,h.vs.length/3,f.LINES),Xm(f,v)}else h.vs=h.gap=h.size=E}});var Vc=function(e){this.gv=e};fo(Vc,Q,{_42:function(t,C){var K=this.gv,Y=K._buffer.vs,H=K._axisXColor,L=K._axisYColor,J=K._axisZColor,G=K._originAxisVisible,c=K._centerAxisVisible;if(G||c){var F=_?t.TRIANGLES:t.TRIANGLE_FAN,p=t.LINES;if(db(K),Dn(t,C),G){var n=K.getCenterInfo(),A=S(n.width,n.height)/5,b=.8*A,Z=.05*A;Tg(t,C,1.5,H,Y,new Mm([0,0,0,A,0,0,b,Z,0,b,0,Z,b,-Z,0,b,0,-Z,b,Z,0,0,0,0,0,A,0,Z,b,0,0,b,Z,-Z,b,0,0,b,-Z,Z,b,0,0,0,0,0,0,A,Z,0,b,0,Z,b,-Z,0,b,0,-Z,b,Z,0,b])),Po(t,0,2,p),Po(t,1,6,F),Tg(t,C,E,L),Po(t,7,2,p),Po(t,8,6,F),Tg(t,C,E,J),Po(t,14,2,p),Po(t,15,6,F)}if(c){var X=K._center,m=X[0],z=X[1],O=X[2],n=K.getPositionInfo(X);A=S(n.width,n.height)/20,Tg(t,C,1.5,H,Y,new Mm([m,z,O,m+A,z,O,m,z,O,m,z+A,O,m,z,O,m,z,O+A])),Po(t,0,2,p),Tg(t,C,E,L),Po(t,2,2,p),Tg(t,C,E,J),Po(t,4,2,p)}Xm(t,C)}}});var Ph=function(f){this.gv=f},Ac="edit_tx",no="edit_ty",pg="edit_tz",Bq="edit_rx",Uq="edit_ry",rf="edit_rz",Bo="edit_sx",Ag="edit_sy",Yc="edit_sz",Hl={};Hl[Ac]=1,Hl[no]=1,Hl[pg]=1,Hl[Bq]=1,Hl[Uq]=1,Hl[rf]=1,Hl[Bo]=1,Hl[Ag]=1,Hl[Yc]=1,fo(Ph,Q,{_42:function(q,o,h){var m=this,t=m.gv,l=t.sm().ld();if(t.isEditable(l)&&as(l)&&(!t.isFirstPersonMode()||!t.isMouseRoamable()&&!Y)){db(t);var E,G,W=t.isMovable(l),Z=t.isRotationEditable(l),U=t.isSizeEditable(l),T=t._axisXColor,d=t._axisYColor,R=t._axisZColor,v=t._editSizeColor,n=t.getCenterInfo(),_=S(n.width,n.height)/10,b=_/(h?5:10),x=.7*_,H=.4*x,s=l.p3(),K=s[0],F=s[1],Q=s[2];E=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],W&&m._17O(q,o,l,h,Ac,T,E,[K,F-b,Q,K+x,F-b,Q,K+x,F,Q,K+x,F,Q,K,F,Q,K,F-b,Q,K,F-b,Q+b,K+x,F-b,Q+b,K+x,F-b,Q,K+x,F-b,Q,K,F-b,Q,K,F-b,Q+b]),G=K+x,U&&m._17O(q,o,l,h,Bo,v,E,[G,F-b,Q,G+H,F-b,Q,G+H,F,Q,G+H,F,Q,G,F,Q,G,F-b,Q,G,F-b,Q+b,G+H,F-b,Q+b,G+H,F-b,Q,G+H,F-b,Q,G,F-b,Q,G,F-b,Q+b]),G+=H,Z&&m._17O(q,o,l,h,Bq,T,E,[G,F-b,Q,G+H,F-b,Q,G+H,F,Q,G+H,F,Q,G,F,Q,G,F-b,Q,G,F-b,Q+b,G+H,F-b,Q+b,G+H,F-b,Q,G+H,F-b,Q,G,F-b,Q,G,F-b,Q+b]),E=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],W&&m._17O(q,o,l,h,no,d,E,[K,F,Q,K,F+x,Q,K-b,F+x,Q,K-b,F+x,Q,K-b,F,Q,K,F,Q,K,F,Q,K,F,Q-b,K,F+x,Q-b,K,F+x,Q-b,K,F+x,Q,K,F,Q]),G=F+x,U&&m._17O(q,o,l,h,Ag,v,E,[K,G,Q,K,G+H,Q,K-b,G+H,Q,K-b,G+H,Q,K-b,G,Q,K,G,Q,K,G,Q,K,G,Q-b,K,G+H,Q-b,K,G+H,Q-b,K,G+H,Q,K,G,Q]),G+=H,Z&&m._17O(q,o,l,h,Uq,d,E,[K,G,Q,K,G+H,Q,K-b,G+H,Q,K-b,G+H,Q,K-b,G,Q,K,G,Q,K,G,Q,K,G,Q-b,K,G+H,Q-b,K,G+H,Q-b,K,G+H,Q,K,G,Q]),E=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],W&&m._17O(q,o,l,h,pg,R,E,[K,F,Q,K,F,Q+x,K,F-b,Q+x,K,F-b,Q+x,K,F-b,Q,K,F,Q,K,F-b,Q,K-b,F-b,Q,K-b,F-b,Q+x,K-b,F-b,Q+x,K,F-b,Q+x,K,F-b,Q]),G=Q+x,U&&m._17O(q,o,l,h,Yc,v,E,[K,F,G,K,F,G+H,K,F-b,G+H,K,F-b,G+H,K,F-b,G,K,F,G,K,F-b,G,K-b,F-b,G,K-b,F-b,G+H,K-b,F-b,G+H,K,F-b,G+H,K,F-b,G]),G+=H,Z&&m._17O(q,o,l,h,rf,R,E,[K,F,G,K,F,G+H,K,F-b,G+H,K,F-b,G+H,K,F-b,G,K,F,G,K,F-b,G,K-b,F-b,G,K-b,F-b,G+H,K-b,F-b,G+H,K,F-b,G+H,K,F-b,G])}},_17O:function(B,v,N,u,l,I,V,D){var j=this.gv._buffer;gk(B,v,u,!0,N,l),eg(B,v,E,!0,E,!0,E,!1),Ah(B,v.uDiffuse,I),ts(B,j.vs,new Mm(D),v.aPosition),ts(B,j.ns,new Mm(V),v.aNormal),Po(B,0,12),Tb(B,v)}});var An=function(f,h){this.gv=f,this.s=function(F,g,Q){return g==E&&(g=Q),g==E?h.getStyle(F):Fg(g,h,f)},this.data=h};fo(An,Q,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(v,e,x,o){var u,H,Z,d,h,K,t,C=this,f=C.gv,G=C.data,I=G._id,W=C.s("batch"),w=f._34O,$=f._33O,q=f.isSelectable(G),i=f.getBrightness(G),P=i!=E&&1!==i;if(C._iv){if(Z=Qm(w,$,G,W),C.validate(Z,W?wj[W]||qi:E),Z&&(d=w[I],h=d.size=Z.vs.length/3-d.begin,t=Z.rs))for(i=P?i:1,K=0;h>K;K++)t.push(i);if(as(G)){var D=f.getWireframe(G);D&&Ue(f,G,D)}C.labelInfo=C.label2Info=C.noteInfo=C.note2Info=C._38o=E,C._24O(uq,"getLabel"),C._24O(Xo,"getLabel2"),C._26O(Nc,"getNote"),C._26O(Vm,"getNote2"),C._15O(),C._iv=!1}P&&Ah(v,e.uBrightness,i),H=gk(v,e,x,q,G,Gq),H&&(Wp(H,w[I],$),Wp(H,f._polylineIndexMap[I],f._polylineModelMap),Wp(H,f._wireframeIndexMap[I],f._wireframeModelMap)),w[I]||C._80o(v,e,o),(u=C.labelInfo)&&(gk(v,e,x,q,G,uq),C._28O(u,uq,o)),(u=C.label2Info)&&(gk(v,e,x,q,G,Xo),C._28O(u,Xo,o)),(u=C.noteInfo)&&(gk(v,e,x,q,G,Nc),C._29O(u,Nc,o)),(u=C.note2Info)&&(gk(v,e,x,q,G,Vm),C._29O(u,Vm,o)),(u=C._38o)&&C._99O(v,e,u,x,q,o),P&&Ah(v,e.uBrightness,1)},validate:function(){},_16O:function(){return ws},_80o:function(){},dispose:function(){},getBodyColor:function(h){var w=this.data,O=this.gv.getBodyColor(w);return O?O:h?w.getStyle(h):E},_24O:function(h,V){var S=this,G=S.data,B=S.gv,n=S.s,o=B[V](G);if(o!=E){var p=n(h+".scale"),y=n(h+".max"),u=S[h+"Info"]={label:o,textureScale:n(h+".texture.scale"),color:B[V+"Color"](G),font:n(h+".font"),align:n(h+".align"),background:B[V+"Background"](G)},r=u.rect=Mk(u,o);y>0&&y<r.width&&(u.labelWidth=r.width,r.width=y),r.x=r.y=0,r.width*=p,r.height*=p,u.mat=S._16O(n(h+".autorotate"),n(h+".position"),r,n(h+".face"),n(h+".t3"),n(h+".r3"),n(h+".rotationMode"));var N=r.width/2,P=r.height/2;u.vs=new Mm([-N,P,0,-N,-P,0,N,-P,0,N,P,0]),r.width/=p,r.height/=p}},_26O:function(e,G){var U=this,y=U.data,V=U.gv,p=U.s,$=V[G](y);if($!=E){var j=p(e+".scale"),O=this[e+"Info"]={note:$,textureScale:p(e+".texture.scale"),expanded:p(e+".expanded"),font:p(e+".font"),color:p(e+".color"),align:p(e+".align"),borderWidth:p(e+".border.width"),borderColor:p(e+".border.color"),background:V[G+"Background"](y)};if(O.expanded){var w=p(e+".max"),c=Mk(O,$);c.width+=6,c.height+=2,w>0&&w<c.width&&(O.labelWidth=c.width,c.width=w);var C={x:-c.width/2,y:-8-c.height,width:c.width,height:c.height+8}}else C={x:-6,y:-18,width:12,height:18};O.mat=U._16O(p(e+".autorotate"),p(e+".position"),E,p(e+".face"),p(e+".t3"),p(e+".r3"),p(e+".rotationMode")),O.rect=C,1!==j&&(C=Pc(C),C.x*=j,C.height*=j,C.y=-C.height,C.width*=j);var f=C.x,x=C.y,I=C.width,F=C.height;O.vs=new Mm([f,-x,0,f,-x-F,0,f+I,-x-F,0,f+I,-x,0])}},_28O:function(Y,D,w){if(w(this.s(D+".transparent"))){var L=Y.rect,U=Y.textureScale,m=L.width*U,N=L.height*U;if(m>=1&&N>=1){var k=po(m,N);1!==U&&(k.translate(k,L.x,L.y),k.scale(U,U),k.translate(k,-L.x,-L.y)),bf(k,Y),k.restore(),Ki(this,D,Y.mat,Y.vs,!0)}}},_29O:function(F,s,n){if(n(this.s(s+".transparent"))){var L=F.rect,D=F.textureScale,X=L.x,q=L.y,Q=L.width*D,y=L.height*D;if(Q>=1&&y>=1){L.x=L.y=0;var V=po(Q,y);1!==D&&V.scale(D,D),he(V,F),V.restore(),L.x=X,L.y=q,Ki(this,s,F.mat,F.vs,!1)}}},_99O:function(P,Z,y,d,q,f){if(y){var F=this,V=F.gv,O=F.data,m=V._buffer,L=V._1O,g=y.icons;for(var W in g){var Y=g[W],p=y.rects[W];if(p&&f(Fg(Y.transparent,O,V))){gk(P,Z,d,q,O,W);var C=Fg(Y.shape3d,O,V),o=C?[C]:Fg(Y.names,O,V),H=o?o.length:0,k=Fg(Y.textureScale,O,V)||1,U=Fg(Y.light,O,V);U==E&&(U=C?!0:!1),eg(P,Z,Fg(Y.blend,O,V),U,Fg(Y.opacity,O,V),Fg(Y.reverseFlip,O,V),Fg(Y.reverseColor,O,V),Fg(Y.reverseCull,O,V));for(var t=0;H>t;t++){var $=o[t],S=p[t];if(sh(F,S.mat),C)Qp(V,O,ee(F.s,C),F.s);else{var N=bd($);if(N){var v=S.width*k,T=S.height*k;if(v>=1&&T>=1){var i=po(v,T);hr(i,N,Fg(Y.stretch,O,V),0,0,v,T,O,V),i.restore(),ak(P,uf,L),Ej(P,Z,L,Fg(Y.discardSelectable,O,V),m.uv,yl),ts(P,m.vs,S.vs,Z.aPosition),ts(P,m.ns,_r,Z.aNormal),jo(P,m.is,rn),Gm(P,0,rn.length),Ci(P,Z,L)}}}fj(V)}Tb(P,Z)}}}}});var re=function(R,h){zo(re,this,[R,h])};fo(re,An,{_16O:function(w,Z,L,d,k,s,q,X,Y){var Q=this.data,B=eo(Z,Q.s3(),L,d,X,Y);return Jf(dc(),B,Q.p3(),d,k,s,q,w,Q.r3(),Q.getRotationMode())},clear:function(){var _=this;_.faceMat=_.mat=_.shapeModel=_.left=_.right=_.front=_.back=_.top=_.bottom=_.csg=E},validate:function(x,w){var i=this,Z=i.gv,n=i.data,h=ee(i.s),R=Sc(n,Z.getMat(n),h?i.s("shape3d.scaleable"):!0);if(i.clear(),x){var t=[];h?vj(Z,n,h,i.s,i.getBodyColor(),[R],x,t):(Fk(Z,n,x,w,R,Bg,t,Ol),Fk(Z,n,x,w,R,Bk,t,El),Fk(Z,n,x,w,R,wi,t,gs),Fk(Z,n,x,w,R,_g,t,tb),Fk(Z,n,x,w,R,$,t,xg),Fk(Z,n,x,w,R,rj,t,vm)),t.length&&(_e(x.vs,t),_e(x.ns,co(t)))}else i.mat=R,(i.shapeModel=h)||(i.vf(Bg),i.vf(Bk),i.vf($),i.vf(rj),i.vf(wi),i.vf(_g))},vf:function(T){var t=this;if(t.gv.getFaceVisible(t.data,T)){var l=Kf(t,T);return l.mat&&(t.faceMat=!0),l}},_80o:function(L,a,l){var G=this,i=G.gv,e=G.data,F=i._cube,d=G.shapeModel;db(i,G.mat),d?Qp(i,e,d,G.s,G.getBodyColor(),l):(ts(L,F.vs,E,a.aPosition),ts(L,F.ns,E,a.aNormal),jo(L,F.is),G._18O(L,a,G.left,0,l),G._18O(L,a,G.front,6,l),G._18O(L,a,G.right,12,l),G._18O(L,a,G.back,18,l),G._18O(L,a,G.top,24,l),G._18O(L,a,G.bottom,30,l)),fj(i),G.faceMat&&(G._18O(L,a,G.left,0,l,!0),G._18O(L,a,G.front,6,l,!0),G._18O(L,a,G.right,12,l,!0),G._18O(L,a,G.back,18,l,!0),G._18O(L,a,G.top,24,l,!0),G._18O(L,a,G.bottom,30,l,!0))},_18O:function(z,D,Z,$,C,Y){if(Z){if(!C(Z.transparent))return;if(Y&&!Z.mat||!Y&&Z.mat)return;Y&&db(this.gv,Z.mat);var J=this,T=J.data,c=J.gv,n=c.getTexture(Z.texture,T),O=Z.uv,R=Z.uvScale,d=Z.uvOffset,u=Z.discardSelectable;if(n)if(O){for(var r=8*($/6),K=0;8>K;K++)Ee[r+K]=O[K];Ej(z,D,n,u,c._buffer.uv,Ee,d,R)}else Ej(z,D,n,u,c._cube.uv,E,d,R);eg(z,D,Z.blend,Z.light,Z.opacity,Z.reverseFlip,Z.reverseColor,Z.reverseCull),Ah(z,D.uDiffuse,Z.color),Gm(z,$,6),Tb(z,D),Ci(z,D,n),Y&&fj(c)}}});var fi=function(T,s){zo(fi,this,[T,s])};fo(fi,An,{_25Q:1,validate:function(w){var j=this,O=j.gv,z=j.data,p=j.s,l=p("edge.width"),n=z._40I,a=z._41I;if(j.shapeModel=j.info=E,n&&a){var M,o,J,R,c,V,T,L,$,b,_=z.isLooped(),I=p(_m),x=m.getEdgeType(I);if(x){var D=x(z,aj(j,O,z,_,I),O,j._19Q);if(!D.points||D.points.isEmpty())return;V=j.info={},T=D.segments,c=D.points,L=c.size();for(var Q=n.getElevation(),Y=a.getElevation(),Z=0;L>Z;Z++){var W=c.get(Z);W.e==E&&(W.e=Q+(Y-Q)*Z/(L-1))}$=oe(c.get(0)),b=oe(c.get(L-1));var U=L%2;0===U?(V.c1=oe(c.get(L/2-1)),V.c2=oe(c.get(L/2))):V.p3=oe(c.get((L-U)/2)),V.s1=$,V.s2=oe(c.get(1)),V.t1=oe(c.get(L-2)),V.t2=b}else{c=new dj,V=j.info={};var d=p("edge.offset"),r=p("edge.center"),C=p("edge.source.t3"),u=p("edge.target.t3"),v=n.p3(),y=a.p3();if(C&&(v[0]+=C[0],v[1]+=C[1],v[2]+=C[2]),u&&(y[0]+=u[0],y[1]+=u[1],y[2]+=u[2]),I===Jl){T=p("edge.segments");var P=V.points=p(Hj)||mq;if(L=P.size()){$=oe(P.get(0)),b=oe(P.get(L-1)),!r&&d&&(J=vh($,v,!0),d=S(d,Nq(v,$)),v=[v[0]+J[0]*d,v[1]+J[1]*d,v[2]+J[2]*d],J=vh(y,b,!0),d=S(d,Nq(b,y)),y=[y[0]-J[0]*d,y[1]-J[1]*d,y[2]-J[2]*d]);var U=L%2;0===U?(M=oe(P.get(L/2-1)),o=oe(P.get(L/2))):V.p3=oe(P.get((L-U)/2)),V.s1=v,V.s2=$,V.t1=b,V.t2=y}else!r&&d&&(J=vh(y,v,!0),R=Nq(v,y),d=Hb(d,R),v=[v[0]+J[0]*d,v[1]+J[1]*d,v[2]+J[2]*d],y=[y[0]-J[0]*d,y[1]-J[1]*d,y[2]-J[2]*d]),M=v,o=y;c.add({x:v[0],y:v[2],e:v[1]}),c.addAll(P),c.add({x:y[0],y:y[2],e:y[1]})}else{var F=aj(j,O,z,_,I);if(j._19Q||(F=-F),_){var t=v[0],s=v[1],N=v[2],G=n.getTall()/2+F;M=[t-F,s+G,N],o=[t+F,s+G,N],c.add({x:t-F,y:N,e:s}),c.add({x:t-F,y:N,e:s+G}),c.add({x:t+F,y:N,e:s+G}),c.add({x:t+F,y:N,e:s})}else{J=vh(y,v,!0),R=Nq(v,y);var g={x:v[0],y:v[2]},H={x:y[0],y:y[2]},i=Dh(E,g,H,F),k=i.x-g.x,e=i.y-g.y;d=Hb(d,R),J[0]*=d,J[1]*=d,J[2]*=d,M=[v[0]+J[0]+k,v[1]+J[1],v[2]+J[2]+e],o=[y[0]-J[0]+k,y[1]-J[1],y[2]-J[2]+e],r?(c.add({x:v[0],y:v[2],e:v[1]}),c.add({x:M[0],y:M[2],e:M[1]}),c.add({x:o[0],y:o[2],e:o[1]}),c.add({x:y[0],y:y[2],e:y[1]})):(c.add({x:M[0],y:M[2],e:M[1]}),c.add({x:o[0],y:o[2],e:o[1]}))}}V.c1=M,V.c2=o}V.list=p(Jg)===Ul?j.createTubeModel(c,T,l/2,w):j.createLineModel(c,T,l,"edge","edge.dash")}}});var Vr=function(f,t){zo(Vr,this,[f,t])};fo(Vr,re,{_80o:function(Y,d,c){var l=this,C=l.gv,m=l.shapeModel;db(C,l.mat),m?Qp(C,l.data,m,l.s,l.getBodyColor(),c):(se(l,Y,d,l.left,c),se(l,Y,d,l.front,c),se(l,Y,d,l.right,c),se(l,Y,d,l.back,c),se(l,Y,d,l.top,c),se(l,Y,d,l.bottom,c)),fj(C)},validate:function(z,L){var I,x,W=this,O=W.s,T=W.data,m=T.p3(),Q=T._thickness/2,h=T.isClosePath(),V=T.getPoints(),l=T.getSegments(),g=O(Qe),U=z&&z.uv;if(W.clear(),0>Q)x=W.shapeModel=Yr(V,l,O(hn),O(yj),g,O(lj),T.getTall(),T.getElevation(),h),O(fb)?O("shape3d.image")||delete x.uv:(delete x.vs,delete x.ns,delete x.uv),O("shape3d.top.image")||delete x.top_uv,O("shape3d.bottom.image")||delete x.bottom_uv;else if(O(Jg)===Ul)I=Sh(V,l,g,h),x=W.shapeModel={vs:[]},O("shape3d.image")&&(x.uv=[],x.sum=O(lj)||Xg(I)||1,x.len=0),O(hn)&&!h&&(x.top_vs=[],O("shape3d.top.image")&&(x.top_uv=[])),O(yj)&&!h&&(x.bottom_vs=[],O("shape3d.bottom.image")&&(x.bottom_uv=[])),W._12O(I,Q);else{var i,B,o,a,y,J,q,e,D,w;I=Sh(V,l,g,h),y=W.vf($,U,!1,L),Q&&(J=W.vf(rj,U,!1,L),q=h?E:W.vf(Bg,U,!1,L),e=h?E:W.vf(Bk,U,!1,L),D=W.vf(wi,U,!1,L),w=W.vf(_g,U,!1,L)),Q?W._12O(I,Q):y&&I.forEach(function(N){if(a=N.length,a>0)for(i=N[0],o=1;a>o;o++)B=N[o],W.addV(y.vs,i,B),i=B}),W._20Q(I),z||(y&&(y.ns=co(y.vs),tk(y,"vs"),tk(y,$e)),Q&&(J&&(J.ns=co(J.vs),tk(J,"vs"),tk(J,$e)),q&&(q.ns=co(q.vs),tk(q,"vs"),tk(q,$e)),e&&(e.ns=co(e.vs),tk(e,"vs"),tk(e,$e)),D&&(D.ns=co(D.vs),tk(D,"vs"),tk(D,$e)),w&&(w.ns=co(w.vs),tk(w,"vs"),tk(w,$e))))}var u=W.mat=dc();vi(u,m),mr(u,T.r3(),T.getRotationMode()),vi(u,lr(m)),z&&(Le(W,u,z,x),W.clear())},_20Q:function(d){var t,w,P,H,s,i,Q,j=this,I=j.front,n=j.back,v=j.top,g=j.bottom,y=I?I.tuv:E,S=n?n.tuv:E,Y=v?v.tuv:E,X=g?g.tuv:E,c=0;(y||S||Y||X)&&(t=j.s(lj)||Xg(d)||1,d.forEach(function(m){if(w=m.length,w>0)for(i=m[0],P=1;w>P;P++)Q=m[P],H=c/t,c+=Nq(i,Q),s=c/t,j._14O(I,H,s),j._14O(n,1-s,1-H),j._14O(v,H,s),j._14O(g,H,s),i=Q}))},_14O:function($,i,f){if($){var l=$.uv,B=$.tuv;if(B){if(l)var g=l[0]+(l[6]-l[0])*i,a=l[1]+(l[7]-l[1])*i,T=l[2]+(l[4]-l[2])*i,q=l[3]+(l[5]-l[3])*i,X=l[2]+(l[4]-l[2])*f,p=l[3]+(l[5]-l[3])*f,h=l[0]+(l[6]-l[0])*f,c=l[1]+(l[7]-l[1])*f;else g=i,a=0,T=i,q=1,X=f,p=1,h=f,c=0;B.push(T,q,X,p,h,c,h,c,g,a,T,q)}}},_13O:function(D){var x=D.uv,l=D.tuv;l&&(x?l.push(x[2],x[3],x[4],x[5],x[6],x[7],x[6],x[7],x[0],x[1],x[2],x[3]):l.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(e,b){var U,v,H,y,w,A=this;e.forEach(function(S){if(w=S.length,w>0)for(U={p:S[0],n:!0},y=1;w>y;y++)v=S[y],H=w-1>y?S[y+1]:E,A.addPoint(U,v,H,b,S)})},addPoint:function(G,p,S,_,M){var Y,O,C,Z,e,k,u,L,j,F=this,B=G.p,H=G.f,f=G.b,v=F.s("shape3d.side")||Vg,P=F.s("shape3d.start.angle"),R=F.shapeModel,r=F.data.isClosePath();if(G.n&&(G.n=!1,H=r&&M.length>2?Dh(M[M.length-2],B,p,_):Dh(E,B,p,_),f=Kh(B,H),R?R.top_vs&&F._10O(f,H,v,P,R.top_vs,R.top_uv):(Y=F.left)&&(F.addV(Y.vs,f,H),F._13O(Y))),O=S?Dh(B,p,S,_):r&&M.length>2?Dh(B,p,M[1],_):Dh(B,p,E,_),C=Kh(p,O),R){var $,o,h=R.vs,a=R.uv,c=R.sum;for(a&&($=R.len/c,R.len+=Nq(B,p),o=R.len/c),k=F._9O(f,H,v,P),u=F._9O(C,O,v,P),L=0;v>L;L++)j=L+1,_e(h,k[j]),_e(h,u[L]),_e(h,k[L]),_e(h,u[L]),_e(h,k[j]),_e(h,u[j]),a&&(Z=L/v,e=j/v,a.push($,e,o,Z,$,Z,o,Z,$,e,o,e));!S&&R.bottom_vs&&F._10O(C,O,v,P,R.bottom_vs,R.bottom_uv,!0)}else!S&&(Y=F.right)&&(F.addV(Y.vs,O,C),F._13O(Y)),(Y=F.front)&&F.addV(Y.vs,H,O),(Y=F.back)&&F.addV(Y.vs,C,f),(Y=F.top)&&F.addH(Y.vs,H,O,C,f,!0),(Y=F.bottom)&&F.addH(Y.vs,f,C,O,H);G.p=p,G.f=O,G.b=C},_10O:function(p,n,D,Q,v,u,q){var W,s,r=this,f=r.data,h=r._9O(p,n,D,Q),A=(p.x+n.x)/2,w=(p.y+n.y)/2,j=f.getElevation(),M=0;for(M=0;D>M;M++)q?(_e(v,h[M]),_e(v,h[M+1])):(_e(v,h[M+1]),_e(v,h[M])),_e(v,[A,j,w]),u&&(q?(W=G*(M+1)/D+Q,s=G*M/D+Q):(W=G*M/D+Q,s=G*(M+1)/D+Q),u.push(.5-.5*z(s),.5-.5*C(s),.5-.5*z(W),.5-.5*C(W),.5,.5))},_9O:function(I,O,$,u){for(var V,x,k=this,M=k.data,A=[],e=(I.x+O.x)/2,b=(I.y+O.y)/2,m=M.getTall()/2,h=M.getElevation(),o=0;$>=o;o++)V=G*o/$+u,x=z(V),A.push([e+(I.x-e)*x,h+m*C(V),b+(I.y-b)*x]);return A},addV:function(r,E,e){var l=E.x,U=E.y,C=e.x,k=e.y,X=this.data,F=X.getElevation(),t=X.getTall()/2;r.push(l,F-t,U,C,F-t,k,C,F+t,k,C,F+t,k,l,F+t,U,l,F-t,U)},addH:function(S,W,$,x,c,l){var m=this.data,D=m.getTall()/2,n=m.getElevation()+(l?D:-D);S.push(W.x,n,W.y,$.x,n,$.y,x.x,n,x.y,x.x,n,x.y,c.x,n,c.y,W.x,n,W.y)},vf:function(l,x,U,t){var a,m=this,j=m.gv.getFaceVisible(m.data,l);return(U||j)&&(a=Kf(m,l,t),a.vs=[],a.tuv=j&&(a.texture||x)?[]:E,a.visible=j),a}});var Hr=function(T,J){zo(Hr,this,[T,J])};fo(Hr,An,{_25Q:1,validate:function(r){var G=this,g=G.data,F=G.s,B=g.getPoints(),i=B.size();if(G.shapeModel=G.info=E,i>1){var f=G.info={},O=g.getSegments(),J=g.getThickness(),K=oe(B.get(0)),R=oe(B.get(i-1)),T=i%2;0===T?(f.c1=oe(B.get(i/2-1)),f.c2=oe(B.get(i/2))):f.p3=oe(B.get((i-T)/2)),f.s1=K,f.s2=oe(B.get(1)),f.t1=oe(B.get(i-2)),f.t2=R,f.list=F(Jg)===Ul?G.createTubeModel(B,O,J/2,r):G.createLineModel(B,O,J,"shape.border","shape.dash")}}}),Jh(m,{accordionViewExpandIcon:xs(Ff),accordionViewCollapseIcon:xs(Ff,!0),accordionViewLabelColor:Ii,accordionViewLabelFont:Mi,accordionViewTitleBackground:Me,accordionViewSelectBackground:Ji,accordionViewSelectWidth:3,accordionViewSeparatorColor:o,splitViewDividerSize:1,splitViewDividerBackground:Me,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Xj,rect:[2,2,12,12],background:Ff}]},propertyViewLabelColor:Ro,propertyViewLabelSelectColor:Ii,propertyViewLabelFont:Mi,propertyViewExpandIcon:xs(Lm),propertyViewCollapseIcon:xs(Lm,!0),propertyViewBackground:qs,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Ef,propertyViewColumnLineColor:Ef,propertyViewSelectBackground:Ji,listViewLabelColor:Ro,listViewLabelSelectColor:Ii,listViewLabelFont:Mi,listViewRowLineVisible:!1,listViewRowLineColor:Ef,listViewSelectBackground:Ji,treeViewLabelColor:Ro,treeViewLabelSelectColor:Ii,treeViewLabelFont:Mi,treeViewExpandIcon:xs(Zn),treeViewCollapseIcon:xs(Zn,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Ef,treeViewSelectBackground:Ji,tableViewLabelColor:Ro,tableViewLabelSelectColor:Ii,tableViewLabelFont:Mi,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Ef,tableViewColumnLineColor:Ef,tableViewSelectBackground:Ji,treeTableViewLabelColor:Ro,treeTableViewLabelSelectColor:Ii,treeTableViewLabelFont:Mi,treeTableViewExpandIcon:xs(Zn),treeTableViewCollapseIcon:xs(Zn,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Ef,treeTableViewColumnLineColor:Ef,treeTableViewSelectBackground:Ji,tableHeaderLabelColor:Ro,tableHeaderLabelFont:Mi,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:tn,tableHeaderBackground:qs,tableHeaderMoveBackground:Xf,tableHeaderInsertColor:Ji,tableHeaderSortDescIcon:Hn(Lm,!0),tableHeaderSortAscIcon:Hn(Lm),tabViewTabGap:1,tabViewLabelColor:Ii,tabViewLabelFont:Mi,tabViewTabBackground:Me,tabViewSelectWidth:3,tabViewSelectBackground:Ji,tabViewMoveBackground:Xf,tabViewInsertColor:Ji,toolbarLabelColor:Ro,toolbarLabelSelectColor:Ii,toolbarLabelFont:Mi,toolbarBackground:qs,toolbarSelectBackground:Ji,toolbarItemGap:8,toolbarSeparatorColor:ji},!0);var Xk={translateX:1,sortColumn:1},yr={sortable:1,sortOrder:1,sortFunc:1},Id={focusData:1},vk={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},ld={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Rd=function(P,p){p.add(P),P.hasChildren()&&P.eachChild(function(W){Rd(W,p)})},Kl=function(o,z,q,S,t,F,L,A,u,i,_){var e,l=q.getValueType(),H=q.getAlign();if(q.getEnumValues()){var G=q.toEnumLabel(z),Y=uj||0,U=0,X=F,n=m.getTextSize(S,G).width;return e=bd(q.toEnumIcon(z)),e&&(U=F+uj/2,"center"===H?U+=(A-(Y+n))/2:"right"===H&&(U=U+A-(Y+n)),jl(o,e,U,L+u/2),X=U+uj/2),G!=E&&(e?Nm(o,G,S,t,X,L,A-(X-F),u):Nm(o,G,S,t,F,L,A,u,H)),void 0}return z=q.formatValue(z),z!=E?l===fm?(mo(o,F,L,A,u,z),void 0):l===Tk||!l&&_o(z)?(e=bd(z?Fl:Wd),jl(o,e,F+A/2,L+u/2,i,_),void 0):(Nm(o,z,S,t,F,L,A,u,H),void 0):void 0},$o=function(k,G){var V=G.view,Z=V.getDataModel().getHistoryManager(),H=Cc(k),M=G.column||G.property;Z&&Z.beginInteraction(),G.editor=k,k.info=G,V.setCurrentEditor(k),V.getView().insertBefore(H,V._79O),ud(k,G.editorRect),k.setFocus?k.setFocus():oq(k),k.commitValue=function(){k._17Q&&(k=k._17Q),V.setValue(G.data,M,k.getValue?k.getValue():k.value),k.close&&k.close(),Bc(H)},M.onEditorCreated&&M.onEditorCreated(G)},Er=function(Q,r,u,W,S){var n=Bs(Q,u),O=r.value,t=r.view,g=S.getValueType();return n.onblur=n.onchange=function(){t.endEditing()},"input"===Q?(O=S.formatValue(O),O!=E&&(n.value=O),n.onkeydown=function(i){zd(i)&&t.endEditing()},(g===qd||g===fk)&&n.addEventListener(Yo,m.numberListener,!1)):Q===Fp&&W.forEach(function(m){var i=f.createElement("option");i.innerHTML=S.toEnumLabel(m),i.value=m,S.isEnumEqual(O,m)&&(i.selected=!0),Gn(n,i)}),$o(n,r),n},Dj=O.widget={},gb=function(w,V,z){fo(Z+".widget."+w,V,z)};Jh(vo,{ms_value:function(F){F.getValue=function(y){var R=this.getItemById(y),S=R.element;return S?S.getValue?S.getValue():S.value:R.selected},F.setValue=function(J,b){var K=this.getItemById(J),T=K.element;T?T.setValue?T.setValue(b):T.value=b:(K.selected=b,this.iv())},F.v=function(I,k){var e=this;if(2===arguments.length)e.setValue(I,k);else{if(!ui(I))return e.getValue(I);for(var n in I)e.setValue(n,I[n])}return e}},_46o:function(y){y._icon=E,y._accessType=E,y._valueType=E,y._editable=!1,y._batchEditable=!0,y._align=Bg,y._nullable=!0,y._emptiable=!1,y.setParent=Cb,y.formatValue=function(x){var P=this,i=P._valueType;if(P.getEnumValues())return P.toEnumLabel(x);if(i===Tk)return!!x;if(x!=E){if(i===qd)return g(x);if(fr(x))return cd(x)}return x},y.setEnum=function(R,V,g,D,u,A){var p=this;R&&R.values&&(D=R.editable,g=R.icons,V=R.labels,u=R.strict,A=R.maxHeight,R=R.values),ke(R)&&(R=R._as),ke(V)&&(V=V._as),ke(g)&&(g=g._as),p._enumValues=R,p._enumLabels=V,p._enumIcons=g,p._enumEditable=D,p._enumStrict=u==E?!0:u,p._enumMaxHeight=A,R&&R.length&&fr(R[0])&&(p._valueType=fk),p.fp("enum",!1,!0)
},y.getEnumMaxHeight=function(){return this._enumMaxHeight},y.isEnumEditable=function(){return this._enumEditable},y.getEnumValues=function(){return this._enumValues},y.getEnumLabels=function(){return this._enumLabels},y.getEnumIcons=function(){return this._enumIcons},y.isEnumStrict=function(){return this._enumStrict},y.isEnumEqual=function(T,K){return this._enumStrict?T===K:T==K},y.toEnumLabel=function(r){var h=this,l=h._enumValues,f=h._enumLabels;if(l&&f)for(var E=0;E<l.length;E++)if(h.isEnumEqual(r,l[E]))return f[E];return r},y.toEnumIcon=function(w){var G=this,f=G._enumValues,L=G._enumIcons;if(f&&L)for(var P=0;P<f.length;P++)if(G.isEnumEqual(w,f[P]))return L[P];return o}},_45o:function(n){n._87o=function(e,I,k,O,n,d){if(e){var q=this,v=q._90I,w=Vd(1);q._columnLineVisible&&(n-=1),q._rowLineVisible&&(d-=1),0>=n||0>=d||(q._90I||(v=q._90I={}),v[I]||(v[I]=new dj),ud(w,q.tx()+k,q.ty()+O,n,d),Gn(w,e),q._view.insertBefore(w,q._79O),e.onParentAdded&&e.onParentAdded(w),v[I].add(w))}},n._76o=function(){var l=this,P=l._90I;if(P){for(var V in P)P[V].each(function(s){Bc(s)});delete l._90I}},n._77o=function(p){var V=this;if(V._90I){var F=V._90I[p];F&&(F.each(function(n){Bc(n)}),delete V._90I[p])}}},_47o:function(s){s.getValue=function(K,m){return m.getValue?m.getValue(K,m,this):Zq(K,m.getAccessType(),m.getName())},s.setValue=function(y,f,B){if(f.isEmptiable()||""!==B||(B=o),f.isNullable()||B!=E){var I=this,a=f.getName(),d=f.getAccessType(),j=f.getValueType();j===qd&&lh(B)?B=v(B):j===fk&&lh(B)?B=parseFloat(B):j===Tk&&lh(B)&&(B="true"===B),I._batchEditable&&f._batchEditable&&I.isSelected(y)?I.sm().each(function(P){f.setValue?f.setValue(P,f,B,I):ep(P,d,a,B)}):f.setValue?f.setValue(y,f,B,I):ep(y,d,a,B)}},s.setCurrentEditor=function(f){this.endEditing(),this._currentEditor=f,this.redraw()},s.isEditing=function(G,X){var L=this,Q=L._currentEditor;if(!Q)return!1;if(X){var M=Q.info;return M?(M.column||M.property)===X&&M.data===G:!1}return!0},s.endEditing=function(){var r=this,c=r._currentEditor,e=r.getDataModel().getHistoryManager();c&&(delete r._currentEditor,c.commitValue&&c.commitValue(c.info),r.redraw(),e&&e.endInteraction())},s.beginEditing=function(L){this.endEditing();var o=this,l=L.column||L.property;if(l.beginEditing)l.beginEditing(L);else{var m=L.data,B=L.value,W=o.getSelectBackground(m),H=l.getEnumValues(),a=l.getSlider(),F=l.getColorPicker();if(a){var y=Fd(Dj.Slider,a);return y.setValue(B),y.getView().onblur=function(){o.endEditing()},y.isInstant()&&(y.onValueChanged=function(){o.setValue(m,l,y.getValue())}),$o(y,L),void 0}if(F||l.getValueType()===fm){var N=Fd(Dj.ColorPicker,F);return N.setValue(B),N.onClosed=function(){o.endEditing()},N.isInstant()&&(N.onValueChanged=function(R,C){o.setValue(m,l,C)}),$o(N,L),N.open(),void 0}if(H){if(Dj.ComboBox){var e=new Dj.ComboBox;e.setValue(B),e.setValues(H),e.setLabels(l.getEnumLabels()),e.setIcons(l.getEnumIcons()),e.setEditable(l.isEnumEditable()),e.setStrict(l.isEnumStrict()),e.setMaxHeight(l.getEnumMaxHeight()),e.onClosed=function(){o.endEditing()},$o(e,L),e.open()}else Er(Fp,L,W,H,l);return}var f=l.getValueType();if(f===Tk||_o(B))return o.setValue(m,l,!B),void 0;if(l.getItemEditor()){var v=Aj(l.getItemEditor()),c=new v(m,l,o,L),X=c.getView();return X._17Q=c,c.setValue(B),qq(X),$o(X,L),c.editBeginning&&c.editBeginning(),void 0}Er("input",L,W,E,l)}}},_44o:function(Q){Q.init=function(t){var C=this,E=C.th=new hp(t),w=C._view=Vd(1);C.tv=C._tableView=t,Gn(w,E.getView()),Gn(w,t.getView()),E.mp(function(F){F.property===Kn&&C.iv()}),C.iv()},Q.getTableView=function(){return this.tv},Q.getTableHeader=function(){return this.th},Q.getDataModel=function(){return this.tv.dm()},Q.getColumnModel=function(){return this.tv.getColumnModel()},Q.setColumns=function(y){this.tv.setColumns(y)},Q.addColumns=function(N){this.tv.addColumns(N)},Q.endEditing=function(){this.tv.endEditing()},Q.validateImpl=function(){var y=this,l=y.th,K=ng(l),m={x:0,y:0,width:y.getWidth(),height:K};ud(l,m),m.y=K,m.height=t(0,y.getHeight()-K),ud(y.tv,m)}},ms_vs:function(v){v._41o=function(){return this._29I.height<this._59I},v._43o=function(){var o=this;o._41o()&&(o._58I||(B(function(){o._94O()},Qo),o.iv()),o._58I=new Date)},v._94O=function(){var x=this;if(x._58I){var I=new Date;I.getTime()-x._58I.getTime()>=Qo?(delete x._58I,x.iv()):B(function(){x._94O()},Qo)}},v._93I=function(){var j=this,g=j._27I;if(j._58I||!j._autoHideScrollBar){g||Gn(j._79O,g=j._27I=Vd());var L=j._29I,s=L.height,z=j._59I,i=j.getScrollBarSize(),D=L.width-i-2,t=s*(-j.ty()/z),x=s*(s/z),A=g.style;z>s?(mn>x&&(t=t+x/2-mn/2,0>t&&(t=0),t+mn>s&&(t=s-mn),x=mn),A.visibility=ip,A.background=j.getScrollBarColor(),A.borderRadius=i/2+Rk,ud(g,D,t,i,x)):A.visibility=zj}else g&&(g.style.visibility=zj)}},ms_hs:function(s){s._40o=function(){return this._29I.width<this._91I},s._42o=function(){var w=this;w._40o()&&(w._95O||(B(function(){w._94I()},Qo),w.iv()),w._95O=new Date)},s._94I=function(){var e=this;if(e._95O){var h=new Date;h.getTime()-e._95O.getTime()>=Qo?(delete e._95O,e.iv()):B(function(){e._94I()},Qo)}},s._92I=function(){var J=this,w=J._28I;if(J._95O||!J._autoHideScrollBar){w||Gn(J._79O,w=J._28I=Vd());var S=J._29I,o=S.width,v=J._91I,c=J.getScrollBarSize(),r=S.height-c-2,$=o*(-J.tx()/v),I=o*(o/v),u=w.style;v>o?(mn>I&&($=$+I/2-mn/2,0>$&&($=0),$+mn>o&&($=o-mn),I=mn),u.visibility=ip,u.background=J.getScrollBarColor(),u.borderRadius=c/2+Rk,ud(w,$,r,I,c)):u.visibility=zj}else w&&(w.style.visibility=zj)}}}),Ri(Fl,tp(16,16,[{type:_j,rect:[1,1,14,14],background:Ji},{type:Lj,rect:[1,1,14,14],width:1,color:ds},{type:Pf,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Ri(Wd,tp(16,16,{type:Lj,rect:[1,1,14,14],width:1,color:ds})),Ri(jf,tp(16,16,[{type:jj,rect:[2,2,12,12],borderWidth:1,borderColor:ds,background:"#FFF"},{type:jj,rect:[4,4,8,8],background:Ji}])),Ri(qb,tp(16,16,{type:jj,rect:[2,2,12,12],borderWidth:1,borderColor:ds})),vo._15Q=function(k){k._29I=Uk,k._59I=0,k._91I=0,k._5o=function(I){var p=this;p._30I=new dj,p._rows=new dj,p._rowMap={},p._31I=0,p._14I=0,p._view=Vd(1),p._canvas=Fi(p._view),Gn(p._view,p._79O=Vd()),p.dm(I?I:new ib)},k.getCheckIcon=function(q){var Y=this.sm(),L=Y.co(q);return Y.sg()?bd(L?jf:qb):bd(L?Fl:Wd)},k.checkData=function(y){var b=this.sm(),N=b.co(y);b.sg()&&N||(this._32o=1,N?b.rs(y):b.as(y),delete this._32o)},k.getDataAt=function(F){F.target&&(F=this.lp(F));var L=q(F.y/this._rowHeight),c=this._rows;return 0>L||L>=c.size()?E:c.get(L)},k.onDataDoubleClicked=function(){},k.onDataClicked=function(){},k.adjustTranslateX=function(){return 0},k.adjustTranslateY=function(y){var c=this.getHeight()-this._59I;return c>y&&(y=c),y>0?0:g(y)},k.onPropertyChanged=function(g){var b=this,z=g.property;vk[z]?b.ivm():Id[z]||b.redraw(),z===gn?b._42o():z===lk&&b._43o()},k.getLabel=function(h){return h.toLabel()},k.getLabelFont=function(){return this._labelFont},k.getLabelColor=function(G){var H=this;if(H.isCheckMode()){if(H._focusData===G)return H._labelSelectColor}else if(H.isSelected(G))return H._labelSelectColor;return H._labelColor},k.getStartRowIndex=function(){return this._31I},k.getEndRowIndex=function(){return this._14I},k.getRowDatas=function(){return this._rows},k.getRowIndex=function(Z){return this._rowMap[Z._id]},k.getRowSize=function(){return this._rows.size()},k.getViewRect=function(){return Pc(this._29I)},k.isVisible=function(g){return this._visibleFunc?this._visibleFunc(g):!0},k.getCurrentSortFunc=function(){return this._sortFunc},k.setDataModel=function(P){var A=this,S=A._dataModel,x=A._3o;S!==P&&(S&&(S.umm(A.handleDataModelChange,A),S.umd(A.handleDataPropertyChange,A),S.umh(A._15o,A),x||S.sm().ums(A._16o,A)),A._dataModel=P,P.mm(A.handleDataModelChange,A),P.md(A.handleDataPropertyChange,A),P.mh(A._15o,A),x?x._21I(P):P.sm().ms(A._16o,A),A.fp("dataModel",S,P))},k.validateModel=function(){var z=this;z._rows.clear(),z._rowMap={},z.buildChildren(z._dataModel._roots);var B=z._rows=z._rows.toList(z.isVisible,z),P=0,v=z.getCurrentSortFunc(),Z=B.size();for(v&&B.sort(v);Z>P;P++)z._rowMap[B.get(P)._id]=P},k.buildChildren=function(S){var C=this;S.each(function(e){C._rows.add(e),C.buildChildren(e._children)})},k.handleDataModelChange=function(){this.ivm()},k.handleDataPropertyChange=function(j){"parent"===j.property?this.ivm():this.invalidateData(j.data)},k._15o=function(){this.ivm()},k._16o=function(i){i.datas.each(this.invalidateData,this),this.onSelectionChanged(i)},k.onSelectionChanged=function(Z){var u=this,w=u.sm();!u.isAutoMakeVisible()||1!==w.size()||"set"!==Z.kind&&"append"!==Z.kind||u._32o||u.makeVisible(w.ld())},k.makeVisible=function(S){S&&(this._23I=S,this.iv())},k.scrollToIndex=function(t){var y=this,w=y._29I,P=w.height,x=y._rowHeight,b=x*t;t>=0&&t<y._rows.size()&&P>0&&(b+x>w.y+P?y.ty(-b+P-x):b<w.y&&y.ty(-b))},k.ivm=function(){this.invalidateModel()},k.invalidateModel=function(){var W=this;W._96I||(W._96I=1,W._32I=1,delete W._24I,W.iv())},k.redraw=function(){var K=this;K._32I||(K._32I=1,delete K._24I,K.iv())},k.invalidateData=function(I){var S=this;i?S.redraw():S._32I||(S._24I||(S._24I={}),S._24I[I._id]=I,S.iv())},k.getFocusData=function(){return this._focusData},k.setFocusDataById=function(c){this.setFocusData(this.dm().getDataById(c))},k.setFocusData=function(x){var $=this,U=$._focusData;U!==x&&($._focusData=x,$.fp("focusData",U,x),U&&$.invalidateData(U),x&&($.invalidateData(x),$.isAutoMakeVisible()&&$.makeVisible(x)))},k.drawRowBackground=function(Q,w,P,b,F,E,p){var B=this,T=B.isCheckMode();(w===B._focusData&&T||P&&!T)&&mo(Q,b,F,E,p,B.getSelectBackground(w))},k.drawData=function(F,$,U){var W=this,n=W._rowHeight,y=n*U,X=W._29I,m=X.x,x=X.width;F.save(),F.beginPath(),F.rect(m,y,x,n),F.clip(),W._87o(W.drawRow(F,$,W.isSelected($),m,y,x,n),U,m,y,x,n),F.restore(),W._rowLineVisible&&mo(F,m,y+n-1,x,1,W._rowLineColor)},k._12I=function(B){var o=this,r=o._31I,k=o._29I,F=k.x,c=k.y,f=k.width,x=k.height;for(B.beginPath(),B.rect(F,c,f,x),B.clip(),B.clearRect(F,c,f,x),o._76o(),o._93db(B);r<o._14I;r++)o.drawData(B,o._rows.get(r),r);o._92db(B)},k._13I=function(h){for(var p,Z=this,d=Z._rowHeight,$=Z._29I,u=$.x,T=$.width,y=Z._31I,q=Z._30I;y<Z._14I;y++)p=Z._rows.get(y),Z._24I[p._id]&&q.add({data:p,index:y});q.isEmpty()||(h.beginPath(),q.each(function(K){h.rect(u,K.index*d,T,d)}),h.clip(),q.each(function(t){h.clearRect(u,t.index*d,T,d)}),q.each(function(j){Z._77o(j.index)}),Z._93db(h),q.each(function(T){Z.drawData(h,T.data,T.index)}),Z._92db(h),q.clear())},k.validateImpl=function(){var D=this,z=D._canvas,j=D.getWidth(),Q=D.getHeight(),A=D._rowHeight,O=D._32I;(j!==z.clientWidth||Q!==z.clientHeight)&&(Wr(z,j,Q),O=1);var w=K&&!y;D._96I&&!w&&D.validateModel();var r=D._29I,c={x:-D.tx(),y:-D.ty(),width:j,height:Q},b=D._rows.size(),Z=Wn(z),m=D._23I;O||cm(c,r)||(O=1),D._29I=c,D._59I=b*A,D._31I=q(c.y/A),D._14I=N((c.y+c.height)/A),D._31I<0&&(D._31I=0),D._14I>b&&(D._14I=b),D._99I&&O&&D._99I(),Xh(Z,D.tx(),D.ty(),1),O?D._12I(Z):D._24I&&D._13I(Z),D._93I(),D._92I(),Z.restore(),D._32I=D._24I=D._96I=E,m&&(D.scrollToIndex(D.getRowIndex(m)),delete D._23I),D.tx(D.tx()),D.ty(D.ty())}},vo._48o=function(Z){Z._rootVisible=!0,Z._rootData=E,Z._35o=function(){this._expandMap={},this._levelMap={}},Z.validateModel=function(){var o=this,D=o._rootData;o._rows.clear(),o._levelMap={},o._rowMap={},o._currentLevel=0,D?o._rootVisible?o.isVisible(D)&&o.buildData(D):o.buildChildren(D):o.buildChildren(),delete o._currentLevel},Z.buildData=function(v){var W=this,X=v._id,Q=W._rows;W._rowMap[X]=Q.size(),Q.add(v),W._levelMap[X]=W._currentLevel,W.isExpanded(v)&&(W._currentLevel++,W.buildChildren(v),W._currentLevel--)},Z.buildChildren=function(w){var y=this,U=w?w._children:y._dataModel._roots,G=y.getCurrentSortFunc();G&&y.isChildrenSortable(w)?U.toList(y.isVisible,y).sort(G).each(y.buildData,y):U.each(function(H){y.isVisible(H)&&y.buildData(H)})},Z.getLevel=function(V){return this._levelMap[V._id]},Z.getToggleIcon=function(D){var c=this,z=c._loader,v=c._collapseIcon;return z&&!z.isLoaded(D)?v:D.hasChildren()?c.isExpanded(D)?c._expandIcon:v:E},Z.isCheckMode=function(){return this._checkMode!=E},Z.isChildrenSortable=function(){return!0},Z.handleDataModelChange=function(U){var T=this;U.kind===Hg?delete T._expandMap[U.data._id]:U.kind===Ql&&(T._expandMap={}),T.ivm()},Z.toggle=function(Y){var e=this;e.isExpanded(Y)?e.collapse(Y):e.expand(Y)},Z.isExpanded=function(P){return 1===this._expandMap[P._id]},Z.expand=function(o){var q=this,F=q._loader;q.isExpanded(o)||(F&&!F.isLoaded(o)&&F.load(o),q._expandMap[o._id]=1,q.ivm(),q.onExpanded(o))},Z.onExpanded=function(){},Z.collapse=function(T){var f=this;f.isExpanded(T)&&(delete f._expandMap[T._id],f.ivm(),f.onCollapsed(T))},Z.onCollapsed=function(){},Z.expandAll=function(){var D=this;D._dataModel.each(function(K){K.hasChildren()&&(D._expandMap[K._id]=1)}),D.ivm()},Z.collapseAll=function(){this._expandMap={},this.ivm()},Z.makeVisible=function(Y){if(Y){var Z=this;if(!Z._rootData||Y.isDescendantOf(Z._rootData)){for(var t=Y._parent;t;)Z.expand(t),t=t._parent;Z._23I=Y,Z.iv()}}},Z.checkData=function(J){var i,Z=this,h=Z._checkMode,b=Z.sm(),P=b.co(J);if(!b.sg()||!P){if(Z._32o=1,h===w)P?b.rs(J):b.as(J);else if(h===ki)i=new dj(J),i.addAll(J._children);else if("descendant"===h)i=new dj,Rd(J,i);else if("all"===h&&(i=new dj,Rd(J,i),!P))for(var R=J._parent;R;)i.add(R),R=R._parent;i&&(P?b.rs(i):b.as(i)),delete Z._32o}},Z._97I=function(D,L,o,c,a,C,t){var G=this,n=G._indent,H=G._levelMap[L._id],x=G.getIconWidth(L),T=bd(G.getToggleIcon(L));T?(c+=n*H,jl(D,T,c+n/2,a+t/2,L,G),c+=n):c+=n*(H+1),G._checkMode&&(jl(D,G.getCheckIcon(L),c+n/2,a+t/2,L,G),c+=n),G.drawIcon(D,L,c,a,x,t),G.drawLabel(D,L,c+x,a,t)}},vo._14Q=function(o){o.getIcon=function(K){return K.getIcon()},o.getIconWidth=function(F){return this.getIcon(F)?this._indent:0},o.drawIcon=function(C,E,Y,U,y,h){if(y){var f=this,O=f.getBodyColor(E),L=bd(f.getIcon(E),O);L&&(h-=f.isRowLineVisible()?1:0,hr(C,L,ae,Y,U,y,h,E,f,O),Ip(C,f.getBorderColor(E),Y,U,y,h))}},o.drawLabel=function(m,r,q,i,A){var I=this;Nm(m,I.getLabel(r),I.getLabelFont(r),I.getLabelColor(r),q,i,0,A)}},vo._50o=function(k){k._98I=function(){var p=this,q=p._39o=new ib;p._60I=new dj,q.mm(p._17o,p),q.md(p._18o,p),q.mh(p._19o,p)},k.setColumns=function(L){this._39o.clear(),this.addColumns(L)},k.addColumns=function(y){var J=this._39o;y.forEach(function(p){if(!(p instanceof Rf)){var _=Aj(p.className);p=Fd(_?_:Rf,p)}J.add(p)})},k.onColumnClicked=function(){},k.onCheckColumnClicked=function(){},k._3Q=function(S){for(var b,K=0,R=this._60I,g=R.size();g>K;K++)if(b=R.get(K),b.column===S)return b;return E},k.getColumnAt=function(J){var p=this._4Q(J);return p?p.column:E},k._4Q=function(o){for(var p=this,v=o.target?p.lp(o).x:o.x,G=p._60I,$=0;$<G.size();$++){var s=G.get($),z=s.startX;if(v>=z&&v<z+s.column.getWidth())return s}return E},k.getToolTip=function(F){var Q=this,x=Q.getDataAt(F),M=Q.getColumnAt(F);return x&&M?M.getToolTip(x,Q):E},k.adjustTranslateX=function(m){var Q=this.getWidth()-this._91I;return Q>m&&(m=Q),m>0?0:g(m)},k._99I=function(){var l=this,p=l._29I,q=l._60I;q.clear(),l._91I=0,l._39o._roots.each(function(z){if(z.isVisible()){var b=l._91I+z.getWidth();l._91I<=p.x+p.width&&b>=p.x&&q.add({column:z,startX:l._91I}),l._91I=b}})},k.drawData=function(m,B,H){var u=this,l=u._rowHeight,d=l*H,Z=u.isSelected(B),G=u._29I,$=G.x,I=G.width;u.drawRowBackground(m,B,Z,$,d,I,l),u._60I.each(function(C){var Q=C.column,K=C.startX,V=Q.getWidth();V>0&&!u.isEditing(B,Q)&&(m.save(),m.beginPath(),m.rect(K,d,V,l),m.clip(),u._87o(u.drawCell(m,B,Z,Q,K,d,V,l),H,K,d,V,l),u._columnLineVisible&&mo(m,K+V-1,d,1,l,u._columnLineColor),m.restore())}),u._rowLineVisible&&mo(m,$,d+l-1,I,1,u._rowLineColor)},k.drawCell=function(c,q,_,N,z,u,p,l){var E=this;if(N.drawCell)return N.drawCell(c,q,_,N,z,u,p,l,E);var b=E.getValue(q,N);Kl(c,b,N,E.getLabelFont(q,N,b),E.getLabelColor(q,N,b),z,u,p,l,q,E)},k.getColumnModel=function(){return this._39o},k._17o=function(){this.redraw()},k._18o=function(A){var g=this;A.data===g._sortColumn&&yr[A.property]?g.ivm():(g._42o(),g.redraw())},k._19o=function(){this.redraw()},k.getCurrentSortFunc=function(){var $=this,x=$._sortColumn;if(x&&x.isSortable()){var O=x.getSortFunc(),A=yb===x.getSortOrder()?1:-1;return O||(O=zk),function(R,G){return O.call($,$.getValue(R,x),$.getValue(G,x),R,G)*A}}return $._sortFunc},k.isCellEditable=function(M,Y){return Y.isEditable()&&this.isEditable()},k._37O=function(w,x){if(_k(x))for(var R=this,h=R.lp(x),G=R._60I,s=R._rowHeight,B=R._29I,r=B.x,W=B.y,F=B.width,Z=B.height,u=0;u<G.size();u++){var d=G.get(u),o=d.startX,_=d.column,S=_.getWidth();if(_!==R._31o&&_!==R._4o&&R.isCellEditable(w,_)&&h.x>=o&&h.x<o+S){var C={x:o,y:R.getRowIndex(w)*s,width:S,height:s},g={x:C.x+R.tx(),y:C.y+R.ty(),width:C.width,height:C.height},L=0,K=0;return C.x<r?L=C.x-r:C.x+C.width>r+F&&(L=C.x+C.width-r-F),L&&(R.tx(R.tx()-L),g.x-=L),C.y<W?K=C.y-W:C.y+s>W+Z&&(K=C.y+s-W-Z),K&&(R.ty(R.ty()-K),g.y-=K),R.beginEditing({data:w,column:_,value:R.getValue(w,_),event:x,rect:C,editorRect:g,view:R}),void 0}}}},Dj.BaseItemEditor=function(P,Z,m,H){this._data=P,this._column=Z,this._master=m,this._editInfo=H},gb("BaseItemEditor",Q,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Ek=O.Tab=function(){zo(Ek,this)};Pi("Tab",Lq,{ms_ac:["view","closable","disabled"],_icon:E,_closable:!1,_disabled:!1,setParent:Cb});var Rf=O.Column=function(){zo(Rf,this)};Pi("Column",Lq,{_46o:1,ms_ac:["accessType","valueType",ip,Wk,Ok,jm,"align",fm,"sortOrder",ug,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:yb,_sortFunc:E,_sortable:!0,setWidth:function(q){16>q&&(q=16);var v=this._width;this._width=q,this.fp(jm,v,q)},getToolTip:function(b,l){return this.formatValue(l.getValue(b,this))}});var Be=O.Property=function(){zo(Be,this)};Pi("Property",Lq,{_46o:1,ms_ac:["accessType","valueType",Wk,Ok,"categoryName",fm,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:E,getToolTip:function(B,K,c){var I=this;return K?I.formatValue(c.getValue(B,I)):c.getPropertyName(I)}}),Dj.AccordionView=function(){var o=this;o._20o={},o._21o=new dj,o._10o=E,o._9o=E,o._11o=E,o._view=Vd(),o.iv()},gb("AccordionView",Q,{ms_v:1,ms_fire:1,ms_ac:[gf,ih,"titleHeight",wh,Zd,"titleBackground","selectWidth",_n,"orientation","separatorColor"],_expandIcon:m.accordionViewExpandIcon,_collapseIcon:m.accordionViewCollapseIcon,_titleHeight:kh,_labelColor:m.accordionViewLabelColor,_labelFont:m.accordionViewLabelFont,_titleBackground:m.accordionViewTitleBackground,_selectBackground:m.accordionViewSelectBackground,_selectWidth:m.accordionViewSelectWidth,_orientation:"v",_separatorColor:m.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(u,$,O,S){var c=this,i=Vd();if(c._20o[u])throw u+" already exists";i.onmousedown=Bi,i.style.cursor=cg,i.addEventListener(Y?Pm:Nd,function($){Bi($)},!1),i.addEventListener(Y?Rq:Wo,function(O){Bi(O),_k(O)&&(c._10o===u?c.collapse():c.expand(u))},!1),Gn(c._view,i),c._20o[u]={content:$,div:i,canvas:Fi(i),icon:S},c._21o.add(u),O&&c.expand(u),c.iv()},remove:function(A){var S=this,e=S._20o[A];e&&(Bc(e.div),delete S._20o[A],S._21o.remove(A),S.iv())},clear:function(){var B=this;B._20o={},B._21o.clear(),B.iv()},isExpanded:function(E){return this._10o===E},expand:function(s){var l=this;l._20o[s]&&l._10o!==s&&(l._10o=s,l.onExpanded(s),l.iv())},onExpanded:function(){},collapse:function(){var d=this;d._10o&&(d.onCollapsed(d._10o),delete d._10o,d.iv())},onCollapsed:function(){},initCanvas:function(N,G,_){Wr(N,G,_);var Y=Wn(N);return Xh(Y,0,0,1),Y.clearRect(0,0,G,_),Y},drawTitle:function(q,r,M,g,Y){var _=this,H=bd(Y.icon),k=_.isExpanded(r),a=_._titleHeight,Z=_._titleBackground,V=_._selectWidth,z=_._separatorColor,c=bd(k?_._expandIcon:_._collapseIcon),D=V+4;mo(q,0,0,M,g,Z),k&&V&&mo(q,0,0,V,g,_._selectBackground),(k||_._21o.get(_._21o.size()-1)!==r)&&mo(q,0,g-1,M,1,z?z:dm(Z)),H&&(jl(q,H,D+si(H)/2,a/2),D+=si(H)+2),Nm(q,r,_.getLabelFont(r),_.getLabelColor(r),D,0,0,a),c&&jl(q,c,M-si(c)/2-4,a/2)},validateImpl:function(){var $=this,K=$._view,Q=0,h=0,j=$.getWidth(),l=$.getHeight(),p=$._titleHeight,v=$._21o.size()*p,c=$._11o,N=$._9o;delete $._11o,delete $._9o,$._21o.each(function(X){var r,k,f=$._20o[X],R=f.content,m=$._10o===X;ri($)?(ud(f.div,Q,0,p,l),r=$.initCanvas(f.canvas,p,l),ml(r,0,l),ub(r,-F),$.drawTitle(r,X,l,p,f),r.restore(),m?(k=t(0,j-v),R&&($._11o=R,$._9o=Cc(R),ud(R,Q+p,0,k,l)),Q+=p+k):Q+=p):(ud(f.div,0,h,j,p),r=$.initCanvas(f.canvas,j,p),$.drawTitle(r,X,j,p,f),r.restore(),m?(k=t(0,l-v),R&&($._11o=R,$._9o=Cc(R),ud(R,0,h+p,j,k)),h+=p+k):h+=p)});var A=$._9o;c&&c!==$._11o&&c.endEditing&&c.endEditing(),A&&A!==N&&Gn(K,A),N&&N!==A&&Bc(N)}}),Dj.SplitView=function(V,S,J,r){var g=this,x=g._dividerDiv=Vd(),H=g._60O=Fi(),d=g._61O=Fi(),U=H.style,_=d.style;g._view=Vd(1),Gn(g._view,x),U.msTouchAction=ic,U.pointerEvents=ic,U.cursor=cg,_.msTouchAction=ic,_.pointerEvents=ic,_.cursor=cg,V&&g.setLeftView(V),S&&g.setRightView(S),J&&g.setOrientation(J),r!=E&&g.setPosition(r),g.setStatus(Ap),new lq(g)},gb("SplitView",Q,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:m.splitViewDividerSize,_dividerBackground:m.splitViewDividerBackground,_dragOpacity:m.splitViewDragOpacity,_toggleIcon:m.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(H,$){var n=this,Q=n._position;isNaN(H)||($||(n._82O=0>H?-1:H>1?1:0),n._position=H,n.fp(pj,Q,H))},getLeftView:function(){return this._leftView},setLeftView:function(l){var f=this,M=f._leftView,U=f._view;if(f._leftView!==l){if(M&&M!==f._rightView){var y=Cc(M);y.parentNode===U&&Bc(y)}if(f._leftView=l,l){var C=Cc(l);C.parentNode!==U&&U.insertBefore(C,f._dividerDiv)}f.fp("leftView",M,l)}},getRightView:function(){return this._rightView},setRightView:function(L){var K=this,I=K._rightView,j=K._view;if(K._rightView!==L){if(I&&I!==K._leftView){var C=Cc(I);C.parentNode===j&&Bc(C)}if(K._rightView=L,L){var q=Cc(L);q.parentNode!==j&&j.insertBefore(q,K._dividerDiv)}K.fp("rightView",I,L)}},validateImpl:function(){var f=this,P=f._draggable,j=f._position,C=f.getWidth(),X=f.getHeight(),y=f._dividerSize,Q=f._dividerBackground,I=Y?18:8,k=f._dividerDiv,n=f._82O,M=f._60O,B=f._61O,U=f._toggleIcon,s=f._status,p=k.style,S=null,W=Y?20:4,D=U.comps[0];y>=I||0===y?f._coverDiv&&(Bc(f._coverDiv),delete f._coverDiv):f._coverDiv||(f._coverDiv=Vd(),_&&(f._coverDiv.style.background=Xp),Gn(k,f._coverDiv)),f._togglable?M.parentNode||(Gn(k,M),Gn(k,B)):(Bc(M),Bc(B));var v=f._coverDiv,c=f._leftView,d=f._rightView;if(ri(f)){if(y>C&&(y=C),s===Ap)if(1===n)var T=j,z=t(0,C-y-T);else-1===n?(z=-j,T=t(0,C-y-z)):(T=g((C-y)*j),z=t(0,C-y-T));else"cl"===s?(T=0,z=t(0,C-y)):"cr"===s&&(z=0,T=t(0,C-y));c&&ud(c,0,0,T,X),d&&ud(d,T+y,0,z,X),ud(k,T,0,y,X),f._22o=T,v&&(ud(v,y/2-I/2,0,I,X),v.style.cursor=P?en:""),k.style.cursor=P?en:"";var x=k.clientHeight/2,J=k.clientWidth;Wr(M,J,J),ud(M,0,x-J-W,J,J),S=Wn(M),Xh(S,0,0,1),D.rotation=-F,dn(S,U,0,0,J,J),S.restore(),Wr(B,J,J),ud(B,0,x+W,J,J),S=Wn(B),Xh(S,0,0,1),D.rotation=F,dn(S,U,0,0,J,J),S.restore()}else{if(y>X&&(y=X),s===Ap)if(1===n)var w=j,h=t(0,X-y-w);else-1===n?(h=-j,w=t(0,X-y-h)):(w=g((X-y)*j),h=t(0,X-y-w));else"cl"===s?(w=0,h=t(0,X-y)):"cr"===s&&(h=0,w=t(0,X-y));c&&ud(c,0,0,C,w),d&&ud(d,0,w+y,C,h),ud(k,0,w,C,y),f._22o=w,v&&(ud(v,0,y/2-I/2,C,I),v.style.cursor=P?Hf:""),p.cursor=P?Hf:"";var V=k.clientWidth/2,J=k.clientHeight;Wr(M,J,J),ud(M,V-J-W,0,J,J),S=Wn(M),Xh(S,0,0,1),D.rotation=0,dn(S,U,0,0,J,J),S.restore(),Wr(B,J,J),ud(B,V+W,0,J,J),S=Wn(B),Xh(S,0,0,1),D.rotation=r,dn(S,U,0,0,J,J),S.restore()}p.background=Q}});var lq=function(L){this.sv=L,this.addListeners()};fo(lq,Q,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(j){var $=this,c=$.sv,Z=c._dividerDiv,n=c._60O,w=c._61O,e=c._status,I=j.target;if(I===n)e===Ap?c.setStatus("cl"):"cr"===e&&c.setStatus(Ap);else if(I===w)e===Ap?c.setStatus("cr"):"cl"===e&&c.setStatus(Ap);else if(Rg(j)&&(I===Z||I===c._coverDiv)&&(Bi(j),c.isDraggable())){$.resizeDiv=Vd();var h=$.resizeDiv.style,F=Z.style,g=c.getLeftView(),W=c.getRightView();$._maskViews=[],[g,W].forEach(function(R){R=R.getView?R.getView():R;var I=Vd(),A=I.style;A.left=R.style.left,A.top=R.style.top,A.width=R.offsetWidth+"px",A.height=R.offsetHeight+"px",c.getView().appendChild(I),$._maskViews.push(I)}),h.left=F.left,h.top=F.top,h.width=F.width,h.height=F.height,h.opacity=c.getDragOpacity(),h.background=c.getDividerBackground(),$._85o=$._86o=ri(c)?kf(j).x:kf(j).y,Gn($.getView(),$.resizeDiv),$._clientPoint=kf(j),De($,j)}},handleWindowTouchMove:function(d){if(Rg(d)){var m=this,h=m.sv,V=h._dividerSize,$=m.resizeDiv.style,s=h.getWidth(),q=h.getHeight(),O=h._22o-m._86o;ri(h)?(m._85o=kf(d).x,O+=m._85o,O>s-V&&(O=s-V),0>O&&(O=0),$.left=O+Rk):(m._85o=kf(d).y,O+=m._85o,O>q-V&&(O=q-V),0>O&&(O=0),$.top=O+Rk)}},handleWindowTouchEnd:function(Z){var O=this,X=O.sv,f=X._22o-O._86o+O._85o,G=X._dividerSize,l=ri(X)?X.getWidth():X.getHeight(),Y=X._82O,U=Nq(O._clientPoint,kf(Z));U>1&&(X.setStatus(Ap),0>f&&(f=0),f>l-G&&(f=l-G),l!==G&&(1===Y?X.setPosition(f,1):-1===Y?X.setPosition(f-l+G,1):X.setPosition(f/(l-G),1))),O._maskViews&&O._maskViews.forEach(function(f){Bc(f)}),Bc(O.resizeDiv),O.resizeDiv=O._85o=O._clientPoint=E},handle_mousedown:function(U){_k(U)&&this.handle_touchstart(U)},handleWindowMouseMove:function(l){this.handleWindowTouchMove(l)},handleWindowMouseUp:function(Q){this.handleWindowTouchEnd(Q)}}),Dj.TabView=function(){var q=this,t=q._view=Vd(1),U=q._91O=Vd(1),S=q._tabModel=new ib,i=S.sm(),Y=q.invalidate;q._7o=new dj,q._canvas=Fi(U),Gn(t,U),Gn(t,q._92O=Vd(1)),i.setSelectionMode(A),i.ms(Y,q),S.mm(Y,q),S.md(Y,q),S.mh(Y,q),new nb(q),q.iv()},gb("TabView",Q,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",wh,Zd,"tabBackground","selectWidth",_n,"moveBackground","insertColor"],_tabPosition:wi,_tabHeight:kh,_tabGap:m.tabViewTabGap,_labelColor:m.tabViewLabelColor,_labelFont:m.tabViewLabelFont,_tabBackground:m.tabViewTabBackground,_selectWidth:m.tabViewSelectWidth,_selectBackground:m.tabViewSelectBackground,_moveBackground:m.tabViewMoveBackground,_insertColor:m.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(f,V,d){var n=new Ek,x=this._tabModel;return n.setName(f),n.setView(V),x.add(n),d&&x.sm().ss(n),n},getLabel:function(h){return h.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(H){this._23o=H,this.iv()},get:function(D){var a=this,$=a._tabModel;if(fr(D))return $._roots.get(D);if(lh(D)){var o;return $.each(function(E){D===a.getLabel(E)&&(o=E)}),o}return D instanceof Ek?D:E},select:function(N){this._tabModel.sm().ss(this.get(N))},remove:function(y){var Q=this;if(y=Q.get(y)){var D=Q._tabModel,q=D._roots.indexOf(y);Q._tabModel.remove(y),Q._12Q(--q)}},getCurrentTab:function(){return this._8o},hideTabView:function(j,g){g.parentNode===this._92O&&(zq(g)?(g.style.display=Lg,g._tab_=j):Bc(g),Bb())},showTabView:function(G,t){zq(t)&&(t.style.display="block",t._tab_=G),t.parentNode!==this._92O&&(Gn(this._92O,t),Bb())},_24o:function(){var E,I=this,G=I._8o,w=I._9o,n=I._tabModel.sm().ld();n&&(E=Cc(n.getView())),E!==w&&(w&&(G.getView().endEditing&&G.getView().endEditing(),I.hideTabView(G,w)),E&&I.showTabView(n,E)),I._8o=n,I._9o=E,G!==n&&I.onTabChanged(G,n)},onTabChanged:function(){},onTabClosed:function(U,i){this._12Q(--i)},_12Q:function(S){var m=this,a=m._tabModel,g=a.size();if(g&&!a.sm().ld()){S==E&&(S=0),S>=g&&(S=g-1),0>S&&(S=0);for(var l=S;l>=0;l--){var H=m.get(l);if(!H.isDisabled())return m.select(H),H}for(l=S+1;g>l;l++)if(H=m.get(l),!H.isDisabled())return m.select(H),H}},_9Q:function(q){var w=4,Q=bd(q.getIcon());Q&&(w+=si(Q,q)+4);var X=this.getLabel(q);return X&&(w+=gj(this.getLabelFont(q),X).width+4),q.isClosable()&&(w+=10),w},_10Q:function(Z,s,x,K,v,i,g){var e,M=this,y=M._tabPosition,L=x+4,G=M._selectWidth,P=bd(s.getIcon()),k=s.isDisabled(),O=M.getLabelColor(s),q=M.getLabelFont(s),$=M.getLabel(s),R=M._selectBackground,c=y===Bg+"-vertical",B=y===Bk+"-vertical";(c||B)&&(L=K+4),k&&(Z.globalAlpha=pn),mo(Z,x,K,v,i,g),s===M._8o&&G&&(y===wi?mo(Z,x,K+i-G,v,G,R):y===Bg?mo(Z,x+v-G,K,G,i,R):y===Bk?mo(Z,x,K,G,i,R):c?mo(Z,x+v-G,K,G,i,R):B?mo(Z,x,K,G,i,R):mo(Z,x,K,v,G,R));var A=v/2;if(c&&(ml(Z,A,K+i/2),ub(Z,r),ml(Z,-A,-K-i/2)),P){var D=tl(P,s),N=si(P,s);if(c||B){var X=x+v/2,V=L+D/2;ml(Z,X,V),ub(Z,F),ml(Z,-X,-V),jl(Z,P,x+v/2,L+D/2,s,M),ml(Z,X,V),ub(Z,-F),ml(Z,-X,-V),L+=D+4}else jl(Z,P,L+N/2,K+i/2,s,M),L+=N+4}return c||B?(ml(Z,v/2,L+v/2),ub(Z,F),ml(Z,-v/2,-L-v/2),Nm(Z,$,q,O,x,L,i,v),ml(Z,v/2,L+v/2),ub(Z,-F),ml(Z,-v/2,-L-v/2)):Nm(Z,$,q,O,L,K,v,i),c&&(ml(Z,A,K+i/2),ub(Z,-r),ml(Z,-A,-K-i/2)),s.isClosable()&&(Z.strokeStyle=O,Z.lineWidth=1,Z.beginPath(),B?(Z.moveTo(x+v-10,K+i-4),Z.lineTo(x+v-4,K+i-10),Z.moveTo(x+v-4,K+i-4),Z.lineTo(x+v-10,K+i-10),Z.stroke(),e={x:x+v-12,y:K+i-12,width:12,height:12}):(Z.moveTo(x+v-10,K+4),Z.lineTo(x+v-4,K+10),Z.moveTo(x+v-4,K+4),Z.lineTo(x+v-10,K+10),Z.stroke(),e={x:x+v-12,y:K,width:12,height:12})),k&&(Z.globalAlpha=1),e},validateImpl:function(){var n=this;n._24o();var K,y=n._canvas,l=n._tabPosition,B=n._91O,W=n._92O,H=n._tabModel,T=n.getWidth(),G=n.getHeight(),N=n._tabHeight,L=n._7o,$=n._tabGap,F=l===wi,i=l===Bg,E=l===_g,e=l===Bk,s=l===Bg+"-vertical",D=l===Bk+"-vertical",c=n._23o,X=0;if((i||e)&&H._roots.each(function(w){X=t(n._9Q(w),X)}),F?(ud(B,0,0,T,N),K={x:0,y:N,width:T,height:t(0,G-N)}):i?(ud(B,0,0,X,G),K={x:X,y:0,width:t(0,T-X),height:G}):e?(ud(B,T-X,0,X,G),K={x:0,y:0,width:t(0,T-X),height:G}):s?(ud(B,0,0,N,G),K={x:N,y:0,width:t(0,T-N),height:G}):D?(ud(B,T-N,0,N,G),K={x:0,y:0,width:t(0,T-N),height:G}):(ud(B,0,G-N,T,N),K={x:0,y:0,width:T,height:t(0,G-N)}),ud(W,K),s||D){n._9o&&(K.x=0,ud(n._8o.getView(),K)),Wr(y,N,G);var d=Wn(y),A=0;if(Xh(d,0,n.ty(),1),d.clearRect(0,0,N,G),L.clear(),H._roots.each(function(w){var F,x=n._9Q(w);c&&c.tab===w||(F=n._10Q(d,w,0,A,N,x,n._tabBackground),F&&D&&(F.x=T-12)),L.add({_75o:F,tab:w,startY:A,endY:A+x,height:x}),A+=x+$}),n._23Q=t(0,A-$),c){var O=c.position;n._10Q(d,c.tab,0,c.startY,N,c.height,n._moveBackground),mo(d,0,O,N,1,n._insertColor)}d.restore(),n.ty(n.ty())}else if(i||e){n._9o&&(K.x=0,ud(n._8o.getView(),K)),Wr(y,X,G);var d=Wn(y),A=0;if(Xh(d,0,n.ty(),1),d.clearRect(0,0,X,G),L.clear(),H._roots.each(function(x){var M;c&&c.tab===x||(M=n._10Q(d,x,0,A,X,N,n._tabBackground),M&&e&&(M.x=T-12)),L.add({_75o:M,tab:x,startY:A,endY:A+N,height:N}),A+=N+$}),n._23Q=t(0,A-$),c){var O=c.position;n._10Q(d,c.tab,0,c.startY,X,c.height,n._moveBackground),mo(d,0,O,X,1,n._insertColor)}d.restore(),n.ty(n.ty())}else{n._9o&&(K.y=0,ud(n._8o.getView(),K)),Wr(y,T,N);var d=Wn(y),o=0;if(Xh(d,n.tx(),0,1),d.clearRect(0,0,T,N),L.clear(),H._roots.each(function(Y){var I,h=n._9Q(Y);c&&c.tab===Y||(I=n._10Q(d,Y,o,0,h,N,n._tabBackground),I&&E&&(I.y=G-N)),L.add({_75o:I,tab:Y,startX:o,endX:o+h,width:h}),o+=h+$}),n._64I=t(0,o-$),c){var O=c.position;n._10Q(d,c.tab,c.startX,0,c.width,N,n._moveBackground),wd(d,n._insertColor,O,0,N)}d.restore(),n.tx(n.tx())}for(var Y=[],U=W.children,_=0;_<U.length;_++){var J=U[_],z=J._tab_;z&&!H.contains(z)&&Y.push(J)}Y.forEach(function(A){W.removeChild(A)})}});var nb=function(T){this.tv=T,this.addListeners()};fo(nb,Q,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(g){this.handleScroll(g,10*(g.wheelDelta/40))},handle_DOMMouseScroll:function(o){this.handleScroll(o,10*-o.detail)},handleScroll:function(y,C){Bi(y);var t=this.tv,E=t._tabPosition;!t._40o()||E!==wi&&E!==_g||t.tx(this.tv.tx()+C),!t._41o()||E!==Bg&&E!==Bk&&E!==Bg+"-vertical"&&E!==Bk+"-vertical"||t.ty(this.tv.ty()+C)
},_8Q:function(U){var c,g,N=this.tv,G=N._tabPosition,A=N._7o;if(G===wi||G===_g){var V=N.lp(U).x;for(c=0;c<A.size();c++)if(g=A.get(c),g.startX<=V&&V<=g.endX)return g}else if(G===Bg||G===Bk||G===Bg+"-vertical"||G===Bk+"-vertical"){var o=N.lp(U).y;for(c=0;c<A.size();c++)if(g=A.get(c),g.startY<=o&&o<=g.endY)return g}return E},isClickable:function(R){var q=this.tv,l=q._tabPosition,Q=this._73o=this._8Q(R);return!q._40o()||l!==wi&&l!==_g?!q._41o()||l!==Bg&&l!==Bk&&l!==Bg+"-vertical"&&l!==Bk+"-vertical"?Q&&(!Q.tab.isDisabled()||q.isMovable()):!0:!0},handle_mousemove:function(r){var V=this;En?V._74o=V._8Q(r):V.getView().style.cursor=V.isClickable(r)?cg:""},handle_mousedown:function(K){this.handle_mousemove(K),this.handle_touchstart(K)},handle_touchstart:function(l){var w=this,h=w.tv,b=h._tabPosition;Bi(l),w.isClickable(l)&&(b===wi||b===_g?(w.x=kf(l).x,w.lp=h.lp(l),w.tx=h.tx()):(w.y=kf(l).y,w.lp=h.lp(l),w.ty=h.ty()),De(w,l))},handleWindowMouseMove:function(e){this.handleWindowTouchMove(e)},handleWindowTouchMove:function(q){var e,k=this,I=k.tv,m=I._tabPosition,X=k._73o;if(m===wi||m===_g){if(e=kf(q).x-k.x,!k._25o&&!k.moving&&n(e)>2&&(I._40o()&&!bj(q)?k._25o=1:X&&I.isMovable()&&(k.moving=1)),k._25o)I.tx(k.tx+e);else if(k.moving){var c=k.lp.x+e,h=I._tabGap/2;I._7o.each(function(y){var G=y.endX,_=c-y.startX<G-c;c>=y.startX&&G>=c&&I._7Q({tab:X.tab,startX:X.startX+e,width:X.width,front:_,insertTab:y.tab,position:_?t(0,y.startX-h):S(I._64I,G+h)})})}}else if(e=kf(q).y-k.y,!k._25o&&!k.moving&&n(e)>2&&(I._41o()&&!bj(q)?k._25o=1:X&&I.isMovable()&&(k.moving=1)),k._25o)I.ty(k.ty+e);else if(k.moving){var i=k.lp.y+e,h=I._tabGap/2;I._7o.each(function(w){var V=w.endY,Y=i-w.startY<V-i;i>=w.startY&&V>=i&&I._7Q({tab:X.tab,startY:X.startY+e,height:X.height,front:Y,insertTab:w.tab,position:Y?t(0,w.startY-h):S(I._23Q,V+h)})})}},handleWindowMouseUp:function(A){this.handleWindowTouchEnd(A)},handleWindowTouchEnd:function(){var O=this,$=O.tv,g=$._tabPosition,T=$.getTabModel(),r=T._roots,V=O._73o;if(O.moving){var L=$._23o;if(L&&L.insertTab!==L.tab){var x=L.tab,e=r.remove(x),A=r.indexOf(L.insertTab);A>=0&&(L.front||A++,A<=r.size()&&(r.add(x,A),T._38I(x,e,A)))}$._7Q(E),delete O.moving}else if(!O._25o&&V){x=V.tab;var M=O._74o;if(!M||M.tab===x)if(!x.isDisabled()&&tm(V._75o,O.lp)){var Y=r.indexOf(x);T.remove(x),$.onTabClosed(x,Y)}else x.isDisabled()||$._8o===x||T.sm().ss(x)}O._25o=O._73o=O._74o=g===wi||g===_g?O.x=O.lp=O.tx=E:O.y=O.lp=O.ty=E}}),Dj.PropertyView=function(m){var V=this;V._view=Vd(1),V._canvas=Fi(V._view),Gn(V._view,V._79O=Vd()),V._rows=new dj,V._28o=new dj,V._26o={},V._26Q={};var w=V._propertyModel=new ib,o=V.ivm;w.mm(o,V),w.md(o,V),w.mh(o,V),V.dm(m?m:new ib),new ho(V)},gb("PropertyView",Q,{ms_ac:[wh,uc,Zd,Wk,Ok,"categorizable",Kk,ug,Oj,gf,ih,js,Ak,kp,"selectRowIndex",_n,"background",Ig,Uo,sj,xk,Sr],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Uk,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:uj,_background:m.propertyViewBackground,_expandIcon:m.propertyViewExpandIcon,_collapseIcon:m.propertyViewCollapseIcon,_scrollBarColor:ah,_scrollBarSize:kg,_autoHideScrollBar:Zb,_selectBackground:m.propertyViewSelectBackground,_rowHeight:Or,_rowLineVisible:m.propertyViewRowLineVisible,_rowLineColor:m.propertyViewRowLineColor,_10I:.5,_columnLineVisible:m.propertyViewColumnLineVisible,_columnLineColor:m.propertyViewColumnLineColor,_labelColor:m.propertyViewLabelColor,_labelSelectColor:m.propertyViewLabelSelectColor,_labelFont:m.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(_){0>_&&(_=0),_>1&&(_=1);var S=this,w=S._10I;S._10I=_,S.fp("columnPosition",w,_)},getPropertyName:function(N){return N.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(t,i,T){return T===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(D,i){return i===this._selectRowIndex?this._labelSelectColor:D.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(R){var j=this.getHeight()-this._59I;return j>R&&(R=j),R>0?0:g(R)},isExpanded:function(H){if(!H)return!0;var A=this._26o[H];return A?A.isExpanded:!(this._26Q[H]===!1)},toggle:function(L){var J=this;J.isExpanded(L)?J.collapse(L):J.expand(L)},expandAll:function(){this.validate();for(var Q in this._26o)this.expand(Q)},expand:function(j){if(j&&j!==Lg){var b=this,e=b._26o[j];e&&!e.isExpanded&&(e.isExpanded=!0,b.onExpanded(j),b.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var X in this._26o)this.collapse(X)},collapse:function(L){if(L&&L!==Lg){var j=this,T=j._26o[L];T&&T.isExpanded&&(T.isExpanded=!1,j.onCollapsed(L),j.ivm())}},onCollapsed:function(){},getCategoryName:function(F){if(!this.isCategorizable())return Lg;var u=F.getCategoryName();return u?u:Lg},getPropertyModel:function(){return this._propertyModel},setDataModel:function(V){var P=this,j=P._dataModel;j!==V&&(j&&(j.umd(P.handlePropertyChange,P),P._3o||j.sm().ums(P.ivm,P)),P._dataModel=V,V.md(P.handlePropertyChange,P),P._3o?P._3o._21I(V):V.sm().ms(P.ivm,P),P.fp(ro,j,V))},isVisible:function(Z){return this._visibleFunc?this._visibleFunc(Z):!0},onPropertyChanged:function(B){var S=this,Y=B.property;ld[Y]?S.ivm():S.iv(),Y===lk&&S._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:mq},handlePropertyChange:function(Q){this._27o===Q.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var s=this;s._96I||(s.setSelectRowIndex(-1),s._96I=1,s.iv())},redraw:function(){this.iv()},validateModel:function(){var p=this,R=p._rows,$=p._28o,J={},S=new dj,X=p._27o;p.updateCurrentData(),X!==p._27o&&p.endEditing(),R.clear(),$.clear(),p.getRawProperties().each(function(m){if(p.isVisible(m)){S.add(m);var q=p.getCategoryName(m);J[q]||($.add(q,q===Lg?0:o),J[q]={isExpanded:p.isExpanded(q),properties:new dj})}}),p._sortFunc&&S.sort(p._sortFunc);for(var E in p._26o)p._26Q[E]=p.isExpanded(E);p._26o=J,$.each(function(n){n!==Lg&&R.add(n);var M=J[n];M.isExpanded&&S.each(function(j){p.getCategoryName(j)===n&&(M.properties.add(j),R.add({property:j,data:p._27o}))},p)})},validateImpl:function(){var u=this;u._76o(),u._96I&&(u.validateModel(),delete u._96I);var v=u._canvas,n=u.getWidth(),H=u.getHeight(),$=-u.ty(),S=u._rowHeight,j=u._indent,x=n-j,W=u._rows,k=W.size(),J=u._9I=j+x*u._10I,O=u._59I=k*S;Wr(v,n,H),u._29I={x:0,y:$,width:n,height:H},u._31I=q($/S),u._14I=N(($+H)/S),u._31I<0&&(u._31I=0),u._14I>k&&(u._14I=k);var c,I=Wn(v),r=u._background;Xh(I,0,-$,1),I.beginPath(),I.rect(0,$,n,H),I.clip(),I.clearRect(0,$,n,H),u._93db(I),r&&mo(I,0,0,j,O,r);for(var h=u._31I;h<u._14I;h++){var K=W.get(h),$=S*h;if(lh(K))r&&mo(I,j,$,x,S,r),c=bd(u.isExpanded(K)?u._expandIcon:u._collapseIcon),c&&hr(I,c,ae,0,$,j,S),I.save(),I.beginPath(),I.rect(j,$,x,S),I.clip(),u.drawCategoryName(I,K,h,j,$,x,S),I.restore();else{var B=K.property,w=K.data,c=bd(B.getIcon()),V=u._selectRowIndex===h?u.getSelectBackground():E;if(c&&hr(I,c,ae,0,$,j,S),V&&mo(I,j,$,x,S,V),I.save(),I.beginPath(),I.rect(j,$,J-j,S),I.clip(),u.drawPropertyName(I,B,h,j,$,J-j,S),I.restore(),!u.isEditing(w,B)){var G=J+1,R=n-J-1;I.save(),I.beginPath(),I.rect(G,$,R,S),I.clip(),u._87o(u.drawPropertyValue(I,B,u.getValue(w,B),h,G,$,R,S,w),h,G,$,R,S),I.restore()}}u._rowLineVisible&&mo(I,j,$+S-1,x,1,u._rowLineColor)}u._columnLineVisible&&(mo(I,J,0,1,O,u._columnLineColor),mo(I,n-1,0,1,O)),u._92db(I),u._93I(),I.restore(),u.ty(u.ty())},drawCategoryName:function(n,Q,g,b,Y,v,O){Nm(n,Q,this.getCategoryFont(Q),this.getCategoryColor(Q),b,Y,v,O)},drawPropertyName:function(Z,$,f,N,e,j,M){return $.drawPropertyName?($.drawPropertyName(Z,$,f,N,e,j,M,this),void 0):(Nm(Z,this.getPropertyName($),this.getPropertyFont($,f),this.getPropertyColor($,f),N,e,j,M),void 0)},drawPropertyValue:function(w,s,R,o,J,q,L,a,x){return s.drawPropertyValue?s.drawPropertyValue(w,s,R,o,J,q,L,a,x,this):(Kl(w,R,s,this.getLabelFont(s,R,o),this.getLabelColor(s,R,o),J,q,L,a,x,this),void 0)},isPropertyEditable:function(g){return g.isEditable()&&this.isEditable()},setProperties:function(n){this._propertyModel.clear(),this.addProperties(n)},addProperties:function(W){if(W){var Z=this._propertyModel;W.forEach(function(T){if(!(T instanceof Be)){var B=Aj(T.className);T=Fd(B?B:Be,T)}Z.add(T)})}},getRowIndexAt:function(o){var B=this,H=q(B.lp(o).y/B._rowHeight);return H>=0&&H<B._rows.size()?H:-1},getPropertyAt:function(z){var o=this,S=o.getRowIndexAt(z);return S>=0?o._rows.get(S).property:E},getToolTip:function(U){var G=this,b=G.getPropertyAt(U),k=G._27o;return b&&k?b.getToolTip(k,G._9I<G.lp(U).x,G):E}});var ho=function(m){this.pv=m,this.addListeners()};fo(ho,Q,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(G){this.getView().style.cursor=G},clear:function(){var c=this;c._62O=c.cp=c.ty=c.p=E,c.setCursor(w)},handle_mousedown:function(v){this.handle_touchstart(v)},handle_touchstart:function(Y){var t=this,W=t.pv;Bi(Y),W.setFocus(Y)&&(_k(Y)?(t.cp=kf(Y),t.ty=W.ty(),t.p=W.getColumnPosition(),t.handle_touchmove(Y)):W.setSelectRowIndex(W.getRowIndexAt(Y)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(P){this.handle_touchend(P)},handle_touchend:function(k){var n=this;if(n.cp&&!n._62O){var H=n.pv,B=H.lp(k),F=B.x,d=B.y,E=H._indent,p=H.getRowIndexAt(k),$=H._9I;if(p>=0){var g=H._rowHeight,t=g*p,z=H._rows.get(p),m=z.property;if(lh(z))bd(H.isExpanded(z)?H._expandIcon:H._collapseIcon)&&F>=0&&E>=F&&d>=t&&t+g>=d?H.toggle(z):ne(k)&&H.toggle(z);else if(F>$&&H.isPropertyEditable(m)){var i={x:$+1,y:t,width:H.getWidth()-$-1,height:g},x={x:i.x+H.tx(),y:i.y+H.ty(),width:i.width,height:i.height},h=0,R=H._29I;i.y<R.y?h=i.y-R.y:i.y+g>R.y+R.height&&(h=i.y+g-R.y-R.height),h&&(H.ty(H.ty()-h),x.y-=h),H.beginEditing({data:z.data,property:m,value:H.getValue(z.data,m),event:k,rect:i,editorRect:x,view:H})}}H.setSelectRowIndex(p)}n.clear()},handleWindowMouseMove:function(F){this.handleWindowTouchMove(F)},handleWindowTouchMove:function(B){var n=this,T=n.pv,l=n.ty,r=n.cp,c=kf(B),O=n._62O;if("p"===O)T.setTranslateY(l+c.y-r.y);else if("c"===O){var $=T.getWidth()-T._indent;if($>16){var U=n.p-(r.x-c.x)/$,b=16/$;b>U&&(U=b),U>1-b&&(U=1-b),T.setColumnPosition(U)}}else"s"===O&&T.setTranslateY(l+(r.y-c.y)*T._59I/T._29I.height)},handle_mousemove:function(Z){this.handle_touchmove(Z)},handle_touchmove:function(s){if(!En&&_k(s)){var _=this,W=_.pv,l=n(W.lp(s).x-W._9I)<=(Y?8:3);_.cp?_._62O||(l?(_._62O="c",De(_)):n(kf(s).y-_.cp.y)>=2&&(_._62O=_.isV(s)?"s":"p",De(_))):(l?_.setCursor(en):_.setCursor(w),_.isV(s)&&W._43o())}},isV:function(H){var M=this.pv,q=M._29I;return M._41o()&&q.x+q.width-M.lp(H).x<hi},handle_mousewheel:function(j){this.handleScroll(j,j.wheelDelta/40)},handle_DOMMouseScroll:function(j){2===j.axis&&this.handleScroll(j,-j.detail)},handleScroll:function(K,z){var b=this.pv;Bi(K),b.endEditing(),b.translate(0,z*b.getRowHeight())},handle_keydown:function(y){var G=this.pv,f=G._rows.size(),N=G._selectRowIndex+(Tq(y)?-1:1);(Tq(y)||xm(y))&&(0>N&&(N=0),N>=f&&(N=f-1),G.setSelectRowIndex(N))}}),Dj.ListView=function(X){this._5o(X),new Wq(this)},gb("ListView",Q,{ms_ac:[wh,uc,Zd,Ig,Kk,Uo,sj,ug,Oj,js,Ak,kp,Gp,_n],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:uj,_rowHeight:Or,_rowLineVisible:m.listViewRowLineVisible,_rowLineColor:m.listViewRowLineColor,_scrollBarColor:ah,_scrollBarSize:kg,_autoMakeVisible:Nn,_autoHideScrollBar:Zb,_selectBackground:m.listViewSelectBackground,_labelColor:m.listViewLabelColor,_labelSelectColor:m.listViewLabelSelectColor,_labelFont:m.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(m){var k=this,D=k._checkMode;k._checkMode=m,k.fp(wq,D,m)},drawRow:function(U,E,l,_,x,H,e){var c=this,N=0,B=c._indent,q=c.getIconWidth(E);c.drawRowBackground(U,E,l,_,x,H,e),c._checkMode&&(jl(U,c.getCheckIcon(E),N+B/2,x+e/2,E,c),N+=B),c.drawIcon(U,E,N,x,q,e),c.drawLabel(U,E,N+q,x,e)}});var Wq=function(r){this.list=r,this.addListeners()};fo(Wq,Q,{ms_listener:1,getView:function(){return this.list._view},clear:function(C){var y=this;C&&"d"===y._62O&&y.list.handleDragAndDrop(C,"end"),y._62O=y.cp=y.tx=y.ty=E},handle_mousedown:function(K){this.handle_touchstart(K)},handle_touchstart:function(x){var l=this,d=l.list;if(Bi(x),d.setFocus(x))if(l.cp=kf(x),l.tx=d.tx(),l.ty=d.ty(),_k(x))l.isV(x)||l.isH(x)||!d.handleDragAndDrop||d.handleDragAndDrop(x,"prepare");else{var T=d.getDataAt(x);T&&l._33o(x,T),l.clear(x)}},handleWindowMouseUp:function(S){this.clear(S)},handleWindowTouchEnd:function(c){this.clear(c)},handle_mouseup:function(y){this.handle_touchend(y)},handle_touchend:function(I){var z=this,T=z.list;if(z.cp&&!z._62O){var u=T.getDataAt(I);u&&(T.isCheckMode()?z._34o(I,u):z._33o(I,u),ne(I)?T.onDataDoubleClicked(u,I):T.onDataClicked(u,I))}z.clear(I)},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},handleWindowTouchMove:function(U){var D=this,j=D.list,o=D._62O,a=D.tx,n=D.ty,z=D.cp,t=kf(U),x=j._29I;"p"===o?j.setTranslate(a+t.x-z.x,n+t.y-z.y):"v"===o?j.ty(n+(z.y-t.y)*j._59I/x.height):"h"===o?j.tx(a+(z.x-t.x)*j._91I/x.width):"d"===o&&j.handleDragAndDrop(U,"between")},handle_mousemove:function(i){this.handle_touchmove(i)},handle_touchmove:function(e){if(!En&&_k(e)){var v=this,n=v.list,Y=v.isV(e),$=v.isH(e);if(v.cp){if(!v._62O){if(Nq(kf(e),v.cp)<2)return;Y?v._62O="v":$?v._62O="h":n.handleDragAndDrop?(v._62O="d",n.handleDragAndDrop(e,"begin")):v._62O="p",De(v)}}else Y&&n._43o(),$&&n._42o()}},isV:function(f){var O=this.list,w=O._29I;return O._41o()&&w.x+w.width-O.lp(f).x<hi},isH:function(m){var w=this.list,L=w._29I;return w._40o()&&L.y+L.height-w.lp(m).y<hi},handle_mousewheel:function(f){this.handleScroll(f,f.wheelDelta/40,f.wheelDelta!==f.wheelDeltaX)},handle_DOMMouseScroll:function(V){this.handleScroll(V,-V.detail,1)},handleScroll:function(T,Z,C){var L=this.list;Bi(T),L.endEditing&&L.endEditing(),C&&L._41o()?L.translate(0,Z*L.getRowHeight()):L._40o()&&L.translate(10*Z,0)},handle_keydown:function(x){var m,d=this.list,o=d.sm(),I=d._rows,A=I.size();if(dq(x))d.selectAll();else if(Ti(x))d.handleDelete&&d.handleDelete(x);else if(Ei(x))d.isCheckMode()&&(m=d.getFocusData(),m&&d.checkData(m));else if(Tq(x)||xm(x)){var i=d.isCheckMode();if(m=i?d.getFocusData():o.ld()){var r=d.getRowIndex(m);r>=0&&(Tq(x)?0!==r&&(m=I.get(r-1),i?d.setFocusData(m):o.ss(m)):r!==A-1&&(m=I.get(r+1),i?d.setFocusData(m):o.ss(m)))}else A>0&&(m=I.get(0),i?d.setFocusData(m):o.ss(m))}},_34o:function(V,p){var r=this.list,L=r.lp(V).x;return L>=0&&L<=r._indent?(r.checkData(p),void 0):(r.setFocusData(p),void 0)},_33o:function(V,N){var M=this.list,n=M.sm(),J=n.ld();if(bj(V))M.isSelected(N)?n.rs(N):n.as(N);else if(Gg(V))if(J)for(var P=M.getRowIndex(J),$=M.getRowIndex(N);P!==$;)P+=$>P?1:-1,n.as(M._rows.get(P));else n.ss(N);else(_k(V)||!n.contains(N))&&n.ss(N)}}),Dj.TreeView=function(P){var I=this;I._35o(),I._5o(P),new nf(I)},gb("TreeView",Q,{ms_ac:[wh,uc,Zd,"rootVisible",wq,"rootData",ug,Oj,js,Ak,kp,Kk,Ig,Uo,sj,gf,ih,Gp,_n,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:E,_indent:uj,_rowHeight:Or,_rowLineVisible:m.treeViewRowLineVisible,_rowLineColor:m.treeViewRowLineColor,_scrollBarColor:ah,_scrollBarSize:kg,_autoHideScrollBar:Zb,_expandIcon:m.treeViewExpandIcon,_collapseIcon:m.treeViewCollapseIcon,_autoMakeVisible:Nn,_selectBackground:m.treeViewSelectBackground,_labelColor:m.treeViewLabelColor,_labelSelectColor:m.treeViewLabelSelectColor,_labelFont:m.treeViewLabelFont,drawRow:function(F,K,c,C,D,y,t){var l=this;l.drawRowBackground(F,K,c,C,D,y,t),l._97I(F,K,c,0,D,y,t)}});var nf=function(q){zo(nf,this,[q])};fo(nf,Wq,{toggle:function(j,M,X,q){var k=this.list,V=k.lp(j).x;if(bd(k.getToggleIcon(M))){var L=X*q;if(V>=L&&L+X>=V)return k.toggle(M),!0}return ne(j)?(k.toggle(M),!0):!1},_34o:function(H,L){var A=this.list,p=A.lp(H).x,V=A._levelMap[L._id],O=A._indent,U=O*(V+1);return p>=U&&U+O>=p?(A.checkData(L),void 0):(this.toggle(H,L,O,V)||A.setFocusData(L),void 0)},_33o:function(B,z){var $=this,E=$.list;$.toggle(B,z,E._indent,E.getLevel(z))||nf.superClass._33o.call($,B,z)},handle_keydown:function(c){if(Sd(c)||Vn(c)){var T=this.list,X=T._rows,U=T.isCheckMode(),q=T.sm(),I=U?T.getFocusData():q.ld();I?I.hasChildren()&&(Sd(c)?T.collapse(I):T.expand(I)):X.size()>0&&(I=X.get(0),U?T.setFocusData(I):q.ss(I))}else nf.superClass.handle_keydown.call(this,c)}});var Tf=Dj.TableView=function(r){this._98I(),this._5o(r),new yk(this)};gb("TableView",Q,{ms_ac:[wh,uc,Zd,"sortMode",Wk,Ok,Ig,Uo,sj,xk,Sr,"sortColumn",ug,Oj,js,Ak,kp,Gp,_n],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:nl,_editable:!0,_batchEditable:!1,_rowHeight:Or,_rowLineVisible:m.tableViewRowLineVisible,_rowLineColor:m.tableViewRowLineColor,_columnLineVisible:m.tableViewColumnLineVisible,_columnLineColor:m.tableViewColumnLineColor,_scrollBarColor:ah,_scrollBarSize:kg,_autoHideScrollBar:Zb,_autoMakeVisible:Nn,_selectBackground:m.tableViewSelectBackground,_labelColor:m.tableViewLabelColor,_labelSelectColor:m.tableViewLabelSelectColor,_labelFont:m.tableViewLabelFont,getCheckColumn:function(){var I=this;if(!I._31o){var R=I._31o=new Rf;R.setEditable(!0),R.setWidth(40),R.getValue=I.getCheckColumValue,R.drawCell=I.drawCheckColumnCell}return I._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(X){var U=this,i=U._39o,E=U.getCheckColumn();X!==U.isCheckMode()&&(X?i.add(E,0):i.remove(E),U.fp(wq,!X,X))},getCheckColumValue:function(I,y,b){return b.isSelected(I)},drawCheckColumnCell:function(g,F,_,C,D,l,G,M,R){jl(g,R.getCheckIcon(F),D+G/2,l+M/2,F,R)}});var yk=function(z){zo(yk,this,[z])};fo(yk,Wq,{_34o:function(q,S){var p=this.list,n=p._31o;if(p.isCellEditable(S,n)){var e=p._3Q(n),B=p.lp(q).x;if(e&&B>=e.startX&&B<e.startX+n.getWidth())return p.checkData(S),void 0}p.setFocusData(S),p._37O(S,q)},_33o:function(D,v){yk.superClass._33o.apply(this,arguments),this.list._37O(v,D)}});var Fn=Dj.TreeTableView=function(P){var p=this,k=p._4o=new Rf;p._35o(),p._98I(),p._5o(P),k.setDisplayName("Name"),k.setEditable(!0),k.setWidth(180),k.drawCell=Eg,k.getValue=ps,p._39o.add(k),new pf(p)},Eg=function(z,R,P,o,W,C,N,I,Z){Z._97I(z,R,P,W,C,N,I)},ps=function(d,J,F){return F.getLabel(d)};gb("TreeTableView",Q,{ms_ac:[wh,uc,Zd,"sortMode",Wk,Ok,Kk,wq,"rootData","rootVisible",ug,Oj,"sortColumn",gf,ih,js,Ak,kp,Gp,sj,Ig,Uo,xk,Sr,_n,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:nl,_checkMode:E,_editable:!0,_batchEditable:!1,_indent:uj,_rowHeight:Or,_rowLineVisible:m.treeTableViewRowLineVisible,_rowLineColor:m.treeTableViewRowLineColor,_columnLineVisible:m.treeTableViewColumnLineVisible,_columnLineColor:m.treeTableViewColumnLineColor,_expandIcon:m.treeTableViewExpandIcon,_collapseIcon:m.treeTableViewCollapseIcon,_scrollBarColor:ah,_scrollBarSize:kg,_autoHideScrollBar:Zb,_autoMakeVisible:Nn,_selectBackground:m.treeTableViewSelectBackground,_labelColor:m.treeTableViewLabelColor,_labelSelectColor:m.treeTableViewLabelSelectColor,_labelFont:m.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var pf=function(K){zo(pf,this,[K])};fo(pf,Wq,{_34o:function(u,z){var w=this.list,H=w._4o,C=w._3Q(H),Z=w.lp(u).x;if(C){var E=w._indent,$=C.startX+E*w.getLevel(z);if(bd(w.getToggleIcon(z))&&Z>=$&&$+E>=Z)return w.toggle(z),void 0;if(w.isCellEditable(z,H)&&($+=E,Z>=$&&$+E>=Z))return w.checkData(z),void 0}w.setFocusData(z),w._37O(z,u)},_33o:function(o,E){var I=this.list,Z=I.lp(o).x;if(bd(I.getToggleIcon(E))){var P=I._3Q(I._4o);if(P){var n=I._indent,y=P.startX+n*I.getLevel(E);if(Z>=y&&y+n>=Z)return I.toggle(E),void 0}}pf.superClass._33o.apply(this,arguments),I._37O(E,o)}});var hp=Dj.TableHeader=function(R){var z=this,d=z._view=Vd(1),q=z._39o=R.getColumnModel(),y=z.iv;z.tv=z._tableView=R,z._60I=new dj,z._canvas=Fi(d),d.style.background=m.tableHeaderBackground||"",d.style.height=Mh+Rk,q.mm(y,z),q.md(y,z),q.mh(y,z),R.mp(function(v){Xk[v.property]&&z.iv()},z),new yd(z),z.iv()};gb("TableHeader",Q,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",wh,Zd,Kk,"moveBackground","insertColor",xk,Sr,"resizable","movable"],_checkIcon:Wd,_movable:!0,_resizable:!0,_labelColor:m.tableHeaderLabelColor,_labelFont:m.tableHeaderLabelFont,_columnLineColor:m.tableHeaderColumnLineColor,_columnLineVisible:m.tableHeaderColumnLineVisible,_sortDescIcon:m.tableHeaderSortDescIcon,_sortAscIcon:m.tableHeaderSortAscIcon,_moveBackground:m.tableHeaderMoveBackground,_insertColor:m.tableHeaderInsertColor,_indent:uj,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(S){return S.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(Q){return Q.getColor()||this._labelColor},getLabelAlign:function(G){return G._align},onPropertyChanged:function(){this.iv()},_5Q:function(y){this._61I=y,this.iv()},getLogicalPoint:function(Z){return $b(Z,this._canvas,this.tv.tx())},validateImpl:function(){var j=this,V=j._canvas,W=j.getWidth(),S=j.getHeight(),R=j.tv,G=j._60I,d=j._61I,H=-R.tx(),e=0;(W!==V.clientWidth||S!==V.clientHeight)&&Wr(V,W,S),G.clear(),j._39o._roots.each(function(q){if(q.isVisible()){var $=e+q.getWidth();H+W>=e&&$>=H&&G.add({column:q,startX:e}),e=$}});var o=Wn(V);if(Xh(o,-H,0,1),o.beginPath(),o.rect(H,0,W,S),o.clip(),o.clearRect(H,0,W,S),G.each(function(s){var I=s.column,A=s.startX,T=I.getWidth();T>0&&(o.save(),o.beginPath(),o.rect(A,0,T,S),o.clip(),d&&d.column===I||j.drawColumn(o,I,A,0,T,S),j._columnLineVisible&&mo(o,A+T-1,0,1,S,j._columnLineColor),o.restore())}),d){var m=d.column,e=d.startX,z=d.position,L=m.getWidth();o.save(),o.beginPath(),o.rect(e,0,L,S),o.clip(),o.fillStyle=j._moveBackground,o.fill(),j.drawColumn(o,m,e,0,L,S),o.restore(),wd(o,j._insertColor,z,0,S)}o.restore()},_6Q:function(s){var e=this.tv;return e._31o===s&&e.sm().getSelectionMode()===a},drawColumn:function(z,O,h,m,X,w){var $=this,n=$.tv,I=bd(O.getIcon()),q=$.getLabelAlign(O);if($._6Q(O)){var s=bd($._checkIcon);jl(z,s,h+X/2,m+w/2,O,$)}else{var Y=$.getLabel(O),B=$.getLabelFont(O),G=$.getLabelColor(O),J=gj(B,Y).width,f=I?$._indent:0;q===Bg?(I&&hr(z,I,ae,h,m,f,w),Nm(z,Y,B,G,h+f,m,X,w,Bg)):q===Bk?(I&&hr(z,I,ae,h+X-J-f,m,f,w),Nm(z,Y,B,G,h,m,X,w,Bk)):(I&&hr(z,I,ae,h+(X-J-f)/2,m,f,w),Nm(z,Y,B,G,h+(X-J+f)/2,m,0,w,Bg))}if(O.isSortable()&&n.getSortColumn()===O&&(I=bd(O.getSortOrder()===yb?$._sortAscIcon:$._sortDescIcon))){var Z=si(I,O)/2+2;jl(z,I,q===Bk?h+Z:h+X-Z,m+w/2,O,n)}}});var yd=function(I){var C=this;C.th=I,C.tv=I._tableView,C.addListeners()};fo(yd,Q,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(S){this.getView().style.cursor=S},handle_mousemove:function(c){if(!En){var q=this;delete q._29o,q.setCursor(w);for(var k=q.th,h=k._60I,$=k.lp(c).x,X=h.size()-1;X>=0;X--){var Q=h.get(X),O=Q.column,R=Q.startX+O.getWidth();if(k.isResizable()&&n(R-$)<=(Y?10:3))return q._29o=Q,q.setCursor(en),void 0;(O.isSortable()||k.isMovable()||O===q.tv.getCheckColumn())&&$>=Q.startX&&R>=$&&O.getWidth()>0&&(q._29o=Q,q.setCursor(cg))}}},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchstart:function(W){var a=this;Bi(W),a.tv.endEditing(),a.handle_mousemove(W),a._29o&&(a.x=kf(W).x,a.lx=a.th.lp(W).x,a.w=a._29o.column.getWidth(),De(a,W))},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(Y){var A=this,R=A.th,M=A.getView().style.cursor,q=A._29o,k=kf(Y).x-A.x;if(A.resizing||A.moving||(M===en?A.resizing=1:R.isMovable()&&M===cg&&n(k)>2&&(A.moving=1)),A.resizing)q.column.setWidth(A.w+k);else if(A.moving){var X=A.lx+k;R._60I.each(function(i){var e=i.startX,t=e+i.column.getWidth();if(X>=e&&t>=X){var l={column:q.column,startX:q.startX+k,front:t-X>X-e,insertColumn:i.column};l.position=l.front?e:t,R._5Q(l)}})}},_16Q:function(u,$){var Q=this,N=Q.tv,g=Q.th,A=g._checkIcon;if(g._6Q(u)){var V=bd(A),v=Q.lx,j=u.getWidth(),p=si(V,u);if(v>=$+j/2-p&&$+j/2+p>=v){g.setCheckIcon(A===Fl?Wd:Fl);var S=N.sm(),x=N._rows;return A===Fl?S.rs(x):S.ss(x),N.onCheckColumnClicked(u),!0}}return!1},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(L){var r=this,$=r.tv,w=r.th,j=r._29o;if(r.moving){var X=w._61I;if(X&&X.insertColumn!==X.column){var H=X.column,T=$.getColumnModel()._roots,q=T.remove(H),b=T.indexOf(X.insertColumn);b>=0&&(X.front||b++,b<=T.size()&&(T.add(H,b),$.getColumnModel()._38I(H,q,b)))}w._5Q(E),delete r.moving}else if(!r.resizing&&j){H=j.column;var V=w.lp(L).x,D=j.startX,k=!0;if(w.onColumnClicked){var m=w.onColumnClicked(H,L);m===!1&&(k=!1)}if(k&&V>=D&&V<=D+H.getWidth()&&!r._16Q(H,D)){if(H.isSortable()){var M=$.getSortMode(),t=H.getSortOrder();M===nl?$.getSortColumn()===H?(t===wn&&$.setSortColumn(E),H.setSortOrder(t===yb?wn:yb)):$.setSortColumn(H):"bistate"===M&&($.getSortColumn()===H?H.setSortOrder(t===yb?wn:yb):$.setSortColumn(H))}$.onColumnClicked(H,L)}}r._29o=r.resizing=r.x=r.lx=r.w=E}}),Dj.TablePane=function(h){this.init(new Tf(h))},gb("TablePane",Q,{ms_v:1,_44o:1}),Dj.TreeTablePane=function(x){this.init(new Fn(x))},gb("TreeTablePane",Q,{ms_v:1,_44o:1}),Dj.Toolbar=function(c){var b=this,Z=b._view=Vd(1),G=Z.style;G.background=m.toolbarBackground||"",G.height=kh+Rk,b._canvas=Fi(Z),b._30o=new dj,b._90I=new dj,b.setItems(c||[]),Z.handleGroupSelectedChanged=function(K){if(K.isSelected()){var p=K.getGroupId();null!=p&&b._items.forEach(function(t){var c=t.element;c&&c!==K&&c.setSelected&&c.getGroupId&&c.getGroupId()===p&&c.setSelected(!1)})}},new Ce(b)},gb("Toolbar",Q,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[ni,wh,Zd,uc,_n,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:m.toolbarLabelColor,_labelSelectColor:m.toolbarLabelSelectColor,_labelFont:m.toolbarLabelFont,_selectBackground:m.toolbarSelectBackground,_itemGap:m.toolbarItemGap,_separatorColor:m.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(N){var Q=this.getItemInfoAt(N);return Q?Q.item.toolTip:E},getLabelColor:function(S){return S.selected&&S.type!==Fl&&S.type!==Vi?this._labelSelectColor:this._labelColor},onPropertyChanged:function(L){this.iv(),L.property===ni&&this._items.forEach(function(Q){$q(Q)})},redraw:function(){this.iv()},addItem:function(C,e){var r=this._items;e==E?r.push(C):r.splice(e,0,C),this.fp(ni,E,r)},removeItem:function(Q){if(Q)for(var y=this._items,p=0;p<y.length;p++)Q===y[p]&&(y.splice(p,1),this.fp(ni,E,y))},removeItemById:function(c){if(c!=E)for(var t=this._items,L=0;L<t.length;L++)c===t[L].id&&(t.splice(L,1),this.fp(ni,E,t))},getItemById:function(L){if(L!=E)for(var X=this._items,U=0;U<X.length;U++){var P=X[U];if(L===P.id)return P}},getItemInfos:function(){return this._30o},getItemInfoAt:function(W){var c=this,v=0,n=c._30o,A=c.lp(W),Y=A.x,q=A.y;if(q>=0&&q<=c.getHeight())for(;v<n.size();v++){var l=n.get(v);if(l.startX<=Y&&Y<=l.endX)return l}return E},drawItem:function(l,z,c,Y,k){if(z.visible===!1)return 0;var G=this,x=z.disabled;x&&(l.globalAlpha=pn);var B=G.drawItemImpl(l,z,c,Y,k),R=G._itemGap;return x&&(l.globalAlpha=1),this._currentItem!==z||"separator"===z||z.unfocusable||Ip(l,G._separatorColor,c-R/2,0,B+R,Y),B},drawItemImpl:function(P,L,i,Z,p){var y,m=this,f=m._view,O=m._itemGap,G=Z/2,F=L.type,S=L.label,N=m.getLabelFont(L),v=m.getLabelColor(L),Y=L.selected,B=bd(L.icon),x=si(B,L),z=0,$=L.element,R=x+(S?gj(N,S).width:0);if("separator"===L)return wd(P,m._separatorColor,i,Z/4,G),1;if($){B&&jl(P,B,i+x/2,G),Nm(P,S,N,v,i+x,0,0,Z);var U=Cc($);p||m._90I.add(U),U.parentNode!==f&&Gn(f,U),$.iv&&$.iv(),$.validate&&$.validate();var r=U.getBoundingClientRect(),M=r.width,j=U.style;return qq(U),j.left=m.tx()+i+R+Rk,j.top=(Z-r.height)/2+Rk,R+M}return F===Vi?y=bd(Y?jf:qb):F===Fl&&(y=bd(Y?Fl:Wd)),y?(z=si(y,L),jl(P,y,i+z/2,G),i+=z,R+=z):Y&&mo(P,i-O/2,0,R+O,Z,m.getSelectBackground(L)),B&&jl(P,B,i+x/2,G),Nm(P,S,N,v,i+x,0,0,Z),R},validateImpl:function(){var X=this,F=X._canvas,h=X.getWidth(),S=X.getHeight(),v=X._30o,a=X._items;Wr(F,h,S);var d=Wn(F),Y=X._itemGap,V=Y/2;Xh(d,X.tx(),0,1),d.clearRect(0,0,h,S);var o=X._90I;X._90I=new dj,v.clear(),a.forEach(function(r){var M=X.drawItem(d,r,V,S);v.add({item:r,startX:V,endX:V+M,width:M}),M&&(V+=M+Y)}),o.each(function(c){X._90I.contains(c)||Bc(c)}),X._64I=t(0,V),d.restore(),X._stickToRight?(X._65O=0,d=Wn(F),V=h-X._64I+Y,Xh(d,0,0,1),d.clearRect(0,0,h,S),v.clear(),a.forEach(function(H){var G=X.drawItem(d,H,V,S,!0);v.add({item:H,startX:V,endX:V+G,width:G}),G&&(V+=G+Y)}),d.restore()):X.tx(X.tx())},handleClick:function($){var i=this,b=$.type,L=$.action,m=$.groupId,I=$.selected;$.disabled||(m!=E?I||($.selected=!0,this._items.forEach(function(B){B.groupId===m&&$!==B&&(B.selected=!1)}),L&&$.action($,i)):b===Fl||"toggle"===b?($.selected=!I,L&&$.action($,i)):L&&$.action($,i)),Bb(),i.iv()}});var Ce=function(B){this.tb=B,this.addListeners()};fo(Ce,Q,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(u){this.handleScroll(u,10*(u.wheelDelta/40))},handle_DOMMouseScroll:function(z){this.handleScroll(z,10*-z.detail)},handleScroll:function(Z,X){Bi(Z);var t=this.tb;t.isScrollable()&&!t._stickToRight&&(t.tx(t.tx()+X),tf())},handle_mousemove:function(q){var o=this;En?o.info2=o.tb.getItemInfoAt(q):o.setItem(q)},handle_mouseout:function(t){var a=this;t.target===a.getView()?a.tb.setCurrentItem(E):a.handle_mousemove(t)},handle_mousedown:function(k){this.handle_mousemove(k),this.handle_touchstart(k)},handle_touchstart:function(L){var B=this,n=B.tb,s=L.target;(s===B.getView()||s===n._canvas)&&(Bi(L),n.setFocus(L)&&(this.setItem(L),(n.isScrollable()||B.info&&!B.info.item.disabled)&&(B.x=kf(L).x,B.tx=n.tx(),De(B,L))))},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},handleWindowTouchMove:function(T){var F=this,x=F.tb;if(!x._stickToRight){var J=kf(T).x-F.x;!F._25o&&n(J)>2&&x.isScrollable()&&(F._25o=1),F._25o&&x.tx(F.tx+J)}},handleWindowMouseUp:function(V){this.handleWindowTouchEnd(V)},handleWindowTouchEnd:function(){var W=this,x=W.tb,w=W.info,R=W.info2;if(!W._25o&&w){var Z=w.item;R&&R.item!==Z||x.handleClick(Z)}W._25o=W.x=W.tx=W.info2=E,W.setItem()},setItem:function(m){var K=this,p=K.tb,Z=K.info=m?p.getItemInfoAt(m):E;p.setCurrentItem(Z?Z.item:E)}}),Dj.BorderPane=function(){this._view=Vd(1),this.iv()},gb("BorderPane",Q,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(K,j){this._12o("leftView",K),j!=E&&this.setLeftWidth(j)},getRightView:function(){return this._rightView},setRightView:function(r,y){this._12o("rightView",r),y!=E&&this.setRightWidth(y)},getTopView:function(){return this._topView},setTopView:function(C,x){this._12o("topView",C),x!=E&&this.setTopHeight(x)},getBottomView:function(){return this._bottomView},setBottomView:function(K,a){this._12o("bottomView",K),a!=E&&this.setBottomHeight(a)},getCenterView:function(){return this._centerView},setCenterView:function(Y){this._12o("centerView",Y)},_12o:function(n,f){var L=this,b="_"+n,W=L._view,H=L[b];H!==f&&(H&&(H.getView?Bc(H.getView()):Bc(H)),L[b]=f,f&&(f.getView?Gn(W,f.getView(),1):Gn(W,f,1)),L.fp(n,H,f))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var O=this,I=O._topView,i=O._bottomView,N=O._leftView,b=O._rightView,s=O._centerView,C=O.getWidth(),K=O.getHeight(),z=0,w=0,Q=C,M=K,j=0,R=0,D=0,S=0;I&&(j=O._topHeight==E?ng(I):O._topHeight,w=j),i&&(R=O._bottomHeight==E?ng(i):O._bottomHeight,M=K-R),N&&(D=O._leftWidth==E?rm(N):O._leftWidth,z=D),b&&(S=O._rightWidth==E?rm(b):O._rightWidth,Q=C-S);
var v=t(0,Q-z),p=t(0,M-w);I&&ud(I,0,0,C,j),i&&ud(i,0,M,C,R),N&&ud(N,0,w,D,p),b&&ud(b,Q,w,S,p),s&&ud(s,z,w,v,p)}})}}(this,Object);
!function(V,f,T){"use strict";var n="ht",B=V[n],w=null,x=Math,p=x.abs,j=x.max,v=Number.MAX_VALUE,t=B.Default,$=t.getInternal(),k=t.clone,r=$.vec3TransformMat4,i=$.appendArray,g=function(){var f=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,c=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,e=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,H=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,n=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,I=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,R=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,m=function($,u){return u=parseInt(u),u>=0?$[u-1]:$[u+$.length]},u=function(E,o,p,s,V,R){if(E.vs){var G=m(o,s),Q=m(o,V),H=m(o,R),q=p.matrix,g=E.vs;if(p.flipFace){var S=Q;Q=H,H=S}q?(i(g,r(k(G),q)),i(g,r(k(Q),q)),i(g,r(k(H),q))):(i(g,G),i(g,Q),i(g,H))}},q=function(J,g,M,x,V,i){if(J.vs){var a=m(g,x),o=m(g,V),d=m(g,i),K=M.flipY;if(M.flipFace){var G=o;o=d,d=G}J.uv.push(a[0],K?1-a[1]:a[1],o[0],K?1-o[1]:o[1],d[0],K?1-d[1]:d[1])}},L=function($,q,P,u,o,D){if($.vs){var I=m(q,u),x=m(q,o),L=m(q,D),b=P.normalMatrix,t=$.ns;if(P.flipFace){var w=x;x=L,L=w}b?(i(t,r(k(I),b)),i(t,r(k(x),b)),i(t,r(k(L),b))):(i(t,I),i(t,x),i(t,L))}},K=function(k,x,G,j,d,B,P,h){var e=j&&j.length&&h;B[3]===T?(u(k,x,d,B[0],B[1],B[2]),P&&q(k,G,d,P[0],P[1],P[2]),e&&L(k,j,d,h[0],h[1],h[2])):(u(k,x,d,B[0],B[1],B[3]),u(k,x,d,B[1],B[2],B[3]),P&&(q(k,G,d,P[0],P[1],P[3]),q(k,G,d,P[1],P[2],P[3])),e&&(L(k,j,d,h[0],h[1],h[3]),L(k,j,d,h[1],h[2],h[3])))},a=function(Q,V,h,R){var D,_,K,w,O,t,A,n=v,y=v,Z=v,g=-v,c=-v,f=-v;for(D in Q)for(t=Q[D].vs,A=t.length,_=0;A>_;_+=3)K=t[_+0],w=t[_+1],O=t[_+2],n>K&&(n=K),y>w&&(y=w),Z>O&&(Z=O),K>g&&(g=K),w>c&&(c=w),O>f&&(f=O);if(h){var d=n+(g-n)/2,e=y+(c-y)/2,s=Z+(f-Z)/2;for(D in Q)for(t=Q[D].vs,A=t.length,_=0;A>_;_+=3)t[_+0]-=d,t[_+1]-=e,t[_+2]-=s}var G,X,L;h?(G=g-n,X=c-y,L=f-Z):(G=2*j(p(n),p(g)),X=2*j(p(y),p(c)),L=2*j(p(Z),p(f))),R.rawS3=[G,X,L];for(D in Q){if(t=Q[D].vs,V)for(A=t.length,_=0;A>_;_+=3)G&&(t[_+0]/=G),X&&(t[_+1]/=X),L&&(t[_+2]/=L);Q[D].rawS3=R.rawS3}};return function(U,x,i){if(!U)return w;$.isString(x)&&(x=s(x)),i||(i={}),i.flipY==w&&(i.flipY=!0),(i.s3||i.r3||i.t3||i.mat)&&(i.matrix=$.createWorldMatrix(i.mat,i.s3,i.r3,i.rotationMode,i.t3));var l,O,S,Q,v,j,D=[],V=[],N=i.ignoreNormal?w:[],k=i.reverseFlipMtls,J={vs:[],uv:[],ns:N?[]:w},_={htdefault:J},y=U.split("\n"),C=0;for(N&&i.matrix&&(i.normalMatrix=$.createNormalMatrix(i.matrix));C<y.length;C++)if(O=y[C].trim(),0!==O.length&&"#"!==O.charAt(0))if(S=f.exec(O))D.push([parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])]);else if(S=c.exec(O))V.push([parseFloat(S[1]),parseFloat(S[2])]);else if(N&&(S=e.exec(O)))i.flipFace?N.push([parseFloat(-S[1]),parseFloat(-S[2]),parseFloat(-S[3])]):N.push([parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])]);else if(S=H.exec(O))K(J,D,V,N,i,[S[1],S[2],S[3],S[4]]);else if(S=n.exec(O))K(J,D,V,N,i,[S[2],S[5],S[8],S[11]],[S[3],S[6],S[9],S[12]]);else if(S=I.exec(O))K(J,D,V,N,i,[S[2],S[6],S[10],S[14]],[S[3],S[7],S[11],S[15]],[S[4],S[8],S[12],S[16]]);else if(S=R.exec(O))K(J,D,V,N,i,[S[2],S[5],S[8],S[11]],w,[S[3],S[6],S[9],S[12]]);else if(/^usemtl /.test(O)&&(Q=O.substring(7).trim(),!(J=_[Q]))){if(J={name:Q,vs:[],uv:[],ns:N?[]:w},i.ignoreMtls&&i.ignoreMtls.indexOf(Q)>=0&&delete J.vs,(i.reverseFlip||"*"===k||k&&k.indexOf(Q)>=0)&&(J.reverseFlip=!0),x&&(v=x[Q],v&&(i.ignoreColor||(J.color=v.kd),!i.ignoreTransparent&&v.d>0&&v.d<1&&(J.transparent=!0,J.opacity=v.d),!i.ignoreImage&&(j=v.map_kd)))){for(j=j.split(" "),l=0;l<j.length;l++)"-o"===j[l]?(J.uvOffset=[parseFloat(j[l+1]),parseFloat(j[l+2])],l+=2):"-s"===j[l]&&(J.uvScale=[parseFloat(j[l+1]),parseFloat(j[l+2])],l+=2);J.image=(i.prefix||"")+j[j.length-1]}_[Q]=J}var L=[];for(var r in _){var Y=_[r].vs;Y&&0!==Y.length||L.push(r)}L.forEach(function(q){delete _[q]}),a(_,i.cube,i.center,i);var g=i.shape3d;if(g){var T=[];for(var Q in _){var J=_[Q];T.rawS3=J.rawS3,T.push(J)}t.setShape3dModel(g,T)}return _}}(),s=function(_){var n={};if(_)for(var a,l,o,m,L,P,j=_.split("\n"),k=/\s+/,h=0;h<j.length;h++)l=j[h].trim(),0!==l.length&&"#"!==l.charAt(0)&&(o=l.indexOf(" "),m=(o?l.substring(0,o):l).toLowerCase(),L=(o?l.substring(o+1):"").trim(),"newmtl"===m?n[L]=a={name:L}:a&&("ka"===m||"kd"===m||"ks"===m?(P=L.split(k,3),a[m]=[parseFloat(P[0]),parseFloat(P[1]),parseFloat(P[2]),1]):a[m]="ns"===m||"d"===m?parseFloat(L):L));return n},D=function(O,A,P){if(O){var x=new XMLHttpRequest;x.onload=function(k){P(k.target.responseText)},x.onerror=function(){P(null)},x.open("GET",O,A),x.send(null)}else P(null)};$.addMethod(t,{loadObj:function(X,w,E){E=E||{};var p=!E.sync;D(w,p,function(N){D(X,p,function(Z){var f,Q=E.shape3d,X=g(Z,N,E);if(X)if(Q)f=t.getShape3dModel(Q);else{f=[];for(var Y in X){var h=X[Y];f.rawS3=h.rawS3,f.push(h)}}E.finishFunc&&E.finishFunc(X,f,f.rawS3)})})},parseObj:function(V,l,k){return g(V,l,k)}})}(this,Object);